{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\om\\views\\om.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\om\\views\\om.vue","mtime":1701906516505},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTZWFyY2hBcGkgZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9TZWFyY2hBcGknOwppbXBvcnQgT21pdGVucyBmcm9tICcuLi9jb21wb25lbnRzL09tSXRlbnMnOwppbXBvcnQgT21JdGVuc0Zvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9PbUl0ZW5zRm9ybSc7CmltcG9ydCBCdXR0b25zIGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvQnV0dG9ucyc7CmltcG9ydCBBcGlTZXJ2aWNlIGZyb20gJy4uLy4uLy4uL3NlcnZpY2VzL2FwaS5zZXJ2aWNlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJPbSIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm1JdGVuczogewogICAgICAgIGl0ZW06ICcnLAogICAgICAgIFF0ZGU6IDEsCiAgICAgICAgSXRlbTogewogICAgICAgICAgdmFsdWU6ICcnLAogICAgICAgICAgdGV4dDogJycKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG9tSXRlbnNGb3JtVGl0bGU6ICdOb3ZvIGl0ZW0gcGFyYSBhIE9NJywKICAgICAgZm9ybTogewogICAgICAgIGlkOiAwLAogICAgICAgIEltb2JpbGl6YWRvX05ybzogJycsCiAgICAgICAgY29kaWdvX2Z1bmM6IDAsCiAgICAgICAgRnVuY2lvbmFyaW86IHsKICAgICAgICAgIHZhbHVlOiAnNTcnLAogICAgICAgICAgdGV4dDogJ01BUkNFTE8gSE9STExFJwogICAgICAgIH0sCiAgICAgICAgSW1vYmlsaXphZG86IHsKICAgICAgICAgIHZhbHVlOiAnMTA5MzAnLAogICAgICAgICAgdGV4dDogJ1NFQ0NJT05BRE9SQSBBVVRPTUFUSUNBIEdJQkVOIFNNQVJUIFNUOTAgLSAxNjAwTU0gTlMuOTEwLjI5NycKICAgICAgICB9LAogICAgICAgIEFiZXJ0dXJhOiBuZXcgRGF0ZSgpLAogICAgICAgIC8qZGF0YSovCiAgICAgICAgRmVjaGFtZW50bzogJycsCiAgICAgICAgLypkYXRhKi8KICAgICAgICBlbXByZXNhOiAwLAogICAgICAgIGlkVGlwbzogMCwKICAgICAgICBDY3VzdG86ICcnLAogICAgICAgIC8qY2hhciA1Ki8KICAgICAgICBTZXRvcjogMCwKICAgICAgICBPYnNlcnY6ICcnLAogICAgICAgIC8qY2hhciBtYXgqLwogICAgICAgIHVzdWFyaW8xOiAnJywKICAgICAgICAvKmNoYXIgNTAqLwogICAgICAgIHVzdWFyaW86ICcnLAogICAgICAgIC8qY2hhciA1MCovCiAgICAgICAgSWRQcmV2ZW50aXZhOiAwLAogICAgICAgIE9NSW50ZXJuYTogMCwKICAgICAgICBDb2RpZ29fRnVuY19GZWNoYW1lbnRvOiAwLAogICAgICAgIEl0ZW5zOiBbXQogICAgICB9LAogICAgICBidXR0b25zOiBbJ3NhdmUnLCAnZWRpdCcsICdzZWFyY2gnXQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIE9taXRlbnMsCiAgICBPbUl0ZW5zRm9ybSwKICAgIFNlYXJjaEFwaSwKICAgIEJ1dHRvbnMKICB9LAogIG1ldGhvZHM6IHsKICAgIGV2dGVycm9yU2VhcmNoKGV2dCkgewogICAgICBjb25zb2xlLmxvZygnb20uZXZ0ZXJyb3JTZWFyY2g6JywgZXZ0KTsKICAgIH0sCiAgICBldnRPbUl0ZW5zTmV3KCkgewogICAgICB0aGlzLmxpbXBhRm9ybUl0ZW5zKCk7CiAgICAgIGNvbnNvbGUubG9nKCdvbS5ldnRPbUl0ZW5zTmV3Jyk7CiAgICAgIHRoaXMub21JdGVuc0Zvcm1UaXRsZSA9ICdOb3ZvIGl0ZW0gcGFyYSBhIE9NJzsKICAgICAgdGhpcy4kYnZNb2RhbC5zaG93KCdtb2RhbC1vbUl0ZW5zRm9ybScpOwogICAgfSwKICAgIE9tSXRlbnNGb3JtU2FsdmFyKCkgewogICAgICBjb25zb2xlLmxvZygnb20uT21JdGVuc0Zvcm1TYWx2YXI6JywgdGhpcy5mb3JtLkl0ZW5zKTsKICAgICAgbGV0IGl0ZW5zID0gdGhpcy5mb3JtLkl0ZW5zLmZpbmQoZiA9PiBmLkl0ZW0udmFsdWUgPT0gdGhpcy5mb3JtSXRlbnMuSXRlbS52YWx1ZSk7CiAgICAgIGlmICghaXRlbnMpIHsKICAgICAgICB0aGlzLmZvcm0uSXRlbnMucHVzaCh0aGlzLmZvcm1JdGVucyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaXRlbnMuUXRkZSA9IHRoaXMuZm9ybUl0ZW5zLlF0ZGU7CiAgICAgIH0KICAgICAgdGhpcy5saW1wYUZvcm1JdGVucygpOwogICAgfSwKICAgIGV2dE9tSXRlbnNFZGl0KGV2dCkgewogICAgICB0aGlzLmxpbXBhRm9ybUl0ZW5zKCk7CiAgICAgIGNvbnNvbGUubG9nKCdvbS5ldnRPbUl0ZW5zRWRpdCcsIGV2dCk7CiAgICAgIHRoaXMuZm9ybUl0ZW5zID0gZXZ0Lml0ZW07CiAgICAgIHRoaXMub21JdGVuc0Zvcm1UaXRsZSA9ICdBbHRlcmEgaXRlbSBwYXJhIGEgT00nOwogICAgICB0aGlzLiRidk1vZGFsLnNob3coJ21vZGFsLW9tSXRlbnNGb3JtJyk7CiAgICB9LAogICAgZXZ0T21JdGVuc0RlbGV0ZShldnQpIHsKICAgICAgdGhpcy4kcm9vdC5zaG93bWVzc2FnZSgnRGVzZWphIHJlYWxtZW50ZSBleGNsdWlyIGVzdGUgaXRlbSA/JywgJ0ludHJhbmV0JykudGhlbih5ZXMgPT4gewogICAgICAgIGlmICh5ZXMpIHsKICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMuaXRlbnMuZmluZEluZGV4KGYgPT4gZi52YWx1ZSA9PSBldnQuaXRlbS52YWx1ZSk7CiAgICAgICAgICBpZiAoaW5kZXggPiAtMSkgdGhpcy5pdGVucy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgbGltcGFGb3JtSXRlbnMoKSB7CiAgICAgIHRoaXMuZm9ybUl0ZW5zID0gewogICAgICAgIGl0ZW06ICcnLAogICAgICAgIFF0ZGU6IDEsCiAgICAgICAgSXRlbTogewogICAgICAgICAgdmFsdWU6ICcnLAogICAgICAgICAgdGV4dDogJycKICAgICAgICB9CiAgICAgIH07CiAgICB9LAogICAgZXZ0Rm9ybVNhbHZhck9yZGVtKCkgewogICAgICBjb25zb2xlLmxvZygnb20uZXZ0Rm9ybVNhbHZhck9yZGVtOiBTYWx2b3UgYSBvcmRlbScpOwogICAgfSwKICAgIGV2dEZvcm1FZGl0T3JkZW0oKSB7CiAgICAgIGNvbnNvbGUubG9nKCdvbS5ldnRGb3JtU2FsdmFyT3JkZW06IEVkaXRvdSBhIG9yZGVtJyk7CiAgICB9LAogICAgZXZ0Rm9ybVBlc3F1aXNhT3JkZW0oKSB7CiAgICAgIGNvbnNvbGUubG9nKCdvbS5ldnRGb3JtU2FsdmFyT3JkZW06IEJ1c2NvdSBhIG9yZGVtJyk7CiAgICAgIHRoaXMub21JdGVuc0Zvcm1UaXRsZSA9ICdQZXNxdWlzYXIgT01zIGFiZXJ0YXMnOwogICAgICB0aGlzLiRidk1vZGFsLnNob3coJ21vZGFsLW9tQXRpdmFzJyk7CiAgICB9LAogICAgc2VsZWN0T3JkZW5zKGlkKSB7CiAgICAgIGNvbnNvbGUubG9nKCJCdXNjb3Ugb3JkZW5zIHBlbG8gbnVtZXJvOiAiICsgaWQpOwogICAgICBBcGlTZXJ2aWNlLmdldCgiU2Vydmljb3MvT00vU2VsZWN0IiwgewogICAgICAgIHBhcmFtczogewogICAgICAgICAgaWRPTTogaWQKICAgICAgICB9CiAgICAgIH0pLnRoZW4oaXRlbSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coaXRlbS5kYXRhKTsKICAgICAgICB0aGlzLmZvcm0gPSBpdGVtLmRhdGEuRGF0YVswXTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AAEA;EAEAA;EAEAC;IACA;MAEAC;QACAC;QACAC;QACAC;UACAC;UACAC;QACA;MACA;MACAC;MAEAC;QACAC;QACAC;QACAC;QAEAC;UAAAP;UAAAC;QAAA;QACAO;UAAAR;UAAAC;QAAA;QAEAQ;QAAA;QACAC;QAAA;QACAC;QACAC;QACAC;QAAA;QACAC;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QACAC;QACAC;QACAC;MACA;MAIAC;IACA;EACA;EAEAC;IAEAC;IACAC;IACAC;IACAC;EAEA;EAEAC;IAEAC;MACAC;IACA;IAEAC;MACA;MACAD;MACA;MACA;IACA;IAEAE;MACAF;MACA;MACA;QACA;MACA;QACAG;MACA;MACA;IACA;IAEAC;MACA;MACAJ;MACA;MACA;MACA;IACA;IAEAK;MAEA,2EACAC;QACA;UACA;UACA;QACA;MACA;IACA;IAEAC;MACA;QACAxC;QACAC;QACAC;UACAC;UACAC;QACA;MACA;IACA;IAEAqC;MACAR;IACA;IAEAS;MACAT;IACA;IAEAU;MACAV;MACA;MACA;IAEA;IAEAW;MACAX;MAEAY;QACAC;UACAC;QACA;MACA,GACAR;QACAN;QACA;MACA;IACA;EAEA;AAEA","names":["name","data","formItens","item","Qtde","Item","value","text","omItensFormTitle","form","id","Imobilizado_Nro","codigo_func","Funcionario","Imobilizado","Abertura","Fechamento","empresa","idTipo","Ccusto","Setor","Observ","usuario1","usuario","IdPreventiva","OMInterna","Codigo_Func_Fechamento","Itens","buttons","components","Omitens","OmItensForm","SearchApi","Buttons","methods","evterrorSearch","console","evtOmItensNew","OmItensFormSalvar","itens","evtOmItensEdit","evtOmItensDelete","then","limpaFormItens","evtFormSalvarOrdem","evtFormEditOrdem","evtFormPesquisaOrdem","selectOrdens","ApiService","params","idOM"],"sourceRoot":"src/pages/om/views","sources":["om.vue"],"sourcesContent":["<template>\r\n    <div>\r\n\r\n        <Buttons :buttons=\"buttons\" \r\n        @evt-tbSalvar=\"evtFormSalvarOrdem\"    \r\n        @evt-tbEditar=\"evtFormEditOrdem\"\r\n        @evt-tbPesquisar='evtFormPesquisaOrdem'   \r\n        />\r\n\r\n        <b-card class=\"m-2\">\r\n            <div align=\"center\">\r\n                <h1>Ordem de Manutenção</h1>\r\n            </div>\r\n\r\n            <b-form-group label=\"Código\" label-for=\"formid\" label-align-md=\"right\" label-cols-sm=\"3\">\r\n                <b-form-input id=\"formid\" type=\"number\" v-model=\"form.id\"></b-form-input>\r\n            </b-form-group>\r\n            \r\n            <b-form-group label=\"Abertura\" label-for=\"formAbertura\" label-align-md=\"right\" label-cols-sm=\"3\">\r\n                <b-form-datepicker id=\"formAbertura\" type=\"data\" v-model=\"form.Abertura\" locale=\"pt\" value-as-date></b-form-datepicker>\r\n            </b-form-group>\r\n            \r\n            <b-form-group label=\"Equipamento\" label-for=\"formEquip\" label-align-md=\"right\" label-cols-sm=\"3\">\r\n                <SearchApi pkid=\"formImob\" route=\"Servicos/Imobilizado/Select\" title=\"Equipamento\" v-model=\"form.Imobilizado\" @evt-erro=\"evterrorSearch\"/>\r\n            </b-form-group>\r\n\r\n            <b-form-group label=\"Funcionário Responsável\" label-for=\"formMecan\" label-align-md=\"right\" label-cols-sm=\"3\">\r\n                <SearchApi pkid=\"formMecan\" route=\"Servicos/Funcionarios/Select\" title=\"Funcionário Responsável\" v-model=\"form.Funcionario\" @evt-erro=\"evterrorSearch\"/>\r\n            </b-form-group>\r\n\r\n        \r\n            <hr/>\r\n\r\n            <Omitens :itemsList=\"form.Itens\"\r\n                @evt-OmItensNew=\"evtOmItensNew\"\r\n                @evt-OmItensDelete=\"evtOmItensDelete\"\r\n                @evt-OmItensEdit=\"evtOmItensEdit\"/>\r\n\r\n            <b-modal \r\n                id=\"modal-omItensForm\"\r\n                no-close-on-backdrop\r\n                :title=\"omItensFormTitle\"\r\n                @ok=\"OmItensFormSalvar\"\r\n                >\r\n                <OmItensForm v-model=\"formItens\" \r\n                @evt-SalvarOmItens=\"OmItensFormSalvar\" />\r\n            </b-modal>\r\n\r\n            <b-modal \r\n                id=\"modal-omAtivas\"\r\n                no-close-on-backdrop\r\n                :title=\"omItensFormTitle\"\r\n                @ok=\"selectOrdens(form.id)\"\r\n                >\r\n                <b-form-group label=\"Código\" label-for=\"formid\" label-align-md=\"right\" label-cols-sm=\"3\">\r\n                    <b-form-input id=\"formid\" type=\"number\" v-model=\"form.id\"></b-form-input>\r\n                </b-form-group>\r\n                <!-- <SearchApi pkid=\"formImob\" route=\"Servicos/Imobilizado/Select\" title=\"Equipamento\" v-model=\"form.SearchImobilizado\" @evt-erro=\"evterrorSearch\"/> -->\r\n            </b-modal>\r\n        </b-card>\r\n\r\n        <pre>\r\n            form:\r\n            {{form}}\r\n        </pre>\r\n         \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport SearchApi from '../../../components/SearchApi'\r\nimport Omitens from '../components/OmItens'\r\nimport OmItensForm from '../components/OmItensForm'\r\nimport Buttons from '../../../components/Buttons'\r\nimport ApiService from '../../../services/api.service'\r\n\r\nexport default {\r\n    \r\n    name: \"Om\",\r\n\r\n    data() {\r\n        return {\r\n\r\n            formItens: {\r\n                item: '', \r\n                Qtde: 1,\r\n                Item: {\r\n                    value: '',\r\n                    text: ''\r\n                      },\r\n            },\r\n            omItensFormTitle: 'Novo item para a OM',\r\n\r\n            form: {\r\n                id: 0,\r\n                Imobilizado_Nro: '',\r\n                codigo_func: 0,\r\n\r\n                Funcionario: {value: '57', text: 'MARCELO HORLLE'},\r\n                Imobilizado: {value: '10930', text: 'SECCIONADORA AUTOMATICA GIBEN SMART ST90 - 1600MM NS.910.297'},\r\n\r\n                Abertura: new Date(), /*data*/\r\n                Fechamento: '', /*data*/\r\n                empresa: 0,\r\n                idTipo: 0,\r\n                Ccusto: '', /*char 5*/\r\n                Setor: 0,\r\n                Observ: '', /*char max*/\r\n                usuario1: '', /*char 50*/\r\n                usuario: '', /*char 50*/\r\n                IdPreventiva: 0,\r\n                OMInterna: 0,\r\n                Codigo_Func_Fechamento: 0,\r\n                Itens: [],\r\n            },\r\n\r\n            \r\n\r\n            buttons: ['save', 'edit', 'search'],\r\n        }\r\n    },\r\n\r\n    components: {\r\n\r\n        Omitens,\r\n        OmItensForm,\r\n        SearchApi,\r\n        Buttons\r\n\r\n    },\r\n\r\n    methods: {\r\n\r\n        evterrorSearch(evt) {\r\n            console.log('om.evterrorSearch:', evt)\r\n        },\r\n\r\n        evtOmItensNew() {\r\n            this.limpaFormItens();\r\n            console.log('om.evtOmItensNew')\r\n            this.omItensFormTitle = 'Novo item para a OM'\r\n            this.$bvModal.show('modal-omItensForm')\r\n        },\r\n\r\n        OmItensFormSalvar() {\r\n            console.log('om.OmItensFormSalvar:', this.form.Itens);\r\n            let itens = this.form.Itens.find(f => f.Item.value == this.formItens.Item.value)\r\n            if (!itens) {\r\n                this.form.Itens.push(this.formItens);\r\n            } else {\r\n                itens.Qtde = this.formItens.Qtde\r\n            }\r\n            this.limpaFormItens();\r\n        },\r\n\r\n        evtOmItensEdit(evt) {\r\n            this.limpaFormItens();\r\n            console.log('om.evtOmItensEdit', evt)\r\n            this.formItens = evt.item\r\n            this.omItensFormTitle = 'Altera item para a OM'\r\n            this.$bvModal.show('modal-omItensForm')\r\n        },\r\n\r\n        evtOmItensDelete(evt) {\r\n\r\n            this.$root.showmessage('Deseja realmente excluir este item ?', 'Intranet')\r\n                .then(yes => {\r\n                    if (yes) {\r\n                        let index = this.itens.findIndex(f => f.value == evt.item.value)\r\n                        if (index>-1) this.itens.splice(index, 1)\r\n                    }\r\n                })            \r\n        },\r\n\r\n        limpaFormItens(){\r\n            this.formItens = {\r\n                item: '', \r\n                Qtde: 1,\r\n                Item: {\r\n                    value: '',\r\n                    text: ''\r\n                }\r\n            }\r\n        },\r\n\r\n        evtFormSalvarOrdem(){\r\n            console.log('om.evtFormSalvarOrdem: Salvou a ordem')\r\n        },\r\n\r\n        evtFormEditOrdem(){\r\n            console.log('om.evtFormSalvarOrdem: Editou a ordem')\r\n        },\r\n\r\n        evtFormPesquisaOrdem(){\r\n            console.log('om.evtFormSalvarOrdem: Buscou a ordem')\r\n            this.omItensFormTitle = 'Pesquisar OMs abertas'\r\n            this.$bvModal.show('modal-omAtivas')\r\n\r\n        },\r\n\r\n        selectOrdens(id){\r\n            console.log(\"Buscou ordens pelo numero: \" + id)\r\n\r\n            ApiService.get(\"Servicos/OM/Select\", {\r\n                params: {\r\n                    idOM: id\r\n                }\r\n            })\r\n            .then(item => {\r\n                console.log(item.data)\r\n                this.form = item.data.Data[0];\r\n            });          \r\n        }\r\n\r\n    }\r\n    \r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n\r\n</style>"]}]}