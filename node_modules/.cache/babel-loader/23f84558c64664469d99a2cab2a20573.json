{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\components\\TableEditApi.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\components\\TableEditApi.vue","mtime":1670977910591},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEFwaVNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvYXBpLnNlcnZpY2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlRhYmxlRWRpdEFwaSIsCiAgcHJvcHM6IHsKICAgIHRhYmxlSWQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAoKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gInRhYmxlLWFwaSI7CiAgICAgIH0KCiAgICB9LAogICAgaGVhZGVyOiB7CiAgICAgIHR5cGU6IFN0cmluZywKCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CgogICAgfSwKICAgIGZpZWxkczogewogICAgICB0eXBlOiBBcnJheSwKCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CgogICAgfSwKICAgIHNvbWE6IHsKICAgICAgdHlwZTogQXJyYXksCgogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQoKICAgIH0sCiAgICBtYXNrOiB7CiAgICAgIHR5cGU6IEFycmF5LAoKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KCiAgICB9LAogICAgaXRlbXM6IHsKICAgICAgdHlwZTogQXJyYXksCgogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQoKICAgIH0sCiAgICBnZXR0ZXI6IHsKICAgICAgdHlwZTogQXJyYXksCgogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQoKICAgIH0sCiAgICBidXR0b25zOiB7CiAgICAgIHR5cGU6IEFycmF5LAoKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KCiAgICB9LAogICAgLy8gaW5mb3JtYXIgJ2VkaXQnLCdkZWxldGUnLCdpbmZvJywnaW5zZXJ0JywncnVuJywnbmV3JwogICAgcGFnZTogewogICAgICB0eXBlOiBOdW1iZXIsCgogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiAxOwogICAgICB9CgogICAgfSwKICAgIHBhZ2VzOiB7CiAgICAgIHR5cGU6IEFycmF5LAoKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gWzEwLCAzMCwgNTAsIDEwMCwgNTAwLCAxMDAwLCA5OTk5OTk5XTsKICAgICAgfQoKICAgIH0sCiAgICBwZXJQYWdlOiB7CiAgICAgIHR5cGU6IE51bWJlciwKCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIDEwOwogICAgICB9CgogICAgfSwKICAgIHJvdXRlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CgogICAgfSwKICAgIHBhcmFtczogewogICAgICB0eXBlOiBPYmplY3QsCgogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQoKICAgIH0sCiAgICBidXN5OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCgogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgIH0sCiAgICBydW46IHsKICAgICAgdHlwZTogTnVtYmVyLAoKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gMTsKICAgICAgfQoKICAgIH0KICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW5wdXRQZXNxdWlzYTogIiIsCiAgICAgIGNoZWNrOiBmYWxzZSwKICAgICAgY2hlY2thbGw6IGZhbHNlLAogICAgICBzZWxlY3RlZHM6IFtdLAogICAgICBsb2FkOiB0aGlzLmJ1c3kgfHwgZmFsc2UsCiAgICAgIGNvbHVtbnM6IFtdLAogICAgICBhcGlyZXNwb25zZTogewogICAgICAgIERhdGE6IFtdLAogICAgICAgIFBhZ2luYXM6IHsKICAgICAgICAgIFBhZ2VDb3VudDogMSwKICAgICAgICAgIFBhZ2VTaXplOiAxMAogICAgICAgIH0KICAgICAgfSwKICAgICAgc2VsZWN0ZWQ6IG51bGwsCiAgICAgIHNvcnRCeTogIiIsCiAgICAgIHNvcnREZXNjOiBmYWxzZSwKICAgICAgY3VycmVudFBhZ2U6IHRoaXMucGFnZSwKICAgICAgY3VycmVudHBlclBhZ2U6IHRoaXMucGVyUGFnZQogICAgfTsKICB9LAoKICBjcmVhdGVkKCkgewogICAgLy8gY29uc29sZS5sb2coJ1RhYmxlRWRpdEFwaS4nKQogICAgaWYgKHRoaXMucm91dGUgIT09ICIiICYmIHRoaXMucnVuID4gMCkgewogICAgICB0aGlzLmdldEZyb21BcGkoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY29sdW1ucyA9IHRoaXMuZ2V0Q29sdW1uc0FycmF5KHRoaXMuaXRlbXMpOwogICAgfQogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBjdXN0b21idXR0b25zKCkgewogICAgICByZXR1cm4gdGhpcy5idXR0b25zLmZpbHRlcihiID0+IHR5cGVvZiBiID09ICJvYmplY3QiICYmICFiLmhlYWRlcik7CiAgICB9LAoKICAgIGN1c3RvbWJ1dHRvbnNoZWFkZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbnMuZmlsdGVyKGIgPT4gdHlwZW9mIGIgPT0gIm9iamVjdCIgJiYgYi5oZWFkZXIpOwogICAgfSwKCiAgICBhY3RpdmVwYWdlKCkgewogICAgICByZXR1cm4gdGhpcy5yb3V0ZSAhPT0gIiIgPyAxIDogdGhpcy5jdXJyZW50UGFnZTsKICAgIH0sCgogICAgc2hvd2NvbHVtbnMoKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbHVtbnMubGVuZ3RoID4gMCA/IHRoaXMuY29sdW1ucy5maWx0ZXIoZiA9PiBmLnZpc2libGUpIHx8IE9iamVjdC5rZXlzKHRoaXMuaXRlbXMpIDogW107CiAgICB9LAoKICAgIHN1bWNvbHVtbnMoKSB7CiAgICAgIHJldHVybiB0aGlzLnNob3djb2x1bW5zLm1hcChjID0+IHRoaXMuc3VtZmllbGQoYy5rZXkpKTsKICAgIH0sCgogICAgY29sdW1uc3BhbigpIHsKICAgICAgcmV0dXJuIHRoaXMuc2hvd2NvbHVtbnMubGVuZ3RoIHx8IDE7CiAgICB9LAoKICAgIHRvdGFsUm93cygpIHsKICAgICAgaWYgKHRoaXMucm91dGUgIT09ICIiKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYXBpcmVzcG9uc2UgJiYgdGhpcy5hcGlyZXNwb25zZS5QYWdpbmFzID8gdGhpcy5hcGlyZXNwb25zZS5QYWdpbmFzLlBhZ2VDb3VudCAqIHRoaXMuYXBpcmVzcG9uc2UuUGFnaW5hcy5QYWdlU2l6ZSA6IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMubGVuZ3RoOwogICAgICB9CiAgICB9LAoKICAgIGl0ZW1zTGlzdCgpIHsKICAgICAgbGV0IHJldCA9IHRoaXMuaXRlbXMubGVuZ3RoID4gMCA/IHRoaXMuaXRlbXMgOiB0aGlzLmFwaXJlc3BvbnNlLkRhdGE7CiAgICAgIHJldHVybiByZXQgfHwgW107CiAgICB9LAoKICAgIHBhZ2luYXRlKCkgewogICAgICByZXR1cm4gewogICAgICAgIFBhZ2VOdW1iZXI6IHRoaXMuY3VycmVudFBhZ2UsCiAgICAgICAgUGFnZVNpemU6IHRoaXMuY3VycmVudHBlclBhZ2UsCiAgICAgICAgVG90YWxSb3dzOiB0aGlzLnRvdGFsUm93cwogICAgICB9OwogICAgfSwKCiAgICBwYXJhbXNhcGkoKSB7CiAgICAgIHJldHVybiB7IC4uLnRoaXMucGFyYW1zLAogICAgICAgIC4uLnRoaXMucGFnaW5hdGUKICAgICAgfTsKICAgIH0sCgogICAgY29sdW1uU29ydGVkKCkgewogICAgICByZXR1cm4gdGhpcy5jb2x1bW5zLmZpbmQoYyA9PiBjLmxhYmVsID09IHRoaXMuc29ydEJ5KSB8fCAiIjsKICAgIH0sCgogICAgY2hlY2tlZHMoKSB7CiAgICAgIHJldHVybiB0aGlzLml0ZW1zTGlzdC5maWx0ZXIoZiA9PiBmLmNoZWNrZWQpOwogICAgfQoKICB9LAogIHdhdGNoOiB7CiAgICBjdXJyZW50UGFnZShwYWdlKSB7CiAgICAgIGlmICh0aGlzLnJvdXRlICE9PSAiIiAmJiBwYWdlID4gMCkgdGhpcy5nZXRGcm9tQXBpKCk7CiAgICB9LAoKICAgIGN1cnJlbnRwZXJQYWdlKHBlcnBhZ2UpIHsKICAgICAgaWYgKHRoaXMucm91dGUgIT09ICIiICYmIHBlcnBhZ2UgPiAwKSB0aGlzLmdldEZyb21BcGkoKTsKICAgIH0sCgogICAgYXBpcmVzcG9uc2UoKSB7CiAgICAgIGlmICh0aGlzLmNvbHVtbnMubGVuZ3RoID09IDApIHRoaXMuY29sdW1ucyA9IHRoaXMuZ2V0Q29sdW1uc0FycmF5KHRoaXMuaXRlbXNMaXN0KTsgLy8gVE9ETzogZGFyIG8gZm9jbyBubyBwcmltZWlybyByZWdpc3RybyBkYSB0YWJlbGEgcGFyYSBwb2RlciBuYXZlZ2FyIGNvbSBvIHRlY2xhZG8gLi4uCiAgICAgIC8vIHRoaXMuJHJlZnNbInRhYmxlU2VhcmNoIl0uZm9jdXMoKQogICAgfSwKCiAgICBydW4oKSB7CiAgICAgIGlmICh0aGlzLnJ1biA+IDApIHRoaXMuZ2V0RnJvbUFwaSgpOwogICAgfSwKCiAgICBwZXJQYWdlKCkgewogICAgICB0aGlzLnBhZ2UgPSAxOwogICAgfQoKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldEZyb21BcGkoKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdnZXRGcm9tQXBpJykKICAgICAgdGhpcy5sb2FkID0gdHJ1ZTsKICAgICAgYXdhaXQgQXBpU2VydmljZS5nZXQodGhpcy5yb3V0ZSwgewogICAgICAgIHBhcmFtczogdGhpcy5wYXJhbXNhcGkKICAgICAgfSkudGhlbihkYXRhID0+IHsKICAgICAgICAvLyBzZSB2ZW0gZGEgQVBJIHJlbW92ZSBvIGNvbnRyb2xlIGRlIHBhZ2luYcOnw6NvIC4uLgogICAgICAgIHRoaXMubG9hZCA9IGZhbHNlOwogICAgICAgIHRoaXMuYXBpcmVzcG9uc2UgPSBkYXRhLmRhdGE7IC8vIGNvbnNvbGUubG9nKCdUYWJsZUVkaXRBcGkuYXBpcmVzcG9uc2U6JywgdGhpcy5hcGlyZXNwb25zZSkKCiAgICAgICAgdGhpcy4kZW1pdCgiZXZ0LWRvbmUiLCB0aGlzLmFwaXJlc3BvbnNlKTsKICAgICAgfSk7CiAgICB9LAoKICAgIHNlYXJjaGNsaWNrKCkgewogICAgICBjb25zb2xlLmxvZygiVGFibGVFZGl0QXBpLnNlYXJjaGNsaWNrOiIsIHRoaXMuaW5wdXRQZXNxdWlzYSk7CiAgICB9LAoKICAgIGdldENvbHVtbnNBcnJheShhcnIpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ2dldENvbHVtbnNBcnJheTonLCBhcnIubGVuZ3RoKQogICAgICBsZXQgY29sdW1ucyA9IFtdOwoKICAgICAgaWYgKGFyci5sZW5ndGggPiAwKSB7CiAgICAgICAgY29sdW1ucyA9IE9iamVjdC5rZXlzKGFyclswXSkubWFwKGsgPT4gewogICAgICAgICAgbGV0IGNvbCA9IHRoaXMuZmllbGRzLmZpbmQoZiA9PiBmLmtleSA9PSBrKTsKCiAgICAgICAgICBpZiAoY29sKSB7CiAgICAgICAgICAgIGNvbC52aXNpYmxlID0gY29sLnZpc2libGUgfHwgZmFsc2U7CiAgICAgICAgICAgIGNvbC5zb3J0YWJsZSA9IGNvbC5zb3J0YWJsZSB8fCBmYWxzZTsKICAgICAgICAgICAgY29sLmxhYmVsID0gY29sLmxhYmVsIHx8IGs7CiAgICAgICAgICB9IGVsc2UgY29sID0gewogICAgICAgICAgICBrZXk6IGssCiAgICAgICAgICAgIGxhYmVsOiBrLAogICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICAgICAgdmlzaWJsZTogIXRoaXMuZmllbGRzLmxlbmd0aCA+IDAKICAgICAgICAgIH07CgogICAgICAgICAgcmV0dXJuIGNvbDsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb2x1bW5zID0gdGhpcy5maWVsZHM7CiAgICAgIH0KCiAgICAgIGlmIChjb2x1bW5zLmxlbmd0aCA+IDApIGlmICghY29sdW1ucy5maW5kKGYgPT4gZi5rZXkgPT0gImFjdGlvbnMiKSkgaWYgKHRoaXMuYnV0dG9ucy5sZW5ndGggPiAwKSBjb2x1bW5zLnB1c2goewogICAgICAgIGtleTogImFjdGlvbnMiLAogICAgICAgIGxhYmVsOiAiQcOnw7VlcyIsCiAgICAgICAgc29ydGFibGU6IGZhbHNlLAogICAgICAgIHZpc2libGU6IHRydWUKICAgICAgfSk7CiAgICAgIHJldHVybiBjb2x1bW5zOwogICAgfSwKCiAgICBzdW1maWVsZChmbGQpIHsKICAgICAgaWYgKHRoaXMuc29tYS5maW5kKGYgPT4gZi5rZXkudG9VcHBlckNhc2UoKSA9PSBmbGQudG9VcHBlckNhc2UoKSkpIHsKICAgICAgICByZXR1cm4gdGhpcy5pdGVtc0xpc3QucmVkdWNlKChhLCBiKSA9PiBhICsgcGFyc2VGbG9hdChiW2ZsZF0pLCAwKSB8fCAiIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgIH0sCgogICAgc2V0VmlzaWJpbGl0eUNvbHVtbihjb2wpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ3NldFZpc2liaWxpdHlDb2x1bW46JywgY29sKQogICAgICAvLyBjb25zb2xlLmxvZygnc2V0VmlzaWJpbGl0eUNvbHVtbi52aXNpYmxlOicsIGNvbC52aXNpYmxlKQogICAgICAvL2NvbC52aXNpYmxlID0gIWNvbC52aXNpYmxlIHx8IGZhbHNlCiAgICAgIHRoaXMuY29sdW1ucy5maW5kKGMgPT4gYy5rZXkgPT0gY29sLmtleSkudmlzaWJsZSA9ICFjb2wudmlzaWJsZSB8fCBmYWxzZTsKICAgIH0sCgogICAgaXNCdXR0b24obmFtZSkgewogICAgICByZXR1cm4gdGhpcy5idXR0b25zLmluY2x1ZGVzKG5hbWUpIHx8IGZhbHNlOwogICAgfSwKCiAgICBwcmludEl0KG8pIHsKICAgICAgY29uc29sZS5sb2coInByaW50SXQ6Iiwgbyk7CiAgICB9LAoKICAgIGRvTWFyY2FyKCkgewogICAgICBsZXQgaSA9IHRoaXMuY29sdW1ucy5maW5kSW5kZXgoaSA9PiBpLmtleSA9PSAiY2hlY2siKTsKICAgICAgaWYgKGkgPiAtMSkgdGhpcy5jb2x1bW5zLnNwbGljZShpLCAxKTtlbHNlIHRoaXMuY29sdW1ucy5wdXNoKHsKICAgICAgICBrZXk6ICJjaGVjayIsCiAgICAgICAgbGFiZWw6ICJNYXJjYXIiLAogICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICB2aXNpYmxlOiB0cnVlCiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZygiZG9NYXJjYXI6IiwgdGhpcy5zZWxlY3RlZHMubGVuZ3RoKTsKICAgIH0sCgogICAgZG9FbnZpYU1hcmNhZG9zKCkgewogICAgICBjb25zb2xlLmxvZygiZG9FbnZpYU1hcmNhZG9zOiIsIHRoaXMuY2hlY2tlZHMpOwogICAgICB0aGlzLiRlbWl0KCJldnQtc2VsZWN0ZWQiLCB0aGlzLmNoZWNrZWRzKTsKICAgIH0sCgogICAgcm93Q3VzdG9tQnV0dG9uKGJ1dHRvbiwgZGF0YSkgewogICAgICBidXR0b24uZGF0YSA9IGRhdGE7CiAgICAgIHRoaXMuJGVtaXQoImV2dC1yb3didXR0b24iLCBidXR0b24pOwogICAgfSwKCiAgICBDdXN0b21CdXR0b25DbGljayhidXR0b24pIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRzLmxlbmd0aCA+IDApIHsKICAgICAgICBidXR0b24uZGF0YSA9IHRoaXMuc2VsZWN0ZWRzOwogICAgICB9IGVsc2UgewogICAgICAgIGJ1dHRvbi5kYXRhID0gdGhpcy5pdGVtc0xpc3Q7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoImV2dC1oZWFkZXJidXR0b24iLCBidXR0b24pOwogICAgfSwKCiAgICBvbkNoZWNrYWxsKCkgewogICAgICB0aGlzLmNoZWNrYWxsID0gIXRoaXMuY2hlY2thbGw7CiAgICAgIGNvbnNvbGUubG9nKCJvbkNoZWNrYWxsIiwgdGhpcy5jaGVja2FsbCk7CgogICAgICBpZiAodGhpcy5pdGVtcy5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5pdGVtcy5tYXAoaSA9PiBpLmNoZWNrZWQgPSB0aGlzLmNoZWNrYWxsKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFwaXJlc3BvbnNlLkRhdGEubWFwKGkgPT4gaS5jaGVja2VkID0gdGhpcy5jaGVja2FsbCk7CiAgICAgIH0gLy8gdGhpcy5pdGVtc0xpc3QubWFwKGkgPT4gaS5jaGVja2VkID0gdGhpcy5jaGVja2FsbCkKCiAgICB9LAoKICAgIHJvd0NoZWNrZWQoaXRlbSwgdHlwZSkgewogICAgICBpZiAoIWl0ZW0gfHwgdHlwZSAhPT0gInJvdyIpIHJldHVybiAiIjsKICAgICAgaWYgKGl0ZW0uY2hlY2tlZCkgcmV0dXJuICJ0YWJsZS1pbmZvIjsKICAgIH0sCgogICAgTmV3KCkgewogICAgICAvLyBjb25zb2xlLmxvZygnRWRpdG91IG5vIGl0ZW06JywgZXZ0Lml0ZW0udmFsdWUsIGV2dCkKICAgICAgdGhpcy4kZW1pdCgiZXZ0LW5ldyIpOwogICAgfSwKCiAgICByb3dzU2VsZWN0KGV2dCkgewogICAgICAvKg0KICAgICAgICAgICAgaWYgKCghdGhpcy5zZWxlY3RlZHMuZmluZChmID0+IGYgPT0gZXZ0KSkgJiYgKGV2dC5jaGVja2VkKSkNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkcy5wdXNoKGV2dCkNCiAgICAgICAgICAgICAgaWYgKCh0aGlzLnNlbGVjdGVkcy5maW5kKGYgPT4gZiA9PSBldnQpKSAmJiAoIWV2dC5jaGVja2VkKSkNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkcy5zcGxpY2UodGhpcy5zZWxlY3RlZHMuZmluZEluZGV4KGYgPT4gZiA9PSBldnQpLCAxKQ0KICAgICAgICAgICAgKi8KICAgICAgZXZ0LmNoZWNrZWQgPSAhZXZ0LmNoZWNrZWQ7CiAgICAgIHRoaXMuJGVtaXQoImV2dC1jaGVja2VkIiwgdGhpcy5zZWxlY3RlZHMpOwogICAgfSwKCiAgICByb3dTZWxlY3QoZXZ0KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdTZWxlY2lvbm91IG8gaXRlbTonLCBldnQpCiAgICAgIHRoaXMuJGVtaXQoImV2dC1zZWxlY3QiLCBldnQpOwogICAgfSwKCiAgICByb3dFZGl0KGV2dCkgewogICAgICAvLyBjb25zb2xlLmxvZygnRWRpdG91IG5vIGl0ZW06JywgZXZ0Lml0ZW0udmFsdWUsIGV2dCkKICAgICAgdGhpcy4kZW1pdCgiZXZ0LWVkaXQiLCBldnQpOwogICAgfSwKCiAgICByb3dEZWxldGUoZXZ0KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdFeGNsdWl1IG5vIGl0ZW06JywgZXZ0Lml0ZW0udmFsdWUsIGV2dCkKICAgICAgdGhpcy4kZW1pdCgiZXZ0LWRlbGV0ZSIsIGV2dCk7CiAgICB9LAoKICAgIHJvd0luc2VydChldnQpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ2luc2VyaXUgbyBpdGVtOicsIGV2dC5pdGVtLnZhbHVlLCBldnQpCiAgICAgIHRoaXMuJGVtaXQoImV2dC1pbnNlcnQiLCBldnQpOwogICAgfSwKCiAgICByb3dSdW4oZXZ0KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdpbnNlcml1IG8gaXRlbTonLCBldnQuaXRlbS52YWx1ZSwgZXZ0KQogICAgICB0aGlzLiRlbWl0KCJldnQtcnVuIiwgZXZ0KTsKICAgIH0sCgogICAgcm93SW5mb3JtKGV2dCkgewogICAgICAvLyBjb25zb2xlLmxvZygnRXhjbHVpdSBubyBpdGVtOicsIGV2dC5pdGVtLnZhbHVlLCBldnQpCiAgICAgIHRoaXMuJGVtaXQoImV2dC1pbmZvcm0iLCBldnQpOwogICAgfQoKICB9Cn07"},{"version":3,"mappings":"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","names":["name","props","tableId","type","default","header","fields","soma","mask","items","getter","buttons","page","pages","perPage","route","params","busy","run","data","inputPesquisa","check","checkall","selecteds","load","columns","apiresponse","Data","Paginas","PageCount","PageSize","selected","sortBy","sortDesc","currentPage","currentperPage","created","computed","custombuttons","custombuttonsheader","activepage","showcolumns","sumcolumns","columnspan","totalRows","itemsList","paginate","PageNumber","TotalRows","paramsapi","columnSorted","checkeds","watch","methods","searchclick","console","getColumnsArray","col","key","label","sortable","visible","sumfield","setVisibilityColumn","isButton","printIt","doMarcar","doEnviaMarcados","rowCustomButton","button","CustomButtonClick","onCheckall","rowChecked","New","rowsSelect","evt","rowSelect","rowEdit","rowDelete","rowInsert","rowRun","rowInform"],"sourceRoot":"src/components","sources":["TableEditApi.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <b-overlay :show=\"load\" rounded=\"sm\">\r\n      <div class=\"d-flex float-right mb-2\">\r\n        <b-pagination\r\n          v-if=\"totalRows > perPage\"\r\n          v-model=\"currentPage\"\r\n          :total-rows=\"totalRows\"\r\n          :per-page=\"currentperPage\"\r\n          aria-controls=\"tableSearch\"\r\n          size=\"sm\"\r\n        >\r\n        </b-pagination>\r\n        <b-form-select\r\n          v-model=\"currentperPage\"\r\n          :options=\"pages\"\r\n          size=\"sm\"\r\n          width=\"10px\"\r\n          class=\"ml-2\"\r\n        >\r\n        </b-form-select>\r\n      </div>\r\n\r\n      <b-table\r\n        v-if=\"showcolumns\"\r\n        id=\"tableSearch\"\r\n        ref=\"tableSearch\"\r\n        striped\r\n        hover\r\n        small\r\n        bordered\r\n        responsive=\"sm\"\r\n        head-variant=\"light\"\r\n        selectable\r\n        select-mode=\"single\"\r\n        selected-variant=\"success\"\r\n        :items=\"itemsList\"\r\n        :fields=\"showcolumns\"\r\n        :current-page=\"activepage\"\r\n        :total-rows=\"totalRows\"\r\n        :perPage=\"currentperPage\"\r\n        :tbody-tr-class=\"rowChecked\"\r\n        sort-icon-left\r\n        :sort-by.sync=\"sortBy\"\r\n        :sort-desc.sync=\"sortDesc\"\r\n        @row-selected=\"rowSelect\"\r\n      >\r\n        <template #thead-top>\r\n          <b-tr v-if=\"header.length > 0\">\r\n            <b-th :colspan=\"columnspan\" variant=\"secondary\">\r\n              <div class=\"d-flex justify-content-between align-items-center\">\r\n                <div class=\"ml-2\">\r\n                  {{ header }}\r\n                </div>\r\n                <div>\r\n                  <b-button\r\n                    v-for=\"(b, i) of custombuttonsheader\"\r\n                    :key=\"i\"\r\n                    :size=\"b.size\"\r\n                    :variant=\"b.variant\"\r\n                    v-b-tooltip\r\n                    :title=\"b.tooltip\"\r\n                    class=\"ml-1\"\r\n                    @click=\"CustomButtonClick(b)\"\r\n                  >\r\n                    <b-icon v-if=\"b.icon\" :icon=\"b.icon\" />\r\n                    <span v-if=\"b.label\">{{ b.label }}</span>\r\n                  </b-button>\r\n                  <b-button\r\n                    v-if=\"isButton('new')\"\r\n                    variant=\"outline-primary\"\r\n                    size=\"sm\"\r\n                    v-b-tooltip.hover.topleft=\"'Novo registro'\"\r\n                    @click=\"New\"\r\n                  >\r\n                    <b-icon-plus-circle class=\"mr-2\" />\r\n                    Incluir\r\n                  </b-button>\r\n\r\n                  <b-dropdown\r\n                    right\r\n                    variant=\"outline-primary\"\r\n                    size=\"sm\"\r\n                    class=\"ml-1\"\r\n                  >\r\n                    <template #button-content>\r\n                      <b-icon-gear-fill />\r\n                    </template>\r\n                    <b-dropdown-item\r\n                      @click=\"doMarcar\"\r\n                      v-if=\"checkeds.length == 0\"\r\n                    >\r\n                      <b-icon-check-square />\r\n                      Marcar</b-dropdown-item\r\n                    >\r\n                    <b-dropdown-item @click=\"doEnviaMarcados\" v-else\r\n                      >Enviar Marcados</b-dropdown-item\r\n                    >\r\n                    <b-dropdown-divider></b-dropdown-divider>\r\n                    <b-dropdown-form style=\"width: 200px;\">\r\n                      <b-input-group block>\r\n                        <b-form-input\r\n                          size=\"sm\"\r\n                          placeholder=\"Pesquisar\"\r\n                          v-model=\"inputPesquisa\"\r\n                        ></b-form-input>\r\n                        <b-input-group-append>\r\n                          <b-button\r\n                            size=\"sm\"\r\n                            variant=\"outline-success\"\r\n                            type=\"button\"\r\n                            :disabled=\"inputPesquisa.length == 0\"\r\n                            @click=\"searchclick\"\r\n                            ><b-icon-search\r\n                          /></b-button>\r\n                        </b-input-group-append>\r\n                      </b-input-group>\r\n                    </b-dropdown-form>\r\n                    <b-dropdown-divider></b-dropdown-divider>\r\n                    <b-dropdown-item\r\n                      v-for=\"(col, i) of columns\"\r\n                      :key=\"i\"\r\n                      @click=\"setVisibilityColumn(col)\"\r\n                    >\r\n                      <b-icon-eye class=\"mr-2\" v-if=\"col.visible\" />\r\n                      <b-icon-eye-slash class=\"mr-2\" v-else />\r\n                      {{ col.label }}\r\n                    </b-dropdown-item>\r\n                  </b-dropdown>\r\n                </div>\r\n              </div>\r\n            </b-th>\r\n          </b-tr>\r\n        </template>\r\n\r\n        <!-- header da coluna actions -->\r\n        <template #head(actions)=\"data\">\r\n          <div class=\"text-center\">\r\n            {{ data.label }}\r\n          </div>\r\n        </template>\r\n\r\n        <!-- detalhe da coluna actions -->\r\n        <template #cell(actions)=\"data\">\r\n          <div class=\"text-center\">\r\n            <!-- Botões fixos para edição -->\r\n            <b-button-group>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('insert')\"\r\n                variant=\"outline-primary\"\r\n                v-b-tooltip.hover.topleft=\"'Incluir'\"\r\n                @click=\"rowInsert(data)\"\r\n                ><b-icon-plus\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('edit')\"\r\n                variant=\"outline-success\"\r\n                v-b-tooltip.hover.topleft=\"'Editar'\"\r\n                @click=\"rowEdit(data)\"\r\n                ><b-icon-pencil\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('delete')\"\r\n                variant=\"outline-danger\"\r\n                v-b-tooltip.hover.topleft=\"'Deletar'\"\r\n                @click=\"rowDelete(data)\"\r\n                ><b-icon-trash\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('run')\"\r\n                variant=\"outline-warning\"\r\n                v-b-tooltip.hover.topleft=\"'Executar'\"\r\n                @click=\"rowRun(data)\"\r\n                ><b-icon-lightning\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('info')\"\r\n                variant=\"outline-info\"\r\n                v-b-tooltip.hover.topleft=\"'Informações'\"\r\n                @click=\"rowInform(data)\"\r\n                ><b-icon-info-circle\r\n              /></b-button>\r\n            </b-button-group>\r\n            <!-- Botões dinamicos criados pelo usuário -->\r\n            <b-button\r\n              v-for=\"(b, i) of custombuttons\"\r\n              :key=\"i\"\r\n              :size=\"b.size\"\r\n              :variant=\"b.variant\"\r\n              v-b-tooltip\r\n              :title=\"b.tooltip\"\r\n              class=\"ml-1\"\r\n              @click=\"rowCustomButton(b, data.item)\"\r\n            >\r\n              <b-icon v-if=\"b.icon\" :icon=\"b.icon\" />\r\n              <span v-if=\"b.label\">{{ b.label }}</span>\r\n            </b-button>\r\n          </div>\r\n        </template>\r\n\r\n        <!-- header da coluna check -->\r\n        <template #head(check)>\r\n          <div class=\"text-center\">\r\n            <b-form-checkbox @change=\"onCheckall\"></b-form-checkbox>\r\n          </div>\r\n        </template>\r\n        <!-- detalhe da coluna check -->\r\n        <template #cell(check)=\"data\">\r\n          <div class=\"text-center\">\r\n            <b-form-checkbox v-model=\"data.item.checked\"></b-form-checkbox>\r\n          </div>\r\n        </template>\r\n\r\n        <!-- Default fall-back custom formatted footer cell\r\n            <template #foot()=\"data\">\r\n                <i>{{ data.item }}</i>\r\n                pq não aparece isso ?\r\n            </template> \r\n            -->\r\n        <template #head(custombuttons)=\"data\">\r\n          <div class=\"text-center\">\r\n            {{ data.label }}\r\n          </div>\r\n        </template>\r\n        <template v-slot:cell(custombuttons)>\r\n          <slot class=\"text-center\"></slot>\r\n        </template>\r\n\r\n        <template slot=\"bottom-row\" v-if=\"soma.lenght > 0\">\r\n          <td v-for=\"(c, i) of sumcolumns\" :key=\"i\">\r\n            <span class=\"font-weight-bolder\">{{ c }}</span>\r\n          </td>\r\n        </template>\r\n      </b-table>\r\n\r\n      <div class=\"d-flex float-left font-weight-bold ml-3\">\r\n        <span v-if=\"totalRows == 1\"> {{ totalRows }} registro </span>\r\n        <span v-else> {{ totalRows }} registros </span>\r\n      </div>\r\n\r\n      <div class=\"d-flex float-right\">\r\n        <b-pagination\r\n          v-if=\"totalRows > perPage\"\r\n          v-model=\"currentPage\"\r\n          :total-rows=\"totalRows\"\r\n          :per-page=\"currentperPage\"\r\n          aria-controls=\"tableSearch\"\r\n          size=\"sm\"\r\n        >\r\n        </b-pagination>\r\n        <b-form-select\r\n          v-model=\"currentperPage\"\r\n          :options=\"pages\"\r\n          size=\"sm\"\r\n          class=\"ml-2\"\r\n        ></b-form-select>\r\n      </div>\r\n    </b-overlay>\r\n\r\n    <!--\r\n        checkeds:\r\n        <pre>\r\n            {{ checkeds }}\r\n        </pre>\r\n        paginate: {{paginate}}<br/>\r\n        showcolumns: {{showcolumns}}<br/>\r\n        itemsList: {{itemsList}}<br/>\r\n\r\n\r\n        soma: {{soma}}<br/>\r\n        sumcolumns: {{sumcolumns}}<br/>\r\n\r\n\r\n        <b-table striped hover :fields=\"fields\" :items=\"items\">\r\n            <template #cell(actions)=\"data\">\r\n                {{ data.index + 1 }}\r\n            </template>\r\n        </b-table>\r\n-->\r\n\r\n    <!--         buttons: {{buttons.length}}<br/>\r\n        columns: {{columns}}<br/>\r\n        selecteds: {{selecteds}} -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ApiService from \"../services/api.service\";\r\nexport default {\r\n  name: \"TableEditApi\",\r\n\r\n  props: {\r\n    tableId: {\r\n      type: String,\r\n      default() {\r\n        return \"table-api\";\r\n      },\r\n    },\r\n    header: {\r\n      type: String,\r\n      default() {\r\n        return \"\";\r\n      },\r\n    },\r\n    fields: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    soma: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    mask: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    items: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    getter: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    buttons: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    }, // informar 'edit','delete','info','insert','run','new'\r\n    page: {\r\n      type: Number,\r\n      default() {\r\n        return 1;\r\n      },\r\n    },\r\n    pages: {\r\n      type: Array,\r\n      default() {\r\n        return [10, 30, 50, 100, 500, 1000, 9999999];\r\n      },\r\n    },\r\n    perPage: {\r\n      type: Number,\r\n      default() {\r\n        return 10;\r\n      },\r\n    },\r\n    route: {\r\n      type: String,\r\n      default() {\r\n        return \"\";\r\n      },\r\n    },\r\n    params: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n    busy: {\r\n      type: Boolean,\r\n      default() {\r\n        return false;\r\n      },\r\n    },\r\n    run: {\r\n      type: Number,\r\n      default() {\r\n        return 1;\r\n      },\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      inputPesquisa: \"\",\r\n      check: false,\r\n      checkall: false,\r\n      selecteds: [],\r\n      load: this.busy || false,\r\n      columns: [],\r\n      apiresponse: { Data: [], Paginas: { PageCount: 1, PageSize: 10 } },\r\n      selected: null,\r\n      sortBy: \"\",\r\n      sortDesc: false,\r\n      currentPage: this.page,\r\n      currentperPage: this.perPage,\r\n    };\r\n  },\r\n\r\n  created() {\r\n    // console.log('TableEditApi.')\r\n\r\n    if (this.route !== \"\" && this.run > 0) {\r\n      this.getFromApi();\r\n    } else {\r\n      this.columns = this.getColumnsArray(this.items);\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    custombuttons() {\r\n      return this.buttons.filter((b) => typeof b == \"object\" && !b.header);\r\n    },\r\n\r\n    custombuttonsheader() {\r\n      return this.buttons.filter((b) => typeof b == \"object\" && b.header);\r\n    },\r\n\r\n    activepage() {\r\n      return this.route !== \"\" ? 1 : this.currentPage;\r\n    },\r\n\r\n    showcolumns() {\r\n      return this.columns.length > 0\r\n        ? this.columns.filter((f) => f.visible) || Object.keys(this.items)\r\n        : [];\r\n    },\r\n\r\n    sumcolumns() {\r\n      return this.showcolumns.map((c) => this.sumfield(c.key));\r\n    },\r\n\r\n    columnspan() {\r\n      return this.showcolumns.length || 1;\r\n    },\r\n\r\n    totalRows() {\r\n      if (this.route !== \"\") {\r\n        return this.apiresponse && this.apiresponse.Paginas\r\n          ? this.apiresponse.Paginas.PageCount *\r\n              this.apiresponse.Paginas.PageSize\r\n          : 0;\r\n      } else {\r\n        return this.items.length;\r\n      }\r\n    },\r\n\r\n    itemsList() {\r\n      let ret = this.items.length > 0 ? this.items : this.apiresponse.Data;\r\n      return ret || [];\r\n    },\r\n\r\n    paginate() {\r\n      return {\r\n        PageNumber: this.currentPage,\r\n        PageSize: this.currentperPage,\r\n        TotalRows: this.totalRows,\r\n      };\r\n    },\r\n\r\n    paramsapi() {\r\n      return { ...this.params, ...this.paginate };\r\n    },\r\n\r\n    columnSorted() {\r\n      return this.columns.find((c) => c.label == this.sortBy) || \"\";\r\n    },\r\n\r\n    checkeds() {\r\n      return this.itemsList.filter((f) => f.checked);\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    currentPage(page) {\r\n      if (this.route !== \"\" && page > 0) this.getFromApi();\r\n    },\r\n\r\n    currentperPage(perpage) {\r\n      if (this.route !== \"\" && perpage > 0) this.getFromApi();\r\n    },\r\n\r\n    apiresponse() {\r\n      if (this.columns.length == 0)\r\n        this.columns = this.getColumnsArray(this.itemsList);\r\n      // TODO: dar o foco no primeiro registro da tabela para poder navegar com o teclado ...\r\n      // this.$refs[\"tableSearch\"].focus()\r\n    },\r\n\r\n    run() {\r\n      if (this.run > 0) this.getFromApi();\r\n    },\r\n\r\n    perPage() {\r\n      this.page = 1;\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    async getFromApi() {\r\n      // console.log('getFromApi')\r\n\r\n      this.load = true;\r\n      await ApiService.get(this.route, { params: this.paramsapi }).then(\r\n        (data) => {\r\n          // se vem da API remove o controle de paginação ...\r\n          this.load = false;\r\n          this.apiresponse = data.data;\r\n          // console.log('TableEditApi.apiresponse:', this.apiresponse)\r\n\r\n          this.$emit(\"evt-done\", this.apiresponse);\r\n        }\r\n      );\r\n    },\r\n\r\n    searchclick() {\r\n      console.log(\"TableEditApi.searchclick:\", this.inputPesquisa);\r\n    },\r\n\r\n    getColumnsArray(arr) {\r\n      // console.log('getColumnsArray:', arr.length)\r\n      let columns = [];\r\n      if (arr.length > 0) {\r\n        columns = Object.keys(arr[0]).map((k) => {\r\n          let col = this.fields.find((f) => f.key == k);\r\n          if (col) {\r\n            col.visible = col.visible || false;\r\n            col.sortable = col.sortable || false;\r\n            col.label = col.label || k;\r\n          } else\r\n            col = {\r\n              key: k,\r\n              label: k,\r\n              sortable: true,\r\n              visible: !this.fields.length > 0,\r\n            };\r\n\r\n          return col;\r\n        });\r\n      } else {\r\n        columns = this.fields;\r\n      }\r\n\r\n      if (columns.length > 0)\r\n        if (!columns.find((f) => f.key == \"actions\"))\r\n          if (this.buttons.length > 0)\r\n            columns.push({\r\n              key: \"actions\",\r\n              label: \"Ações\",\r\n              sortable: false,\r\n              visible: true,\r\n            });\r\n\r\n      return columns;\r\n    },\r\n\r\n    sumfield(fld) {\r\n      if (this.soma.find((f) => f.key.toUpperCase() == fld.toUpperCase())) {\r\n        return this.itemsList.reduce((a, b) => a + parseFloat(b[fld]), 0) || \"\";\r\n      } else {\r\n        return \"\";\r\n      }\r\n    },\r\n\r\n    setVisibilityColumn(col) {\r\n      // console.log('setVisibilityColumn:', col)\r\n      // console.log('setVisibilityColumn.visible:', col.visible)\r\n      //col.visible = !col.visible || false\r\n      this.columns.find((c) => c.key == col.key).visible =\r\n        !col.visible || false;\r\n    },\r\n\r\n    isButton(name) {\r\n      return this.buttons.includes(name) || false;\r\n    },\r\n\r\n    printIt(o) {\r\n      console.log(\"printIt:\", o);\r\n    },\r\n\r\n    doMarcar() {\r\n      let i = this.columns.findIndex((i) => i.key == \"check\");\r\n      if (i > -1) this.columns.splice(i, 1);\r\n      else\r\n        this.columns.push({\r\n          key: \"check\",\r\n          label: \"Marcar\",\r\n          sortable: false,\r\n          visible: true,\r\n        });\r\n      console.log(\"doMarcar:\", this.selecteds.length);\r\n    },\r\n\r\n    doEnviaMarcados() {\r\n      console.log(\"doEnviaMarcados:\", this.checkeds);\r\n      this.$emit(\"evt-selected\", this.checkeds);\r\n    },\r\n\r\n    rowCustomButton(button, data) {\r\n      button.data = data;\r\n\r\n      this.$emit(\"evt-rowbutton\", button);\r\n    },\r\n\r\n    CustomButtonClick(button) {\r\n      if (this.selecteds.length > 0) {\r\n        button.data = this.selecteds;\r\n      } else {\r\n        button.data = this.itemsList;\r\n      }\r\n\r\n      this.$emit(\"evt-headerbutton\", button);\r\n    },\r\n\r\n    onCheckall() {\r\n      this.checkall = !this.checkall;\r\n      console.log(\"onCheckall\", this.checkall);\r\n\r\n      if (this.items.length > 0) {\r\n        this.items.map((i) => (i.checked = this.checkall));\r\n      } else {\r\n        this.apiresponse.Data.map((i) => (i.checked = this.checkall));\r\n      }\r\n\r\n      // this.itemsList.map(i => i.checked = this.checkall)\r\n    },\r\n\r\n    rowChecked(item, type) {\r\n      if (!item || type !== \"row\") return \"\";\r\n      if (item.checked) return \"table-info\";\r\n    },\r\n\r\n    New() {\r\n      // console.log('Editou no item:', evt.item.value, evt)\r\n      this.$emit(\"evt-new\");\r\n    },\r\n    rowsSelect(evt) {\r\n      /*\r\n            if ((!this.selecteds.find(f => f == evt)) && (evt.checked))\r\n                this.selecteds.push(evt)\r\n\r\n            if ((this.selecteds.find(f => f == evt)) && (!evt.checked))\r\n                this.selecteds.splice(this.selecteds.findIndex(f => f == evt), 1)\r\n            */\r\n\r\n      evt.checked = !evt.checked;\r\n\r\n      this.$emit(\"evt-checked\", this.selecteds);\r\n    },\r\n    rowSelect(evt) {\r\n      // console.log('Selecionou o item:', evt)\r\n      this.$emit(\"evt-select\", evt);\r\n    },\r\n    rowEdit(evt) {\r\n      // console.log('Editou no item:', evt.item.value, evt)\r\n      this.$emit(\"evt-edit\", evt);\r\n    },\r\n    rowDelete(evt) {\r\n      // console.log('Excluiu no item:', evt.item.value, evt)\r\n      this.$emit(\"evt-delete\", evt);\r\n    },\r\n    rowInsert(evt) {\r\n      // console.log('inseriu o item:', evt.item.value, evt)\r\n      this.$emit(\"evt-insert\", evt);\r\n    },\r\n    rowRun(evt) {\r\n      // console.log('inseriu o item:', evt.item.value, evt)\r\n      this.$emit(\"evt-run\", evt);\r\n    },\r\n    rowInform(evt) {\r\n      // console.log('Excluiu no item:', evt.item.value, evt)\r\n      this.$emit(\"evt-inform\", evt);\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}