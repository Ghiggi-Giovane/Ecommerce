{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\producaoidelli\\views\\partlist.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\producaoidelli\\views\\partlist.vue","mtime":1670977910660},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGxvY2Fsc3RvcmUgZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvbG9jYWxzdG9yZSc7CmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdQYXJ0TGlzdCcsCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2hpbmc6IGZhbHNlLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgYXBpcmVzcG9uc2U6IG51bGwsCiAgICAgIHBhcnRsaXN0OiB7CiAgICAgICAgYmFyY29kZTogJycsCiAgICAgICAgU3RhdHVzS2FwcGVzOiAxIC8vIHBlZ2FyIGRvIGxvY2Fsc3RvcmUKCiAgICAgIH0sCiAgICAgIGxhc3R1cGRhdGU6IHsKICAgICAgICBTdGF0dXNLYXBwZXM6IDEgLy8gcGVnYXIgZG8gbG9jYWxzdG9yZQoKICAgICAgfQogICAgfTsKICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5hY3RwYXJ0bGlzdFN0YXR1c0thcHBlcygpOwogICAgdGhpcy5mb2N1c2JhcmNvZGUoKTsKICAgIGxldCBsb2NhbHN0YXR1cyA9IGxvY2Fsc3RvcmUuZ2V0VXNlclN0b3JlUGFnZUJ5TmFtZSgncGFydGxpc3QnKTsgLy8gY29uc29sZS5sb2coJ3BhcnRsaXN0Lm1vdW50ZWQubG9jYWxzdGF0dXM6JywgbG9jYWxzdGF0dXMpCgogICAgaWYgKCFsb2NhbHN0YXR1cykgewogICAgICBsb2NhbHN0YXR1cy5kYXRhID0gewogICAgICAgIFN0YXR1c0thcHBlczogMQogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgaWYgKCFsb2NhbHN0YXR1cy5oYXNPd25Qcm9wZXJ0eSgnZGF0YScpKSBsb2NhbHN0YXR1cy5kYXRhID0gewogICAgICAgIFN0YXR1c0thcHBlczogMQogICAgICB9OwogICAgfQoKICAgIHRoaXMucGFydGxpc3QuU3RhdHVzS2FwcGVzID0gbG9jYWxzdGF0dXMuZGF0YS5TdGF0dXNLYXBwZXMgfHwgMTsKICAgIHRoaXMubGFzdHVwZGF0ZS5TdGF0dXNLYXBwZXMgPSB0aGlzLnBhcnRsaXN0LlN0YXR1c0thcHBlczsKICB9LAoKICBjb21wdXRlZDogeyAuLi5tYXBHZXR0ZXJzKFsnZ3R4cGFydGxpc3RTdGF0dXNLYXBwZXMnLCAnZ3R4cGFydGxpc3RyZXNwb25zZScsICdndHhwYXJ0bGlzdGRhdGEnLCAnZ3R4cGFydGxpc3QnLCAnZ3R4cGFydGxpc3R1cGRhdGUnLCAnZ3R4cGFydGxpc3Rsb2FkaW5nJ10pLAoKICAgIC8vIGNvbnTDqW0gb3MgZGFkb3MgZGUgY29uZmlndXJhw6fDo28gZGEgcMOhZ2luYSAuLi4KICAgIHN0b3JlcGFnZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBTdGF0dXNLYXBwZXM6IHRoaXMucGFydGxpc3QuU3RhdHVzS2FwcGVzCiAgICAgIH07CiAgICB9LAoKICAgIGJhcmNvZGVzKCkgewogICAgICBjb25zdCBiYXJzID0gdGhpcy5hcGlkYXRhLlNlcXVlbmNpYVByb2R1Y2FvOwogICAgICByZXR1cm4gYmFycyA/IGJhcnMubWFwKGIgPT4gYi5iYXJjb2RlKSA6IFtdOwogICAgfSwKCiAgICBiYXJjb2RlKCkgewogICAgICByZXR1cm4gdGhpcy5wYXJ0bGlzdC5iYXJjb2RlOwogICAgfSwKCiAgICBjYW51cGRhdGUoKSB7CiAgICAgIHJldHVybiB0aGlzLmFwaXVwZGF0ZS5iYXJjb2RlICE9PSAnJyAmJiB0aGlzLmFwaXVwZGF0ZS5TdGF0dXNLYXBwZXMgPiAwID8gdHJ1ZSA6IGZhbHNlOwogICAgfSwKCiAgICBidG5TYXZlVmFyaWFudCgpIHsKICAgICAgbGV0IHN0YXRlID0gdGhpcy5hcGlkYXRhLlN0YXR1c0thcHBlcyA/IHRoaXMuYXBpZGF0YS5TdGF0dXNLYXBwZXMgPT0gbGFzdHVwZGF0ZS5TdGF0dXNLYXBwZXMgOiBmYWxzZTsKICAgICAgcmV0dXJuIHN0YXRlID8gJ3ByaW1hcnknIDogJ2Rhbmdlcic7CiAgICB9LAoKICAgIFN0YXR1c0thcHBlc1NlbGVjdGVkKCkgewogICAgICBjb25zdCBwYXJsaXN0c2VsZWN0ZWQgPSB0aGlzLmd0eHBhcnRsaXN0U3RhdHVzS2FwcGVzLmZpbmQoZiA9PiBmLnZhbHVlID09IHRoaXMucGFydGxpc3QuU3RhdHVzS2FwcGVzKTsKICAgICAgcmV0dXJuIHBhcmxpc3RzZWxlY3RlZCA/IHBhcmxpc3RzZWxlY3RlZC50ZXh0IDogJyc7CiAgICB9LAoKICAgIGFwaXVwZGF0ZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBiYXJjb2RlOiB0aGlzLmFwaWRhdGEuYmFyY29kZSB8fCAnJywKICAgICAgICBTdGF0dXNLYXBwZXM6IHBhcnNlSW50KHRoaXMucGFydGxpc3QuU3RhdHVzS2FwcGVzKSB8fCAxCiAgICAgIH07CiAgICB9LAoKICAgIGFwaXBlc3F1aXNhKCkgewogICAgICByZXR1cm4gewogICAgICAgIHBhcmFtczogewogICAgICAgICAgcGVzcXVpc2E6IHRoaXMucGFydGxpc3QuYmFyY29kZSB8fCAnJywKICAgICAgICAgIFN0YXR1c0thcHBlczogcGFyc2VJbnQodGhpcy5wYXJ0bGlzdC5TdGF0dXNLYXBwZXMpIHx8IDEKICAgICAgICB9CiAgICAgIH07CiAgICB9LAoKICAgIGFwaWRhdGEoKSB7CiAgICAgIGxldCBkYXRhID0gewogICAgICAgIEZpY2hhOiAnJywKICAgICAgICBiYXJjb2RlOiAnJywKICAgICAgICBTdGF0dXNLYXBwZXM6IC0xLAogICAgICAgIHJlZmVyZW5jaWE6ICcnLAogICAgICAgIENvbXByaW1lbnRvOiAwLAogICAgICAgIExhcmd1cmE6IDAsCiAgICAgICAgRXNwZXNzdXJhOiAwLAogICAgICAgIFF1YW50aWRhZGU6IDAKICAgICAgfTsKICAgICAgaWYgKHRoaXMuZ3R4cGFydGxpc3RyZXNwb25zZSkgaWYgKHRoaXMuZ3R4cGFydGxpc3RyZXNwb25zZS5TdWNjZXNzID09ICdUcnVlJykgZGF0YSA9IHRoaXMuZ3R4cGFydGxpc3RyZXNwb25zZS5EYXRhWzBdOwogICAgICBsZXQgc3RhdHVzID0gdGhpcy5ndHhwYXJ0bGlzdFN0YXR1c0thcHBlcy5maW5kKGYgPT4gZi52YWx1ZSA9PSBkYXRhLlN0YXR1c0thcHBlcyk7CiAgICAgIGRhdGEuU3RhdHVzS2FwcGVzVGV4dCA9IHN0YXR1cyA/IHN0YXR1cy50ZXh0IDogJ07Do28gZGVmaW5pZG8nOwogICAgICBkYXRhLmJ0blZhcmlhbnQgPSBzdGF0dXMgPyBzdGF0dXMudmFsdWUgPT0gdGhpcy5wYXJ0bGlzdC5TdGF0dXNLYXBwZXMgPyAncHJpbWFyeScgOiAnZGFuZ2VyJyA6ICdwcmltYXJ5JzsKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9CgogIH0sCiAgbWV0aG9kczogeyAuLi5tYXBBY3Rpb25zKFsnYWN0QWxlcnQnLCAnYWN0cGFydGxpc3RTdGF0dXNLYXBwZXMnLCAnYWN0cGFydGxpc3QnLCAnYWN0cGFydGxpc3R1cGRhdGUnXSksCgogICAgZm9jdXNiYXJjb2RlKCkgewogICAgICB0aGlzLiRyZWZzLmJhcmNvZGUuZm9jdXMoKTsKICAgIH0sCgogICAgb25TYXZlKCkgewogICAgICBjb25zdCBiYXJjb2RlID0gewogICAgICAgIHBhcmFtczogewogICAgICAgICAgcGVzcXVpc2E6IHRoaXMuYXBpZGF0YS5iYXJjb2RlCiAgICAgICAgfQogICAgICB9OyAvLyBjb25zb2xlLmxvZygnb25TYXZlOicsIGJhcmNvZGUpCgogICAgICB0aGlzLmFjdHBhcnRsaXN0dXBkYXRlKHRoaXMuYXBpdXBkYXRlKTsgLy8gc2FsdmEgYSBjb25maWd1cmHDp8OjbyBkYSBww6FnaW5hIG5vIGxvY2FsU3RvcmFnZQoKICAgICAgbG9jYWxzdG9yZS5zZXRVc2VyU3RvcmVQYWdlRGF0YSgncGFydGxpc3QnLCB0aGlzLnN0b3JlcGFnZSk7CiAgICAgIHRoaXMubGFzdHVwZGF0ZS5TdGF0dXNLYXBwZXMgPSB0aGlzLnBhcnRsaXN0LlN0YXR1c0thcHBlczsKICAgICAgdGhpcy5hY3RwYXJ0bGlzdChiYXJjb2RlKTsKICAgICAgdGhpcy5mb2N1c2JhcmNvZGUoKTsKICAgIH0sCgogICAgb25TZWFyY2gocGFyYW1zKSB7CiAgICAgIHRoaXMuc2VhcmNoaW5nID0gdHJ1ZTsgLy8gY29uc29sZS5sb2coJ29uU2VhcmNoOicsIHBhcmFtcykKCiAgICAgIGlmIChwYXJhbXMpIHsKICAgICAgICB0aGlzLmFjdHBhcnRsaXN0KHBhcmFtcyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5hY3RwYXJ0bGlzdCh0aGlzLmFwaXBlc3F1aXNhKTsKICAgICAgfQogICAgfQoKICB9LAogIHdhdGNoOiB7CiAgICBjdXJyZW50UGFnZShwYWdlKSB7CiAgICAgIHRoaXMucGFydGxpc3QuYmFyY29kZSA9IHRoaXMuYmFyY29kZXNbcGFnZSAtIDFdOwogICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBwZXNxdWlzYTogdGhpcy5wYXJ0bGlzdC5iYXJjb2RlCiAgICAgICAgfQogICAgICB9OwogICAgICB0aGlzLm9uU2VhcmNoKHBhcmFtcyk7CiAgICB9LAoKICAgIGd0eHBhcnRsaXN0cmVzcG9uc2UoZGF0YSkgewogICAgICAvLyBjb25zb2xlLmxvZygnZ3R4cGFydGxpc3RyZXNwb25zZTonLCBkYXRhKQogICAgICBpZiAoZGF0YS5TdWNjZXNzID09ICdGYWxzZScpIHsKICAgICAgICB0aGlzLmFjdEFsZXJ0KHsKICAgICAgICAgIHZhcmlhbnQ6ICdkYW5nZXInLAogICAgICAgICAgbWVzc2FnZTogZGF0YS5FcnJvciB8fCAnT2NvcmV1IHVtIGVycm8gbmEgZXhlY3XDp8OjbyEnCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gc2UgbsOjbyB0ZW0gc3RhdHVzIHNhbHZvLCBzYWx2YSBuYSBwcmltZWlyYSBjb25zdWx0YQogICAgICAgIC8vIGNvbnNvbGUubG9nKCdndHhwYXJ0bGlzdGRhdGE6JywgdGhpcy5ndHhwYXJ0bGlzdGRhdGEpCiAgICAgICAgaWYgKHRoaXMuZ3R4cGFydGxpc3RkYXRhLlN0YXR1c0thcHBlcyA9PSAtMSkgdGhpcy5vblNhdmUoKTsKICAgICAgICB0aGlzLnBhcnRsaXN0LmJhcmNvZGUgPSAnJzsKICAgICAgfQoKICAgICAgdGhpcy5zZWFyY2hpbmcgPSBmYWxzZTsKICAgIH0sCgogICAgZ3R4cGFydGxpc3R1cGRhdGUodXBkYXRlKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdwYXJ0bGlzdC53YXRjaC5ndHhwYXJ0bGlzdHVwZGF0ZTonLCB1cGRhdGUpCiAgICAgIGlmICh1cGRhdGUuU3VjY2VzcyA9PSAnVHJ1ZScpIHsKICAgICAgICB0aGlzLmFjdEFsZXJ0KHsKICAgICAgICAgIHZhcmlhbnQ6ICdzdWNjZXNzJywKICAgICAgICAgIG1lc3NhZ2U6IHVwZGF0ZS5EYXRhWzBdLk1lbnNhZ2VtCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB0aGlzLmFjdEFsZXJ0KHsKICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywKICAgICAgICBtZXNzYWdlOiB1cGRhdGUuRGF0YVswXS5FcnJvcgogICAgICB9KTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;AACA;AACA;EAEAA,gBAFA;;EAIAC;IAEA;MAEAC,gBAFA;MAGAC,cAHA;MAIAC,iBAJA;MAMAC;QACAC,WADA;QAEAC,eAFA,CAEA;;MAFA,CANA;MAWAC;QACAD,eADA,CACA;;MADA;IAXA;EAiBA,CAvBA;;EAyBAE;IAEA;IAEA;IAEA,gEANA,CAQA;;IAEA;MACAC;QAAAH;MAAA;IACA,CAFA,MAEA;MACA,yCACAG;QAAAH;MAAA;IACA;;IAEA;IACA;EAEA,CA7CA;;EA+CAI,YAEA,eACA,yBADA,EAEA,qBAFA,EAGA,iBAHA,EAIA,aAJA,EAKA,mBALA,EAMA,oBANA,EAFA;;IAWA;IACAC;MAEA;QACAL;MADA;IAIA,CAlBA;;IAoBAM;MAEA;MAEA;IAEA,CA1BA;;IA4BAP;MAEA;IACA,CA/BA;;IAiCAQ;MAEA;IAEA,CArCA;;IAuCAC;MACA;MACA;IACA,CA1CA;;IA4CAC;MACA;MACA;IACA,CA/CA;;IAiDAC;MAEA;QAAAX;QAAAC;MAAA;IAEA,CArDA;;IAuDAW;MAEA;QAAAC;UAAAC;UAAAb;QAAA;MAAA;IAEA,CA3DA;;IA6DAc;MAEA;QACAC,SADA;QAEAhB,WAFA;QAGAC,gBAHA;QAIAgB,cAJA;QAKAC,cALA;QAMAC,UANA;QAOAC,YAPA;QAQAC;MARA;MAWA,8BACA,gDACA1B;MAEA;MACAA;MACAA;MAEA;IAEA;;EApFA,CA/CA;EAuIA2B,WAEA,0FAFA;;IAIAC;MAEA;IAEA,CARA;;IAUAC;MAEA;QACAX;UACAC;QADA;MADA,EAFA,CAQA;;MAEA,uCAVA,CAYA;;MACAW;MAEA;MAEA;MAEA;IACA,CA9BA;;IAgCAC;MAEA,sBAFA,CAIA;;MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA;IAEA;;EA5CA,CAvIA;EAuLAC;IAEA9B;MAEA;MAEA;QACAgB;UACAC;QADA;MADA;MAMA;IAEA,CAdA;;IAgBAc;MAEA;MAEA;QACA;UAAAC;UAAAC;QAAA;MACA,CAFA,MAEA;QACA;QACA;QACA;QACA;MACA;;MAEA;IAEA,CA/BA;;IAiCAC;MAEA;MAEA;QACA;UAAAF;UAAAC;QAAA;MACA,CAFA,MAGA;QAAAD;QAAAC;MAAA;IACA;;EAzCA;AAvLA","names":["name","data","searching","currentPage","apiresponse","partlist","barcode","StatusKappes","lastupdate","mounted","localstatus","computed","storepage","barcodes","canupdate","btnSaveVariant","StatusKappesSelected","apiupdate","apipesquisa","params","pesquisa","apidata","Ficha","referencia","Comprimento","Largura","Espessura","Quantidade","methods","focusbarcode","onSave","localstore","onSearch","watch","gtxpartlistresponse","variant","message","gtxpartlistupdate"],"sourceRoot":"src/pages/producaoidelli/views","sources":["partlist.vue"],"sourcesContent":["<template>\r\n    <div class=\"m-2\">\r\n\r\n        <b-card>\r\n\r\n        <b-form-group\r\n            label=\"Código de barra da peça\"\r\n            label-for=\"barcode\">\r\n            <b-input-group>\r\n                <b-form-input\r\n                    id=\"barcode\"\r\n                    ref=\"barcode\"\r\n                    type=\"number\"\r\n                    placeholder=\"Informe o código de barras da peça - PartList\"\r\n                    v-model=\"partlist.barcode\"\r\n                    min=\"000000000000000\"\r\n                    max=\"999999999999999\"\r\n                    @keydown.enter=\"onSearch()\">\r\n                </b-form-input>\r\n                <b-input-group-append>\r\n                    <b-button variant=\"primary\" @click=\"onSearch()\" :disabled=\"partlist.barcode==''\">Buscar</b-button>\r\n                </b-input-group-append>\r\n            </b-input-group>\r\n\r\n        </b-form-group>\r\n\r\n        <b-overlay :show=\"gtxpartlistloading\" rounded=\"sm\">\r\n        <div class=\"bg-dark text-warning rounded p-2 mb-2\">\r\n            <div>\r\n                <strong>Barcode:</strong>\r\n                <span class=\"ml-2\">{{apidata.barcode}}</span>\r\n            </div>\r\n            <div>\r\n                <strong>Produto:</strong>\r\n                <span class=\"ml-2\">{{apidata.Ficha}} - {{apidata.referencia}}</span>\r\n            </div>\r\n            <div>\r\n                <strong>Medidas:</strong>\r\n                <span class=\"ml-2\">({{apidata.Comprimento}} x {{apidata.Largura}} x {{apidata.Espessura}})</span>\r\n            </div>\r\n            <div>\r\n                <strong>Status:</strong>\r\n                <span class=\"ml-2\">{{apidata.StatusKappesText}}</span>\r\n            </div>\r\n<!--\r\n            <div class=\"mt-2\">\r\n                <b-pagination\r\n                    v-if=\"barcodes.length>-1\"\r\n                    size=\"sm\"\r\n                    v-model=\"currentPage\"\r\n                    :total-rows=\"barcodes.length\"\r\n                    :per-page=\"1\"\r\n                    first-number\r\n                    last-number/>\r\n            </div>\r\n-->            \r\n        </div>\r\n        </b-overlay>\r\n\r\n        <b-form-group\r\n            label=\"Status da peça\"\r\n            label-for=\"statuskappes\">\r\n            <b-form-select id=\"statuskappes\" v-model=\"partlist.StatusKappes\" :options=\"gtxpartlistStatusKappes\"></b-form-select>\r\n        </b-form-group>\r\n        \r\n        <b-form-group\r\n            label-for=\"btnsalvar\" class=\"mt-4\">\r\n            <b-button block id=\"btnsalvar\" @click=\"onSave\" :variant=\"apidata.btnVariant\" :disabled=\"!canupdate\">Salvar como {{ StatusKappesSelected }}</b-button>\r\n        </b-form-group>\r\n\r\n<!--\r\n        <div class=\"accordion\" role=\"tablist\">\r\n            <b-card no-body class=\"mb-1\">\r\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                    <b-button block v-b-toggle.apidata variant=\"info\">apidata</b-button>\r\n                </b-card-header>\r\n                <b-collapse id=\"apidata\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                    <b-card-body>\r\n                    <pre>\r\n                        {{ apidata }}\r\n                    </pre>\r\n                    </b-card-body>\r\n                </b-collapse>\r\n            </b-card>\r\n            <b-card no-body class=\"mb-1\">\r\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                    <b-button block v-b-toggle.barcodes variant=\"info\">barcodes</b-button>\r\n                </b-card-header>\r\n                <b-collapse id=\"barcodes\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                    <b-card-body>\r\n                    <pre>\r\n                        {{ barcodes }}\r\n                    </pre>\r\n                    </b-card-body>\r\n                </b-collapse>\r\n            </b-card>\r\n        </div>\r\n-->        \r\n        </b-card>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport localstore from '../../../services/localstore'\r\nimport { mapActions, mapGetters } from 'vuex'\r\nexport default {\r\n    \r\n    name: 'PartList',\r\n\r\n    data() {\r\n\r\n        return {\r\n\r\n            searching: false,\r\n            currentPage: 1,\r\n            apiresponse: null,\r\n\r\n            partlist: {\r\n                barcode: '',\r\n                StatusKappes: 1 // pegar do localstore\r\n            },\r\n\r\n            lastupdate: {\r\n                StatusKappes: 1 // pegar do localstore\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n\r\n    mounted() {\r\n\r\n        this.actpartlistStatusKappes()\r\n\r\n        this.focusbarcode()\r\n\r\n        let localstatus = localstore.getUserStorePageByName('partlist')\r\n\r\n        // console.log('partlist.mounted.localstatus:', localstatus)\r\n\r\n        if (!localstatus) {\r\n            localstatus.data = {StatusKappes: 1}\r\n        } else {\r\n            if (!localstatus.hasOwnProperty('data'))\r\n                localstatus.data = {StatusKappes: 1}\r\n        }\r\n\r\n        this.partlist.StatusKappes = localstatus.data.StatusKappes || 1\r\n        this.lastupdate.StatusKappes = this.partlist.StatusKappes\r\n\r\n    },\r\n\r\n    computed: {\r\n        \r\n        ...mapGetters([\r\n            'gtxpartlistStatusKappes',\r\n            'gtxpartlistresponse',\r\n            'gtxpartlistdata',\r\n            'gtxpartlist',\r\n            'gtxpartlistupdate',\r\n            'gtxpartlistloading'\r\n        ]),\r\n\r\n        // contém os dados de configuração da página ...\r\n        storepage() {\r\n\r\n            return {\r\n                StatusKappes: this.partlist.StatusKappes\r\n            }\r\n\r\n        },\r\n\r\n        barcodes() {\r\n\r\n            const bars = this.apidata.SequenciaProducao\r\n\r\n            return (bars) ? bars.map(b => b.barcode) : []\r\n\r\n        },\r\n\r\n        barcode() {\r\n\r\n            return this.partlist.barcode\r\n        },\r\n\r\n        canupdate() {\r\n\r\n            return (this.apiupdate.barcode !=='' && this.apiupdate.StatusKappes > 0) ? true : false\r\n\r\n        },\r\n\r\n        btnSaveVariant() {\r\n            let state = (this.apidata.StatusKappes) ? this.apidata.StatusKappes == lastupdate.StatusKappes  : false\r\n            return (state) ? 'primary' : 'danger'\r\n        },\r\n\r\n        StatusKappesSelected() {\r\n            const parlistselected = this.gtxpartlistStatusKappes.find(f => f.value == this.partlist.StatusKappes)\r\n            return parlistselected ? parlistselected.text : ''\r\n        },\r\n\r\n        apiupdate() {\r\n\r\n            return {barcode: this.apidata.barcode || '', StatusKappes: parseInt(this.partlist.StatusKappes) || 1}\r\n\r\n        },\r\n\r\n        apipesquisa() {\r\n\r\n            return { params: {pesquisa: this.partlist.barcode || '', StatusKappes: parseInt(this.partlist.StatusKappes) || 1}}\r\n\r\n        },\r\n\r\n        apidata() {\r\n\r\n            let data = {\r\n                Ficha: '',\r\n                barcode: '',\r\n                StatusKappes: -1,\r\n                referencia: '',\r\n                Comprimento: 0,\r\n                Largura: 0,\r\n                Espessura: 0,\r\n                Quantidade: 0\r\n            }\r\n\r\n            if (this.gtxpartlistresponse)\r\n            if (this.gtxpartlistresponse.Success == 'True')\r\n                data = this.gtxpartlistresponse.Data[0]\r\n\r\n            let status = this.gtxpartlistStatusKappes.find(f => f.value == data.StatusKappes)\r\n            data.StatusKappesText = (status) ? status.text : 'Não definido'\r\n            data.btnVariant = (status) ? (status.value == this.partlist.StatusKappes) ? 'primary' : 'danger' : 'primary'\r\n\r\n            return data\r\n\r\n        }\r\n\r\n    },\r\n\r\n    methods: {\r\n\r\n        ...mapActions(['actAlert', 'actpartlistStatusKappes', 'actpartlist', 'actpartlistupdate']),\r\n\r\n        focusbarcode() {\r\n\r\n            this.$refs.barcode.focus()\r\n\r\n        },\r\n\r\n        onSave() {\r\n\r\n            const barcode = {\r\n                params: {\r\n                        pesquisa: this.apidata.barcode\r\n                    }\r\n                }\r\n\r\n            // console.log('onSave:', barcode)\r\n\r\n            this.actpartlistupdate(this.apiupdate)\r\n\r\n            // salva a configuração da página no localStorage\r\n            localstore.setUserStorePageData('partlist', this.storepage)\r\n            \r\n            this.lastupdate.StatusKappes = this.partlist.StatusKappes\r\n\r\n            this.actpartlist(barcode)\r\n\r\n            this.focusbarcode()\r\n        },\r\n\r\n        onSearch(params) {\r\n\r\n            this.searching = true\r\n\r\n            // console.log('onSearch:', params)\r\n\r\n            if (params) {\r\n                this.actpartlist(params)\r\n            } else {\r\n                this.actpartlist(this.apipesquisa)\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n\r\n    watch: {\r\n\r\n        currentPage(page) {\r\n\r\n            this.partlist.barcode = this.barcodes[page-1]\r\n\r\n            const params = {\r\n                params: {\r\n                    pesquisa: this.partlist.barcode\r\n                }\r\n            }\r\n\r\n            this.onSearch(params)\r\n\r\n        },\r\n\r\n        gtxpartlistresponse(data) {\r\n\r\n            // console.log('gtxpartlistresponse:', data)\r\n\r\n            if (data.Success == 'False') {\r\n                this.actAlert({variant: 'danger', message: data.Error || 'Ocoreu um erro na execução!'})\r\n            } else {\r\n                // se não tem status salvo, salva na primeira consulta\r\n                // console.log('gtxpartlistdata:', this.gtxpartlistdata)\r\n                if (this.gtxpartlistdata.StatusKappes==-1) this.onSave()\r\n                this.partlist.barcode = ''\r\n            }\r\n\r\n            this.searching = false\r\n\r\n        },\r\n\r\n        gtxpartlistupdate(update) {\r\n\r\n            // console.log('partlist.watch.gtxpartlistupdate:', update)\r\n\r\n            if (update.Success == 'True') {\r\n                this.actAlert({variant: 'success', message: update.Data[0].Mensagem})\r\n            } else\r\n                this.actAlert({variant: 'danger', message: update.Data[0].Error})\r\n        }\r\n\r\n    }\r\n\r\n}\r\n</script>\r\n<style>\r\n    \r\n</style>"]}]}