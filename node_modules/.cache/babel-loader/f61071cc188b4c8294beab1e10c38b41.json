{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\nfe\\views\\nfe.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\nfe\\views\\nfe.vue","mtime":1701906516501},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IEFQSSBmcm9tICIuLi8uLi8uLi9zZXJ2aWNlcy9hcGkuc2VydmljZSI7CmltcG9ydCBBbG1veGFyaWZhZG9Nb3ZpbWVudGFjb2VzIGZyb20gIi4uLy4uL2FsbW94YXJpZmFkby92aWV3cy9BbG1veGFyaWZhZG9Nb3ZpbWVudGFjb2VzIjsKaW1wb3J0IENhcmRDb2xsYXBzZWQgZnJvbSAiLi4vLi4vLi4vY29tcG9uZW50cy9DYXJkQ29sbGFwc2VkLnZ1ZSI7CmltcG9ydCBTZWFyY2hBcGkgZnJvbSAiLi4vLi4vLi4vY29tcG9uZW50cy9TZWFyY2hBcGkudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJOZmUiLAogIGNvbXBvbmVudHM6IHsKICAgIEFsbW94YXJpZmFkb01vdmltZW50YWNvZXMsCiAgICBDYXJkQ29sbGFwc2VkLAogICAgU2VhcmNoQXBpCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXRlbnNzZWFyY2g6IHsKICAgICAgICB2YWx1ZTogIiIsCiAgICAgICAgdGV4dDogIiIKICAgICAgfSwKICAgICAgY29sbGFwc2Vmb3Jtb3BlbjogZmFsc2UsCiAgICAgIGl0ZW5zYWxtb3g6IG51bGwsCiAgICAgIGVtcHJlc2E6IHRoaXMuZ3R4Q29uZmlnUGFyZW1wIHx8IDgsCiAgICAgIGRlcG9zaXRvOiBudWxsLAogICAgICBkYXRhYmFzZTogbmV3IERhdGUobmV3IERhdGUoKS5zZXREYXRlKG5ldyBEYXRlKCkuZ2V0RGF0ZSgpIC0gMikpLAogICAgICBudW1lcm86IG51bGwsCiAgICAgIHNlcmllOiBudWxsLAogICAgICBjb2RpZ29fZm9ybmVjOiBudWxsLAogICAgICBub21lZm9ybmVjOiBudWxsLAogICAgICBjaGF2ZWFjZXNzbzogbnVsbCwKICAgICAgY29kaWdvX25hdHVyZXphOiBudWxsLAogICAgICBwYXJlbXBfZGVwb3NpdG9zOiBbXSwKICAgICAgbW92aW1lbnRvOiB7CiAgICAgICAgRW1wcmVzYTogbnVsbCwKICAgICAgICBEZXBvc2l0bzogbnVsbCwKICAgICAgICBJdGVtOiAiIiwKICAgICAgICBCb3g6IDAsCiAgICAgICAgTml2ZWw6IDEsCiAgICAgICAgRW50cmFkYXM6IDEsCiAgICAgICAgU2FpZGFzOiAyLAogICAgICAgIFNhbGRvOiAzLAogICAgICAgIFF0ZGVTb2xpY2l0YWRhOiA0LAogICAgICAgIExvdGU6IDUsCiAgICAgICAgVGlwbzogIk5GRSIsCiAgICAgICAgUXRkZTogNiwKICAgICAgICBEZXNjcmljYW86ICIiLAogICAgICAgIERhdGFNb3ZpbWVudG86IG5ldyBEYXRlKCksCiAgICAgICAgaWRJdE5GRTogbnVsbAogICAgICB9LAogICAgICBuZmU6IHsKICAgICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgICBwZXJQYWdlOiAyMCwKICAgICAgICBmaWx0ZXI6ICIiLAogICAgICAgIGZpbHRlck9uOiBbIm51bWVybyIsICJGb3JuZWNlZG9yIiwgIlZhbG9yIl0sCiAgICAgICAgZmllbGRzOiBbewogICAgICAgICAga2V5OiAibnVtZXJvIiwKICAgICAgICAgIGxhYmVsOiAiTm90YS9Tw6lyaWUiCiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAiZGF0YV9lbWlzc2FvIiwKICAgICAgICAgIGxhYmVsOiAiRW1pc3PDo28iCiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAiZGF0YV9lbnRyYWRhIiwKICAgICAgICAgIGxhYmVsOiAiRW50cmFkYSIKICAgICAgICB9LCAiZm9ybmVjZWRvciIsIHsKICAgICAgICAgIGtleTogIm5pdGVucyIsCiAgICAgICAgICBsYWJlbDogIlByb2QiCiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAicXRkZV9ub3RhIiwKICAgICAgICAgIGxhYmVsOiAiUXRkZSIKICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICJxdGRlX2FsbW94IiwKICAgICAgICAgIGxhYmVsOiAiTGN0byIKICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICJxdGRlX3NhbGRvIiwKICAgICAgICAgIGxhYmVsOiAiU2FsZG8iCiAgICAgICAgfSwgImFjdGlvbnMiXSwKICAgICAgICBkYXRhOiBbXSwKICAgICAgICBpdGVuczogewogICAgICAgICAgZmllbGRzOiBbIml0ZW0iLCB7CiAgICAgICAgICAgIGtleTogImRlc2NyaWNhbyIsCiAgICAgICAgICAgIGxhYmVsOiAiRGVzY3Jpw6fDo28iCiAgICAgICAgICB9LCAidW4iLCB7CiAgICAgICAgICAgIGtleTogInF0ZGVfbm90YSIsCiAgICAgICAgICAgIGxhYmVsOiAiUXRkZSIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAga2V5OiAicXRkZV9hbG1veCIsCiAgICAgICAgICAgIGxhYmVsOiAiTGN0byIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAga2V5OiAic2FsZG9fbm90YSIsCiAgICAgICAgICAgIGxhYmVsOiAiU2FsZG8iCiAgICAgICAgICB9LCAiY3ViYWdlbSIsICJhY3Rpb25zIl0KICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfSwKICBiZWZvcmVNb3VudCgpIHsKICAgIHRoaXMuYnVzY2FQYXJlbXBEZXBvc2l0bygpOwogICAgQVBJLmdldExvY2FsREJEb2N1bWVudCgibmZlIikudGhlbihkb2MgPT4gewogICAgICBpZiAoZG9jKSB7CiAgICAgICAgdGhpcy5lbXByZXNhID0gZG9jLmRhdGEuZW1wcmVzYSB8fCBbXTsKICAgICAgICB0aGlzLmRlcG9zaXRvID0gZG9jLmRhdGEuZGVwb3NpdG87CiAgICAgICAgdGhpcy5kYXRhYmFzZSA9IGRvYy5kYXRhLmRhdGFiYXNlOwogICAgICAgIHRoaXMubnVtZXJvID0gZG9jLmRhdGEubnVtZXJvOwogICAgICAgIHRoaXMuc2VyaWUgPSBkb2MuZGF0YS5zZXJpZTsKICAgICAgICB0aGlzLm5vbWVmb3JuZWMgPSBkb2MuZGF0YS5ub21lZm9ybmVjOwogICAgICAgIHRoaXMuY29kaWdvX25hdHVyZXphID0gZG9jLmRhdGEuY29kaWdvX25hdHVyZXphOwogICAgICAgIHRoaXMuYnVzY2FuZmUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmJ1c2NhbmZlKCk7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWyJzeXNkZXZtb2RlIiwgImd0eENvbmZpZ0RhdGV0aW1lUGlja2VyRm9ybWF0IiwgImd0eFBhcmVtcEVtcHJlc2FTZWxlY2lvbmFkYSIsICJndHhQYXJlbXBEYXRhRGVwb3NpdG9zIiwgImd0eENvbmZpZ1BhcmVtcCJdKSwKICAgIHBhcmFtcygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBlbXByZXNhOiB0aGlzLmd0eENvbmZpZ1BhcmVtcCwKICAgICAgICBkZXBvc2l0bzogdGhpcy5kZXBvc2l0bywKICAgICAgICBkYXRhYmFzZTogdGhpcy5kYXRhYmFzZSwKICAgICAgICBudW1lcm86IHRoaXMubnVtZXJvLAogICAgICAgIHNlcmllOiB0aGlzLnNlcmllLAogICAgICAgIGNvZGlnb19mb3JuZWM6IHRoaXMuY29kaWdvX2Zvcm5lYywKICAgICAgICBub21lZm9ybmVjOiB0aGlzLm5vbWVmb3JuZWMsCiAgICAgICAgY2hhdmVhY2Vzc286IHRoaXMuY2hhdmVhY2Vzc28sCiAgICAgICAgY29kaWdvX25hdHVyZXphOiB0aGlzLmNvZGlnb19uYXR1cmV6YQogICAgICB9OwogICAgfSwKICAgIHZtb3ZpbWVudGFyKCkgewogICAgICByZXR1cm4gdGhpcy5tb3ZpbWVudG8uRW1wcmVzYSA+IDAgJiYgdGhpcy5tb3ZpbWVudG8uRGVwb3NpdG8gPiAwICYmIHRoaXMubW92aW1lbnRvLkJveCA+IDAgJiYgdGhpcy5tb3ZpbWVudG8uTml2ZWwgPiAwICYmIHRoaXMubW92aW1lbnRvLkl0ZW0gIT09ICIiICYmIHRoaXMubW92aW1lbnRvLlF0ZGUgPiAwOwogICAgfSwKICAgIHRibF9uZmUoKSB7CiAgICAgIHJldHVybiB0aGlzLm5mZS5kYXRhLm1hcChtID0+ICh7CiAgICAgICAgLi4ubSwKICAgICAgICBuaXRlbnM6IG0uaXRlbnMubGVuZ3RoLAogICAgICAgIHF0ZGVfbm90YTogdGhpcy5zb21hKG0uaXRlbnMsICJxdGRlX25vdGEiKSwKICAgICAgICBxdGRlX2FsbW94OiB0aGlzLnNvbWEobS5pdGVucywgInF0ZGVfYWxtb3giKSwKICAgICAgICBxdGRlX3NhbGRvOiB0aGlzLnNvbWEobS5pdGVucywgInNhbGRvX25vdGEiKSwKICAgICAgICBfcm93VmFyaWFudDogdGhpcy5zb21hKG0uaXRlbnMsICJxdGRlX25vdGEiKSA9PSAwID8gInN1Y2Nlc3MiIDogdGhpcy5zb21hKG0uaXRlbnMsICJzYWxkb19ub3RhIikgPCB0aGlzLnNvbWEobS5pdGVucywgInF0ZGVfbm90YSIpID8gIndhcm5pbmciIDogIiIKICAgICAgfSkpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy9maW5kcyBhIHNwZWNpZmljIGl0ZW0gYmFzZWQgb24gdGhlIHByb3ZpZGVkIElEIGFuZCB0b2dnbGVzIGRldGFpbHMgb24gdGhhdCBpdGVtCiAgICB0b2dnbGVEZXRhaWxzKHJvdykgewogICAgICBpZiAocm93Ll9zaG93RGV0YWlscykgewogICAgICAgIHRoaXMuJHNldChyb3csICJfc2hvd0RldGFpbHMiLCBmYWxzZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jdXJyZW50SXRlbXMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgIHRoaXMuJHNldChpdGVtLCAiX3Nob3dEZXRhaWxzIiwgZmFsc2UpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHRoaXMuJHNldChyb3csICJfc2hvd0RldGFpbHMiLCB0cnVlKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGJ1c2NhbmZlKCkgewogICAgICBBUEkuZ2V0KCJ2Mi9TZXJ2aWNvcy9ORkUvR2V0IiwgdGhpcy5wYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZygiYnVzY2FuZmUiLCByZXMuZGF0YSk7CiAgICAgICAgaWYgKHJlcy5kYXRhLlN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMubmZlLmRhdGEgPSByZXMuZGF0YS5EYXRhOwogICAgICAgICAgdGhpcy5jb2xsYXBzZWZvcm1vcGVuID0gZmFsc2U7CiAgICAgICAgICBBUEkuc2V0TG9jYWxEQkRvY3VtZW50KHsKICAgICAgICAgICAgZGF0YTogdGhpcy4kZGF0YQogICAgICAgICAgfSwgIm5mZSIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm5mZS5kYXRhID0gW107CiAgICAgICAgICB0aGlzLmNvbGxhcHNlZm9ybW9wZW4gPSB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYnVzY2FQYXJlbXBEZXBvc2l0bygpIHsKICAgICAgQVBJLnBvc3QoInYyL1NlcnZpY29zL1BhcmVtcERlcG9zaXRvcy9HZXQiLCB0aGlzLnBhcmFtcykudGhlbihhcGkgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGFwaSk7CiAgICAgICAgaWYgKGFwaS5kYXRhLlN1Y2Nlc3MgPT0gIlRydWUiIHx8IGFwaS5kYXRhLlN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMucGFyZW1wX2RlcG9zaXRvcyA9IGFwaS5kYXRhLkRhdGE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMucGFyZW1wX2RlcG9zaXRvcyA9IFtdOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc29tYShhcnJheSwgY2FtcG8pIHsKICAgICAgcmV0dXJuIGFycmF5LnJlZHVjZSgoYSwgYikgPT4gYSArIGJbY2FtcG9dLCAwKTsKICAgIH0sCiAgICByb3dWYXJpYW50U2FsZG8ocXRkZV9ub3RhLCBzYWxkb19ub3RhKSB7CiAgICAgIGlmIChzYWxkb19ub3RhID09IDApIHJldHVybiAic3VjY2VzcyI7CiAgICAgIC8vIGlmIChzYWxkb19ub3RhID09IHF0ZGVfbm90YSkgcmV0dXJuICJkYW5nZXIiOwogICAgICBpZiAoc2FsZG9fbm90YSA8IHF0ZGVfbm90YSkgcmV0dXJuICJ3YXJuaW5nIjsKICAgIH0sCiAgICBvblN0b2NrQ2xpY2soaXRlbSkgewogICAgICB0aGlzLml0ZW5zYWxtb3ggPSBpdGVtOwogICAgICB0aGlzLiRyZWZzWyJtb2RhbC1tYXRlcmlhaXNTdG9jayJdLnNob3coKTsKCiAgICAgIC8vIHRoaXMuJHJlZnNbIkFsbW94YXJpZmFkb01vdmltZW50YWNvZXMiXS5idXNjYWluZGl2aWR1YWwoKTsKICAgIH0sCgogICAgTW92aW1lbnRhcnNob3duKGRhdGEpIHsKICAgICAgdGhpcy5pdGVuc3NlYXJjaCA9IHsKICAgICAgICB2YWx1ZTogZGF0YS5pdGVtLAogICAgICAgIHRleHQ6IGRhdGEuaXRlbQogICAgICB9OwogICAgICB0aGlzLm1vdmltZW50by5FbXByZXNhID0gdGhpcy5lbXByZXNhOwogICAgICB0aGlzLm1vdmltZW50by5EZXBvc2l0byA9IDM3OyAvLyBUT0RPIHBlZ2FyIGRvIHBhZHLDo28KICAgICAgdGhpcy5tb3ZpbWVudG8uQm94ID0gMDsKICAgICAgdGhpcy5tb3ZpbWVudG8uTml2ZWwgPSAxOwogICAgICB0aGlzLm1vdmltZW50by5JdGVtID0gZGF0YS5pdGVtOwogICAgICB0aGlzLm1vdmltZW50by5EZXNjcmljYW8gPSBkYXRhLmRlc2NyaWNhbzsKICAgICAgdGhpcy5tb3ZpbWVudG8uRGF0YU1vdmltZW50byA9IG5ldyBEYXRlKCk7CiAgICAgIHRoaXMubW92aW1lbnRvLlF0ZGUgPSBkYXRhLnNhbGRvX25vdGE7CiAgICAgIHRoaXMubW92aW1lbnRvLkxvdGUgPSBkYXRhLmlkbmZlOwogICAgICB0aGlzLm1vdmltZW50by5UaXBvID0gIk5GRSI7CiAgICAgIC8vIHRoaXMubW92aW1lbnRvLmlkSXRORkUgPSBkYXRhLmlkOwoKICAgICAgdGhpcy4kcmVmc1sibW9kYWwtTW92aW1lbnRhciJdLnNob3coKTsKICAgIH0sCiAgICBtb3ZpbWVudGFyKCkgewogICAgICBBUEkucG9zdCgidjIvUHJvZHVjYW8vQWxtb3hhcmlmYWRvX01vdmltZW50YWNvZXMvVXBkYXRlIiwgdGhpcy5tb3ZpbWVudG8pLnRoZW4oYXBpZGF0YSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coIm1vdmltZW50YXIuYXBpZGF0YToiLCBhcGlkYXRhKTsKICAgICAgICBpZiAoYXBpZGF0YS5kYXRhLlN1Y2Nlc3MpIHsKICAgICAgICAgIGNvbnN0IHJlcyA9IEFQSS5wcmVwYXJlRGF0YShhcGlkYXRhLmRhdGEpOwogICAgICAgICAgY29uc29sZS5sb2coImF0dWFsaXphLnJlczoiLCByZXMpOwogICAgICAgICAgY29uc3QgbmZlID0gdGhpcy5uZmUuZGF0YS5maW5kKGYgPT4gZi5pZCA9PSByZXMuZGF0YS5Eb2N1bWVudG8pOwogICAgICAgICAgaWYgKG5mZSkgewogICAgICAgICAgICBjb25zdCBpdGVtID0gbmZlLml0ZW5zLmZpbmQoZiA9PiBmLml0ZW0gPT0gcmVzLmRhdGEuSXRlbSk7CiAgICAgICAgICAgIGlmIChpdGVtKSB7CiAgICAgICAgICAgICAgaXRlbS5xdGRlX2FsbW94ICs9IHJlcy5kYXRhLlF0ZGU7CiAgICAgICAgICAgICAgaXRlbS5zYWxkb19ub3RhIC09IHJlcy5kYXRhLlF0ZGU7CiAgICAgICAgICAgICAgbmZlLl9zaG93RGV0YWlscyA9IHRydWU7CiAgICAgICAgICAgICAgaXRlbS5fcm93VmFyaWFudCA9IGl0ZW0ucXRkZV9ub3RhID09IDAgPyAic3VjY2VzcyIgOiBpdGVtLnNhbGRvX25vdGEgPCBpdGVtLnF0ZGVfbm90YSA/ICJ3YXJuaW5nIiA6ICIiOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHJvb3QudG9hc3RkYW5nZXIoYXBpZGF0YS5kYXRhLkVycm9yKTsKICAgICAgICB9CiAgICAgICAgdGhpcy4kcmVmc1sibW9kYWwtTW92aW1lbnRhciJdLmhpZGUoKTsKICAgICAgICAvLyB0aGlzLnRvZ2dsZURldGFpbHMoaXRlbSk7CiAgICAgIH0pOwogICAgfSwKCiAgICBBbG1veGFyaWZhZG9Nb3ZpbWVudGFjb2Vzc2hvd24oKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJBbG1veGFyaWZhZG9Nb3ZpbWVudGFjb2Vzc2hvd24iLCB0aGlzLml0ZW5zYWxtb3gpOwogICAgICB0aGlzLiRyZWZzLkFsbW94YXJpZmFkb01vdmltZW50YWNvZXMuZW1wcmVzYSA9IDg7CiAgICAgIHRoaXMuJHJlZnMuQWxtb3hhcmlmYWRvTW92aW1lbnRhY29lcy5kZXBvc2l0byA9IDM3OwogICAgICB0aGlzLiRyZWZzLkFsbW94YXJpZmFkb01vdmltZW50YWNvZXMuYm94ID0gMDsKICAgICAgdGhpcy4kcmVmcy5BbG1veGFyaWZhZG9Nb3ZpbWVudGFjb2VzLm5pdmVsID0gMDsKICAgICAgdGhpcy4kcmVmcy5BbG1veGFyaWZhZG9Nb3ZpbWVudGFjb2VzLml0ZW5zID0gW3RoaXMuaXRlbnNhbG1veC5pdGVtXTsKICAgICAgdGhpcy4kcmVmcy5BbG1veGFyaWZhZG9Nb3ZpbWVudGFjb2VzLml0ZW5zcmVxID0gW3sKICAgICAgICBpdGVtOiB0aGlzLml0ZW5zYWxtb3guaXRlbSwKICAgICAgICBxdGRlOiB0aGlzLml0ZW5zYWxtb3guc2FsZG9fbm90YSwKICAgICAgICBsb3RlOiB0aGlzLml0ZW5zYWxtb3guaWRuZmUKICAgICAgfV07CiAgICAgIHRoaXMuJHJlZnMuQWxtb3hhcmlmYWRvTW92aW1lbnRhY29lcy5idXNjYSgpOwogICAgfSwKICAgIEFsbW94YXJpZmFkb01vdmltZW50YWNvZXNoaWRkZW4oKSB7CiAgICAgIC8vIHRoaXMuYnVzY2FuZmUoKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4TA;AACA;AACA;AACA;AACA;AAEA;EACAA;EAEAC;IACAC;IACAC;IACAC;EACA;EAEAC;IACA;MACAC;QAAAC;QAAAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC,SACA;UAAAC;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA,GACA,cACA;UAAAD;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA,GACA,UACA;QACAvC;QACAwC;UACAH,SACA,QACA;YAAAC;YAAAC;UAAA,GACA,MACA;YAAAD;YAAAC;UAAA,GACA;YAAAD;YAAAC;UAAA,GACA;YAAAD;YAAAC;UAAA,GACA,WACA;QAEA;MACA;IACA;EACA;EAEAE;IACA;IAEAC;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;QACA;MACA;IACA;EACA;EAEAC;IACA,eACA,cACA,iCACA,+BACA,0BACA,kBACA;IACAC;MACA;QACAtC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;IACA+B;MACA,OACA,8BACA,+BACA,0BACA,4BACA,8BACA;IAEA;IACAC;MACA;QACA;QACAC;QACAC;QACAC;QACAC;QACAC,aACA,uCACA,YACA,qEACA,YACA;MACA;IACA;EACA;EAEAC;IACA;IACAC;MACA;QACA;MACA;QACA;UACA;QACA;QAEA;UACA;QACA;MACA;IACA;IACAC;MACAZ;QACA;QACA;UACA;UACA;UACAA;YAAA1C;UAAA;QACA;UACA;UACA;QACA;MACA;IACA;IACAuD;MACAb;QACAc;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;MAEA;;MAEA;IACA;;IACAC;MACA;QAAA1D;QAAAC;MAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;IACA;IACA0D;MACAnB,SACA,iDACA,eACA;QACAc;QACA;UACA;UACAA;UAEA;UACA;YACA;YACA;cACAM;cACAA;cACA9B;cACA8B,mBACAA,sBACA,YACAA,mCACA,YACA;YACA;UACA;QACA;UACA;QACA;QACA;QACA;MACA;IACA;;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA,iDACA;QACAD;QACAE;QACAC;MACA,EACA;MAEA;IACA;IACAC;MACA;IAAA;EAEA;AACA","names":["name","components","AlmoxarifadoMovimentacoes","CardCollapsed","SearchApi","data","itenssearch","value","text","collapseformopen","itensalmox","empresa","deposito","database","numero","serie","codigo_fornec","nomefornec","chaveacesso","codigo_natureza","paremp_depositos","movimento","Empresa","Deposito","Item","Box","Nivel","Entradas","Saidas","Saldo","QtdeSolicitada","Lote","Tipo","Qtde","Descricao","DataMovimento","idItNFE","nfe","currentPage","perPage","filter","filterOn","fields","key","label","itens","beforeMount","API","computed","params","vmovimentar","tbl_nfe","nitens","qtde_nota","qtde_almox","qtde_saldo","_rowVariant","methods","toggleDetails","buscanfe","buscaParempDeposito","console","soma","rowVariantSaldo","onStockClick","Movimentarshown","movimentar","item","AlmoxarifadoMovimentacoesshown","qtde","lote","AlmoxarifadoMovimentacoeshidden"],"sourceRoot":"src/pages/nfe/views","sources":["nfe.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <CardCollapsed\r\n      ref=\"CardCollapsed\"\r\n      v-model=\"collapseformopen\"\r\n      title=\"Notas fiscais de entrada\"\r\n      @evtBusca=\"buscanfe\"\r\n    >\r\n      <template #collapsedform>\r\n        <div class=\"bg-light p-4\">\r\n          <b-row>\r\n            <b-col cols=\"12\" md=\"4\">\r\n              <b-form-group label=\"Depósito\" label-for=\"deposito\">\r\n                <b-form-select\r\n                  id=\"deposito\"\r\n                  v-model=\"deposito\"\r\n                  :options=\"paremp_depositos\"\r\n                ></b-form-select>\r\n              </b-form-group>\r\n            </b-col>\r\n            <b-col cols=\"12\" md=\"2\">\r\n              <b-form-group label=\"Data de Emissão\" label-for=\"form-database\">\r\n                <b-form-datepicker\r\n                  id=\"form-database\"\r\n                  v-model=\"database\"\r\n                  class=\"mb-2\"\r\n                  locale=\"pt\"\r\n                  size=\"sm\"\r\n                  :date-format-options=\"gtxConfigDatetimePickerFormat\"\r\n                ></b-form-datepicker>\r\n              </b-form-group>\r\n            </b-col>\r\n            <b-col cols=\"12\" md=\"2\">\r\n              <b-form-group label=\"Número Nota\" label-for=\"numero\">\r\n                <b-form-input\r\n                  id=\"numero\"\r\n                  type=\"number\"\r\n                  v-model=\"numero\"\r\n                ></b-form-input>\r\n              </b-form-group>\r\n            </b-col>\r\n            <b-col cols=\"12\" md=\"2\">\r\n              <b-form-group label=\"Série\" label-for=\"serie\">\r\n                <b-form-input\r\n                  id=\"serie\"\r\n                  type=\"number\"\r\n                  v-model=\"serie\"\r\n                ></b-form-input>\r\n              </b-form-group>\r\n            </b-col>\r\n            <b-col cols=\"12\" md=\"2\">\r\n              <b-form-group label=\"Natureza\" label-for=\"natureza\">\r\n                <b-form-input\r\n                  id=\"serie\"\r\n                  type=\"number\"\r\n                  v-model=\"codigo_natureza\"\r\n                ></b-form-input>\r\n              </b-form-group>\r\n            </b-col>\r\n          </b-row>\r\n          <b-row>\r\n            <b-col>\r\n              <b-form-group label=\"Nome Fornecedor\" label-for=\"nomefornec\">\r\n                <b-form-input\r\n                  id=\"nomefornec\"\r\n                  type=\"text\"\r\n                  v-model=\"nomefornec\"\r\n                ></b-form-input>\r\n              </b-form-group>\r\n            </b-col>\r\n          </b-row>\r\n          <b-row>\r\n            <b-col>\r\n              <b-form-group label=\"Chave DANFE\" label-for=\"chaveacesso\">\r\n                <b-form-input\r\n                  id=\"chaveacesso\"\r\n                  type=\"number\"\r\n                  v-model=\"chaveacesso\"\r\n                ></b-form-input>\r\n              </b-form-group>\r\n            </b-col>\r\n          </b-row>\r\n          <b-row>\r\n            <b-col class=\"text-right\">\r\n              <b-button variant=\"primary\" @click=\"buscanfe\">Buscar</b-button>\r\n            </b-col>\r\n          </b-row>\r\n          <!--\r\n        <b-row>\r\n          <b-col>\r\n            gtxParempEmpresaSelecionada: {{ gtxParempEmpresaSelecionada }}\r\n            <json-viewer\r\n                :value=\"gtxParempDataDepositos(gtxParempEmpresaSelecionada)\"\r\n                :expand-depth=\"5\"\r\n                copyable\r\n                boxed\r\n                sort\r\n              ></json-viewer>\r\n          </b-col>\r\n        </b-row>\r\n        --></div>\r\n      </template>\r\n\r\n      <template #collapsedbody>\r\n        <div>\r\n          <b-table\r\n            small\r\n            hover\r\n            striped\r\n            responsive\r\n            headerTitle=\"Extrato do Estoque\"\r\n            head-variant=\"dark\"\r\n            :items=\"tbl_nfe\"\r\n            :fields=\"nfe.fields\"\r\n          >\r\n            <template #cell(numero)=\"data\">\r\n              <span class=\"no-wrap\"\r\n                >{{ data.item.numero }}/{{ data.item.serie }}</span\r\n              >\r\n            </template>\r\n\r\n            <template #cell(fornecedor)=\"data\">\r\n              <span :title=\"data.item.fornecedor\"\r\n                >{{ data.item.fornecedor.substr(0, 15)\r\n                }}{{ data.item.fornecedor.substr(15) != \"\" ? \"...\" : \"\" }}</span\r\n              >\r\n            </template>\r\n\r\n            <template #cell(data_emissao)=\"data\">\r\n              <span>{{ data.item.data_emissao | dateBR }}</span>\r\n            </template>\r\n\r\n            <template #cell(data_entrada)=\"data\">\r\n              <span>{{ data.item.data_entrada | dateBR }}</span>\r\n            </template>\r\n\r\n            <template #cell(actions)=\"data\">\r\n              <span class=\"spaced\">\r\n                <b-button class=\"btn-icon\" variant=\"outline-primary\">\r\n                  <b-icon-clipboard-check\r\n                    @click=\"$root.copyclip(data.item.chaveacesso)\"\r\n                    title=\"Copiar Chave DANFE\"\r\n                  />\r\n                </b-button>\r\n                <b-button\r\n                  class=\"btn-icon\"\r\n                  variant=\"outline-primary\"\r\n                  @click=\"data.toggleDetails\"\r\n                >\r\n                  <b-icon-caret-down\r\n                    title=\"Ocultar produtos\"\r\n                    v-if=\"!data.detailsShowing\"\r\n                  />\r\n                  <b-icon-caret-up title=\"Ver produtos\" v-else />\r\n                </b-button>\r\n              </span>\r\n            </template>\r\n\r\n            <template #row-details=\"row\">\r\n              <b-card class=\"bg-light\">\r\n                <b-table\r\n                  small\r\n                  hover\r\n                  striped\r\n                  responsive\r\n                  headerTitle=\"Produtos\"\r\n                  class=\"mt-2\"\r\n                  :items=\"row.item.itens\"\r\n                  :fields=\"nfe.itens.fields\"\r\n                >\r\n                  <template #cell(actions)=\"data\" class=\"text-center\">\r\n                    <span class=\"spaced\">\r\n                      <b-button\r\n                        class=\"btn-icon\"\r\n                        title=\"Movimentar estoque\"\r\n                        size=\"sm\"\r\n                        style=\"font-size: 10px\"\r\n                        variant=\"success\"\r\n                        v-b-modal.modal-Movimentar\r\n                        :disabled=\"data.item.saldo_nota == 0\"\r\n                        @click=\"Movimentarshown(data.item)\"\r\n                      >\r\n                        <b-icon-cart-plus />\r\n                      </b-button>\r\n                      <b-button\r\n                        class=\"btn-icon\"\r\n                        title=\"Movimentar estoque\"\r\n                        size=\"sm\"\r\n                        style=\"font-size: 10px\"\r\n                        variant=\"success\"\r\n                        @click=\"onStockClick(data.item)\"\r\n                      >\r\n                        <b-icon-archive />\r\n                      </b-button>\r\n                    </span>\r\n                  </template>\r\n                </b-table>\r\n              </b-card>\r\n            </template>\r\n          </b-table>\r\n        </div>\r\n      </template>\r\n    </CardCollapsed>\r\n\r\n    <b-modal\r\n      id=\"modal-Movimentar\"\r\n      ref=\"modal-Movimentar\"\r\n      title=\"Movimentação de estoque\"\r\n      variant=\"dark\"\r\n      size=\"xl\"\r\n      hide-footer\r\n      centered\r\n    >\r\n      <b-row>\r\n        <b-col cols=\"12\">\r\n          <b-form-group label=\"Item\" label-for=\"input-itens\">\r\n            <SearchApi\r\n              id=\"input-itens\"\r\n              pkid=\"input-itensSearch\"\r\n              route=\"Servicos/Itens/MateriaPrima\"\r\n              v-model=\"itenssearch\"\r\n            />\r\n          </b-form-group>\r\n        </b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col cols=\"12\" md=\"4\">\r\n          <b-form-group label=\"Box\" label-for=\"input-box\">\r\n            <b-form-input\r\n              id=\"input-box\"\r\n              type=\"number\"\r\n              class=\"text-right\"\r\n              v-model=\"movimento.Box\"\r\n              debounce=\"1000\"\r\n            >\r\n            </b-form-input>\r\n          </b-form-group>\r\n        </b-col>\r\n\r\n        <b-col cols=\"12\" md=\"4\">\r\n          <b-form-group\r\n            :label=\"`Nível - ${movimento.Nivel}`\"\r\n            label-for=\"input-nivel\"\r\n          >\r\n            <b-form-input\r\n              id=\"input-nivel\"\r\n              type=\"range\"\r\n              min=\"1\"\r\n              max=\"5\"\r\n              class=\"text-right\"\r\n              v-model=\"movimento.Nivel\"\r\n              debounce=\"1000\"\r\n            >\r\n            </b-form-input>\r\n          </b-form-group>\r\n        </b-col>\r\n        <b-col cols=\"12\" sm=\"4\">\r\n          <b-form-group\r\n            label=\"Qtde Solicitada\"\r\n            label-for=\"input-qtdesolicitada\"\r\n          >\r\n            <b-form-input\r\n              id=\"input-qtdesolicitada\"\r\n              type=\"number\"\r\n              class=\"text-right\"\r\n              v-model=\"movimento.Qtde\"\r\n            >\r\n            </b-form-input>\r\n          </b-form-group>\r\n        </b-col>\r\n      </b-row>\r\n\r\n      <b-row>\r\n        <b-col><hr /></b-col>\r\n      </b-row>\r\n\r\n      <b-row>\r\n        <b-col class=\"text-right\">\r\n          <span class=\"spaced\">\r\n            <b-button\r\n              variant=\"primary\"\r\n              @click=\"movimentar\"\r\n              :disabled=\"!vmovimentar\"\r\n              >Salvar</b-button\r\n            >\r\n            <b-button variant=\"danger\" @click=\"$refs['modal-Movimentar'].hide()\"\r\n              >Cancelar</b-button\r\n            >\r\n          </span>\r\n        </b-col>\r\n      </b-row>\r\n    </b-modal>\r\n\r\n    <b-modal\r\n      id=\"modal-materiaisStock\"\r\n      ref=\"modal-materiaisStock\"\r\n      title=\"Movimentação de estoque\"\r\n      variant=\"dark\"\r\n      size=\"xl\"\r\n      hide-footer\r\n      centered\r\n      @shown=\"AlmoxarifadoMovimentacoesshown\"\r\n      @hidden=\"AlmoxarifadoMovimentacoeshidden\"\r\n    >\r\n      <!-- <GaiolasItensBusca :value=\"itembusca\" /> -->\r\n      <!--:value=\"itembusca\"-->\r\n      <!--@etv-gaiolasitensupdate=\"evtGaiolasItensUpdate\"/>-->\r\n      <AlmoxarifadoMovimentacoes\r\n        tipoMovimentacao=\"NFE\"\r\n        ref=\"AlmoxarifadoMovimentacoes\"\r\n      />\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport API from \"../../../services/api.service\";\r\nimport AlmoxarifadoMovimentacoes from \"../../almoxarifado/views/AlmoxarifadoMovimentacoes\";\r\nimport CardCollapsed from \"../../../components/CardCollapsed.vue\";\r\nimport SearchApi from \"../../../components/SearchApi.vue\";\r\n\r\nexport default {\r\n  name: \"Nfe\",\r\n\r\n  components: {\r\n    AlmoxarifadoMovimentacoes,\r\n    CardCollapsed,\r\n    SearchApi,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      itenssearch: { value: \"\", text: \"\" },\r\n      collapseformopen: false,\r\n      itensalmox: null,\r\n      empresa: this.gtxConfigParemp || 8,\r\n      deposito: null,\r\n      database: new Date(new Date().setDate(new Date().getDate() - 2)),\r\n      numero: null,\r\n      serie: null,\r\n      codigo_fornec: null,\r\n      nomefornec: null,\r\n      chaveacesso: null,\r\n      codigo_natureza: null,\r\n      paremp_depositos: [],\r\n      movimento: {\r\n        Empresa: null,\r\n        Deposito: null,\r\n        Item: \"\",\r\n        Box: 0,\r\n        Nivel: 1,\r\n        Entradas: 1,\r\n        Saidas: 2,\r\n        Saldo: 3,\r\n        QtdeSolicitada: 4,\r\n        Lote: 5,\r\n        Tipo: \"NFE\",\r\n        Qtde: 6,\r\n        Descricao: \"\",\r\n        DataMovimento: new Date(),\r\n        idItNFE: null,\r\n      },\r\n      nfe: {\r\n        currentPage: 1,\r\n        perPage: 20,\r\n        filter: \"\",\r\n        filterOn: [\"numero\", \"Fornecedor\", \"Valor\"],\r\n        fields: [\r\n          { key: \"numero\", label: \"Nota/Série\" },\r\n          { key: \"data_emissao\", label: \"Emissão\" },\r\n          { key: \"data_entrada\", label: \"Entrada\" },\r\n          \"fornecedor\",\r\n          { key: \"nitens\", label: \"Prod\" },\r\n          { key: \"qtde_nota\", label: \"Qtde\" },\r\n          { key: \"qtde_almox\", label: \"Lcto\" },\r\n          { key: \"qtde_saldo\", label: \"Saldo\" },\r\n          \"actions\",\r\n        ],\r\n        data: [],\r\n        itens: {\r\n          fields: [\r\n            \"item\",\r\n            { key: \"descricao\", label: \"Descrição\" },\r\n            \"un\",\r\n            { key: \"qtde_nota\", label: \"Qtde\" },\r\n            { key: \"qtde_almox\", label: \"Lcto\" },\r\n            { key: \"saldo_nota\", label: \"Saldo\" },\r\n            \"cubagem\",\r\n            \"actions\",\r\n          ],\r\n        },\r\n      },\r\n    };\r\n  },\r\n\r\n  beforeMount() {\r\n    this.buscaParempDeposito();\r\n\r\n    API.getLocalDBDocument(\"nfe\").then((doc) => {\r\n      if (doc) {\r\n        this.empresa = doc.data.empresa || [];\r\n        this.deposito = doc.data.deposito;\r\n        this.database = doc.data.database;\r\n        this.numero = doc.data.numero;\r\n        this.serie = doc.data.serie;\r\n        this.nomefornec = doc.data.nomefornec;\r\n        this.codigo_natureza = doc.data.codigo_natureza;\r\n        this.buscanfe();\r\n      } else {\r\n        this.buscanfe();\r\n      }\r\n    });\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\r\n      \"sysdevmode\",\r\n      \"gtxConfigDatetimePickerFormat\",\r\n      \"gtxParempEmpresaSelecionada\",\r\n      \"gtxParempDataDepositos\",\r\n      \"gtxConfigParemp\",\r\n    ]),\r\n    params() {\r\n      return {\r\n        empresa: this.gtxConfigParemp,\r\n        deposito: this.deposito,\r\n        database: this.database,\r\n        numero: this.numero,\r\n        serie: this.serie,\r\n        codigo_fornec: this.codigo_fornec,\r\n        nomefornec: this.nomefornec,\r\n        chaveacesso: this.chaveacesso,\r\n        codigo_natureza: this.codigo_natureza,\r\n      };\r\n    },\r\n    vmovimentar() {\r\n      return (\r\n        this.movimento.Empresa > 0 &&\r\n        this.movimento.Deposito > 0 &&\r\n        this.movimento.Box > 0 &&\r\n        this.movimento.Nivel > 0 &&\r\n        this.movimento.Item !== \"\" &&\r\n        this.movimento.Qtde > 0\r\n      );\r\n    },\r\n    tbl_nfe() {\r\n      return this.nfe.data.map((m) => ({\r\n        ...m,\r\n        nitens: m.itens.length,\r\n        qtde_nota: this.soma(m.itens, \"qtde_nota\"),\r\n        qtde_almox: this.soma(m.itens, \"qtde_almox\"),\r\n        qtde_saldo: this.soma(m.itens, \"saldo_nota\"),\r\n        _rowVariant:\r\n          this.soma(m.itens, \"qtde_nota\") == 0\r\n            ? \"success\"\r\n            : this.soma(m.itens, \"saldo_nota\") < this.soma(m.itens, \"qtde_nota\")\r\n            ? \"warning\"\r\n            : \"\",\r\n      }));\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    //finds a specific item based on the provided ID and toggles details on that item\r\n    toggleDetails(row) {\r\n      if (row._showDetails) {\r\n        this.$set(row, \"_showDetails\", false);\r\n      } else {\r\n        this.currentItems.forEach((item) => {\r\n          this.$set(item, \"_showDetails\", false);\r\n        });\r\n\r\n        this.$nextTick(() => {\r\n          this.$set(row, \"_showDetails\", true);\r\n        });\r\n      }\r\n    },\r\n    buscanfe() {\r\n      API.get(\"v2/Servicos/NFE/Get\", this.params).then((res) => {\r\n        // console.log(\"buscanfe\", res.data);\r\n        if (res.data.Success) {\r\n          this.nfe.data = res.data.Data;\r\n          this.collapseformopen = false;\r\n          API.setLocalDBDocument({ data: this.$data }, \"nfe\");\r\n        } else {\r\n          this.nfe.data = [];\r\n          this.collapseformopen = true;\r\n        }\r\n      });\r\n    },\r\n    buscaParempDeposito() {\r\n      API.post(\"v2/Servicos/ParempDepositos/Get\", this.params).then((api) => {\r\n        console.log(api);\r\n        if (api.data.Success == \"True\" || api.data.Success) {\r\n          this.paremp_depositos = api.data.Data;\r\n        } else {\r\n          this.paremp_depositos = [];\r\n        }\r\n      });\r\n    },\r\n    soma(array, campo) {\r\n      return array.reduce((a, b) => a + b[campo], 0);\r\n    },\r\n    rowVariantSaldo(qtde_nota, saldo_nota) {\r\n      if (saldo_nota == 0) return \"success\";\r\n      // if (saldo_nota == qtde_nota) return \"danger\";\r\n      if (saldo_nota < qtde_nota) return \"warning\";\r\n    },\r\n    onStockClick(item) {\r\n      this.itensalmox = item;\r\n\r\n      this.$refs[\"modal-materiaisStock\"].show();\r\n\r\n      // this.$refs[\"AlmoxarifadoMovimentacoes\"].buscaindividual();\r\n    },\r\n    Movimentarshown(data) {\r\n      this.itenssearch = { value: data.item, text: data.item };\r\n      this.movimento.Empresa = this.empresa;\r\n      this.movimento.Deposito = 37; // TODO pegar do padrão\r\n      this.movimento.Box = 0;\r\n      this.movimento.Nivel = 1;\r\n      this.movimento.Item = data.item;\r\n      this.movimento.Descricao = data.descricao;\r\n      this.movimento.DataMovimento = new Date();\r\n      this.movimento.Qtde = data.saldo_nota;\r\n      this.movimento.Lote = data.idnfe;\r\n      this.movimento.Tipo = \"NFE\";\r\n      // this.movimento.idItNFE = data.id;\r\n\r\n      this.$refs[\"modal-Movimentar\"].show();\r\n    },\r\n    movimentar() {\r\n      API.post(\r\n        \"v2/Producao/Almoxarifado_Movimentacoes/Update\",\r\n        this.movimento\r\n      ).then((apidata) => {\r\n        console.log(\"movimentar.apidata:\", apidata);\r\n        if (apidata.data.Success) {\r\n          const res = API.prepareData(apidata.data);\r\n          console.log(\"atualiza.res:\", res);\r\n\r\n          const nfe = this.nfe.data.find((f) => f.id == res.data.Documento);\r\n          if (nfe) {\r\n            const item = nfe.itens.find((f) => f.item == res.data.Item);\r\n            if (item) {\r\n              item.qtde_almox += res.data.Qtde;\r\n              item.saldo_nota -= res.data.Qtde;\r\n              nfe._showDetails = true;\r\n              item._rowVariant =\r\n                item.qtde_nota == 0\r\n                  ? \"success\"\r\n                  : item.saldo_nota < item.qtde_nota\r\n                  ? \"warning\"\r\n                  : \"\";\r\n            }\r\n          }\r\n        } else {\r\n          this.$root.toastdanger(apidata.data.Error);\r\n        }\r\n        this.$refs[\"modal-Movimentar\"].hide();\r\n        // this.toggleDetails(item);\r\n      });\r\n    },\r\n    AlmoxarifadoMovimentacoesshown() {\r\n      // console.log(\"AlmoxarifadoMovimentacoesshown\", this.itensalmox);\r\n      this.$refs.AlmoxarifadoMovimentacoes.empresa = 8;\r\n      this.$refs.AlmoxarifadoMovimentacoes.deposito = 37;\r\n      this.$refs.AlmoxarifadoMovimentacoes.box = 0;\r\n      this.$refs.AlmoxarifadoMovimentacoes.nivel = 0;\r\n      this.$refs.AlmoxarifadoMovimentacoes.itens = [this.itensalmox.item];\r\n      this.$refs.AlmoxarifadoMovimentacoes.itensreq = [\r\n        {\r\n          item: this.itensalmox.item,\r\n          qtde: this.itensalmox.saldo_nota,\r\n          lote: this.itensalmox.idnfe,\r\n        },\r\n      ];\r\n\r\n      this.$refs.AlmoxarifadoMovimentacoes.busca();\r\n    },\r\n    AlmoxarifadoMovimentacoeshidden() {\r\n      // this.buscanfe();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.trunc {\r\n  max-width: 300px;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n}\r\n</style>\r\n"]}]}