{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\ramais\\views\\historico.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\ramais\\views\\historico.vue","mtime":1670977910663},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwQWN0aW9ucywgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhpc3Rvcmljb0NhbGxzIiwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpbHRybzogIiIsCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICBwZXJQYWdlOiAxMCwKICAgICAgdG90YWxSb3dzOiAxLAogICAgICBjYWxsczogewogICAgICAgIGRhdGFiYXNlOiB0aGlzLmRhdGFiYXNlLAogICAgICAgIGlkcmFtYWw6IHRoaXMuaWRyYW1hbCwKICAgICAgICByYW1hbDogdGhpcy5yYW1hbAogICAgICB9LAogICAgICBhY3Rpb25zOiBbewogICAgICAgIGlkOiAxLAogICAgICAgIHRleHQ6ICJFZGl0YXIiLAogICAgICAgIHZhbHVlOiAiYnRFZGl0YXIiLAogICAgICAgIGljb246ICJwZW5jaWwiLAogICAgICAgIHZhcmlhbnQ6ICJzdWNjZXNzIgogICAgICB9LCB7CiAgICAgICAgaWQ6IDIsCiAgICAgICAgdGV4dDogIkV4Y2x1aXIiLAogICAgICAgIHZhbHVlOiAiYnRFeGNsdWlyIiwKICAgICAgICBpY29uOiAidHJhc2giLAogICAgICAgIHZhcmlhbnQ6ICJkYW5nZXIiCiAgICAgIH1dCiAgICB9OwogIH0sCgogIHByb3BzOiB7CiAgICBkYXRhYmFzZTogewogICAgICB0eXBlOiBEYXRlCiAgICB9LAogICAgaWRyYW1hbDogewogICAgICB0eXBlOiBOdW1iZXIKICAgIH0sCiAgICByYW1hbDogewogICAgICB0eXBlOiBTdHJpbmcKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7IC4uLm1hcEdldHRlcnMoWyJndHhDYWxsc0RhdGEiLCAiZ3R4Q29uZmlnRGF0ZXRpbWVQaWNrZXJGb3JtYXQiXSksCgogICAgcGFyYW1zY2FsbHMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgZGF0YWJhc2U6IHRoaXMuY2FsbHMuZGF0YWJhc2UgfHwgbmV3IERhdGUobmV3IERhdGUoKS5zZXREYXRlKG5ldyBEYXRlKCkuZ2V0RGF0ZSgpIC0gMSkpLAogICAgICAgIGlkcmFtYWw6IHRoaXMuY2FsbHMuaWRyYW1hbCB8fCBudWxsLAogICAgICAgIHJhbWFsOiB0aGlzLmNhbGxzLnJhbWFsIHx8ICIiCiAgICAgIH07CiAgICB9LAoKICAgIHRibGNhbGxzKCkgewogICAgICByZXR1cm4gdGhpcy5ndHhDYWxsc0RhdGEuY2FsbHM7CiAgICB9LAoKICAgIGZpZWxkcygpIHsKICAgICAgcmV0dXJuIFt7CiAgICAgICAga2V5OiAiRGF0YUNhbGwiLAogICAgICAgIGxhYmVsOiAiRGF0YSIKICAgICAgfSwgewogICAgICAgIGtleTogIkFub3RhY2FvIiwKICAgICAgICBsYWJlbDogIkFub3Rhw6fDo28iCiAgICAgIH0sICJhY3Rpb25zIl07CiAgICB9LAoKICAgIGZpbHRlck9uKCkgewogICAgICByZXR1cm4gWyJEYXRhQ2FsbCIsICJBbm90YWNhbyJdOwogICAgfQoKICB9LAoKICBiZWZvcmVNb3VudCgpIHsKICAgIHRoaXMuZ2V0Q2FsbHMoKTsKICB9LAoKICBtZXRob2RzOiB7IC4uLm1hcEFjdGlvbnMoWyJhY3RSYW1haXNDYWxscyJdKSwKCiAgICBnZXRDYWxscygpIHsKICAgICAgLy8gY29uc29sZS5sb2coImdldENhbGxzOiIsIHRoaXMucGFyYW1zY2FsbHMpOwogICAgICB0aGlzLmFjdFJhbWFpc0NhbGxzKHRoaXMucGFyYW1zY2FsbHMpOwogICAgfSwKCiAgICBvbkZpbHRlcmVkKGZpbHRlcmVkSXRlbXMpIHsKICAgICAgLy8gVHJpZ2dlciBwYWdpbmF0aW9uIHRvIHVwZGF0ZSB0aGUgbnVtYmVyIG9mIGJ1dHRvbnMvcGFnZXMgZHVlIHRvIGZpbHRlcmluZwogICAgICB0aGlzLnRvdGFsUm93cyA9IGZpbHRlcmVkSXRlbXMubGVuZ3RoOwogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMTsKICAgIH0sCgogICAgZXZ0QWN0aW9ucyhidXR0b24sIGRhdGEpIHsKICAgICAgY29uc3QgZW1pdCA9IHsgLi4uewogICAgICAgICAgYnV0dG9uOiBidXR0b24KICAgICAgICB9LAogICAgICAgIC4uLnsKICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICB9CiAgICAgIH07CiAgICAgIHRoaXMuJGVtaXQoImV2dC1hY3Rpb25zIiwgZW1pdCk7CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;EACAA,sBADA;;EAEAC;IACA;MACAC,UADA;MAEAC,cAFA;MAGAC,WAHA;MAIAC,YAJA;MAKAC;QACAC,uBADA;QAEAC,qBAFA;QAGAC;MAHA,CALA;MAUAC,UACA;QACAC,KADA;QAEAC,cAFA;QAGAC,iBAHA;QAIAC,cAJA;QAKAC;MALA,CADA,EAQA;QACAJ,KADA;QAEAC,eAFA;QAGAC,kBAHA;QAIAC,aAJA;QAKAC;MALA,CARA;IAVA;EA2BA,CA9BA;;EAgCAC;IACAT;MACAU;IADA,CADA;IAIAT;MACAS;IADA,CAJA;IAOAR;MACAQ;IADA;EAPA,CAhCA;EA4CAC,YACA,gEADA;;IAGAC;MACA;QACAZ,UACA,uBACA,sDAHA;QAIAC,mCAJA;QAKAC;MALA;IAOA,CAXA;;IAaAW;MACA;IACA,CAfA;;IAiBAC;MACA,QACA;QAAAC;QAAAC;MAAA,CADA,EAEA;QAAAD;QAAAC;MAAA,CAFA,EAGA,SAHA;IAKA,CAvBA;;IAyBAC;MACA;IACA;;EA3BA,CA5CA;;EA0EAC;IACA;EACA,CA5EA;;EA8EAC,WACA,iCADA;;IAGAC;MACA;MACA;IACA,CANA;;IAQAC;MACA;MACA;MACA;IACA,CAZA;;IAcAC;MACA;UAAAC;QAAA;QAAA;UAAA7B;QAAA;MAAA;MACA;IACA;;EAjBA;AA9EA","names":["name","data","filtro","currentPage","perPage","totalRows","calls","database","idramal","ramal","actions","id","text","value","icon","variant","props","type","computed","paramscalls","tblcalls","fields","key","label","filterOn","beforeMount","methods","getCalls","onFiltered","evtActions","button"],"sourceRoot":"src/pages/ramais/views","sources":["historico.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <b-row>\r\n      <b-col>\r\n        <label for=\"form-database\">Data Ligação</label>\r\n        <b-form-datepicker\r\n          id=\"form-database\"\r\n          v-model=\"calls.database\"\r\n          class=\"mb-2\"\r\n          locale=\"pt\"\r\n          size=\"sm\"\r\n          :date-format-options=\"gtxConfigDatetimePickerFormat\"\r\n        ></b-form-datepicker>\r\n      </b-col>\r\n    </b-row>\r\n    <b-row>\r\n      <b-col class=\"text-right\">\r\n        <b-button variant=\"primary\" size=\"sm\" @click=\"getCalls()\">\r\n          Pesquisar\r\n        </b-button>\r\n      </b-col>\r\n    </b-row>\r\n    <b-row>\r\n      <b-col>\r\n        <b-input-group prepend=\"Filtro\" size=\"sm\" class=\"mb-2\">\r\n          <b-form-input\r\n            id=\"input-filtro\"\r\n            type=\"search\"\r\n            v-model=\"filtro\"\r\n            placeholder=\"Informe o ramal ou nome\"\r\n          ></b-form-input>\r\n        </b-input-group>\r\n      </b-col>\r\n      <b-col cols=\"4\" class=\"float-right\">\r\n        <b-pagination\r\n          id=\"input-pagination\"\r\n          v-model=\"currentPage\"\r\n          :total-rows=\"totalRows\"\r\n          :per-page=\"perPage\"\r\n          size=\"sm\"\r\n          class=\"my-0\"\r\n        >\r\n        </b-pagination>\r\n      </b-col>\r\n    </b-row>\r\n    <b-table\r\n      small\r\n      striped\r\n      sort-icon-left\r\n      :items=\"tblcalls\"\r\n      :fields=\"fields\"\r\n      :filter=\"filtro\"\r\n      :current-page=\"currentPage\"\r\n      :per-page=\"perPage\"\r\n      :filter-included-fields=\"filterOn\"\r\n      @filtered=\"onFiltered\"\r\n    >\r\n      <template #cell(DataCall)=\"data\">\r\n        <span>{{ data.item.DataCall | datetime }}</span>\r\n      </template>\r\n      <template #cell(actions)=\"data\">\r\n        <span class=\"iconbutton\" :title=\"b.text\" v-for=\"(b, i) of actions\">\r\n          <b-icon\r\n            :icon=\"b.icon\"\r\n            :variant=\"b.variant\"\r\n            @click=\"evtActions(b, data.item)\"\r\n          />\r\n        </span>\r\n      </template>\r\n    </b-table>\r\n    <!--\r\n    <json-viewer :value=\"paramscalls\" :expand-depth=\"5\" copyable boxed sort>\r\n    </json-viewer>\r\n    <json-viewer :value=\"gtxCallsData\" :expand-depth=\"5\" copyable boxed sort>\r\n    </json-viewer>\r\n    -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nexport default {\r\n  name: \"HistoricoCalls\",\r\n  data() {\r\n    return {\r\n      filtro: \"\",\r\n      currentPage: 1,\r\n      perPage: 10,\r\n      totalRows: 1,\r\n      calls: {\r\n        database: this.database,\r\n        idramal: this.idramal,\r\n        ramal: this.ramal,\r\n      },\r\n      actions: [\r\n        {\r\n          id: 1,\r\n          text: \"Editar\",\r\n          value: \"btEditar\",\r\n          icon: \"pencil\",\r\n          variant: \"success\",\r\n        },\r\n        {\r\n          id: 2,\r\n          text: \"Excluir\",\r\n          value: \"btExcluir\",\r\n          icon: \"trash\",\r\n          variant: \"danger\",\r\n        },\r\n      ],\r\n    };\r\n  },\r\n\r\n  props: {\r\n    database: {\r\n      type: Date,\r\n    },\r\n    idramal: {\r\n      type: Number,\r\n    },\r\n    ramal: {\r\n      type: String,\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"gtxCallsData\", \"gtxConfigDatetimePickerFormat\"]),\r\n\r\n    paramscalls() {\r\n      return {\r\n        database:\r\n          this.calls.database ||\r\n          new Date(new Date().setDate(new Date().getDate() - 1)),\r\n        idramal: this.calls.idramal || null,\r\n        ramal: this.calls.ramal || \"\",\r\n      };\r\n    },\r\n\r\n    tblcalls() {\r\n      return this.gtxCallsData.calls;\r\n    },\r\n\r\n    fields() {\r\n      return [\r\n        { key: \"DataCall\", label: \"Data\" },\r\n        { key: \"Anotacao\", label: \"Anotação\" },\r\n        \"actions\",\r\n      ];\r\n    },\r\n\r\n    filterOn() {\r\n      return [\"DataCall\", \"Anotacao\"];\r\n    },\r\n  },\r\n\r\n  beforeMount() {\r\n    this.getCalls();\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"actRamaisCalls\"]),\r\n\r\n    getCalls() {\r\n      // console.log(\"getCalls:\", this.paramscalls);\r\n      this.actRamaisCalls(this.paramscalls);\r\n    },\r\n\r\n    onFiltered(filteredItems) {\r\n      // Trigger pagination to update the number of buttons/pages due to filtering\r\n      this.totalRows = filteredItems.length;\r\n      this.currentPage = 1;\r\n    },\r\n\r\n    evtActions(button, data) {\r\n      const emit = { ...{ button: button }, ...{ data: data } };\r\n      this.$emit(\"evt-actions\", emit);\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}