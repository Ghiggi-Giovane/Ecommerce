{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\components\\TableEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\components\\TableEdit.vue","mtime":1701906516412},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVGFibGVFZGl0IiwKICBwcm9wczogewogICAgdGFibGVJZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuICd0YWJsZS0xJzsKICAgICAgfQogICAgfSwKICAgIGhlYWRlcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CiAgICB9LAogICAgZmllbGRzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIGl0ZW1zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIGJ1dHRvbnM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFsnZWRpdCcsICdkZWxldGUnLCAnaW5zZXJ0JywgJ2luZm8nXTsKICAgICAgfQogICAgfSwKICAgIHJvd3M6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiAwOwogICAgICB9CiAgICB9LAogICAgcGVyUGFnZTogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIDEwOwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VsZWN0ZWQ6IG51bGwsCiAgICAgIHNvcnRCeTogJycsCiAgICAgIHNvcnREZXNjOiBmYWxzZSwKICAgICAgY3VycmVudFBhZ2U6IDEKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgaWYgKHRoaXMuJHJlZnNbInRhYmxlU2VhcmNoIl0pIHsKICAgICAgLy8gVE9ETzogZGFyIG8gZm9jbyBubyBwcmltZWlybyByZWdpc3RybyBkYSB0YWJlbGEgcGFyYSBwb2RlciBuYXZlZ2FyIGNvbSBvIHRlY2xhZG8gLi4uCiAgICAgIC8vIHRoaXMuJHJlZnNbInRhYmxlU2VhcmNoIl0uZm9jdXMoKQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNvbHVtbnMoKSB7CiAgICAgIGxldCBjb2xzID0gdGhpcy5maWVsZHMgfHwgT2JqZWN0LmtleXModGhpcy5pdGVtcykubWFwKGsgPT4gewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBrZXk6IGssCiAgICAgICAgICBsYWJlbDogaywKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIHJldHVybiBjb2xzLm1hcChjID0+IHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4uYywKICAgICAgICAgIC4uLnsKICAgICAgICAgICAgYWN0aW9uczogJy4uLicKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9KTsKICAgIH0sCiAgICB0b3RhbFJvd3MoKSB7CiAgICAgIHJldHVybiB0aGlzLnJvd3MgPiAwID8gdGhpcy5yb3dzIDogdGhpcy5pdGVtcy5sZW5ndGggfHwgMDsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBjdXJyZW50UGFnZShwYWdlKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2V2dC1wYWdlJywgcGFnZSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBOZXcoKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdFZGl0b3Ugbm8gaXRlbTonLCBldnQuaXRlbS52YWx1ZSwgZXZ0KQogICAgICB0aGlzLiRlbWl0KCdldnQtbmV3Jyk7CiAgICB9LAogICAgcm93U2VsZWN0KGV2dCkgewogICAgICAvLyBjb25zb2xlLmxvZygnU2VsZWNpb25vdSBvIGl0ZW06JywgZXZ0KQogICAgICB0aGlzLiRlbWl0KCdldnQtc2VsZWN0JywgZXZ0KTsKICAgIH0sCiAgICByb3dFZGl0KGV2dCkgewogICAgICAvLyBjb25zb2xlLmxvZygnRWRpdG91IG5vIGl0ZW06JywgZXZ0Lml0ZW0udmFsdWUsIGV2dCkKICAgICAgdGhpcy4kZW1pdCgnZXZ0LWVkaXQnLCBldnQpOwogICAgfSwKICAgIHJvd0RlbGV0ZShldnQpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ0V4Y2x1aXUgbm8gaXRlbTonLCBldnQuaXRlbS52YWx1ZSwgZXZ0KQogICAgICB0aGlzLiRlbWl0KCdldnQtZGVsZXRlJywgZXZ0KTsKICAgIH0sCiAgICByb3dJbnNlcnQoZXZ0KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdpbnNlcml1IG8gaXRlbTonLCBldnQuaXRlbS52YWx1ZSwgZXZ0KQogICAgICB0aGlzLiRlbWl0KCdldnQtaW5zZXJ0JywgZXZ0KTsKICAgIH0sCiAgICByb3dJbmZvcm0oZXZ0KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdFeGNsdWl1IG5vIGl0ZW06JywgZXZ0Lml0ZW0udmFsdWUsIGV2dCkKICAgICAgdGhpcy4kZW1pdCgnZXZ0LWluZm9ybScsIGV2dCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;EAEAA;EAEAC;IACAC;MAAAC;MAAAC;QAAA;MAAA;IAAA;IACAC;MAAAF;MAAAC;QAAA;MAAA;IAAA;IACAE;MAAAH;MAAAC;QAAA;MAAA;IAAA;IACAG;MAAAJ;MAAAC;QAAA;MAAA;IAAA;IACAI;MAAAL;MAAAC;QAAA;MAAA;IAAA;IACAK;MAAAN;MAAAC;QAAA;MAAA;IAAA;IACAM;MAAAP;MAAAC;QAAA;MAAA;IAAA;EACA;EAEAO;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IAEA;MACA;MACA;IAAA;EAEA;EAEAC;IAEAC;MACA;QAAA;UAAAC;UAAAC;UAAAC;QAAA;MAAA;MACA;QAAA;UAAA;UAAA;YAAAC;UAAA;QAAA;MAAA;IACA;IAEAC;MACA;IACA;EAEA;EAEAC;IACAT;MACA;IACA;EACA;EAEAU;IAEAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;EACA;AAEA","names":["name","props","tableId","type","default","header","fields","items","buttons","rows","perPage","data","selected","sortBy","sortDesc","currentPage","mounted","computed","columns","key","label","sortable","actions","totalRows","watch","methods","New","rowSelect","rowEdit","rowDelete","rowInsert","rowInform"],"sourceRoot":"src/components","sources":["TableEdit.vue"],"sourcesContent":["<template>\r\n    <div>\r\n\r\n        <b-pagination\r\n            v-if=\"rows>perPage\"\r\n            v-model=\"currentPage\"\r\n            :total-rows=\"totalRows\"\r\n            :per-page=\"perPage\"\r\n            aria-controls=\"tableSearch\"\r\n            size=\"sm\">\r\n        </b-pagination>\r\n\r\n        <b-table \r\n            striped\r\n            hover\r\n            small\r\n            selectable\r\n            select-mode=\"single\"\r\n            sort-icon-left\r\n            responsive=\"sm\"\r\n            id=\"tableSearch\"\r\n            ref=\"tableSearch\"\r\n            :total-rows=\"rows\"\r\n            :per-page=\"perPage\"\r\n            :fields=\"columns\"\r\n            :items=\"items\"\r\n            :sort-by.sync=\"sortBy\"\r\n            :sort-desc.sync=\"sortDesc\"\r\n            @row-selected=\"rowSelect\">\r\n\r\n            <template #thead-top>\r\n                <b-tr v-if=\"header.length>0\">\r\n                    <b-th :colspan=\"fields.length-1\">{{ header }}</b-th>\r\n                    <b-th>\r\n                        <b-button v-if=\"buttons.indexOf('new')>-1\"  variant=\"outline-primary\" size=\"sm\" v-b-tooltip.hover.topleft=\"'Novo registro'\" @click=\"New\">\r\n                            <b-icon-plus-circle class=\"mr-2\"/>\r\n                            Incluir\r\n                        </b-button>\r\n                    </b-th>\r\n                </b-tr>\r\n            </template>\r\n\r\n            <template #cell()=\"data\">\r\n                <div v-if=\"data.field.type == 'Date'\">\r\n                    {{ data.value | datetime}}\r\n                </div>\r\n                <div v-else>\r\n                    {{ data.value }}\r\n                </div>\r\n            </template>\r\n\r\n            <template #cell(actions)=\"row\">\r\n                <b-button size=\"sm\" v-if=\"buttons.indexOf('edit')>-1\"   variant=\"outline-success\" v-b-tooltip.hover.topleft=\"'Editar'\"      @click=\"rowEdit(row)\"   class=\"ml-1\"><b-icon-pencil/></b-button>\r\n                <b-button size=\"sm\" v-if=\"buttons.indexOf('delete')>-1\" variant=\"outline-danger\"  v-b-tooltip.hover.topleft=\"'Deletar'\"     @click=\"rowDelete(row)\" class=\"ml-1\"><b-icon-trash/></b-button>\r\n                <b-button size=\"sm\" v-if=\"buttons.indexOf('insert')>-1\" variant=\"outline-primary\" v-b-tooltip.hover.topleft=\"'Incluir'\"     @click=\"rowInsert(row)\" class=\"ml-1\"><b-icon-plus/></b-button>\r\n                <b-button size=\"sm\" v-if=\"buttons.indexOf('info')>-1\"   variant=\"outline-info\"    v-b-tooltip.hover.topleft=\"'Informações'\" @click=\"rowInform(row)\" class=\"ml-1\"><b-icon-info-circle/></b-button>\r\n            </template>        \r\n\r\n        </b-table>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    \r\n    name: \"TableEdit\",\r\n\r\n    props: {\r\n        tableId: { type: String, default() { return 'table-1' } },\r\n        header:  { type: String, default() { return '' } },\r\n        fields:  { type: Array,  default() { return [] } },\r\n        items:   { type: Array,  default() { return [] } },\r\n        buttons: { type: Array,  default() { return ['edit','delete','insert','info'] } },\r\n        rows:    { type: Number, default() { return 0 } },\r\n        perPage: { type: Number, default() { return 10 } }\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            selected: null,\r\n            sortBy: '',\r\n            sortDesc: false,\r\n            currentPage: 1\r\n        }\r\n    },\r\n\r\n    mounted() {\r\n\r\n        if (this.$refs[\"tableSearch\"]) {\r\n            // TODO: dar o foco no primeiro registro da tabela para poder navegar com o teclado ...\r\n            // this.$refs[\"tableSearch\"].focus()\r\n        }\r\n    },\r\n\r\n    computed: {\r\n\r\n        columns() {\r\n            let cols = this.fields || Object.keys(this.items).map(k => {return {key: k, label: k, sortable: true}})\r\n            return cols.map(c => {return {...c, ...{actions: '...'}}})\r\n        },\r\n\r\n        totalRows() {\r\n            return this.rows > 0 ? this.rows : this.items.length || 0\r\n        }\r\n\r\n    },\r\n\r\n    watch: {\r\n        currentPage(page) {\r\n            this.$emit('evt-page', page)\r\n        }\r\n    },\r\n\r\n    methods: {\r\n\r\n        New() {\r\n            // console.log('Editou no item:', evt.item.value, evt)\r\n            this.$emit('evt-new')\r\n        },\r\n        rowSelect(evt) {\r\n            // console.log('Selecionou o item:', evt)\r\n            this.$emit('evt-select', evt)\r\n        },\r\n        rowEdit(evt) {\r\n            // console.log('Editou no item:', evt.item.value, evt)\r\n            this.$emit('evt-edit', evt)\r\n        },\r\n        rowDelete(evt) {\r\n            // console.log('Excluiu no item:', evt.item.value, evt)\r\n            this.$emit('evt-delete', evt)\r\n        },\r\n        rowInsert(evt) {\r\n            // console.log('inseriu o item:', evt.item.value, evt)\r\n            this.$emit('evt-insert', evt)\r\n        },\r\n        rowInform(evt) {\r\n            // console.log('Excluiu no item:', evt.item.value, evt)\r\n            this.$emit('evt-inform', evt)\r\n        }\r\n    }\r\n\r\n}\r\n</script>\r\n"]}]}