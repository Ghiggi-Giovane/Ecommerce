{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\components\\SearchApi3.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\components\\SearchApi3.vue","mtime":1670977910589},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEFQSSBmcm9tICIuLi9zZXJ2aWNlcy9hcGkuc2VydmljZSI7CmltcG9ydCBUYWJsZUVkaXRBcGkgZnJvbSAiLi9UYWJsZUVkaXRBcGkudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTZWFyY2hBUEkzIiwKICBjb21wb25lbnRzOiB7CiAgICBUYWJsZUVkaXRBcGkKICB9LAogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9LAogICAgdGl0bGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiUGVzcXVpc2FyLi4uIgogICAgfSwKICAgIHJvdXRlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIKICAgIH0sCiAgICBsb29rdXA6IHsKICAgICAgdHlwZTogT2JqZWN0LAoKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdmFsdWU6ICJ2YWx1ZSIsCiAgICAgICAgICB0ZXh0OiAidGV4dCIKICAgICAgICB9OwogICAgICB9CgogICAgfQogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2h2YWx1ZTogMCwKICAgICAgc2VhcmNodGV4dDogdGhpcy52YWx1ZSB8fCAiIiwKICAgICAgc2VhcmNoZmxkczogdGhpcy5sb29rdXAsCiAgICAgIGRhdGE6IFtdLAogICAgICBkaXJ0eTogZmFsc2UsCiAgICAgIG1vZGFsaWQ6IGBtb2RhbF8ke01hdGgucmFuZG9tKDMyKS50b1N0cmluZygzMikuc3BsaXQoIi4iKVsxXX1gCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBwYXJhbXMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgcGVzcXVpc2E6IHRoaXMuc2VhcmNodGV4dCwKICAgICAgICBib2R5OiB0aGlzLnNlYXJjaHRleHQKICAgICAgfTsKICAgIH0sCgogICAgYXBpKCkgewogICAgICByZXR1cm4gYGh0dHBzOi8vYXBpLmdydXBvazEuY29tLmJyL2FwaS92Mi8ke3RoaXMucm91dGV9YDsKICAgIH0KCiAgfSwKICBtZXRob2RzOiB7CiAgICBidXNjYXIoKSB7CiAgICAgIC8qDQogICAgICBjb25zdCBkYXRhID0gew0KICAgICAgICBTdWNjZXNzOiB0cnVlLA0KICAgICAgICBEYXRhOiBbDQogICAgICAgICAgeyBtYXJjYTogIklERUxMSSIsIGlkOiAyIH0sDQogICAgICAgICAgeyBtYXJjYTogIk1ZIEhPTUUiLCBpZDogNiB9LA0KICAgICAgICBdLA0KICAgICAgfTsNCiAgICAgIHRoaXMuZGF0YSA9IGRhdGEuRGF0YTsNCiAgICAgIGlmICh0aGlzLmRhdGEubGVuZ3RoID09IDEpIHsNCiAgICAgICAgdGhpcy5zZWxlY3RkYXRhKHRoaXMuZGF0YSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRidk1vZGFsLnNob3codGhpcy5tb2RhbGlkKTsNCiAgICAgIH0NCiAgICAgICovCiAgICAgIGlmICh0aGlzLmRpcnR5KSB7CiAgICAgICAgQVBJLnBvc3QodGhpcy5yb3V0ZSwgdGhpcy5wYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuZGF0YS5TdWNjZXNzKSB7CiAgICAgICAgICAgIHRoaXMuZGF0YSA9IHJlcy5kYXRhLkRhdGE7CgogICAgICAgICAgICBpZiAodGhpcy5kYXRhLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RkYXRhKHRoaXMuZGF0YSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5zaG93KHRoaXMubW9kYWxpZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuZGF0YSA9IFtdOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAoKICAgIGV2dHNlbGVjdChkYXRhKSB7CiAgICAgIGNvbnNvbGUubG9nKCJldnRzZWxlY3Q6IiwgZGF0YSk7CiAgICAgIHRoaXMuc2VsZWN0ZGF0YShkYXRhKTsKICAgICAgdGhpcy4kYnZNb2RhbC5oaWRlKHRoaXMubW9kYWxpZCk7CiAgICB9LAoKICAgIGV2dHBhZ2UoZGF0YSkgewogICAgICBjb25zb2xlLmxvZygiZXZ0cGFnZToiLCBkYXRhKTsKICAgIH0sCgogICAgc2VsZWN0ZGF0YShkYXRhKSB7CiAgICAgIHRoaXMuc2VhcmNodmFsdWUgPSBkYXRhWzBdW3RoaXMuc2VhcmNoZmxkcy52YWx1ZV0udG9TdHJpbmcoKTsKICAgICAgdGhpcy5zZWFyY2h0ZXh0ID0gZGF0YVswXVt0aGlzLnNlYXJjaGZsZHMudGV4dF07CiAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgdGhpcy5zZWFyY2h2YWx1ZSk7CiAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTsKICAgIH0KCiAgfSwKICB3YXRjaDogewogICAgc2VhcmNodGV4dCh0ZXh0KSB7CiAgICAgIHRoaXMuZGlydHkgPSB0cnVlOwogICAgICBpZiAodGV4dCA9PSAiIikgdGhpcy5zZWFyY2h2YWx1ZSA9ICIwIjsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;EACAA,kBADA;EAEAC;IACAC;EADA,CAFA;EAKAC;IACAC;MACAC,YADA;MAEAC;IAFA,CADA;IAKAC;MACAF,YADA;MAEAC;IAFA,CALA;IASAE;MACAH,YADA;MAEAC;IAFA,CATA;IAaAG;MACAJ,YADA;;MAEAC;QACA;UAAAF;UAAAM;QAAA;MACA;;IAJA;EAbA,CALA;;EAyBAC;IACA;MACAC,cADA;MAEAC,4BAFA;MAGAC,uBAHA;MAIAH,QAJA;MAKAI,YALA;MAMAC,kBACAC,gBACAC,QADA,CACA,EADA,EAEAC,KAFA,CAEA,GAFA,EAEA,CAFA,CAGA;IAVA;EAYA,CAtCA;;EAuCAC;IACAC;MACA;QACAC,yBADA;QAEAC;MAFA;IAIA,CANA;;IAOAC;MACA;IACA;;EATA,CAvCA;EAkDAC;IACAC;MACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;QACAC;UACA;YACA;;YACA;cACA;YACA,CAFA,MAEA;cACA;YACA;UACA,CAPA,MAOA;YACA;UACA;QACA,CAXA;MAYA;IACA,CA/BA;;IAgCAC;MACAC;MACA;MACA;IACA,CApCA;;IAqCAC;MACAD;IACA,CAvCA;;IAwCAE;MACA;MACA;MACA;MACA;IACA;;EA7CA,CAlDA;EAiGAC;IACAnB;MACA;MACA;IACA;;EAJA;AAjGA","names":["name","components","TableEditApi","props","value","type","default","title","route","lookup","text","data","searchvalue","searchtext","searchflds","dirty","modalid","Math","toString","split","computed","params","pesquisa","body","api","methods","buscar","API","evtselect","console","evtpage","selectdata","watch"],"sourceRoot":"src/components","sources":["SearchApi3.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <!-- TODO:\r\n    1-resolver a questão da prop value poder ser any pois vai ter casos onde deverá ser atribuído valores numéricos e string\r\n    -->\r\n    <b-input-group :prepend=\"searchvalue.toString()\">\r\n      <b-form-input type=\"search\" v-model=\"searchtext\" @keyup.enter=\"buscar\" />\r\n      <b-input-group-append>\r\n        <b-button\r\n          text=\"Button\"\r\n          variant=\"primary\"\r\n          :disabled=\"!dirty\"\r\n          @click=\"buscar\"\r\n          >Buscar</b-button\r\n        >\r\n      </b-input-group-append>\r\n    </b-input-group>\r\n\r\n    <b-modal\r\n      :id=\"modalid\"\r\n      okOnly\r\n      size=\"xl\"\r\n      scrollable\r\n      no-close-on-backdrop\r\n      :title=\"title\"\r\n    >\r\n      <TableEditApi\r\n        :items=\"data\"\r\n        :page=\"1\"\r\n        :perPage=\"10\"\r\n        :buttons=\"[]\"\r\n        @evt-page=\"evtpage\"\r\n        @evt-select=\"evtselect\"\r\n      />\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport API from \"../services/api.service\";\r\nimport TableEditApi from \"./TableEditApi.vue\";\r\nexport default {\r\n  name: \"SearchAPI3\",\r\n  components: {\r\n    TableEditApi,\r\n  },\r\n  props: {\r\n    value: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: \"Pesquisar...\",\r\n    },\r\n    route: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    lookup: {\r\n      type: Object,\r\n      default() {\r\n        return { value: \"value\", text: \"text\" };\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      searchvalue: 0,\r\n      searchtext: this.value || \"\",\r\n      searchflds: this.lookup,\r\n      data: [],\r\n      dirty: false,\r\n      modalid: `modal_${\r\n        Math.random(32)\r\n          .toString(32)\r\n          .split(\".\")[1]\r\n      }`,\r\n    };\r\n  },\r\n  computed: {\r\n    params() {\r\n      return {\r\n        pesquisa: this.searchtext,\r\n        body: this.searchtext,\r\n      };\r\n    },\r\n    api() {\r\n      return `https://api.grupok1.com.br/api/v2/${this.route}`;\r\n    },\r\n  },\r\n  methods: {\r\n    buscar() {\r\n      /*\r\n      const data = {\r\n        Success: true,\r\n        Data: [\r\n          { marca: \"IDELLI\", id: 2 },\r\n          { marca: \"MY HOME\", id: 6 },\r\n        ],\r\n      };\r\n      this.data = data.Data;\r\n      if (this.data.length == 1) {\r\n        this.selectdata(this.data);\r\n      } else {\r\n        this.$bvModal.show(this.modalid);\r\n      }\r\n      */\r\n      if (this.dirty) {\r\n        API.post(this.route, this.params).then((res) => {\r\n          if (res.data.Success) {\r\n            this.data = res.data.Data;\r\n            if (this.data.length == 1) {\r\n              this.selectdata(this.data);\r\n            } else {\r\n              this.$bvModal.show(this.modalid);\r\n            }\r\n          } else {\r\n            this.data = [];\r\n          }\r\n        });\r\n      }\r\n    },\r\n    evtselect(data) {\r\n      console.log(\"evtselect:\", data);\r\n      this.selectdata(data);\r\n      this.$bvModal.hide(this.modalid);\r\n    },\r\n    evtpage(data) {\r\n      console.log(\"evtpage:\", data);\r\n    },\r\n    selectdata(data) {\r\n      this.searchvalue = data[0][this.searchflds.value].toString();\r\n      this.searchtext = data[0][this.searchflds.text];\r\n      this.$emit(\"input\", this.searchvalue);\r\n      this.dirty = false;\r\n    },\r\n  },\r\n  watch: {\r\n    searchtext(text) {\r\n      this.dirty = true;\r\n      if (text == \"\") this.searchvalue = \"0\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}