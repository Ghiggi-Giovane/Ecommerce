{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\ramais\\views\\historico.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\ramais\\views\\historico.vue","mtime":1701906516521},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJIaXN0b3JpY29DYWxscyIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpbHRybzogIiIsCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICBwZXJQYWdlOiAxMCwKICAgICAgdG90YWxSb3dzOiAxLAogICAgICBjYWxsczogewogICAgICAgIGRhdGFiYXNlOiB0aGlzLmRhdGFiYXNlLAogICAgICAgIGlkcmFtYWw6IHRoaXMuaWRyYW1hbCwKICAgICAgICByYW1hbDogdGhpcy5yYW1hbAogICAgICB9LAogICAgICBhY3Rpb25zOiBbewogICAgICAgIGlkOiAxLAogICAgICAgIHRleHQ6ICJFZGl0YXIiLAogICAgICAgIHZhbHVlOiAiYnRFZGl0YXIiLAogICAgICAgIGljb246ICJwZW5jaWwiLAogICAgICAgIHZhcmlhbnQ6ICJzdWNjZXNzIgogICAgICB9LCB7CiAgICAgICAgaWQ6IDIsCiAgICAgICAgdGV4dDogIkV4Y2x1aXIiLAogICAgICAgIHZhbHVlOiAiYnRFeGNsdWlyIiwKICAgICAgICBpY29uOiAidHJhc2giLAogICAgICAgIHZhcmlhbnQ6ICJkYW5nZXIiCiAgICAgIH1dCiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIGRhdGFiYXNlOiB7CiAgICAgIHR5cGU6IERhdGUKICAgIH0sCiAgICBpZHJhbWFsOiB7CiAgICAgIHR5cGU6IE51bWJlcgogICAgfSwKICAgIHJhbWFsOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWyJndHhDYWxsc0RhdGEiLCAiZ3R4Q29uZmlnRGF0ZXRpbWVQaWNrZXJGb3JtYXQiXSksCiAgICBwYXJhbXNjYWxscygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBkYXRhYmFzZTogdGhpcy5jYWxscy5kYXRhYmFzZSB8fCBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldERhdGUobmV3IERhdGUoKS5nZXREYXRlKCkgLSAxKSksCiAgICAgICAgaWRyYW1hbDogdGhpcy5jYWxscy5pZHJhbWFsIHx8IG51bGwsCiAgICAgICAgcmFtYWw6IHRoaXMuY2FsbHMucmFtYWwgfHwgIiIKICAgICAgfTsKICAgIH0sCiAgICB0YmxjYWxscygpIHsKICAgICAgcmV0dXJuIHRoaXMuZ3R4Q2FsbHNEYXRhLmNhbGxzOwogICAgfSwKICAgIGZpZWxkcygpIHsKICAgICAgcmV0dXJuIFt7CiAgICAgICAga2V5OiAiRGF0YUNhbGwiLAogICAgICAgIGxhYmVsOiAiRGF0YSIKICAgICAgfSwgewogICAgICAgIGtleTogIkFub3RhY2FvIiwKICAgICAgICBsYWJlbDogIkFub3Rhw6fDo28iCiAgICAgIH0sICJhY3Rpb25zIl07CiAgICB9LAogICAgZmlsdGVyT24oKSB7CiAgICAgIHJldHVybiBbIkRhdGFDYWxsIiwgIkFub3RhY2FvIl07CiAgICB9CiAgfSwKICBiZWZvcmVNb3VudCgpIHsKICAgIHRoaXMuZ2V0Q2FsbHMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWyJhY3RSYW1haXNDYWxscyJdKSwKICAgIGdldENhbGxzKCkgewogICAgICAvLyBjb25zb2xlLmxvZygiZ2V0Q2FsbHM6IiwgdGhpcy5wYXJhbXNjYWxscyk7CiAgICAgIHRoaXMuYWN0UmFtYWlzQ2FsbHModGhpcy5wYXJhbXNjYWxscyk7CiAgICB9LAogICAgb25GaWx0ZXJlZChmaWx0ZXJlZEl0ZW1zKSB7CiAgICAgIC8vIFRyaWdnZXIgcGFnaW5hdGlvbiB0byB1cGRhdGUgdGhlIG51bWJlciBvZiBidXR0b25zL3BhZ2VzIGR1ZSB0byBmaWx0ZXJpbmcKICAgICAgdGhpcy50b3RhbFJvd3MgPSBmaWx0ZXJlZEl0ZW1zLmxlbmd0aDsKICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7CiAgICB9LAogICAgZXZ0QWN0aW9ucyhidXR0b24sIGRhdGEpIHsKICAgICAgY29uc3QgZW1pdCA9IHsKICAgICAgICAuLi57CiAgICAgICAgICBidXR0b246IGJ1dHRvbgogICAgICAgIH0sCiAgICAgICAgLi4uewogICAgICAgICAgZGF0YTogZGF0YQogICAgICAgIH0KICAgICAgfTsKICAgICAgdGhpcy4kZW1pdCgiZXZ0LWFjdGlvbnMiLCBlbWl0KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MACAC,UACA;QACAC;QACAC;QACAC;QACAC;QACAC;MACA,GACA;QACAJ;QACAC;QACAC;QACAC;QACAC;MACA;IAEA;EACA;EAEAC;IACAT;MACAU;IACA;IACAT;MACAS;IACA;IACAR;MACAQ;IACA;EACA;EAEAC;IACA;IAEAC;MACA;QACAZ,UACA,uBACA;QACAC;QACAC;MACA;IACA;IAEAW;MACA;IACA;IAEAC;MACA,QACA;QAAAC;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA,UACA;IACA;IAEAC;MACA;IACA;EACA;EAEAC;IACA;EACA;EAEAC;IACA;IAEAC;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;IACA;IAEAC;MACA;QAAA;UAAAC;QAAA;QAAA;UAAA7B;QAAA;MAAA;MACA;IACA;EACA;AACA","names":["name","data","filtro","currentPage","perPage","totalRows","calls","database","idramal","ramal","actions","id","text","value","icon","variant","props","type","computed","paramscalls","tblcalls","fields","key","label","filterOn","beforeMount","methods","getCalls","onFiltered","evtActions","button"],"sourceRoot":"src/pages/ramais/views","sources":["historico.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <b-row>\r\n      <b-col>\r\n        <label for=\"form-database\">Data Ligação</label>\r\n        <b-form-datepicker\r\n          id=\"form-database\"\r\n          v-model=\"calls.database\"\r\n          class=\"mb-2\"\r\n          locale=\"pt\"\r\n          size=\"sm\"\r\n          :date-format-options=\"gtxConfigDatetimePickerFormat\"\r\n        ></b-form-datepicker>\r\n      </b-col>\r\n    </b-row>\r\n    <b-row>\r\n      <b-col class=\"text-right\">\r\n        <b-button variant=\"primary\" size=\"sm\" @click=\"getCalls()\">\r\n          Pesquisar\r\n        </b-button>\r\n      </b-col>\r\n    </b-row>\r\n    <b-row>\r\n      <b-col>\r\n        <b-input-group prepend=\"Filtro\" size=\"sm\" class=\"mb-2\">\r\n          <b-form-input\r\n            id=\"input-filtro\"\r\n            type=\"search\"\r\n            v-model=\"filtro\"\r\n            placeholder=\"Informe o ramal ou nome\"\r\n          ></b-form-input>\r\n        </b-input-group>\r\n      </b-col>\r\n      <b-col cols=\"4\" class=\"float-right\">\r\n        <b-pagination\r\n          id=\"input-pagination\"\r\n          v-model=\"currentPage\"\r\n          :total-rows=\"totalRows\"\r\n          :per-page=\"perPage\"\r\n          size=\"sm\"\r\n          class=\"my-0\"\r\n        >\r\n        </b-pagination>\r\n      </b-col>\r\n    </b-row>\r\n    <b-table\r\n      small\r\n      striped\r\n      sort-icon-left\r\n      :items=\"tblcalls\"\r\n      :fields=\"fields\"\r\n      :filter=\"filtro\"\r\n      :current-page=\"currentPage\"\r\n      :per-page=\"perPage\"\r\n      :filter-included-fields=\"filterOn\"\r\n      @filtered=\"onFiltered\"\r\n    >\r\n      <template #cell(DataCall)=\"data\">\r\n        <span>{{ data.item.DataCall | datetime }}</span>\r\n      </template>\r\n      <template #cell(actions)=\"data\">\r\n        <span class=\"iconbutton\" :title=\"b.text\" v-for=\"(b, i) of actions\">\r\n          <b-icon\r\n            :icon=\"b.icon\"\r\n            :variant=\"b.variant\"\r\n            @click=\"evtActions(b, data.item)\"\r\n          />\r\n        </span>\r\n      </template>\r\n    </b-table>\r\n    <!--\r\n    <json-viewer :value=\"paramscalls\" :expand-depth=\"5\" copyable boxed sort>\r\n    </json-viewer>\r\n    <json-viewer :value=\"gtxCallsData\" :expand-depth=\"5\" copyable boxed sort>\r\n    </json-viewer>\r\n    -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nexport default {\r\n  name: \"HistoricoCalls\",\r\n  data() {\r\n    return {\r\n      filtro: \"\",\r\n      currentPage: 1,\r\n      perPage: 10,\r\n      totalRows: 1,\r\n      calls: {\r\n        database: this.database,\r\n        idramal: this.idramal,\r\n        ramal: this.ramal,\r\n      },\r\n      actions: [\r\n        {\r\n          id: 1,\r\n          text: \"Editar\",\r\n          value: \"btEditar\",\r\n          icon: \"pencil\",\r\n          variant: \"success\",\r\n        },\r\n        {\r\n          id: 2,\r\n          text: \"Excluir\",\r\n          value: \"btExcluir\",\r\n          icon: \"trash\",\r\n          variant: \"danger\",\r\n        },\r\n      ],\r\n    };\r\n  },\r\n\r\n  props: {\r\n    database: {\r\n      type: Date,\r\n    },\r\n    idramal: {\r\n      type: Number,\r\n    },\r\n    ramal: {\r\n      type: String,\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"gtxCallsData\", \"gtxConfigDatetimePickerFormat\"]),\r\n\r\n    paramscalls() {\r\n      return {\r\n        database:\r\n          this.calls.database ||\r\n          new Date(new Date().setDate(new Date().getDate() - 1)),\r\n        idramal: this.calls.idramal || null,\r\n        ramal: this.calls.ramal || \"\",\r\n      };\r\n    },\r\n\r\n    tblcalls() {\r\n      return this.gtxCallsData.calls;\r\n    },\r\n\r\n    fields() {\r\n      return [\r\n        { key: \"DataCall\", label: \"Data\" },\r\n        { key: \"Anotacao\", label: \"Anotação\" },\r\n        \"actions\",\r\n      ];\r\n    },\r\n\r\n    filterOn() {\r\n      return [\"DataCall\", \"Anotacao\"];\r\n    },\r\n  },\r\n\r\n  beforeMount() {\r\n    this.getCalls();\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"actRamaisCalls\"]),\r\n\r\n    getCalls() {\r\n      // console.log(\"getCalls:\", this.paramscalls);\r\n      this.actRamaisCalls(this.paramscalls);\r\n    },\r\n\r\n    onFiltered(filteredItems) {\r\n      // Trigger pagination to update the number of buttons/pages due to filtering\r\n      this.totalRows = filteredItems.length;\r\n      this.currentPage = 1;\r\n    },\r\n\r\n    evtActions(button, data) {\r\n      const emit = { ...{ button: button }, ...{ data: data } };\r\n      this.$emit(\"evt-actions\", emit);\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}