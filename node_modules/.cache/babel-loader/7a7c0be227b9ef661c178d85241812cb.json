{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\admin\\views\\Menus.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\admin\\views\\Menus.vue","mtime":1670977910596},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UtYWxsLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk1lbnVzIiwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1lbnVzOiB7CiAgICAgICAgc2VsZWN0ZWQ6IHt9LAogICAgICAgIGZpbHRlcjogIiIsCiAgICAgICAgZmllbGRzOiBbewogICAgICAgICAga2V5OiAibWVudSIsCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICAgIH0sICJhY3Rpb25zIl0sCiAgICAgICAgdG90YWxSb3dzOiAwLAogICAgICAgIGRhdGE6IFtdCiAgICAgIH0KICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsgLi4ubWFwR2V0dGVycyhbImd0eGFkbWlubWVudXMiXSksCgogICAgbWVudXNwYWkoKSB7CiAgICAgIGNvbnN0IG1lbnVzID0gW3sKICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICB0ZXh0OiAiTWVudSBQYWkiCiAgICAgIH1dOwogICAgICB0aGlzLm1lbnVzLmRhdGEubWFwKG0gPT4gewogICAgICAgIGlmICghbS5oYXNPd25Qcm9wZXJ0eSgiaWRNZW51UGFpIikpIHsKICAgICAgICAgIG1lbnVzLnB1c2goewogICAgICAgICAgICB2YWx1ZTogbS5pZE1lbnUsCiAgICAgICAgICAgIHRleHQ6IG0uY2FwdGlvbiArICIgLSAjIiArIG0uaWRNZW51CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gbWVudXM7CiAgICB9LAoKICAgIGxhYmVsc3VnZXN0YW8oKSB7CiAgICAgIHJldHVybiB0aGlzLm1lbnVzLnNlbGVjdGVkLmlkTWVudVBhaSArICItIiArIHRoaXMuZ2V0bWVudW5hbWUodGhpcy5tZW51cy5zZWxlY3RlZC5jYXB0aW9uKTsKICAgIH0sCgogICAgbGFiZWxpZE1lbnUoKSB7CiAgICAgIHJldHVybiB0aGlzLmxhYmVsc3VnZXN0YW8gIT09IHRoaXMubWVudXMuc2VsZWN0ZWQuaWRNZW51ID8gImlkTWVudSAtIFN1Z2VzdMOjbyAjIiArIHRoaXMubGFiZWxzdWdlc3RhbyA6ICJpZE1lbnUiOwogICAgfQoKICB9LAoKICBiZWZvcmVNb3VudCgpIHsKICAgIHRoaXMuYWN0QWRtaW5Vc3Vhcmlvc01lbnVzR2V0KCJ4Iik7CiAgfSwKCiAgbWV0aG9kczogeyAuLi5tYXBBY3Rpb25zKFsiYWN0QWRtaW5Vc3Vhcmlvc01lbnVzR2V0IiwgImFjdEFkbWluTWVudXNVcGRhdGUiXSksCgogICAgZ2V0bWVudW5hbWUobm9tZSkgewogICAgICByZXR1cm4gKG5vbWUgfHwgIiIpLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgiICIsICJfIikubm9ybWFsaXplKCJORkQiKS5yZXBsYWNlKC9bXHUwMzAwLVx1MDM2Zl0vZywgIiIpOwogICAgfSwKCiAgICBvbk1lbnVzRmlsdGVyZWQoZmlsdGVyZWRJdGVtcykgewogICAgICAvLyBUcmlnZ2VyIHBhZ2luYXRpb24gdG8gdXBkYXRlIHRoZSBudW1iZXIgb2YgYnV0dG9ucy9wYWdlcyBkdWUgdG8gZmlsdGVyaW5nCiAgICAgIHRoaXMubWVudXMudG90YWxSb3dzID0gZmlsdGVyZWRJdGVtcy5sZW5ndGg7CiAgICB9LAoKICAgIG9uTWVudU5vdm8oKSB7CiAgICAgIHRoaXMubWVudXMuc2VsZWN0ZWQgPSB7CiAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgT3JkZW06ICIiLAogICAgICAgIGlkTWVudTogIm1lbnUtPyIsCiAgICAgICAgdG86ICIvIiwKICAgICAgICBhdXRoOiAiMCIsCiAgICAgICAgY2FwdGlvbjogIiIsCiAgICAgICAgaWNvbjogIiIsCiAgICAgICAgbWVudTogIiIsCiAgICAgICAgY2hlY2s6ICIwIgogICAgICB9OwogICAgICB0aGlzLiRidk1vZGFsLnNob3coIm1vZGFsLW1lbnVzIik7CiAgICB9LAoKICAgIG9uTWVudVVwZGF0ZSgpIHsKICAgICAgdGhpcy5hY3RBZG1pbk1lbnVzVXBkYXRlKHRoaXMubWVudXMuc2VsZWN0ZWQpOwogICAgICB0aGlzLmFjdEFkbWluVXN1YXJpb3NNZW51c0dldCgieCIpOwogICAgfSwKCiAgICBvbk1lbnVFZGl0KG1lbnUpIHsKICAgICAgdGhpcy5tZW51cy5zZWxlY3RlZCA9IG1lbnU7CiAgICAgIHRoaXMuJGJ2TW9kYWwuc2hvdygibW9kYWwtbWVudXMiKTsKICAgIH0sCgogICAgb25NZW51RGVsZXRlKG1lbnUpIHsKICAgICAgdGhpcy4kcm9vdC5zaG93bWVzc2FnZSgiRGVzZWphIHJlYWxtZW50ZSBleGNsdWlyIGVzdGUgbWVudSA/IiwgIkludHJhbmV0IikudGhlbihjaG9pY2UgPT4gewogICAgICAgIGlmIChjaG9pY2UpIGNvbnNvbGUubG9nKCJvbk1lbnVEZWxldGUiKTsKICAgICAgfSk7CiAgICB9CgogIH0sCiAgd2F0Y2g6IHsKICAgIGd0eGFkbWlubWVudXMobWVudXMpIHsKICAgICAgdGhpcy5tZW51cy5kYXRhID0gbWVudXM7CiAgICAgIHRoaXMubWVudXMudG90YWxSb3dzID0gbWVudXMubGVuZ3RoOwogICAgfQoKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoKA;AACA;EACAA,aADA;;EAGAC;IACA;MACAC;QACAC,YADA;QAEAC,UAFA;QAGAC;UAAAC;UAAAC;QAAA,aAHA;QAIAC,YAJA;QAKAP;MALA;IADA;EASA,CAbA;;EAeAQ,YACA,gCADA;;IAEAC;MACA;QAAAC;QAAAC;MAAA;MACA;QACA;UACAV;YACAS,eADA;YAEAC;UAFA;QAIA;MACA,CAPA;MAQA;IACA,CAbA;;IAcAC;MACA,OACA,gCACA,GADA,GAEA,6CAHA;IAKA,CApBA;;IAqBAC;MACA,2DACA,0CADA,GAEA,QAFA;IAGA;;EAzBA,CAfA;;EA2CAC;IACA;EACA,CA7CA;;EA+CAC,WACA,kEADA;;IAGAC;MACA,oBACAC,iBADA,GAEAC,UAFA,CAEA,GAFA,EAEA,GAFA,EAGAC,SAHA,CAGA,KAHA,EAIAC,OAJA,CAIA,kBAJA,EAIA,EAJA;IAKA,CATA;;IAWAC;MACA;MACA;IACA,CAdA;;IAeAC;MACA;QACAC,QADA;QAEAC,SAFA;QAGAC,gBAHA;QAIAC,OAJA;QAKAC,SALA;QAMAC,WANA;QAOAC,QAPA;QAQAC,QARA;QASAC;MATA;MAWA;IACA,CA5BA;;IA6BAC;MACA;MACA;IACA,CAhCA;;IAiCAC;MACA;MACA;IACA,CApCA;;IAqCAC;MACA,WACAC,WADA,CACA,sCADA,EACA,UADA,EAEAC,IAFA,CAEAC;QACA;MACA,CAJA;IAKA;;EA3CA,CA/CA;EA6FAC;IACAC;MACA;MACA;IACA;;EAJA;AA7FA","names":["name","data","menus","selected","filter","fields","key","sortable","totalRows","computed","menuspai","value","text","labelsugestao","labelidMenu","beforeMount","methods","getmenuname","toLocaleLowerCase","replaceAll","normalize","replace","onMenusFiltered","onMenuNovo","id","Ordem","idMenu","to","auth","caption","icon","menu","check","onMenuUpdate","onMenuEdit","onMenuDelete","showmessage","then","choice","watch","gtxadminmenus"],"sourceRoot":"src/pages/admin/views","sources":["Menus.vue"],"sourcesContent":["<template>\r\n  <div class=\"m-2\">\r\n    <b-card>\r\n      <b-card-title>Menus</b-card-title>\r\n      <b-card-body>\r\n        <b-row>\r\n          <b-col cols=\"12\" lg=\"9\" md=\"7\" class=\"mb-2\">\r\n            <b-input-group prepend=\"Filtro\" size=\"sm\" class=\"mb-2\">\r\n              <b-form-input\r\n                id=\"input-menu-filtro\"\r\n                type=\"search\"\r\n                v-model=\"menus.filter\"\r\n              >\r\n              </b-form-input>\r\n            </b-input-group>\r\n          </b-col>\r\n          <b-col cols=\"12\" lg=\"3\" md=\"5\" class=\"mb-2\">\r\n            <b-button class=\"float-right\" variant=\"primary\" @click=\"onMenuNovo\">\r\n              <b-icon-plus />\r\n              <span>Novo menu</span>\r\n            </b-button>\r\n          </b-col>\r\n        </b-row>\r\n        <b-table\r\n          small\r\n          striped\r\n          hover\r\n          :items=\"menus.data\"\r\n          :fields=\"menus.fields\"\r\n          :filter=\"menus.filter\"\r\n          @filtered=\"onMenusFiltered\"\r\n        >\r\n          <template #cell(menu)=\"data\" class=\"font-weight-bolder\">\r\n            <span :class=\"data.item.idMenuPai ? 'ml-2' : 'font-weight-bolder'\">\r\n              <b-icon class=\"mx-2\" :icon=\"data.item.icon\"> </b-icon>\r\n            </span>\r\n            <span\r\n              class=\"ml-2\"\r\n              :class=\"data.item.idMenuPai ? '' : 'font-weight-bolder'\"\r\n              >{{ data.item.menu }}\r\n              <b-badge class=\"ml-2\" variant=\"light\"\r\n                ><b-icon-lock v-if=\"data.item.auth == 1\"\r\n              /></b-badge>\r\n            </span>\r\n          </template>\r\n\r\n          <template #cell(actions)=\"data\">\r\n            <span class=\"iconbutton\" @click=\"onMenuEdit(data.item)\">\r\n              <b-icon-pencil variant=\"success\" />\r\n            </span>\r\n            <span class=\"iconbutton\" @click=\"onMenuDelete(data.item)\">\r\n              <b-icon-trash variant=\"danger\" />\r\n            </span>\r\n          </template>\r\n        </b-table>\r\n        <hr />\r\n        <span class=\"mr-4 font-weight-bolder\">\r\n          Total: {{ menus.totalRows }}\r\n        </span>\r\n      </b-card-body>\r\n    </b-card>\r\n\r\n    <b-modal\r\n      scrollable\r\n      id=\"modal-menus\"\r\n      title=\"Editar\"\r\n      ok-title=\"Salvar\"\r\n      ok-variant=\"success\"\r\n      cancel-title=\"Cancelar\"\r\n      @ok=\"onMenuUpdate\"\r\n    >\r\n      <b-form-group id=\"input-idMenu\" :label=\"labelidMenu\" label-for=\"idMenu\">\r\n        <b-form-input\r\n          id=\"idMenu\"\r\n          v-model=\"menus.selected.idMenu\"\r\n          type=\"text\"\r\n          placeholder=\"idMenu\"\r\n          required\r\n        ></b-form-input>\r\n      </b-form-group>\r\n      <b-form-group\r\n        id=\"input-idMenuPai\"\r\n        label=\"idMenuPai\"\r\n        label-for=\"idMenuPai\"\r\n      >\r\n        <b-form-select\r\n          id=\"idMenuPai\"\r\n          v-model=\"menus.selected.idMenuPai\"\r\n          :options=\"menuspai\"\r\n        ></b-form-select>\r\n      </b-form-group>\r\n      <b-form-group id=\"input-caption\" label=\"Caption\" label-for=\"caption\">\r\n        <b-form-input\r\n          id=\"caption\"\r\n          v-model=\"menus.selected.caption\"\r\n          type=\"text\"\r\n          placeholder=\"Caption\"\r\n          required\r\n        ></b-form-input>\r\n      </b-form-group>\r\n      <label>Ícone</label>\r\n      <b-input-group>\r\n        <b-input-group-prepend>\r\n          <b-button\r\n            variant=\"outline-secondary\"\r\n            href=\"https://bootstrap-vue.org/docs/icons#icons\"\r\n            target=\"_blank\"\r\n          >\r\n            <b-icon :icon=\"menus.selected.icon\" />\r\n          </b-button>\r\n        </b-input-group-prepend>\r\n        <b-form-input\r\n          id=\"icon\"\r\n          v-model=\"menus.selected.icon\"\r\n          type=\"text\"\r\n          placeholder=\"Ícone\"\r\n          required\r\n        ></b-form-input>\r\n      </b-input-group>\r\n      <b-form-group id=\"input-to\" label=\"Rota\" label-for=\"to\">\r\n        <b-form-input\r\n          id=\"to\"\r\n          v-model=\"menus.selected.to\"\r\n          type=\"text\"\r\n          placeholder=\"Rota\"\r\n          required\r\n        ></b-form-input>\r\n      </b-form-group>\r\n      <b-form-group id=\"input-toParam\" label=\"Parâmetros\" label-for=\"toParam\">\r\n        <b-form-input\r\n          id=\"toParam\"\r\n          v-model=\"menus.selected.toparam\"\r\n          type=\"text\"\r\n          placeholder=\"Parametros\"\r\n          required\r\n        ></b-form-input>\r\n      </b-form-group>\r\n\r\n      <b-form-group id=\"input-auth\">\r\n        <b-form-checkbox\r\n          id=\"auth\"\r\n          switch\r\n          v-model=\"menus.selected.auth\"\r\n          name=\"checkbox-1\"\r\n          value=\"1\"\r\n          unchecked-value=\"0\"\r\n        >\r\n          Necessário autenticação\r\n        </b-form-checkbox>\r\n      </b-form-group>\r\n    </b-modal>\r\n\r\n    <!--\r\n    menus.selected: {{ menus.selected }}\r\n\r\n    menuspai:\r\n    <pre>{{ menuspai }}</pre>\r\n\r\n    menus:\r\n    <pre>{{ menus }}</pre>\r\n    -->\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nexport default {\r\n  name: \"Menus\",\r\n\r\n  data() {\r\n    return {\r\n      menus: {\r\n        selected: {},\r\n        filter: \"\",\r\n        fields: [{ key: \"menu\", sortable: true }, \"actions\"],\r\n        totalRows: 0,\r\n        data: [],\r\n      },\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"gtxadminmenus\"]),\r\n    menuspai() {\r\n      const menus = [{ value: null, text: \"Menu Pai\" }];\r\n      this.menus.data.map((m) => {\r\n        if (!m.hasOwnProperty(\"idMenuPai\")) {\r\n          menus.push({\r\n            value: m.idMenu,\r\n            text: m.caption + \" - #\" + m.idMenu,\r\n          });\r\n        }\r\n      });\r\n      return menus;\r\n    },\r\n    labelsugestao() {\r\n      return (\r\n        this.menus.selected.idMenuPai +\r\n        \"-\" +\r\n        this.getmenuname(this.menus.selected.caption)\r\n      );\r\n    },\r\n    labelidMenu() {\r\n      return this.labelsugestao !== this.menus.selected.idMenu\r\n        ? \"idMenu - Sugestão #\" + this.labelsugestao\r\n        : \"idMenu\";\r\n    },\r\n  },\r\n\r\n  beforeMount() {\r\n    this.actAdminUsuariosMenusGet(\"x\");\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"actAdminUsuariosMenusGet\", \"actAdminMenusUpdate\"]),\r\n\r\n    getmenuname(nome) {\r\n      return (nome || \"\")\r\n        .toLocaleLowerCase()\r\n        .replaceAll(\" \", \"_\")\r\n        .normalize(\"NFD\")\r\n        .replace(/[\\u0300-\\u036f]/g, \"\");\r\n    },\r\n\r\n    onMenusFiltered(filteredItems) {\r\n      // Trigger pagination to update the number of buttons/pages due to filtering\r\n      this.menus.totalRows = filteredItems.length;\r\n    },\r\n    onMenuNovo() {\r\n      this.menus.selected = {\r\n        id: null,\r\n        Ordem: \"\",\r\n        idMenu: \"menu-?\",\r\n        to: \"/\",\r\n        auth: \"0\",\r\n        caption: \"\",\r\n        icon: \"\",\r\n        menu: \"\",\r\n        check: \"0\",\r\n      };\r\n      this.$bvModal.show(\"modal-menus\");\r\n    },\r\n    onMenuUpdate() {\r\n      this.actAdminMenusUpdate(this.menus.selected);\r\n      this.actAdminUsuariosMenusGet(\"x\");\r\n    },\r\n    onMenuEdit(menu) {\r\n      this.menus.selected = menu;\r\n      this.$bvModal.show(\"modal-menus\");\r\n    },\r\n    onMenuDelete(menu) {\r\n      this.$root\r\n        .showmessage(\"Deseja realmente excluir este menu ?\", \"Intranet\")\r\n        .then((choice) => {\r\n          if (choice) console.log(\"onMenuDelete\");\r\n        });\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    gtxadminmenus(menus) {\r\n      this.menus.data = menus;\r\n      this.menus.totalRows = menus.length;\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}