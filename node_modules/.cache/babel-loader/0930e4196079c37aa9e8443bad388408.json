{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\consultas\\components\\resultquery.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\consultas\\components\\resultquery.vue","mtime":1701906516458},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBUEkgZnJvbSAiLi4vLi4vLi4vc2VydmljZXMvYXBpLnNlcnZpY2UiOwppbXBvcnQgRXhwb3J0RmlsZSBmcm9tICIuLi8uLi8uLi9jb21wb25lbnRzL0V4cG9ydEZpbGUudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJyZXN1bHRxdWVyeSIsCiAgY29tcG9uZW50czogewogICAgRXhwb3J0RmlsZQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWQ6IGZhbHNlLAogICAgICBwcmludGluZzogZmFsc2UsCiAgICAgIHBhcmFtc2FwaTogdGhpcy5wYXJhbXMsCiAgICAgIGFwaXJlc3BvbnNlOiB7CiAgICAgICAgRGF0YTogW10sCiAgICAgICAgUGFnaW5hczogewogICAgICAgICAgUGFnZUNvdW50OiAxLAogICAgICAgICAgUGFnZVNpemU6IDEwCiAgICAgICAgfQogICAgICB9LAogICAgICBkYXRhOiBbXSwKICAgICAgcGFnZXM6IFsxNSwgMzAsIDUwLCAxMDAsIDUwMCwgMTAwMCwgOTk5OTk5OV0sCiAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLnBhcmFtcy5QYWdlTnVtYmVyIHx8IDEsCiAgICAgIGN1cnJlbnRwZXJQYWdlOiB0aGlzLnBhcmFtcy5QYWdlU2l6ZSB8fCAzMCwKICAgICAgdG90YWxSb3dzOiAxLAogICAgICBjc3ZwYXJhbTogewogICAgICAgIGZsZDogW10sCiAgICAgICAgc2VwOiAiOyIsCiAgICAgICAgcXVvdGVkOiAiIiwKICAgICAgICB3aGVhZDogdHJ1ZSwKICAgICAgICBmaWxlbmFtZTogInJlc3VsdGFkby5kYXQiLAogICAgICAgIGNzdnN0cmVhbTogIiIsCiAgICAgICAgZGF0YTogW10KICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjb2x1bW5zZGF0YSgpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YVswXSB8fCB7fTsKICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGRhdGEpOwogICAgfSwKICAgIGNvbHVtbnNwYW4oKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbHVtbnNkYXRhLmxlbmd0aDsKICAgIH0sCiAgICBleHBvcnRmaWxlbmFtZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXBpOwogICAgfSwKICAgIHByaW50Y2FwdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuY29uc3VsdGEuY2FwdGlvbiB8fCAiSW1wcmVzc8OjbyBkZSBjb25zdWx0YXMiOwogICAgfSwKICAgIHNlbGVjdGVkZGF0YSgpIHsKICAgICAgcmV0dXJuIHRoaXMuZGF0YS5maWx0ZXIoZiA9PiBmLmNoZWNrZWQgPT0gdHJ1ZSkubGVuZ3RoID4gMCA/IHRoaXMuZGF0YS5maWx0ZXIoZiA9PiBmLmNoZWNrZWQgPT0gdHJ1ZSkgOiB0aGlzLmRhdGE7CiAgICB9CiAgfSwKICBwcm9wczogewogICAgYXBpOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIKICAgIH0sCiAgICBjb25zdWx0YTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIG5hbWU6ICIiLAogICAgICAgICAgY2FwdGlvbjogIiIsCiAgICAgICAgICBzZXNzaW9uOiAiIiwKICAgICAgICAgIGljb246ICIiLAogICAgICAgICAgaWQ6IDAKICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgcGFyYW1zOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgUGFnZU51bWJlcjogMSwKICAgICAgICAgIFBhZ2VTaXplOiAzMAogICAgICAgIH07CiAgICAgIH0KICAgIH0KICB9LAogIGJlZm9yZU1vdW50KCkgewogICAgaWYgKHRoaXMuYXBpICYmIHRoaXMuYXBpICE9PSAiIikgdGhpcy5nZXRGcm9tQXBpKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBnZXRGcm9tQXBpKCkgewogICAgICAvLyBjb25zb2xlLmxvZygnZ2V0RnJvbUFwaScpCiAgICAgIHRoaXMucGFyYW1zYXBpLlBhZ2VOdW1iZXIgPSB0aGlzLmN1cnJlbnRQYWdlOwogICAgICB0aGlzLnBhcmFtc2FwaS5QYWdlU2l6ZSA9IHRoaXMuY3VycmVudHBlclBhZ2U7CiAgICAgIHRoaXMubG9hZCA9IHRydWU7CiAgICAgIGF3YWl0IEFQSS5nZXQodGhpcy5hcGksIHsKICAgICAgICBwYXJhbXM6IHRoaXMucGFyYW1zYXBpCiAgICAgIH0pLnRoZW4oYXBpZGF0YSA9PiB7CiAgICAgICAgLy8gc2UgdmVtIGRhIEFQSSByZW1vdmUgbyBjb250cm9sZSBkZSBwYWdpbmHDp8OjbyAuLi4KICAgICAgICB0aGlzLmxvYWQgPSBmYWxzZTsKICAgICAgICB0aGlzLmFwaXJlc3BvbnNlID0gQVBJLnByZXBhcmVEYXRhKGFwaWRhdGEuZGF0YSk7CiAgICAgICAgaWYgKGFwaWRhdGEuZGF0YS5TdWNjZXNzID09ICJUcnVlIikgewogICAgICAgICAgdGhpcy5kYXRhID0gYXBpZGF0YS5kYXRhLkRhdGE7CiAgICAgICAgICB0aGlzLnRvdGFsUm93cyA9IGFwaWRhdGEuZGF0YS5QYWdpbmFzLlBhZ2VTaXplICogYXBpZGF0YS5kYXRhLlBhZ2luYXMuUGFnZUNvdW50OwogICAgICAgIH0KICAgICAgICB0aGlzLiRlbWl0KCJldnQtZG9uZSIsIHRoaXMuYXBpcmVzcG9uc2UpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyBnZXRGcm9tQXBpCiAgICBvbkNoZWNrYWxsKGNoZWNrKSB7CiAgICAgIHRoaXMuZGF0YS5tYXAoZCA9PiBkLmNoZWNrZWQgPSBjaGVjayk7CiAgICB9LAogICAgLy8gb25DaGVja2FsbAogICAgZG93bmxvYWQoKSB7CiAgICAgIHRoaXMuY3N2cGFyYW0uZGF0YSA9IHRoaXMuc2VsZWN0ZWRkYXRhOwogICAgICB0aGlzLiRidk1vZGFsLnNob3coIm1vZGFsLWV4cG9ydCIpOwogICAgfSwKICAgIC8vIGRvd25sb2FkCiAgICBpbXByaW1pcih0YWdpZCkgewogICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhZ2lkKS5pbm5lckhUTUw7CiAgICAgIHRoaXMucHJpbnRFbGVtZW50Q29udGVudChlbCk7CiAgICB9LAogICAgLy8gaW1wcmltaXIKICAgIHByaW50RWxlbWVudENvbnRlbnQoZWwpIHsKICAgICAgdmFyIHByaW50V2luZG93ID0gd2luZG93Lm9wZW4oIiIsICJJbXByZXNzw6NvIGRvIHJlbGF0w7NyaW8iLCAicmVzaXphYmxlLHNjcm9sbGJhcnMsc3RhdHVzIik7CiAgICAgIHByaW50V2luZG93LmRvY3VtZW50LndyaXRlKCI8aHRtbD48aGVhZD48dGl0bGU+IiArIGRvY3VtZW50LnRpdGxlICsgIjwvdGl0bGU+Iik7CiAgICAgIHByaW50V2luZG93LmRvY3VtZW50LndyaXRlKCc8bGluayB0eXBlPSJ0ZXh0L2NzcyIgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSIvL3VucGtnLmNvbS9ib290c3RyYXAvZGlzdC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiLz4nKTsKICAgICAgcHJpbnRXaW5kb3cuZG9jdW1lbnQud3JpdGUoIjwvaGVhZD48Ym9keT4iKTsKICAgICAgcHJpbnRXaW5kb3cuZG9jdW1lbnQud3JpdGUoZWwpOwogICAgICBwcmludFdpbmRvdy5kb2N1bWVudC53cml0ZSgiPC9ib2R5PjwvaHRtbD4iKTsKCiAgICAgIC8vcHJpbnRXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTsgLy8gbmVjZXNzYXJ5IGZvciBJRSA+PSAxMAogICAgICBwcmludFdpbmRvdy5mb2N1cygpOyAvLyBuZWNlc3NhcnkgZm9yIElFID49IDEwKi8KCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHByaW50V2luZG93LnByaW50KCk7CiAgICAgICAgcHJpbnRXaW5kb3cuY2xvc2UoKTsKICAgICAgICB0aGlzLiRidk1vZGFsLmhpZGUoIm1vZGFsLWltcHJpbWlyIik7CiAgICAgIH0sIDIwMDApOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gLy8gcHJpbnRFbGVtZW50Q29udGVudChlbCkKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8PA;AACA;AACA;EACAA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;QAAAC;QAAAC;UAAAC;UAAAC;QAAA;MAAA;MACAR;MACAS;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAnB;MACA;IACA;EACA;EACAoB;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA,6DACA,2CACA;IACA;EACA;EACAC;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;QACA;UACAhC;UACAkC;UACAC;UACAC;UACAC;QACA;MACA;IACA;IACAC;MACAP;MACAC;QACA;UACAO;UACA5B;QACA;MACA;IACA;EACA;EACA6B;IACA;EACA;EACAC;IACA;MACA;MACA;MACA;MAEA;MACA;QAAAH;MAAA;QACA;QACA;QACA;QACA;UACA;UACA,iBACAI;QACA;QACA;MACA;IACA;IAAA;IACAC;MACA;IACA;IAAA;IACAC;MACA;MACA;IACA;IAAA;IACAC;MACA;MACA;IACA;IAAA;IACAC;MACA,8BACA,IACA,0BACA,8BACA;MAEAC,2BACA,oDACA;MAEAA,2BACA,mGACA;MAEAA;MACAA;MACAA;;MAEA;MACAA;;MAEAC;QACAD;QACAA;QACA;MACA;MAEA;IACA;EACA;AACA","names":["name","components","ExportFile","data","load","printing","paramsapi","apiresponse","Data","Paginas","PageCount","PageSize","pages","currentPage","currentperPage","totalRows","csvparam","fld","sep","quoted","whead","filename","csvstream","computed","columnsdata","columnspan","exportfilename","printcaption","selecteddata","props","api","type","default","consulta","caption","session","icon","id","params","PageNumber","beforeMount","methods","apidata","onCheckall","download","imprimir","printElementContent","printWindow","setTimeout"],"sourceRoot":"src/pages/consultas/components","sources":["resultquery.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <b-overlay :show=\"load\" rounded=\"sm\">\r\n      <div class=\"d-flex justify-content-between\">\r\n        <div>\r\n          <b-button-group>\r\n            <b-button\r\n              class=\"border\"\r\n              variant=\"light\"\r\n              size=\"sm\"\r\n              @click=\"imprimir('printarea')\"\r\n            >\r\n              <b-icon-printer variant=\"primary\" />\r\n            </b-button>\r\n            <b-button\r\n              class=\"border\"\r\n              variant=\"light\"\r\n              size=\"sm\"\r\n              @click=\"download()\"\r\n            >\r\n              <b-icon-download variant=\"primary\" />\r\n            </b-button>\r\n          </b-button-group>\r\n        </div>\r\n\r\n        <div class=\"d-flex\">\r\n          <b-pagination\r\n            v-if=\"totalRows > 1\"\r\n            v-model=\"currentPage\"\r\n            :total-rows=\"totalRows\"\r\n            :per-page=\"currentperPage\"\r\n            aria-controls=\"tableSearch\"\r\n            size=\"sm\"\r\n            @change=\"getFromApi\"\r\n          />\r\n\r\n          <b-form-select\r\n            v-model=\"currentperPage\"\r\n            :options=\"pages\"\r\n            size=\"sm\"\r\n            width=\"10px\"\r\n            class=\"ml-2\"\r\n            @change=\"getFromApi\"\r\n          >\r\n          </b-form-select>\r\n        </div>\r\n      </div>\r\n\r\n      <!--\r\n        :fields=\"showcolumns\"\r\n        :current-page=\"activepage\"\r\n        :total-rows=\"totalRows\"\r\n        :perPage=\"currentperPage\"\r\n        :tbody-tr-class=\"rowChecked\"\r\n        sort-icon-left\r\n        :sort-by.sync=\"sortBy\"\r\n        :sort-desc.sync=\"sortDesc\"\r\n        @row-selected=\"rowSelect\"\r\n       -->\r\n\r\n      <div id=\"printarea\">\r\n        <b-table\r\n          id=\"tableSearch\"\r\n          ref=\"tableSearch\"\r\n          striped\r\n          hover\r\n          small\r\n          bordered\r\n          responsive=\"sm\"\r\n          head-variant=\"light\"\r\n          selectable\r\n          select-mode=\"single\"\r\n          selected-variant=\"success\"\r\n          :items=\"data\"\r\n          :fields=\"columnsdata\"\r\n        >\r\n          <template #head(checked)>\r\n            <div class=\"text-center\">\r\n              <b-form-checkbox @change=\"onCheckall($event)\"></b-form-checkbox>\r\n            </div>\r\n          </template>\r\n          <!-- detalhe da coluna check -->\r\n          <template #cell(checked)=\"data\">\r\n            <div class=\"text-center\">\r\n              <b-form-checkbox v-model=\"data.item.checked\"></b-form-checkbox>\r\n            </div>\r\n          </template>\r\n\r\n          <!-- <template #thead-top>\r\n            <b-tr>\r\n              <b-th :colspan=\"columnspan\" variant=\"secondary\">\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                  <div class=\"ml-2\">\r\n                    Header da tabela\r\n                  </div>\r\n                </div>\r\n              </b-th>\r\n            </b-tr>\r\n          </template> -->\r\n\r\n          <!-- header da coluna actions ->\r\n        <template #head(actions)=\"data\">\r\n          <div class=\"text-center\">\r\n            {{ data.label }}\r\n          </div>\r\n        </template>\r\n        -->\r\n\r\n          <!-- detalhe da coluna actions ->\r\n        <template #cell(actions)=\"data\">\r\n          <div class=\"text-center\">\r\n            <!-- Botões fixos para edição ->\r\n            <b-button-group>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('insert')\"\r\n                variant=\"outline-primary\"\r\n                v-b-tooltip.hover.topleft=\"'Incluir'\"\r\n                @click=\"rowInsert(data)\"\r\n                ><b-icon-plus\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('edit')\"\r\n                variant=\"outline-success\"\r\n                v-b-tooltip.hover.topleft=\"'Editar'\"\r\n                @click=\"rowEdit(data)\"\r\n                ><b-icon-pencil\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('delete')\"\r\n                variant=\"outline-danger\"\r\n                v-b-tooltip.hover.topleft=\"'Deletar'\"\r\n                @click=\"rowDelete(data)\"\r\n                ><b-icon-trash\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('run')\"\r\n                variant=\"outline-warning\"\r\n                v-b-tooltip.hover.topleft=\"'Executar'\"\r\n                @click=\"rowRun(data)\"\r\n                ><b-icon-lightning\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('info')\"\r\n                variant=\"outline-info\"\r\n                v-b-tooltip.hover.topleft=\"'Informações'\"\r\n                @click=\"rowInform(data)\"\r\n                ><b-icon-info-circle\r\n              /></b-button>\r\n            </b-button-group>\r\n            <!-- Botões dinamicos criados pelo usuário ->\r\n            <b-button\r\n              v-for=\"(b, i) of custombuttons\"\r\n              :key=\"i\"\r\n              :size=\"b.size\"\r\n              :variant=\"b.variant\"\r\n              v-b-tooltip\r\n              :title=\"b.tooltip\"\r\n              class=\"ml-1\"\r\n              @click=\"rowCustomButton(b, data.item)\"\r\n            >\r\n              <b-icon v-if=\"b.icon\" :icon=\"b.icon\" />\r\n              <span v-if=\"b.label\">{{ b.label }}</span>\r\n            </b-button>\r\n          </div>\r\n        </template>\r\n        -->\r\n          <!-- header da coluna check ->\r\n        <template #head(check)>\r\n          <div class=\"text-center\">\r\n            <b-form-checkbox @change=\"onCheckall\"></b-form-checkbox>\r\n          </div>\r\n        </template>\r\n        <!-- detalhe da coluna check ->\r\n        <template #cell(check)=\"data\">\r\n          <div class=\"text-center\">\r\n            <b-form-checkbox v-model=\"data.item.checked\"></b-form-checkbox>\r\n          </div>\r\n        </template>\r\n        -->\r\n\r\n          <!-- Default fall-back custom formatted footer cell\r\n            <template #foot()=\"data\">\r\n                <i>{{ data.item }}</i>\r\n                pq não aparece isso ?\r\n            </template> \r\n        -->\r\n          <!--\r\n        <template #head(custombuttons)=\"data\">\r\n          <div class=\"text-center\">\r\n            {{ data.label }}\r\n          </div>\r\n        </template>\r\n        <template v-slot:cell(custombuttons)>\r\n          <slot class=\"text-center\"></slot>\r\n        </template>\r\n\r\n        <template slot=\"bottom-row\" v-if=\"soma.lenght > 0\">\r\n          <td v-for=\"(c, i) of sumcolumns\" :key=\"i\">\r\n            <span class=\"font-weight-bolder\">{{ c }}</span>\r\n          </td>\r\n        </template>\r\n        -->\r\n        </b-table>\r\n\r\n        <!-- <div class=\"d-flex float-left font-weight-bold ml-3\">\r\n          <span v-if=\"totalRows == 1\"> {{ totalRows }} registro </span>\r\n          <span v-else> {{ totalRows }} registros </span>\r\n        </div> -->\r\n      </div>\r\n\r\n      <div class=\"d-flex float-right\">\r\n        <b-pagination\r\n          v-if=\"totalRows > 1\"\r\n          v-model=\"currentPage\"\r\n          :total-rows=\"totalRows\"\r\n          :per-page=\"currentperPage\"\r\n          aria-controls=\"tableSearch\"\r\n          size=\"sm\"\r\n        >\r\n        </b-pagination>\r\n        <b-form-select\r\n          v-model=\"currentperPage\"\r\n          :options=\"pages\"\r\n          size=\"sm\"\r\n          class=\"ml-2\"\r\n        ></b-form-select>\r\n      </div>\r\n    </b-overlay>\r\n\r\n    <!-- selecteddata: {{ selecteddata }}<br />\r\n    columnsdata: {{ columnsdata }} -->\r\n\r\n    <!-- MODAIS -->\r\n    <b-modal\r\n      id=\"modal-export\"\r\n      ref=\"modal-export\"\r\n      title=\"Exportar\"\r\n      size=\"xl\"\r\n      header-bg-variant=\"primary\"\r\n      header-text-variant=\"light\"\r\n      hide-footer\r\n      scrollable\r\n    >\r\n      <ExportFile v-model=\"csvparam\" :filename=\"exportfilename\" />\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport API from \"../../../services/api.service\";\r\nimport ExportFile from \"../../../components/ExportFile.vue\";\r\nexport default {\r\n  name: \"resultquery\",\r\n  components: {\r\n    ExportFile,\r\n  },\r\n  data() {\r\n    return {\r\n      load: false,\r\n      printing: false,\r\n      paramsapi: this.params,\r\n      apiresponse: { Data: [], Paginas: { PageCount: 1, PageSize: 10 } },\r\n      data: [],\r\n      pages: [15, 30, 50, 100, 500, 1000, 9999999],\r\n      currentPage: this.params.PageNumber || 1,\r\n      currentperPage: this.params.PageSize || 30,\r\n      totalRows: 1,\r\n      csvparam: {\r\n        fld: [],\r\n        sep: \";\",\r\n        quoted: \"\",\r\n        whead: true,\r\n        filename: \"resultado.dat\",\r\n        csvstream: \"\",\r\n        data: [],\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    columnsdata() {\r\n      const data = this.data[0] || {};\r\n      return Object.keys(data);\r\n    },\r\n    columnspan() {\r\n      return this.columnsdata.length;\r\n    },\r\n    exportfilename() {\r\n      return this.api;\r\n    },\r\n    printcaption() {\r\n      return this.consulta.caption || \"Impressão de consultas\";\r\n    },\r\n    selecteddata() {\r\n      return this.data.filter((f) => f.checked == true).length > 0\r\n        ? this.data.filter((f) => f.checked == true)\r\n        : this.data;\r\n    },\r\n  },\r\n  props: {\r\n    api: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    consulta: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          name: \"\",\r\n          caption: \"\",\r\n          session: \"\",\r\n          icon: \"\",\r\n          id: 0,\r\n        };\r\n      },\r\n    },\r\n    params: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          PageNumber: 1,\r\n          PageSize: 30,\r\n        };\r\n      },\r\n    },\r\n  },\r\n  beforeMount() {\r\n    if (this.api && this.api !== \"\") this.getFromApi();\r\n  },\r\n  methods: {\r\n    async getFromApi() {\r\n      // console.log('getFromApi')\r\n      this.paramsapi.PageNumber = this.currentPage;\r\n      this.paramsapi.PageSize = this.currentperPage;\r\n\r\n      this.load = true;\r\n      await API.get(this.api, { params: this.paramsapi }).then((apidata) => {\r\n        // se vem da API remove o controle de paginação ...\r\n        this.load = false;\r\n        this.apiresponse = API.prepareData(apidata.data);\r\n        if (apidata.data.Success == \"True\") {\r\n          this.data = apidata.data.Data;\r\n          this.totalRows =\r\n            apidata.data.Paginas.PageSize * apidata.data.Paginas.PageCount;\r\n        }\r\n        this.$emit(\"evt-done\", this.apiresponse);\r\n      });\r\n    }, // getFromApi\r\n    onCheckall(check) {\r\n      this.data.map((d) => (d.checked = check));\r\n    }, // onCheckall\r\n    download() {\r\n      this.csvparam.data = this.selecteddata;\r\n      this.$bvModal.show(\"modal-export\");\r\n    }, // download\r\n    imprimir(tagid) {\r\n      const el = document.getElementById(tagid).innerHTML;\r\n      this.printElementContent(el);\r\n    }, // imprimir\r\n    printElementContent(el) {\r\n      var printWindow = window.open(\r\n        \"\",\r\n        \"Impressão do relatório\",\r\n        \"resizable,scrollbars,status\"\r\n      );\r\n\r\n      printWindow.document.write(\r\n        \"<html><head><title>\" + document.title + \"</title>\"\r\n      );\r\n\r\n      printWindow.document.write(\r\n        '<link type=\"text/css\" rel=\"stylesheet\" href=\"//unpkg.com/bootstrap/dist/css/bootstrap.min.css\"/>'\r\n      );\r\n\r\n      printWindow.document.write(\"</head><body>\");\r\n      printWindow.document.write(el);\r\n      printWindow.document.write(\"</body></html>\");\r\n\r\n      //printWindow.document.close(); // necessary for IE >= 10\r\n      printWindow.focus(); // necessary for IE >= 10*/\r\n\r\n      setTimeout(() => {\r\n        printWindow.print();\r\n        printWindow.close();\r\n        this.$bvModal.hide(\"modal-imprimir\");\r\n      }, 2000);\r\n\r\n      return true;\r\n    }, // printElementContent(el)\r\n  },\r\n};\r\n</script>\r\n"]}]}