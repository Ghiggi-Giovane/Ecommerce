{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\almoxarifado\\views\\gaiolasitens.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\almoxarifado\\views\\gaiolasitens.vue","mtime":1670977910600},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwQWN0aW9ucywgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgR2Fpb2xhc0l0ZW5zIGZyb20gIi4uL2NvbXBvbmVudHMvR2Fpb2xhc0l0ZW5zLnZ1ZSI7CmltcG9ydCBHYWlvbGFzSXRlbnNCdXNjYSBmcm9tICIuLi9jb21wb25lbnRzL0dhaW9sYXNJdGVuc0J1c2NhLnZ1ZSI7CmltcG9ydCBUYWJsZUVkaXRBcGkgZnJvbSAiLi4vLi4vLi4vY29tcG9uZW50cy9UYWJsZUVkaXRBcGkudnVlIjsKaW1wb3J0IERlcG9zaXRvcyBmcm9tICIuLi9jb21wb25lbnRzL0RlcG9zaXRvcy52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkdhaW9sYXNJdGVuc1BhZ2UiLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGFiSW5kZXg6IDAsCiAgICAgIHJ1blNlYXJjaEl0ZW1zOiAwLAogICAgICBtYXRlcmlhaXM6IHRoaXMuJHJvdXRlLnBhcmFtcy5tYXRlcmlhaXMsCiAgICAgIGNvbGxhcHNlX2RlcG9zaXRvOiBmYWxzZSwKICAgICAgaXRlbWJ1c2NhOiB7CiAgICAgICAgY29kaWdvOiAiMCIsCiAgICAgICAgZW5kZXJlY286ICIwIiwKICAgICAgICBlbXA6ICIwIiwKICAgICAgICBkZXA6ICIwIiwKICAgICAgICBpdGVtOiBbXSwKICAgICAgICBxdWFudDogIjAiLAogICAgICAgIGRlbGV0YTogIjAiLAogICAgICAgIG5pdmVsOiAiMSIKICAgICAgfQogICAgfTsKICB9LAoKICBjb21wb25lbnRzOiB7CiAgICBHYWlvbGFzSXRlbnMsCiAgICBHYWlvbGFzSXRlbnNCdXNjYSwKICAgIFRhYmxlRWRpdEFwaSwKICAgIERlcG9zaXRvcwogIH0sCiAgY29tcHV0ZWQ6IHsgLi4ubWFwR2V0dGVycyhbImd0eEdhaW9sYXNJdGVuc0RhdGEiLCAiZ3R4R2Fpb2xhc0l0ZW5zRGF0YUxpc3QiLCAiZ3R4QWxtb3hFbXByZXNhRGVwb3NpdG8iXSkKICB9LAoKICBiZWZvcmVNb3VudCgpIHsKICAgIC8vIHRoaXMuaXRlbnMgPSAodGhpcy4kcm91dGUucXVlcnkuaXRlbnMgfHwgJycpLnNwbGl0KCcsJykKICAgIC8vIGNvbnNvbGUubG9nKCdnYWlvbGFzaXRlbnMuYmVmb3JlTW91bnQucm91dGU6Jyx0aGlzLiRyb3V0ZSkKICAgIC8vIGNvbnNvbGUubG9nKCdnYWlvbGFzaXRlbnMuYmVmb3JlTW91bnQucm91dGUucGFyYW1zOicsdGhpcy4kcm91dGUucGFyYW1zKQogICAgLy8gY29uc29sZS5sb2coJ2dhaW9sYXNpdGVucy5iZWZvcmVNb3VudC5yb3V0ZS5wYXJhbXMubWF0ZXJpYWlzOicsdGhpcy4kcm91dGUucGFyYW1zLm1hdGVyaWFpcykKICAgIC8vIGNvbnNvbGUubG9nKCdnYWlvbGFzaXRlbnMuYmVmb3JlTW91bnQucm91dGUucGFyYW1zLm1hdGVyaWFpcy5tYXA6Jyx0aGlzLiRyb3V0ZS5wYXJhbXMubWF0ZXJpYWlzLm1hcChpID0+IGkuaXRlbSkpCiAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLm1hdGVyaWFpcykgewogICAgICAvLyBjb25zb2xlLmxvZygnZ2Fpb2xhc2l0ZW5zLm1hdGVyaWFpczonLCB0aGlzLm1hdGVyaWFpcykKICAgICAgdGhpcy5tYXRlcmlhaXMgPSB0aGlzLiRyb3V0ZS5wYXJhbXMubWF0ZXJpYWlzOyAvLyB0aGlzLml0ZW1idXNjYS5pdGVtID0gdGhpcy5tYXRlcmlhaXMubWFwKGkgPT4gaS5pdGVtKQogICAgfQogIH0sCgogIG1vdW50ZWQoKSB7CiAgICAvLyBvICRyZWZzIHPDsyBmdW5jaW9uYSBkZXBvaXMgZGEgdGVsYSB0b2RhIG1vbnRhZGEsIG7Do28gcm9kYSBubyBiZWZvcmVNb3VudAogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5tYXRlcmlhaXMpIHsKICAgICAgdGhpcy4kcmVmcy5HYWlvbGFzSXRlbnNCdXNjYVJlZi5HYWlvbGFzSXRlbnNCdXNjYVBlc3F1aXNhcigpOwogICAgfQogIH0sCgogIG1ldGhvZHM6IHsgLi4ubWFwQWN0aW9ucyhbImFjdEdhaW9sYXNJdGVuc0luc2VydCIsICJhY3RHYWlvbGFJdGVucyJdKSwKCiAgICBldnRHYWlvbGFJdGVuc3Jvd0NsaWNrKHJvdykgewogICAgICBjb25zb2xlLmxvZygiZXZ0R2Fpb2xhSXRlbnNyb3dDbGljazoiLCByb3cpOwogICAgICBjb25zdCBxdGRlID0gdGhpcy5ndHhHYWlvbGFzSXRlbnNEYXRhTGlzdC5maW5kKGYgPT4gZi5pdGVtID09IHJvdy5pdGVtKS5xdGRlOwogICAgICB0aGlzLml0ZW1idXNjYS5jb2RpZ28gPSByb3cuY29kaWdvIHx8IDA7CiAgICAgIHRoaXMuaXRlbWJ1c2NhLmVuZGVyZWNvID0gcm93LmVuZGVyZWNvIHx8IDA7CiAgICAgIHRoaXMuaXRlbWJ1c2NhLmVtcCA9IHJvdy5lbXAgfHwgODsgLy8gTWF0cml6CgogICAgICB0aGlzLml0ZW1idXNjYS5kZXAgPSByb3cuZGVwIHx8IDM3OyAvLyBBbG1veCBNYXRyaXoKCiAgICAgIHRoaXMuaXRlbWJ1c2NhLml0ZW0gPSByb3cuaXRlbSB8fCBbXTsKCiAgICAgIGlmIChxdGRlICYmIHF0ZGUgPiAwKSB7CiAgICAgICAgdGhpcy5pdGVtYnVzY2EucXVhbnQgPSBxdGRlIHx8IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pdGVtYnVzY2EucXVhbnQgPSByb3cucXVhbnQgfHwgMDsKICAgICAgfQoKICAgICAgdGhpcy5pdGVtYnVzY2EuZGVsZXRhID0gcm93LmRlbGV0YSB8fCAwOwogICAgICB0aGlzLml0ZW1idXNjYS5uaXZlbCA9IHJvdy5uaXZlbCB8fCAwOyAvLyB0aGlzLnRhYkluZGV4ID0gMQoKICAgICAgdGhpcy4kYnZNb2RhbC5zaG93KCJtb2RhbC1nYWlvbGFzaXRlbnMiKTsKICAgIH0sCgogICAgZXZ0R2Fpb2xhc0l0ZW5zVXBkYXRlKHVwZGF0ZWQpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ0dhaW9sYXNJdGVuc3VwZGF0ZTonLCB1cGRhdGVkKQogICAgICBjb25zdCB2bSA9IHRoaXM7CiAgICAgIHRoaXMuYWN0R2Fpb2xhc0l0ZW5zSW5zZXJ0KHVwZGF0ZWQpLnRoZW4oKCkgPT4gewogICAgICAgIHZtLiRyb290LnRvYXN0c3VjY2VzcygiUmVnaXN0cm8gYXR1YWxpemFkbyBjb20gc3VjZXNzbyEiKTsKICAgICAgICB0aGlzLnRhYkluZGV4ID0gMDsgLy8gdGhpcy5ydW5TZWFyY2hJdGVtcysrIC8vIGlzc28gZGlzcGFyYSBhIGJ1c2NhIGRvIFNlYXJjaEFwaSBkb3MgaXRlbnMKCiAgICAgICAgdGhpcy4kcmVmcy5HYWlvbGFzSXRlbnNCdXNjYVJlZi5HYWlvbGFzSXRlbnNCdXNjYVBlc3F1aXNhcigpOwogICAgICB9LCBlcnJvciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coImFjdEdhaW9sYXNJdGVuc0luc2VydDpGcmFjYXNzbyIsIGVycm9yLkVycm9yKTsgLy8gdm0uJHJvb3QudG9hc3RkYW5nZXIoZXJyb3IuRXJyb3IpCiAgICAgIH0pOwogICAgfSwKCiAgICBldnREZXBvc2l0b0NoYW5nZShkZXApIHsKICAgICAgLy8gY29uc29sZS5sb2coJ2V2dERlcG9zaXRvQ2hhbmdlOicsIGRlcCkKICAgICAgdGhpcy5pdGVtYnVzY2EuZW1wID0gZGVwLmVtcHJlc2E7CiAgICAgIHRoaXMuaXRlbWJ1c2NhLmRlcCA9IGRlcC5kZXBvc2l0bzsKICAgIH0KCiAgfSwKICB3YXRjaDogewogICAgZ3R4QWxtb3hFbXByZXNhRGVwb3NpdG8oZGF0YSkgewogICAgICB0aGlzLmVtcCA9IGRhdGEuZW1wcmVzYTsKICAgICAgdGhpcy5kZXAgPSBkYXRhLmRlcG9zaXRvOwogICAgfQoKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;EACAA,wBADA;;EAGAC;IACA;MACAC,WADA;MAEAC,iBAFA;MAIAC,uCAJA;MAMAC,wBANA;MAQAC;QACAC,WADA;QAEAC,aAFA;QAGAC,QAHA;QAIAC,QAJA;QAKAC,QALA;QAMAC,UANA;QAOAC,WAPA;QAQAC;MARA;IARA;EAmBA,CAvBA;;EAyBAC;IACAC,YADA;IAEAC,iBAFA;IAGAC,YAHA;IAIAC;EAJA,CAzBA;EAgCAC,YACA,eACA,qBADA,EAEA,yBAFA,EAGA,yBAHA;EADA,CAhCA;;EAwCAC;IACA;IAEA;IACA;IACA;IACA;IAEA;MACA;MACA,8CAFA,CAGA;IACA;EACA,CArDA;;EAuDAC;IACA;IACA;MACA;IACA;EACA,CA5DA;;EA8DAC,WACA,0DADA;;IAGAC;MACAC;MAEA,wEACAC,IADA;MAGA;MACA;MACA,kCARA,CAQA;;MACA,mCATA,CASA;;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;;MACA;MACA,sCAjBA,CAmBA;;MACA;IACA,CAxBA;;IA0BAC;MACA;MAEA;MAEA,yCACA;QACAC;QACA,kBAFA,CAIA;;QACA;MACA,CAPA,EAQAC;QACAJ,2DADA,CAEA;MACA,CAXA;IAaA,CA5CA;;IA8CAK;MACA;MACA;MACA;IACA;;EAlDA,CA9DA;EAmHAC;IACAC;MACA;MACA;IACA;;EAJA;AAnHA","names":["name","data","tabIndex","runSearchItems","materiais","collapse_deposito","itembusca","codigo","endereco","emp","dep","item","quant","deleta","nivel","components","GaiolasItens","GaiolasItensBusca","TableEditApi","Depositos","computed","beforeMount","mounted","methods","evtGaiolaItensrowClick","console","qtde","evtGaiolasItensUpdate","vm","error","evtDepositoChange","watch","gtxAlmoxEmpresaDeposito"],"sourceRoot":"src/pages/almoxarifado/views","sources":["gaiolasitens.vue"],"sourcesContent":["<template>\r\n  <div class=\"m-2\">\r\n    <b-card header-bg-variant=\"dark\" header-text-variant=\"white\">\r\n      <template #header>\r\n        <div class=\"d-flex justify-content-between align-bottom\">\r\n          <h4 class=\"mb-0 align-middle\">Controle de Estoque</h4>\r\n          <b-button v-b-toggle.collapse_deposito variant=\"primary\" size=\"sm\">\r\n            Mudar depósito\r\n            <b-icon-caret-up v-if=\"collapse_deposito\" />\r\n            <b-icon-caret-down v-else />\r\n          </b-button>\r\n        </div>\r\n      </template>\r\n\r\n      <b-collapse id=\"collapse_deposito\" v-model=\"collapse_deposito\">\r\n        <Depositos @evt-change=\"evtDepositoChange\" />\r\n      </b-collapse>\r\n    </b-card>\r\n\r\n    <b-card>\r\n      <!--\r\n            <GaiolasItensBusca\r\n                ref=\"GaiolasItensBuscaRef\"\r\n                :params=\"itembusca\"\r\n                :materiais=\"materiais\"\r\n                :run=\"runSearchItems\"\r\n                @evt-gaiolaitensrowclick=\"evtGaiolaItensrowClick\"/>\r\n-->\r\n      <GaiolasItensBusca\r\n        ref=\"GaiolasItensBuscaRef\"\r\n        v-model=\"itembusca\"\r\n        :materiais=\"materiais\"\r\n        @evt-gaiolaitensrowclick=\"evtGaiolaItensrowClick\"\r\n      />\r\n    </b-card>\r\n\r\n    <!--\r\n        gtxAlmoxEmpresaDeposito: <pre>{{gtxAlmoxEmpresaDeposito}}</pre>\r\n        gtxGaiolasItensDataList: <pre>{{ gtxGaiolasItensDataList }}</pre>\r\n        materiais: {{ materiais }}<br>\r\n        itembusca: {{ itembusca }}\r\n        -->\r\n\r\n    <b-modal\r\n      id=\"modal-gaiolasitens\"\r\n      ref=\"modal-gaiolasitens\"\r\n      title=\"Movimentação de estoque\"\r\n      size=\"lg\"\r\n      variant=\"dark\"\r\n      hide-footer\r\n      centered\r\n    >\r\n      <GaiolasItens\r\n        v-model=\"itembusca\"\r\n        @etv-gaiolasitensupdate=\"evtGaiolasItensUpdate\"\r\n      />\r\n      <!--:value=\"itembusca\" nao precisaria pois o v-model já joga para o atributo value-->\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nimport GaiolasItens from \"../components/GaiolasItens.vue\";\r\nimport GaiolasItensBusca from \"../components/GaiolasItensBusca.vue\";\r\nimport TableEditApi from \"../../../components/TableEditApi.vue\";\r\nimport Depositos from \"../components/Depositos.vue\";\r\nexport default {\r\n  name: \"GaiolasItensPage\",\r\n\r\n  data() {\r\n    return {\r\n      tabIndex: 0,\r\n      runSearchItems: 0,\r\n\r\n      materiais: this.$route.params.materiais,\r\n\r\n      collapse_deposito: false,\r\n\r\n      itembusca: {\r\n        codigo: \"0\",\r\n        endereco: \"0\",\r\n        emp: \"0\",\r\n        dep: \"0\",\r\n        item: [],\r\n        quant: \"0\",\r\n        deleta: \"0\",\r\n        nivel: \"1\",\r\n      },\r\n    };\r\n  },\r\n\r\n  components: {\r\n    GaiolasItens,\r\n    GaiolasItensBusca,\r\n    TableEditApi,\r\n    Depositos,\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\r\n      \"gtxGaiolasItensData\",\r\n      \"gtxGaiolasItensDataList\",\r\n      \"gtxAlmoxEmpresaDeposito\",\r\n    ]),\r\n  },\r\n\r\n  beforeMount() {\r\n    // this.itens = (this.$route.query.itens || '').split(',')\r\n\r\n    // console.log('gaiolasitens.beforeMount.route:',this.$route)\r\n    // console.log('gaiolasitens.beforeMount.route.params:',this.$route.params)\r\n    // console.log('gaiolasitens.beforeMount.route.params.materiais:',this.$route.params.materiais)\r\n    // console.log('gaiolasitens.beforeMount.route.params.materiais.map:',this.$route.params.materiais.map(i => i.item))\r\n\r\n    if (this.$route.params.materiais) {\r\n      // console.log('gaiolasitens.materiais:', this.materiais)\r\n      this.materiais = this.$route.params.materiais;\r\n      // this.itembusca.item = this.materiais.map(i => i.item)\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    // o $refs só funciona depois da tela toda montada, não roda no beforeMount\r\n    if (this.$route.params.materiais) {\r\n      this.$refs.GaiolasItensBuscaRef.GaiolasItensBuscaPesquisar();\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"actGaiolasItensInsert\", \"actGaiolaItens\"]),\r\n\r\n    evtGaiolaItensrowClick(row) {\r\n      console.log(\"evtGaiolaItensrowClick:\", row);\r\n\r\n      const qtde = this.gtxGaiolasItensDataList.find((f) => f.item == row.item)\r\n        .qtde;\r\n\r\n      this.itembusca.codigo = row.codigo || 0;\r\n      this.itembusca.endereco = row.endereco || 0;\r\n      this.itembusca.emp = row.emp || 8; // Matriz\r\n      this.itembusca.dep = row.dep || 37; // Almox Matriz\r\n      this.itembusca.item = row.item || [];\r\n      if (qtde && qtde > 0) {\r\n        this.itembusca.quant = qtde || 0;\r\n      } else {\r\n        this.itembusca.quant = row.quant || 0;\r\n      }\r\n      this.itembusca.deleta = row.deleta || 0;\r\n      this.itembusca.nivel = row.nivel || 0;\r\n\r\n      // this.tabIndex = 1\r\n      this.$bvModal.show(\"modal-gaiolasitens\");\r\n    },\r\n\r\n    evtGaiolasItensUpdate(updated) {\r\n      // console.log('GaiolasItensupdate:', updated)\r\n\r\n      const vm = this;\r\n\r\n      this.actGaiolasItensInsert(updated).then(\r\n        () => {\r\n          vm.$root.toastsuccess(\"Registro atualizado com sucesso!\");\r\n          this.tabIndex = 0;\r\n\r\n          // this.runSearchItems++ // isso dispara a busca do SearchApi dos itens\r\n          this.$refs.GaiolasItensBuscaRef.GaiolasItensBuscaPesquisar();\r\n        },\r\n        (error) => {\r\n          console.log(\"actGaiolasItensInsert:Fracasso\", error.Error);\r\n          // vm.$root.toastdanger(error.Error)\r\n        }\r\n      );\r\n    },\r\n\r\n    evtDepositoChange(dep) {\r\n      // console.log('evtDepositoChange:', dep)\r\n      this.itembusca.emp = dep.empresa;\r\n      this.itembusca.dep = dep.deposito;\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    gtxAlmoxEmpresaDeposito(data) {\r\n      this.emp = data.empresa;\r\n      this.dep = data.deposito;\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}