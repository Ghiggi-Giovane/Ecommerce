{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\carregamento\\views\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\carregamento\\views\\index.vue","mtime":1703038179054},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBUEkgZnJvbSAiLi4vLi4vLi4vc2VydmljZXMvYXBpLnNlcnZpY2UiOwppbXBvcnQgU2lnbmF0dXJlIGZyb20gIi4uLy4uLy4uL2NvbXBvbmVudHMvU2lnbmF0dXJlIjsKaW1wb3J0IFByb3BlcnRpZXMgZnJvbSAiLi4vLi4vLi4vY29tcG9uZW50cy9Qcm9wZXJ0aWVzIjsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgQ2FtZXJhQ2FwdHVyZSBmcm9tICIuLi8uLi8uLi9jb21wb25lbnRzL0NhbWVyYUNhcHR1cmUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNhcnJlZ2FtZW50byIsCiAgY29tcG9uZW50czogewogICAgU2lnbmF0dXJlLAogICAgUHJvcGVydGllcywKICAgIENhbWVyYUNhcHR1cmUKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb2RhbFZpc2l2ZWw6IGZhbHNlLAogICAgICBpZGNhcnJlZ2FtZW50b2luc3BlY2FvOiBudWxsLAogICAgICBjYW1lcmFLZXk6IDAsCiAgICAgIGZvcm06IHsKICAgICAgICBpZENhcnJlZ2FtZW50bzogMCwKICAgICAgICBlbnRyYWRhOiBuZXcgRGF0ZSgpLAogICAgICAgIG5vbWV0cmFuc3A6ICIiLAogICAgICAgIG1vdG9yaXN0YTogIiIsCiAgICAgICAgcGxhY2E6ICIiCiAgICAgIH0sCiAgICAgIGZpbHRybzogIiIsCiAgICAgIGZpbHRlck9uOiBbImlkIiwgInRyYW5zcCIsICJtb3RvcmlzdGEiLCAicGxhY2EiXSwKICAgICAgZmlsdHJvYXNzaW5hZG9zOiBmYWxzZSwKICAgICAgZmlsdHJvY2hlY2tsaXN0YXNzaW5hZG9zOiBmYWxzZSwKICAgICAgZmlsdHJvY29sZXRhZG9zOiB0cnVlLAogICAgICB0aW1lcjogbnVsbCwKICAgICAgdXBkYXRldGltZW91dDogMTUwMDAsCiAgICAgIHVwZGF0ZXN0b3A6IGZhbHNlLAogICAgICBkYXRhOiBbXSwKICAgICAgbWFyY2FzOiBbXSwKICAgICAgc2lnT3Bjb2VzOiBbXSwKICAgICAgdGFiSW5kZXg6IDAsCiAgICAgIHNpZ0ltYWdlOiBudWxsLAogICAgICBzaWdJbWFnZUNvbmY6IG51bGwsCiAgICAgIHNpZ0ltYWdlUmVzcG9uQ2FyZ2E6IG51bGwsCiAgICAgIHNpZ09ic0NvbmY6ICIiLAogICAgICBzaWdDaGFuZ2U6IGZhbHNlLAogICAgICBzaWdDaGFuZ2VDb25mOiBmYWxzZSwKICAgICAgc2lnQ2hhbmdlUmVzcG9uQ2FyZ2E6IGZhbHNlLAogICAgICBzZWxlY3RlZDogW10sCiAgICAgIHBlZGlkb3NzZWxlY3RlZDogbnVsbCwKICAgICAgcGVkaWRvczogW10sCiAgICAgIG9wY29lczogW10sCiAgICAgIGZvcm1jb2xsYXBzZWQ6IGZhbHNlLAogICAgICBGaWxlczogW10sCiAgICAgIFBlZGlkb3NSb21hbmVpb3M6IFtdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWyJndHhDb25maWdQYXJlbXAiLCAiZ3R4Q29uZmlnR3J1cG9lbXAiXSksCiAgICBob2plKCkgewogICAgICBjb25zdCBoID0gbmV3IERhdGUoKTsKICAgICAgcmV0dXJuIGguZ2V0RGF5KCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAiMCIpICsgIi8iICsgaC5nZXRNb250aCgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgIjAiKSArICIvIiArIGguZ2V0RnVsbFllYXIoKS50b1N0cmluZygpLnBhZFN0YXJ0KDQsICIwIik7CiAgICB9LAogICAgZmllbGRzKCkgewogICAgICByZXR1cm4gWwogICAgICAvLyB7IGtleTogInRyYW5zcCIsIGxhYmVsOiAiVHJhbnNwb3J0YWRvcmEiLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAvLyB7IGtleTogIm1vdG9yaXN0YSIsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgIC8vIHsga2V5OiAicGxhY2EiLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICAvLyB7IGtleTogInBlcmMiLCBsYWJlbDogIkNvbGV0YXMiLCBzb3J0YWJsZTogdHJ1ZSB9LAogICAgICB7CiAgICAgICAga2V5OiAiY2FyZ2EiLAogICAgICAgIGxhYmVsOiAiQ2FyZ2EiCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJhY3Rpb25zIiwKICAgICAgICBsYWJlbDogIiIsCiAgICAgICAgc29ydGFibGU6IGZhbHNlCiAgICAgIH1dOwogICAgfSwKICAgIHBhcmFtZXRyb3MoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWRDYXJyZWdhbWVudG86IHRoaXMuZm9ybS5pZENhcnJlZ2FtZW50bwogICAgICB9OwogICAgfSwKICAgIHBhcmFtcygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZENhcnJlZ2FtZW50bzogdGhpcy5mb3JtLmlkQ2FycmVnYW1lbnRvLAogICAgICAgIGdydXBvZW1wcmVzYTogdGhpcy5ndHhDb25maWdQYXJlbXAgfHwgOCwKICAgICAgICBlbnRyYWRhOiB0aGlzLmZvcm0uZW50cmFkYSwKICAgICAgICBub21ldHJhbnNwOiB0aGlzLmZvcm0ubm9tZXRyYW5zcCwKICAgICAgICBtb3RvcmlzdGE6IHRoaXMuZm9ybS5tb3RvcmlzdGEsCiAgICAgICAgcGxhY2E6IHRoaXMuZm9ybS5wbGFjYQogICAgICB9OwogICAgfSwKICAgIC8vIHBhcmFtc2RldGFpbHMoKSB7CiAgICAvLyAgIHJldHVybiB7IGlkQ2FycmVnYW1lbnRvOiB0aGlzLmZvcm0uaWRDYXJyZWdhbWVudG8gfTsKICAgIC8vIH0sCiAgICBtYXJjYXNzZWxlY3RlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMubWFyY2FzLmZpbHRlcihtID0+IG0uY2hlY2tlZCk7CiAgICB9LAogICAgcm9tYW5laW9zKCkgewogICAgICByZXR1cm4gdGhpcy5kYXRhLm1hcChyID0+ICh7CiAgICAgICAgaWQ6IHIuaWQsCiAgICAgICAgY29kVHJhbnNwOiByLkNvZGlnb19UcmFuc3AsCiAgICAgICAgdHJhbnNwOiByLlJhemFvX1NvY2lhbCwKICAgICAgICBtb3RvcmlzdGE6IHIuTW90b3Jpc3RhLAogICAgICAgIHVsdGltYWNvbGV0YTogci5VbHRpbWFDb2xldGEsCiAgICAgICAgdm9sdW1lczogci5UVm9sdW1lcywKICAgICAgICBjb2xldGFkb3M6IHIuVFZvbHVtZXNDb2xldGFkb3MsCiAgICAgICAgVFBlZGlkb3M6IHIuVFBlZGlkb3MsCiAgICAgICAgcGVyYzogci5QZXJjQ29sZXRhZG9zLAogICAgICAgIHBsYWNhOiByLlBsYWNhLAogICAgICAgIHNpZ0ltYWdlOiByLnNpZ0ltYWdlLAogICAgICAgIHNpZ0ltYWdlQ29uZjogci5zaWdJbWFnZUNvbmYsCiAgICAgICAgc2lnSW1hZ2VSZXNwb25DYXJnYTogci5zaWdJbWFnZVJlc3BvbkNhcmdhLAogICAgICAgIFBlcmNBc3NpbmFkb3M6IHIuUGVyY0Fzc2luYWRvcywKICAgICAgICBjaGVja2xpc3Rhc3NpbmF0dXJhOiByLmNoZWNrbGlzdGFzc2luYXR1cmEsCiAgICAgICAgY2hlY2tsaXN0Zm90b3M6IHIuY2hlY2tsaXN0Zm90b3MsCiAgICAgICAgaWRUaXBvc0NhbWluaGFvOiByLmlkVGlwb3NDYW1pbmhhbywKICAgICAgICBzaWdPYnNDb25mOiByLnNpZ09ic0NvbmYsCiAgICAgICAgc2lnbmVkOiByLnNpZ0ltYWdlICYmIHIuc2lnSW1hZ2UgIT09ICIiIHx8IHIuc2lnSW1hZ2VDb25mICYmIHIuc2lnSW1hZ2VDb25mICE9PSAiIiB8fCByLnNpZ0ltYWdlUmVzcG9uQ2FyZ2EgJiYgci5zaWdJbWFnZVJlc3BvbkNhcmdhICE9PSAiIiA/IHRydWUgOiBmYWxzZSwKICAgICAgICBSb21hbmVpb3M6IHIuUm9tYW5laW9zIHx8IFtdLAogICAgICAgIGNvbGxhcHNlZDogci5jb2xsYXBzZWQsCiAgICAgICAgY2hlY2tlZDogci5jaGVja2VkLAogICAgICAgIE9wY29lczogci5PcGNvZXMsCiAgICAgICAgX3Jvd1ZhcmlhbnQ6IHIuc2lnSW1hZ2UgJiYgci5zaWdJbWFnZUNvbmYgJiYgci5zaWdJbWFnZVJlc3BvbkNhcmdhID8gInN1Y2Nlc3MiIDogIiIsCiAgICAgICAgdFVSTDogci50VVJMLAogICAgICAgIFZhbG9yX0NvbV9JUEk6IHIuUm9tYW5laW9zLnJlZHVjZSgoYSwgYikgPT4gYSArIGIuVmFsb3JfQ29tX0lQSSwgMCkKICAgICAgfSkpLmZpbHRlcihmID0+IHRoaXMucm9tYW5laW9zZmlsdHJvcyhmKSk7CiAgICAgIC8vLmZpbHRlcihmPT5mLnNpZ25lZCA9PSB0aGlzLmZpbHRyb2Fzc2luYWRvcyAmJiAoZi5wZXJjID4gOTkpID09IHRoaXMuZmlsdHJvY29sZXRhZG9zICkKICAgIH0sCgogICAgcGFyYW1zaWduYXR1cmUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWRDYXJyZWdhbWVudG86IHRoaXMuc2VsZWN0ZWQuaWQsCiAgICAgICAgc2lnSW1hZ2U6IHRoaXMuc2lnSW1hZ2UsCiAgICAgICAgc2lnSW1hZ2VDb25mOiB0aGlzLnNpZ0ltYWdlQ29uZiwKICAgICAgICBzaWdJbWFnZVJlc3BvbkNhcmdhOiB0aGlzLnNpZ0ltYWdlUmVzcG9uQ2FyZ2EsCiAgICAgICAgc2lnT2JzQ29uZjogdGhpcy5zaWdPYnNDb25mLAogICAgICAgIG9wY29lczogSlNPTi5zdHJpbmdpZnkodGhpcy5vcGNvZXMpLAogICAgICAgIHJvbWFuZWlvczogdGhpcy5zZWxlY3RlZC5Sb21hbmVpb3MuZmlsdGVyKHIgPT4gci5jaGVja2VkKQogICAgICB9OwogICAgfSwKICAgIHNpZ25hdHVyZU9wdGlvbnMoKSB7CiAgICAgIHJldHVybiB0aGlzLnNpZ09wY29lcy5tYXAobyA9PiAoewogICAgICAgIHRleHQ6IG8uZGVzY3JpY2FvLAogICAgICAgIHZhbHVlOiBvLmlkCiAgICAgIH0pKTsKICAgIH0sCiAgICBzZWxlY3RlZGNoZWNrZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkLlJvbWFuZWlvcyA/IHRoaXMuc2VsZWN0ZWQuUm9tYW5laW9zLmZpbHRlcihjID0+IGMuY2hlY2tlZCkgOiBbXTsKICAgIH0sCiAgICBzZWxlY3RlZGNoZWNrZWRsZW5ndGgoKSB7CiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkY2hlY2tlZC5sZW5ndGggfHwgMDsKICAgIH0sCiAgICBzaWduYXR1cmVGaWVsZHMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgVHJhbnNwb3J0YWRvcmE6IHRoaXMuc2VsZWN0ZWQudHJhbnNwLAogICAgICAgIE1vdG9yaXN0YTogdGhpcy5zZWxlY3RlZC5tb3RvcmlzdGEsCiAgICAgICAgUGxhY2E6IHRoaXMuc2VsZWN0ZWQucGxhY2EKICAgICAgfTsKICAgIH0sCiAgICBzaWduYXR1cmVWYWxpZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuc2lnQ2hhbmdlICYmIHRoaXMuc2lnSW1hZ2UgJiYgdGhpcy5zaWdJbWFnZSAhPT0gIiIgfHwgdGhpcy5zaWdDaGFuZ2VDb25mICYmIHRoaXMuc2lnSW1hZ2VDb25mICYmIHRoaXMuc2lnSW1hZ2VDb25mICE9PSAiIiB8fCB0aGlzLnNpZ0NoYW5nZVJlc3BvbkNhcmdhICYmIHRoaXMuc2lnSW1hZ2VSZXNwb25DYXJnYSAmJiB0aGlzLnNpZ0ltYWdlUmVzcG9uQ2FyZ2EgIT09ICIiOwogICAgfSwKICAgIHNpZ25hdHVyZVRpdGxlKCkgewogICAgICByZXR1cm4gIkNhcmdhOiAiICsgKHRoaXMuc2VsZWN0ZWQgJiYgdGhpcy5zZWxlY3RlZC5pZCB8fCAiIik7CiAgICB9LAogICAgcGVkaWRvc1RpdGxlKCkgewogICAgICByZXR1cm4gIlJvbWFuZWlvOiAiICsgKHRoaXMucGVkaWRvcyAmJiB0aGlzLnBlZGlkb3NbMF0gJiYgdGhpcy5wZWRpZG9zWzBdLlJvbWFuZWlvIHx8ICIiKTsKICAgIH0sCiAgICBwZWRpZG9zTm90YXNTcGxpdCgpIHsKICAgICAgcmV0dXJuIHRoaXMucGVkaWRvcyAmJiB0aGlzLnBlZGlkb3NbMF0gJiYgdGhpcy5wZWRpZG9zWzBdLk5vdGFzICYmIHRoaXMucGVkaWRvc1swXS5Ob3Rhcy5tYXAobiA9PiBuLk51bWVyb19ub3RhKS5qb2luKCIsIikgfHwgIiI7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgQVBJLmdldExvY2FsREJEb2N1bWVudCgiY2FycmVnYW1lbnRvIikudGhlbihkb2MgPT4gewogICAgICBpZiAoZG9jKSB7CiAgICAgICAgdGhpcy5mb3JtLmlkQ2FycmVnYW1lbnRvID0gZG9jLmZvcm0uaWRDYXJyZWdhbWVudG8gfHwgMDsKICAgICAgICAvLyB0aGlzLmZvcm0uZW50cmFkYSA9IGRvYy5lbnRyYWRhIHx8IG5ldyBEYXRlKCk7CiAgICAgICAgdGhpcy5mb3JtLm5vbWV0cmFuc3AgPSBkb2MuZm9ybS5ub21ldHJhbnNwIHx8ICIiOwogICAgICAgIHRoaXMuZm9ybS5tb3RvcmlzdGEgPSBkb2MuZm9ybS5tb3RvcmlzdGEgfHwgIiI7CiAgICAgICAgdGhpcy5mb3JtLnBsYWNhID0gZG9jLmZvcm0ucGxhY2EgfHwgIiI7CiAgICAgICAgdGhpcy51cGRhdGV0aW1lb3V0ID0gZG9jLnVwZGF0ZXRpbWVvdXQgfHwgdGhpcy51cGRhdGV0aW1lb3V0OwogICAgICAgIHRoaXMuZmlsdHJvYXNzaW5hZG9zID0gZG9jLmZpbHRyb2Fzc2luYWRvcyB8fCB0aGlzLmZpbHRyb2Fzc2luYWRvczsKICAgICAgICB0aGlzLm1hcmNhcyA9IGRvYy5tYXJjYXMgfHwgdGhpcy5tYXJjYXM7CiAgICAgICAgdGhpcy5maWx0cm8gPSBkb2MuZmlsdHJvIHx8IHRoaXMuZmlsdHJvOwogICAgICAgIGlmICh0aGlzLm1hcmNhcy5sZW5ndGggPT0gMCkgewogICAgICAgICAgdGhpcy5nZXRNYXJjYXMoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMubWFyY2FzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICB0aGlzLmdldE1hcmNhcygpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICBiZWZvcmVNb3VudCgpIHsKICAgIHRoaXMuZ2V0Q2FycmVnYW1lbnRvT3Bjb2VzKCk7CiAgICB0aGlzLmdldENhcnJlZ2FtZW50bygpOwoKICAgIC8vIHNldGEgbyB0aW1lciBxdWUgYXR1YWxpemEgb3MgdG90YWlzIC4uLgogICAgdGhpcy51cGRhdGVzdG9wID0gZmFsc2U7CiAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICBpZiAoIXRoaXMudXBkYXRlc3RvcCkgdGhpcy5nZXRDYXJyZWdhbWVudG9Ub3RhaXMoKTsKICAgIH0sIHRoaXMudXBkYXRldGltZW91dCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBvbk1vZGFsSGlkZGVuKCkgewogICAgICB0aGlzLmdldENhcnJlZ2FtZW50bygpOwogICAgfSwKICAgIHJlZnJlc2hDYW1lcmEoKSB7CiAgICAgIC8vIEF0dWFsaXphIGEgY2hhdmUgZGEgY8OibWVyYSBwYXJhIGZvcsOnYXIgYSBhdHVhbGl6YcOnw6NvIGRvIGNvbXBvbmVudGUgQ2FtZXJhQ2FwdHVyZQogICAgICB0aGlzLmNhbWVyYUtleSArPSAxOwogICAgfSwKICAgIHRlc3RlKHZhbCkgewogICAgICBjb25zb2xlLmxvZygidGVzdGU6IiwgdmFsKTsKICAgICAgdmFsLmNvbGxhcHNlZCA9ICF2YWwuY29sbGFwc2VkOwogICAgfSwKICAgIENoYW1hTW9kYWwoaWQpIHsKICAgICAgdGhpcy5pZGNhcnJlZ2FtZW50b2luc3BlY2FvID0gaWQ7CiAgICAgIHRoaXMuJGJ2TW9kYWwuc2hvdygibW9kYWwtMSIpOwogICAgfSwKICAgIENoYW1hck1vZGFsRm90byhpZCkgewogICAgICB0aGlzLmlkY2FycmVnYW1lbnRvaW5zcGVjYW8gPSBpZDsKICAgICAgdGhpcy4kYnZNb2RhbC5zaG93KCJtb2RhbC1Gb3RvIik7CiAgICB9LAogICAgQ2hhbWFyTW9kYWxGb3RvVHJ1ZShpZCkgewogICAgICB0aGlzLmlkY2FycmVnYW1lbnRvaW5zcGVjYW8gPSBpZDsKICAgICAgdGhpcy4kYnZNb2RhbC5zaG93KCJtb2RhbC1Gb3RvLVRydWUiKTsKICAgICAgdGhpcy5JbnNwZWNhb0NhcnJlZ2FtZW50b0ZvdG9zR2V0KGlkKTsKICAgIH0sCiAgICBDaGFtYURpcmV0b1RlbGEodFVSTCkgewogICAgICAvLyB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgIC8vICAgbmFtZTogImluc3BlY2Fvc2lkZXJlYmF1IiwKICAgICAgLy8gICBwYXJhbXM6IHsgR1VJRDogR1VJRCB9LAogICAgICAvLyB9KTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2godFVSTCk7CiAgICB9LAogICAgY2hhbWF0ZWxhc2lkZXJiYXUoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAiaW5zcGVjYW9zaWRlcmViYXUiLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgaWQ6IHRoaXMuaWRjYXJyZWdhbWVudG9pbnNwZWNhbwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2hhbWF0ZWxhc2lkZXJiYXUoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAiaW5zcGVjYW9zaWRlcmViYXUiLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgaWQ6IHRoaXMuaWRjYXJyZWdhbWVudG9pbnNwZWNhbwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2hhbWF0ZWxhdHJ1Y2soKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAiaW5zcGVjYW90cnVjayIsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBpZDogdGhpcy5pZGNhcnJlZ2FtZW50b2luc3BlY2FvCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjaGFtYXRlbGFjb250YWluZXIoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAiaW5zcGVjYW9jb250YWluZXIiLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgaWQ6IHRoaXMuaWRjYXJyZWdhbWVudG9pbnNwZWNhbwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcm9tYW5laW9zZmlsdHJvcyhpdGVtKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdyb21hbmVpb3NmaWx0cm9zKGl0ZW0pJywgaXRlbSk7CiAgICAgIGxldCByZXQgPSBmYWxzZTsKICAgICAgY29uc3QgbWFyY2FzID0gdGhpcy5tYXJjYXMuZmlsdGVyKG0gPT4gbS5jaGVja2VkKS5tYXAobSA9PiBtLmlkKSB8fCBbXTsKICAgICAgLy9jb25zdCBtYXJjYXMgPSBbXQoKICAgICAgLy8gcmV0ID0gKChpdGVtLnNpZ25lZCA9PSB0aGlzLmZpbHRyb2Fzc2luYWRvcykgJiYgKChpdGVtLnBlcmMgPiA5OSkgPT0gdGhpcy5maWx0cm9jb2xldGFkb3MpKTsKICAgICAgcmV0ID0gaXRlbS5QZXJjQXNzaW5hZG9zID09IDEwMCA9PSB0aGlzLmZpbHRyb2Fzc2luYWRvcyAmJiBpdGVtLmNoZWNrbGlzdGFzc2luYXR1cmEgPT0gMSA9PSB0aGlzLmZpbHRyb2NoZWNrbGlzdGFzc2luYWRvczsKICAgICAgaWYgKG1hcmNhcy5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0ID0gcmV0ICYmIGl0ZW0uUm9tYW5laW9zLmZpbHRlcihyID0+IHIuTWFyY2FzLmZpbmQobSA9PiBtYXJjYXMuaW5jbHVkZXMobS5pZCkpKS5sZW5ndGggPiAwOwogICAgICB9CiAgICAgIGlmICh0aGlzLmZpbHRybyAhPT0gIiIpIHsKICAgICAgICByZXQgPSByZXQgJiYgKGl0ZW0uaWQudG9TdHJpbmcoKS5pbmNsdWRlcyh0aGlzLmZpbHRybykgfHwgaXRlbS50cmFuc3AuaW5jbHVkZXModGhpcy5maWx0cm8udG9VcHBlckNhc2UoKSkgfHwgaXRlbS5tb3RvcmlzdGEuaW5jbHVkZXModGhpcy5maWx0cm8udG9VcHBlckNhc2UoKSkgfHwgaXRlbS5wbGFjYS5pbmNsdWRlcyh0aGlzLmZpbHRyby50b1VwcGVyQ2FzZSgpKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJldDsKICAgIH0sCiAgICBtYXJjYXIoY2hlY2spIHsKICAgICAgaWYgKHRoaXMuZGF0YS5maW5kKGQgPT4gZC5pZCA9PSB0aGlzLnNlbGVjdGVkLmlkKSkgewogICAgICAgIHRoaXMuZGF0YS5maW5kKGQgPT4gZC5pZCA9PSB0aGlzLnNlbGVjdGVkLmlkKS5Sb21hbmVpb3MubWFwKHIgPT4gewogICAgICAgICAgci5jaGVja2VkID0gY2hlY2s7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBtb2RhbHBlZGlkb3MocGVkaWRvcykgewogICAgICB0aGlzLnBlZGlkb3MgPSBwZWRpZG9zOwogICAgICB0aGlzLiRidk1vZGFsLnNob3coIm1vZGFsLXBlZGlkb3MiKTsKICAgIH0sCiAgICBnZXRNYXJjYXMoKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdnZXRNYXJjYXMnLCB0aGlzLm1hcmNhcyk7CiAgICAgIEFQSS5nZXQoInYyL1NlcnZpY29zL01hcmNhcy9HZXQiLCB7CiAgICAgICAgcGVzcXVpc2E6ICIlIiwKICAgICAgICBQYWdlU2l6ZTogMzAKICAgICAgfSkudGhlbihhcGlkYXRhID0+IHsKICAgICAgICBpZiAoYXBpZGF0YS5kYXRhLlN1Y2Nlc3MgPT0gIlRydWUiIHx8IGFwaWRhdGEuZGF0YS5TdWNjZXNzKSB7CiAgICAgICAgICBjb25zdCByZXMgPSBBUEkucHJlcGFyZURhdGEoYXBpZGF0YS5kYXRhKTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICB0aGlzLm1hcmNhcyA9IHJlcy5kYXRhOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm1hcmNhcyA9IFtdOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0Q2FycmVnYW1lbnRvT3Bjb2VzKCkgewogICAgICBBUEkuZ2V0KCJ2Mi9TZXJ2aWNvcy9DYXJyZWdhbWVudG8vT3Bjb2VzR2V0Iiwge30pLnRoZW4oYXBpZGF0YSA9PiB7CiAgICAgICAgaWYgKGFwaWRhdGEuZGF0YS5TdWNjZXNzID09ICJUcnVlIiB8fCBhcGlkYXRhLmRhdGEuU3VjY2VzcykgewogICAgICAgICAgY29uc3QgcmVzID0gQVBJLnByZXBhcmVEYXRhKGFwaWRhdGEuZGF0YSk7CiAgICAgICAgICB0aGlzLnNpZ09wY29lcyA9IHJlcy5hcGlyZXNwb25zZS5EYXRhOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnNpZ09wY29lcyA9IFtdOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0Q2FycmVnYW1lbnRvKCkgewogICAgICB0aGlzLnVwZGF0ZXN0b3AgPSB0cnVlOwogICAgICBBUEkuZ2V0KCJ2Mi9TZXJ2aWNvcy9DYXJyZWdhbWVudG8vR2V0IiwgdGhpcy5wYXJhbXMpLnRoZW4oYXBpZGF0YSA9PiB7CiAgICAgICAgaWYgKGFwaWRhdGEuZGF0YS5TdWNjZXNzID09ICJUcnVlIiB8fCBhcGlkYXRhLmRhdGEuU3VjY2VzcykgewogICAgICAgICAgY29uc3QgcmVzID0gQVBJLnByZXBhcmVEYXRhKGFwaWRhdGEuZGF0YSk7CiAgICAgICAgICB0aGlzLmRhdGEgPSByZXMuYXBpcmVzcG9uc2UuRGF0YTsKICAgICAgICAgIHRoaXMuZm9ybWNvbGxhcHNlZCA9IGZhbHNlOwogICAgICAgICAgQVBJLnNldExvY2FsREJEb2N1bWVudCh0aGlzLiRkYXRhLCAiY2FycmVnYW1lbnRvIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZGF0YSA9IFtdOwogICAgICAgICAgdGhpcy5mb3JtY29sbGFwc2VkID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGdldENhcnJlZ2FtZW50b1JvbWFuZWlvRGV0YWlsKGlkQ2FycmVnYW1lbnRvKSB7CiAgICAgIEFQSS5nZXQoInYyL1NlcnZpY29zL0NhcnJlZ2FtZW50b1JvbWFuZWlvc0RldGFpbHMvR2V0IiwgewogICAgICAgIHBhcmFtczogewogICAgICAgICAgaWRDYXJyZWdhbWVudG86IGlkQ2FycmVnYW1lbnRvCiAgICAgICAgfQogICAgICB9KS50aGVuKGFwaSA9PiB7CiAgICAgICAgaWYgKGFwaS5kYXRhLlN1Y2Nlc3MgPT0gIlRydWUiIHx8IGFwaS5kYXRhLlN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMuUGVkaWRvc1JvbWFuZWlvcyA9IGFwaS5kYXRhLkRhdGE7CiAgICAgICAgICB0aGlzLmZvcm1jb2xsYXBzZWQgPSBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5QZWRpZG9zUm9tYW5laW9zID0gW107CiAgICAgICAgICB0aGlzLmZvcm1jb2xsYXBzZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgSW5zcGVjYW9DYXJyZWdhbWVudG9Gb3Rvc0dldChpZCkgewogICAgICBBUEkuZ2V0KCJ2Mi9TZXJ2aWNvcy9DYXJyZWdhbWVudG9Gb3Rvcy9HZXQiLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBpZENhcnJlZ2FtZW50bzogaWQKICAgICAgICB9CiAgICAgIH0pLnRoZW4oYXBpID0+IHsKICAgICAgICBpZiAoYXBpLmRhdGEuU3VjY2VzcyA9PSAiVHJ1ZSIgfHwgYXBpLmRhdGEuU3VjY2VzcykgewogICAgICAgICAgdGhpcy5GaWxlcyA9IGFwaS5kYXRhLkRhdGE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuRmlsZXMgPSBbXTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGdldENhcnJlZ2FtZW50b1RvdGFpcygpIHsKICAgICAgQVBJLmdldCgidjIvU2Vydmljb3MvQ2FycmVnYW1lbnRvVG90YWlzL0dldCIsIHRoaXMucGFyYW1zLCBmYWxzZSkudGhlbihhcGlkYXRhID0+IHsKICAgICAgICBpZiAoYXBpZGF0YS5kYXRhLlN1Y2Nlc3MgPT0gIlRydWUiIHx8IGFwaWRhdGEuZGF0YS5TdWNjZXNzKSB7CiAgICAgICAgICBjb25zdCByZXMgPSBBUEkucHJlcGFyZURhdGEoYXBpZGF0YS5kYXRhKTsKCiAgICAgICAgICAvL2NvbnNvbGUubG9nKCdnZXRDYXJyZWdhbWVudG9Ub3RhaXM6aGl0Jyk7CgogICAgICAgICAgcmVzLmFwaXJlc3BvbnNlLkRhdGEubWFwKHQgPT4gewogICAgICAgICAgICBpZiAodGhpcy5kYXRhLmZpbmQoYyA9PiBjLmlkID09IHQuaWQpKSB7CiAgICAgICAgICAgICAgdGhpcy5kYXRhLmZpbmQoYyA9PiBjLmlkID09IHQuaWQpLlRWb2x1bWVzQ29sZXRhZG9zID0gdC5UVm9sdW1lc0NvbGV0YWRvczsKICAgICAgICAgICAgICB0aGlzLmRhdGEuZmluZChjID0+IGMuaWQgPT0gdC5pZCkuUGVyY0NvbGV0YWRvcyA9IHQuUGVyY0NvbGV0YWRvczsKICAgICAgICAgICAgICB0aGlzLmRhdGEuZmluZChjID0+IGMuaWQgPT0gdC5pZCkuc2lnSW1hZ2UgPSB0LnNpZ0ltYWdlOwogICAgICAgICAgICAgIHRoaXMuZGF0YS5maW5kKGMgPT4gYy5pZCA9PSB0LmlkKS5zaWdJbWFnZUNvbmYgPSB0LnNpZ0ltYWdlQ29uZjsKICAgICAgICAgICAgICB0aGlzLmRhdGEuZmluZChjID0+IGMuaWQgPT0gdC5pZCkuc2lnSW1hZ2VSZXNwb25DYXJnYSA9IHQuc2lnSW1hZ2VSZXNwb25DYXJnYTsKICAgICAgICAgICAgICB0aGlzLmRhdGEuZmluZChjID0+IGMuaWQgPT0gdC5pZCkuc2lnT2JzQ29uZiA9IHQuc2lnT2JzQ29uZjsKICAgICAgICAgICAgICB0aGlzLmRhdGEuZmluZChjID0+IGMuaWQgPT0gdC5pZCkuT3Bjb2VzID0gdC5PcGNvZXM7CiAgICAgICAgICAgICAgdGhpcy5kYXRhLmZpbmQoYyA9PiBjLmlkID09IHQuaWQpLlVsdGltYUNvbGV0YSA9IHQuVWx0aW1hQ29sZXRhOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGFzc2luYXIoaXRlbSkgewogICAgICBjb25zb2xlLmxvZygiYXNzaW5hci5pdGVtOiIsIGl0ZW0pOwogICAgICBsZXQgcGVyYyA9IGl0ZW0ucGVyYzsKCiAgICAgIC8vIHN1Z2VyaWRvIG7Do28gcG9kZXIgbGliZXJhciBzZW0gZXN0YXIgMTAwJSBjb2xldGFkbwogICAgICAvKg0KICAgICAgaWYgKHBlcmMgPCAxMDApIHsNCiAgICAgICAgdGhpcy4kcm9vdC50b2FzdGRhbmdlcigiQSBjYXJnYSBuw6NvIGVzdMOhIDEwMCUgY29sZXRhZGEsIG7Do28gw6kgcG9zc8OtdmVsIHNvbGljaXRhciBhIGFzc2luYXR1cmEgISIpOw0KICAgICAgfQ0KICAgICAgKi8KICAgICAgaWYgKHBlcmMgPCAxMDApIHsKICAgICAgICBhd2FpdCB0aGlzLiRyb290LnNob3dtZXNzYWdlKCJBIGNhcmdhIG7Do28gZXN0w6EgMTAwJSBjb2xldGFkYSwgZGVzZWphIHJlYWxtZW50ZSBzb2xpY2l0YXIgYSBhc3NpbmF0dXJhID8iKS50aGVuKGNob2ljZSA9PiB7CiAgICAgICAgICBpZiAoY2hvaWNlKSB7CiAgICAgICAgICAgIHBlcmMgPSAxMDA7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKHBlcmMgPiA5OS45KSB7CiAgICAgICAgLy8gdGhpcy5zZWxlY3RlZCA9IGl0ZW07CiAgICAgICAgdGhpcy5kb3NlbGVjdGVkKGl0ZW0pOwogICAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICAgIGlkQ2FycmVnYW1lbnRvOiBpdGVtLmlkLAogICAgICAgICAgUm9tYW5laW9zOiB0aGlzLnNlbGVjdGVkY2hlY2tlZC5tYXAociA9PiByLlJvbWFuZWlvKS5qb2luKCIsIikKICAgICAgICB9OwogICAgICAgIGNvbnNvbGUubG9nKCJhc3NpbmFyLnBhcmFtczoiLCBwYXJhbXMpOwoKICAgICAgICAvLyBidXNjYSBhIGFzc2luYXR1ZGEgZGEgQVBJIC4uLgogICAgICAgIEFQSS5nZXQoInYyL1NlcnZpY29zL0NhcnJlZ2FtZW50b1NpZ25hdHVyZS9HZXQiLCBwYXJhbXMsIGZhbHNlKS50aGVuKGFwaWRhdGEgPT4gewogICAgICAgICAgY29uc3QgcmVzID0gQVBJLnByZXBhcmVEYXRhKGFwaWRhdGEuZGF0YSk7CiAgICAgICAgICBjb25zb2xlLmxvZygicmVzOiIsIHJlcyk7CiAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MgJiYgcmVzLmRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgICBjb25zdCBkYXRhID0gcmVzLmRhdGFbMF07CiAgICAgICAgICAgIHRoaXMuc2lnSW1hZ2UgPSBkYXRhLnNpZ0ltYWdlIHx8ICIiOwogICAgICAgICAgICB0aGlzLnNpZ0ltYWdlQ29uZiA9IGRhdGEuc2lnSW1hZ2VDb25mIHx8ICIiOwogICAgICAgICAgICB0aGlzLnNpZ0ltYWdlUmVzcG9uQ2FyZ2EgPSBkYXRhLnNpZ0ltYWdlUmVzcG9uQ2FyZ2EgfHwgIiI7CiAgICAgICAgICAgIHRoaXMuc2lnT2JzQ29uZiA9IGRhdGEuc2lnT2JzQ29uZiB8fCAiIjsKICAgICAgICAgICAgdGhpcy5vcGNvZXMgPSBKU09OLnBhcnNlKGRhdGEuT3Bjb2VzIHx8ICJbXSIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5zaWdJbWFnZSA9ICIiOwogICAgICAgICAgICB0aGlzLnNpZ0ltYWdlQ29uZiA9ICIiOwogICAgICAgICAgICB0aGlzLnNpZ0ltYWdlUmVzcG9uQ2FyZ2EgPSAiIjsKICAgICAgICAgICAgdGhpcy5zaWdPYnNDb25mID0gIiI7CiAgICAgICAgICAgIHRoaXMub3Bjb2VzID0gW107CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnNpZ0NoYW5nZSA9IGZhbHNlOwogICAgICAgICAgdGhpcy5zaWdDaGFuZ2VDb25mID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnNpZ0NoYW5nZVJlc3BvbkNhcmdhID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRidk1vZGFsLnNob3coIm1vZGFsLWFzc2luYXIiKTsKICAgICAgICB9KTsKICAgICAgICAvKg0KICAgICAgICAvLyBjb25zb2xlLmxvZygiYXNzaW5hci5vcGNvZXM6IiwgaXRlbS5PcGNvZXMpOw0KICAgICAgICBpZiAoaXRlbS5Sb21hbmVpb3MuZmluZChyPT5yLmNoZWNrZWQpKSB7DQogICAgICAgICAgdGhpcy5zaWdJbWFnZSA9IGl0ZW0uUm9tYW5laW9zLmZpbmQocj0+ci5jaGVja2VkKS5zaWdJbWFnZTsNCiAgICAgICAgICB0aGlzLnNpZ0ltYWdlQ29uZiA9IGl0ZW0uUm9tYW5laW9zLmZpbmQocj0+ci5jaGVja2VkKS5zaWdJbWFnZUNvbmY7DQogICAgICAgICAgdGhpcy5zaWdPYnNDb25mID0gaXRlbS5Sb21hbmVpb3MuZmluZChyPT5yLmNoZWNrZWQpLnNpZ09ic0NvbmY7DQogICAgICAgICAgdGhpcy5vcGNvZXMgPSBKU09OLnBhcnNlKGl0ZW0uUm9tYW5laW9zLmZpbmQocj0+ci5jaGVja2VkKS5PcGNvZXMgfHwgIltdIik7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5zaWdJbWFnZSA9IGl0ZW0uc2lnSW1hZ2U7DQogICAgICAgICAgdGhpcy5zaWdJbWFnZUNvbmYgPSBpdGVtLnNpZ0ltYWdlQ29uZjsNCiAgICAgICAgICB0aGlzLnNpZ09ic0NvbmYgPSBpdGVtLnNpZ09ic0NvbmY7DQogICAgICAgICAgdGhpcy5vcGNvZXMgPSBKU09OLnBhcnNlKGl0ZW0uT3Bjb2VzIHx8ICJbXSIpOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuc2lnQ2hhbmdlID0gZmFsc2U7DQogICAgICAgIHRoaXMuc2lnQ2hhbmdlQ29uZiA9IGZhbHNlOw0KICAgICAgICAvLyBjb25zb2xlLmxvZygiYXNzaW5hci5pdGVtOiIsIGl0ZW0pOw0KICAgICAgICB0aGlzLiRidk1vZGFsLnNob3coIm1vZGFsLWFzc2luYXIiKTsNCiAgICAgICAgKi8KICAgICAgfQogICAgfSwKCiAgICBhc3NpbmFycm9tYW5laW8oY2FyZ2EsIHJvbWFuZWlvKSB7CiAgICAgIGlmICh0aGlzLmRhdGEuZmluZChkID0+IGQuaWQgPT0gY2FyZ2EuaWQpKSB7CiAgICAgICAgLy8gZGVzbWFyY2Egb3Mgb3V0cm9zIC4uLgogICAgICAgIHRoaXMuZGF0YS5maW5kKGQgPT4gZC5pZCA9PSBjYXJnYS5pZCkuUm9tYW5laW9zLmZpbHRlcihyID0+IHIuY2hlY2tlZCkubWFwKG0gPT4gbS5jaGVja2VkID0gZmFsc2UpOwogICAgICAgIGlmICh0aGlzLmRhdGEuZmluZChkID0+IGQuaWQgPT0gY2FyZ2EuaWQpLlJvbWFuZWlvcy5maW5kKHIgPT4gci5Sb21hbmVpbyA9PSByb21hbmVpbykpIHsKICAgICAgICAgIHRoaXMuZGF0YS5maW5kKGQgPT4gZC5pZCA9PSBjYXJnYS5pZCkuUm9tYW5laW9zLmZpbmQociA9PiByLlJvbWFuZWlvID09IHJvbWFuZWlvKS5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuYXNzaW5hcihjYXJnYSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgc2lnbmF0dXJlU2hvd24oKSB7CiAgICAgIHRoaXMudXBkYXRlc3RvcCA9IHRydWU7CiAgICB9LAogICAgc2lnbmF0dXJlSGlkZGVuKCkgewogICAgICB0aGlzLnVwZGF0ZXN0b3AgPSBmYWxzZTsKICAgIH0sCiAgICBzaWduYXR1cmVPaygpIHsKICAgICAgLy8gY29uc29sZS5sb2coInNpZ25hdHVyZU9rLnNpZ0ltYWdlOiIsIHRoaXMuc2lnSW1hZ2UpOwogICAgICBBUEkucG9zdCgidjIvU2Vydmljb3MvQ2FycmVnYW1lbnRvL1NpZ25hdHVyZVNldCIsIHRoaXMucGFyYW1zaWduYXR1cmUpLnRoZW4oYXBpZGF0YSA9PiB7CiAgICAgICAgaWYgKGFwaWRhdGEuZGF0YS5TdWNjZXNzID09ICJUcnVlIiB8fCBhcGlkYXRhLmRhdGEuU3VjY2VzcykgewogICAgICAgICAgaWYgKHRoaXMuZGF0YS5maW5kKGMgPT4gYy5pZCA9PSB0aGlzLnNlbGVjdGVkLmlkKSkgewogICAgICAgICAgICB0aGlzLmRhdGEuZmluZChjID0+IGMuaWQgPT0gdGhpcy5zZWxlY3RlZC5pZCkuc2lnSW1hZ2UgPSB0aGlzLnNpZ0ltYWdlOwogICAgICAgICAgICB0aGlzLmRhdGEuZmluZChjID0+IGMuaWQgPT0gdGhpcy5zZWxlY3RlZC5pZCkuc2lnSW1hZ2VDb25mID0gdGhpcy5zaWdJbWFnZUNvbmY7CiAgICAgICAgICAgIHRoaXMuZGF0YS5maW5kKGMgPT4gYy5pZCA9PSB0aGlzLnNlbGVjdGVkLmlkKS5zaWdJbWFnZVJlc3BvbkNhcmdhID0gdGhpcy5zaWdJbWFnZVJlc3BvbkNhcmdhOwogICAgICAgICAgICB0aGlzLmRhdGEuZmluZChjID0+IGMuaWQgPT0gdGhpcy5zZWxlY3RlZC5pZCkuc2lnT2JzQ29uZiA9IHRoaXMuc2lnT2JzQ29uZjsKICAgICAgICAgICAgdGhpcy5kYXRhLmZpbmQoYyA9PiBjLmlkID09IHRoaXMuc2VsZWN0ZWQuaWQpLk9wY29lcyA9IEpTT04uc3RyaW5naWZ5KHRoaXMub3Bjb2VzKTsKICAgICAgICAgICAgdGhpcy5kYXRhLmZpbmQoYyA9PiBjLmlkID09IHRoaXMuc2VsZWN0ZWQuaWQpLlJvbWFuZWlvcy5maWx0ZXIociA9PiByLmNoZWNrZWQpLm1hcChkID0+IHsKICAgICAgICAgICAgICBkLnNpZ0ltYWdlID0gdGhpcy5zaWdJbWFnZTsKICAgICAgICAgICAgICBkLnNpZ0ltYWdlQ29uZiA9IHRoaXMuc2lnSW1hZ2VDb25mOwogICAgICAgICAgICAgIGQuc2lnSW1hZ2VSZXNwb25DYXJnYSA9IHRoaXMuc2lnSW1hZ2VSZXNwb25DYXJnYTsKICAgICAgICAgICAgICBkLnNpZ09ic0NvbmYgPSB0aGlzLnNpZ09ic0NvbmY7CiAgICAgICAgICAgICAgZC5PcGNvZXMgPSBKU09OLnN0cmluZ2lmeSh0aGlzLm9wY29lcyk7CiAgICAgICAgICAgICAgZC5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgcmVzID0gQVBJLnByZXBhcmVEYXRhKGFwaWRhdGEuZGF0YSk7CiAgICAgICAgICB0aGlzLiRyb290LnRvYXN0c3VjY2VzcyhyZXMuZGF0YVswXS5NZW5zYWdlbSk7CiAgICAgICAgICB0aGlzLnVwZGF0ZXN0b3AgPSBmYWxzZTsKICAgICAgICAgIGlmICghdGhpcy5zaWdJbWFnZSB8fCB0aGlzLnNpZ0ltYWdlID09ICIiIHx8ICF0aGlzLnNpZ0ltYWdlQ29uZiB8fCB0aGlzLnNpZ0ltYWdlQ29uZiA9PSAiIgogICAgICAgICAgLy8gIXRoaXMuc2lnSW1hZ2VSZXNwb25DYXJnYSB8fAogICAgICAgICAgLy8gdGhpcy5zaWdJbWFnZVJlc3BvbkNhcmdhID09ICIiCiAgICAgICAgICApIHsKICAgICAgICAgICAgaWYgKCF0aGlzLnNpZ0ltYWdlIHx8IHRoaXMuc2lnSW1hZ2UgPT0gIiIpIHRoaXMuJHJvb3QudG9hc3RkYW5nZXIoIkFzc2luYXR1cmEgZG8gbW90b3Jpc3RhIG7Do28gaW5mb3JtYWRhISIpOwogICAgICAgICAgICBpZiAoIXRoaXMuc2lnSW1hZ2VDb25mIHx8IHRoaXMuc2lnSW1hZ2VDb25mID09ICIiKSB0aGlzLiRyb290LnRvYXN0ZGFuZ2VyKCJBc3NpbmF0dXJhIGRvIGNvbmZlcmVudGUgbsOjbyBpbmZvcm1hZGEhIik7CiAgICAgICAgICAgIC8vIGlmICghdGhpcy5zaWdJbWFnZVJlc3BvbkNhcmdhIHx8IHRoaXMuc2lnSW1hZ2VSZXNwb25DYXJnYSA9PSAiIikKICAgICAgICAgICAgLy8gICB0aGlzLiRyb290LnRvYXN0ZGFuZ2VyKAogICAgICAgICAgICAvLyAgICAgIkFzc2luYXR1cmEgZG8gcmVzcG9uc8OhdmVsIGRhIGNhcmdhIG7Do28gaW5mb3JtYWRhISIKICAgICAgICAgICAgLy8gICApOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRyb290LnRvYXN0ZGFuZ2VyKGFwaWRhdGEuRXJyb3IpOwogICAgICAgICAgdGhpcy5mb3JtY29sbGFwc2VkID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBkb3NlbGVjdGVkKGl0ZW0pIHsKICAgICAgdGhpcy5zZWxlY3RlZCA9IGl0ZW07CiAgICB9LAogICAgY2xhc3NwZXJjKHBlcmMpIHsKICAgICAgcmV0dXJuIHBlcmMgPiA5OSA/ICJzdWNjZXNzIiA6ICJwcmltYXJ5IjsKICAgIH0sCiAgICBjbGFzc3NlbGVjdGVkKGl0ZW0pIHsKICAgICAgcmV0dXJuIGl0ZW0uaWQgPT0gdGhpcy5zZWxlY3RlZC5pZCA/ICJwcmltYXJ5IiA6ICIiOwogICAgfSwKICAgIGNsYXNzcGVkaWRvcyhpdGVtKSB7CiAgICAgIHJldHVybiB0aGlzLnBlZGlkb3NzZWxlY3RlZCAmJiBpdGVtLlBlZGlkbyA9PSB0aGlzLnBlZGlkb3NzZWxlY3RlZC5QZWRpZG8gPyAicHJpbWFyeSIgOiAiIjsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBmb3JtY29sbGFwc2VkKGNvbGxhcHNlZCkgewogICAgICB0aGlzLnVwZGF0ZXN0b3AgPSBjb2xsYXBzZWQ7CiAgICB9LAogICAgdXBkYXRldGltZW91dCgpIHsKICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgICAgY29uc29sZS5sb2coInVwZGF0ZXRpbWVvdXQ6IiwgbmV3IERhdGUoKSk7CiAgICAgIHRoaXMudGltZXIgPSBudWxsOwogICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCJDYXJyZWdhbWVudG8udGltZXI6IiwgbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKSk7CiAgICAgIH0sIHRoaXMucnVudGltZW91dCgpKTsKICAgIH0sCiAgICBydW50aW1lb3V0KCkgewogICAgICBpZiAoIXRoaXMudXBkYXRlc3RvcCkgdGhpcy5nZXRDYXJyZWdhbWVudG9Ub3RhaXMoKTsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLnVwZGF0ZXN0b3AgPSB0cnVlOwogICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgIHRoaXMudGltZXIgPSBudWxsOwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqyBA;AACA;AACA;AACA;AACA;AAEA;EACAA;EACAC;IACAC;IACAC;IACAC;EACA;EAEAC;IACA;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAjB;MACAkB;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACAC;MACA;MACA,OACAC,yCACA,MACAA,2CACA,MACAA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;QAAAC;QAAAC;MAAA,GACA;QAAAD;QAAAC;QAAAC;MAAA,EACA;IACA;IACAC;MACA;QACArC;MACA;IACA;IACAsC;MACA;QACAtC;QACAuC;QACAtC;QACAC;QACAC;QACAC;MACA;IACA;IACA;IACA;IACA;IACAoC;MACA;IACA;IAEAC;MACA,iBACAC;QACAC;QACAC;QACAC;QACA1C;QACA2C;QACAC;QACAC;QACAC;QACAC;QACA9C;QACAY;QACAC;QACAC;QACAiC;QACAC;QACAC;QACAC;QACAnC;QACAoC,QACAC,mCACAA,2CACAA,wDACA,OACA;QACAC;QACAC;QACAC;QACAC;QACAC,aACAL,wDACA,YACA;QACAM;QACAC;MACA,IACAC;MACA;IACA;;IACAC;MACA;QACAjE;QACAgB;QACAC;QACAC;QACAC;QACAO;QACAe;MACA;IACA;IACAyB;MACA;QACAC;QACAC;MACA;IACA;IACAC;MACA,iCACA,iDACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACAC;QACAC;QACAC;MACA;IACA;IACAC;MACA,OACA,2DACA,uEACA,6BACA,4BACA;IAEA;IACAC;MACA;IACA;IACAC;MACA,OACA,gBACA;IAEA;IACAC;MACA,OACA,gBACA,mBACA,yBACA,2DACA;IAEA;EACA;EACAC;IACAC;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;UACA;QACA;MACA;QACA;UACA;QACA;MACA;IACA;EACA;EACAC;IACA;IAEA;;IAEA;IACA;IACA;MACA;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;MACA;IACA;IAEAC;MACAC;MACAC;IACA;IAEAC;MACA;MACA;IACA;IAEAC;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MACA;MACA;IACA;IAEAC;MACA;QACAtG;QACAgD;UAAAK;QAAA;MACA;IACA;IAEAiD;MACA;QACAtG;QACAgD;UAAAK;QAAA;MACA;IACA;IACAkD;MACA;QACAvG;QACAgD;UAAAK;QAAA;MACA;IACA;IACAmD;MACA;QACAxG;QACAgD;UAAAK;QAAA;MACA;IACA;IACAoD;MACA;MACA;MACA,eACA;MACA;;MAEA;MACAC,MACAC,qDACAA;MAEA;QACAD,MACAA,OACAC,2BACAzC,0CACA;MACA;MAEA;QACAwC,MACAA,QACAC,4CACAA,mDACAA,sDACAA;MACA;MAEA;IACA;IACAC;MACA;QACA,UACAC,oCACA1C;UACAD;QACA;MACA;IACA;IACA4C;MACA;MACA;IACA;IACAC;MACA;MACArB;QAAAsB;QAAAC;MAAA,QACAC;QACA;UACA;UACA;UACA;QACA;UACA;QACA;MACA,EACA;IACA;IACAC;MACAzB;QACA;UACA;UACA;QACA;UACA;QACA;MACA;IACA;IACA0B;MACA;MACA1B;QACA;UACA;UACA;UACA;UACAA;QACA;UACA;UACA;QACA;MACA;IACA;IACA2B;MACA3B;QACA1C;UAAAtC;QAAA;MACA;QACA;UACA;UACA;QACA;UACA;UACA;QACA;MACA;IACA;IAEA4G;MACA5B;QACA1C;UAAAtC;QAAA;MACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACA6G;MACA7B,uEACAwB;QACA;UACA;;UAEA;;UAEAM;YACA;cACA,sDACAC;cACA,kDACAA;cACA;cACA,iDACAA;cACA,wDACAA;cACA;cACA;cACA,iDACAA;YACA;UACA;QACA;MACA,EACA;IACA;IACA;MACAzB;MACA;;MAEA;MACA;AACA;AACA;AACA;AACA;MACA;QACA,iBACA0B,YACA,4EACA,CACAC;UACA;YACA/D;UACA;QACA;MACA;MAEA;QACA;QACA;QAEA;UACAlD;UACAyD;QACA;QACA6B;;QAEA;QACAN,qEACAwB;UACA;UACAlB;UACA;YACA;YACA;YACA;YACA;YACA;YACA;UACA;YACA;YACA;YACA;YACA;YACA;UACA;UACA;UACA;UACA;UAEA;QACA,EACA;QACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;IACA;;IACA4B;MACA;QACA;QACA,UACAf,4BACA1C,iCACAf;QACA,IACA,UACAyD,4BACA1C,6CACA;UACA,UACA0C,4BACA1C;UACA;QACA;MACA;IACA;IACA0D;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACArC,SACA,yCACA,oBACA;QACA;UACA;YACA,yDACA;YACA,6DACA;YACA,eACAsC,8BACA;YACA,2DACA;YACA,uDACAC;YACA,UACApB,oCACA1C,iCACAf;cACA8E;cACAA;cACAA;cACAA;cACAA;cACAA;YACA;UACA;UACA;UAEA;UACA;UAEA,IACA,kBACA,uBACA,sBACA;UACA;UACA;UAAA,EACA;YACA,2CACA;YACA,mDACA;YACA;YACA;YACA;YACA;UACA;QACA;UACA;UACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA,4EACA,YACA;IACA;EACA;EACAC;IACAlG;MACA;IACA;IACAhB;MACAmH;MACAxC;MACA;MACA;QACAA;MACA;IACA;IACAyC;MACA;IACA;EACA;EACAC;IACA;IACAF;IACA;EACA;AACA","names":["name","components","Signature","Properties","CameraCapture","data","modalVisivel","idcarregamentoinspecao","cameraKey","form","idCarregamento","entrada","nometransp","motorista","placa","filtro","filterOn","filtroassinados","filtrochecklistassinados","filtrocoletados","timer","updatetimeout","updatestop","marcas","sigOpcoes","tabIndex","sigImage","sigImageConf","sigImageResponCarga","sigObsConf","sigChange","sigChangeConf","sigChangeResponCarga","selected","pedidosselected","pedidos","opcoes","formcollapsed","Files","PedidosRomaneios","computed","hoje","h","fields","key","label","sortable","parametros","params","grupoempresa","marcasselected","romaneios","map","id","codTransp","transp","ultimacoleta","volumes","coletados","TPedidos","perc","PercAssinados","checklistassinatura","checklistfotos","idTiposCaminhao","signed","r","Romaneios","collapsed","checked","Opcoes","_rowVariant","tURL","Valor_Com_IPI","filter","paramsignature","signatureOptions","text","value","selectedchecked","selectedcheckedlength","signatureFields","Transportadora","Motorista","Placa","signatureValid","signatureTitle","pedidosTitle","pedidosNotasSplit","created","API","beforeMount","methods","onModalHidden","refreshCamera","teste","console","val","ChamaModal","ChamarModalFoto","ChamarModalFotoTrue","ChamaDiretoTela","chamatelasiderbau","chamatelatruck","chamatelacontainer","romaneiosfiltros","ret","item","marcar","find","modalpedidos","getMarcas","pesquisa","PageSize","apidata","getCarregamentoOpcoes","getCarregamento","getCarregamentoRomaneioDetail","InspecaoCarregamentoFotosGet","getCarregamentoTotais","res","t","showmessage","then","assinarromaneio","signatureShown","signatureHidden","signatureOk","c","JSON","d","doselected","classperc","classselected","classpedidos","watch","clearInterval","runtimeout","beforeDestroy"],"sourceRoot":"src/pages/carregamento/views","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div class=\"mx-auto container\">\r\n    <b-card\r\n      class=\"my-2\"\r\n      header-bg-variant=\"primary\"\r\n      header-text-variant=\"white\"\r\n    >\r\n      <template #header>\r\n        <div class=\"d-flex w-100 justify-content-between\">\r\n          <h4 class=\"mb-0\">Controle de cargas</h4>\r\n          <b-button-group>\r\n            <b-button variant=\"light\" v-b-toggle.collapseform>\r\n              <b-icon-caret-up v-if=\"formcollapsed\" />\r\n              <b-icon-caret-down v-else />\r\n              Filtros\r\n            </b-button>\r\n            <b-dropdown\r\n              split\r\n              variant=\"success\"\r\n              @click=\"updatestop = false\"\r\n              title=\"Atualização de coletas\"\r\n              v-if=\"updatestop\"\r\n            >\r\n              <template #button-content>\r\n                <b-icon-play />\r\n              </template>\r\n              <b-dropdown-item-button @click=\"updatetimeout = 5000\"\r\n                ><b-icon-toggle-on\r\n                  v-if=\"updatetimeout == 5000\"\r\n                /><b-icon-toggle-off v-else /><span class=\"ml-2\"\r\n                  >Timer em 5 Segundos</span\r\n                ></b-dropdown-item-button\r\n              >\r\n              <b-dropdown-item-button @click=\"updatetimeout = 15000\"\r\n                ><b-icon-toggle-on\r\n                  v-if=\"updatetimeout == 15000\"\r\n                /><b-icon-toggle-off v-else /><span class=\"ml-2\"\r\n                  >Timer em 15 Segundos</span\r\n                ></b-dropdown-item-button\r\n              >\r\n              <b-dropdown-item-button @click=\"updatetimeout = 30000\"\r\n                ><b-icon-toggle-on\r\n                  v-if=\"updatetimeout == 30000\"\r\n                /><b-icon-toggle-off v-else /><span class=\"ml-2\"\r\n                  >Timer em 30 Segundos</span\r\n                ></b-dropdown-item-button\r\n              >\r\n              <b-dropdown-item-button @click=\"updatetimeout = 60000\"\r\n                ><b-icon-toggle-on\r\n                  v-if=\"updatetimeout == 60000\"\r\n                /><b-icon-toggle-off v-else /><span class=\"ml-2\"\r\n                  >Timer em 1 minuto</span\r\n                ></b-dropdown-item-button\r\n              >\r\n            </b-dropdown>\r\n            <!-- <b-button variant=\"success\" @click=\"updatestop=false\" v-if=\"updatestop\">\r\n          <b-icon-play />\r\n        </b-button>         -->\r\n            <b-button\r\n              variant=\"danger\"\r\n              @click=\"updatestop = true\"\r\n              title=\"Pausar a atualização de coletas\"\r\n              v-else\r\n            >\r\n              <b-icon-pause />\r\n            </b-button>\r\n          </b-button-group>\r\n        </div>\r\n      </template>\r\n      <!--\r\n      selected: {{selected}}<br />\r\n      selectedchecked: {{selectedchecked}}<br />\r\n      selectedcheckedlength: {{selectedcheckedlength}}<br />\r\n\r\n      data: {{data}}<br />\r\n      marcas: {{marcas}}<br />\r\n      marcasselected: {{marcasselected}}<br />\r\n      romaneios[0]: {{romaneios[0]}}<br />\r\n      romaneios[2]: {{romaneios[2]}}\r\n       -->\r\n      <b-collapse id=\"collapseform\" v-model=\"formcollapsed\">\r\n        <b-row>\r\n          <b-col cols=\"12\" md=\"2\">\r\n            <b-form-group\r\n              id=\"input-group-idcarregamento\"\r\n              label-for=\"input-idcarregamento\"\r\n              label=\"Carga\"\r\n            >\r\n              <b-form-input\r\n                id=\"input-idcarregamento\"\r\n                type=\"number\"\r\n                v-model=\"form.idCarregamento\"\r\n              >\r\n              </b-form-input>\r\n            </b-form-group>\r\n          </b-col>\r\n          <b-col cols=\"12\" md=\"3\">\r\n            <b-form-group\r\n              id=\"input-group-database\"\r\n              label-for=\"input-database\"\r\n              label=\"Data Entrada\"\r\n            >\r\n              <b-form-datepicker\r\n                id=\"input-database\"\r\n                :date-format-options=\"{\r\n                  year: 'numeric',\r\n                  month: '2-digit',\r\n                  day: '2-digit',\r\n                }\"\r\n                locale=\"pt\"\r\n                v-model=\"form.entrada\"\r\n              >\r\n              </b-form-datepicker>\r\n            </b-form-group>\r\n          </b-col>\r\n          <b-col cols=\"12\" md=\"4\">\r\n            <b-form-group\r\n              id=\"input-group-motorista\"\r\n              label-for=\"input-motorista\"\r\n              label=\"Motorista\"\r\n            >\r\n              <b-form-input\r\n                id=\"input-motorista\"\r\n                type=\"text\"\r\n                v-model=\"form.motorista\"\r\n              />\r\n            </b-form-group>\r\n          </b-col>\r\n          <b-col cols=\"12\" md=\"3\">\r\n            <b-form-group\r\n              id=\"input-group-placa\"\r\n              label-for=\"input-placa\"\r\n              label=\"Placa\"\r\n            >\r\n              <b-form-input id=\"input-placa\" type=\"text\" v-model=\"form.placa\" />\r\n            </b-form-group>\r\n          </b-col>\r\n        </b-row>\r\n\r\n        <b-row>\r\n          <b-col cols=\"12\">\r\n            <b-form-group\r\n              id=\"input-group-nometransp\"\r\n              label-for=\"input-nometransp\"\r\n              label=\"Transportadora\"\r\n            >\r\n              <b-form-input\r\n                id=\"input-nometransp\"\r\n                type=\"text\"\r\n                v-model=\"form.nometransp\"\r\n              />\r\n            </b-form-group>\r\n          </b-col>\r\n        </b-row>\r\n\r\n        <b-row>\r\n          <b-col cols=\"12\" class=\"mb-2 text-right\">\r\n            <b-button variant=\"success\" @click=\"getCarregamento()\">\r\n              <b-icon-search />\r\n              Buscar\r\n            </b-button>\r\n          </b-col>\r\n        </b-row>\r\n        <hr />\r\n      </b-collapse>\r\n\r\n      <b-row>\r\n        <b-col>\r\n          <b-input-group prepend=\"Filtro\" size=\"sm\" class=\"mb-2\">\r\n            <b-form-input\r\n              id=\"input-filtro\"\r\n              type=\"search\"\r\n              v-model=\"filtro\"\r\n              placeholder=\"Informe a carga, nome da transportadora, motorista ou placa...\"\r\n            ></b-form-input>\r\n          </b-input-group>\r\n        </b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col class=\"text-right\">\r\n          <div class=\"d-flex float-right align-items-center hspaced-4 mb-2\">\r\n            <b-dropdown size=\"sm\" text=\"Marcas\" variant=\"info\" right>\r\n              <b-form-checkbox\r\n                v-for=\"m of marcas\"\r\n                :key=\"m.id\"\r\n                class=\"mb-1 ml-1\"\r\n                switch\r\n                left\r\n                v-model=\"m.checked\"\r\n              >\r\n                {{ m.reduzido }}\r\n              </b-form-checkbox>\r\n            </b-dropdown>\r\n            <b-form-checkbox switch v-model=\"filtroassinados\"\r\n              >Assinados</b-form-checkbox\r\n            >\r\n            <b-form-checkbox switch v-model=\"filtrochecklistassinados\"\r\n              >Checklist Assinados</b-form-checkbox\r\n            >\r\n          </div>\r\n        </b-col>\r\n      </b-row>\r\n\r\n      <b-row>\r\n        <b-col cols=\"12\" class=\"lista\">\r\n          <b-list-group>\r\n            <b-list-group-item\r\n              v-for=\"r in romaneios\"\r\n              v-b-toggle=\"`collapse-romaneio-${r.id}`\"\r\n              :variant=\"classselected(r)\"\r\n              :key=\"r.id\"\r\n              @click=\"doselected(r)\"\r\n              class=\"flex-column align-items-start\"\r\n            >\r\n              <div class=\"d-flex w-100 justify-content-between\">\r\n                <div class=\"mb-3\">\r\n                  Carga:\r\n                  <span class=\"mb-3\"\r\n                    ><b\r\n                      ><span v-copy @click.stop=\"\">{{ r.id }}</span></b\r\n                    ></span\r\n                  >\r\n                </div>\r\n                <div style=\"min-width: 80px\">\r\n                  <b-progress\r\n                    :value=\"r.perc\"\r\n                    :label=\"`${r.perc}%`\"\r\n                    :max=\"100\"\r\n                    :variant=\"classperc(r.perc)\"\r\n                    show-progress\r\n                  ></b-progress>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"d-flex w-100 justify-content-between\">\r\n                <h5 class=\"mb-3\">{{ r.codTransp }} - {{ r.transp }}</h5>\r\n                <div style=\"min-width: 80px\">\r\n                  <b-row>\r\n                    <b-col class=\"text-right\">\r\n                      <span class=\"iconbutton\" @click.stop=\"assinar(r)\">\r\n                        <b-icon-pen-fill\r\n                          v-if=\"r.PercAssinados == 100\"\r\n                          variant=\"success\"\r\n                          title=\"Assinar\"\r\n                        />\r\n                        <b-icon-pen-fill\r\n                          v-else\r\n                          variant=\"danger\"\r\n                          title=\"Assinar\"\r\n                        />\r\n                      </span>\r\n                    </b-col>\r\n                    <b-col class=\"text-right\" v-if=\"r.checklistassinatura == 1\">\r\n                      <span\r\n                        class=\"iconbutton\"\r\n                        @click.stop.prevent=\"ChamaDiretoTela(r.tURL)\"\r\n                      >\r\n                        <b-icon-truck variant=\"success\" title=\"Checklist\" />\r\n                      </span>\r\n                    </b-col>\r\n                    <b-col class=\"text-right\" v-if=\"r.checklistassinatura == 0\">\r\n                      <span\r\n                        class=\"iconbutton\"\r\n                        @click.stop.prevent=\"ChamaModal(r.id)\"\r\n                      >\r\n                        <b-icon-truck variant=\"danger\" title=\"checklist\" />\r\n                      </span>\r\n                    </b-col>\r\n\r\n                    <b-col class=\"text-right\" v-if=\"r.checklistfotos == 0\">\r\n                      <span\r\n                        class=\"iconbutton\"\r\n                        @click.stop.prevent=\"ChamarModalFoto(r.id)\"\r\n                      >\r\n                        <b-icon-camera-fill\r\n                          variant=\"danger\"\r\n                          title=\"Checklist\"\r\n                        />\r\n                      </span>\r\n                    </b-col>\r\n                    <b-col class=\"text-right\" v-else=\"r.checklistfotos == 1\">\r\n                      <span\r\n                        class=\"iconbutton\"\r\n                        @click.stop.prevent=\"ChamarModalFotoTrue(r.id)\"\r\n                      >\r\n                        <b-icon-camera-fill\r\n                          variant=\"success\"\r\n                          title=\"checklist\"\r\n                        />\r\n                      </span>\r\n                    </b-col>\r\n\r\n                    <b-col class=\"text-right\">\r\n                      <span>\r\n                        <b-form-checkbox @change=\"marcar\" />\r\n                      </span>\r\n                    </b-col>\r\n                  </b-row>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <b-row>\r\n                  <b-col cols=\"6\">\r\n                    <b-row style=\"font-style: italic; font-size: 14px\">\r\n                      <b-col class=\"text-nowrap\" cols=\"12\" lg=\"3\"\r\n                        >Romaneios: <b>{{ r.Romaneios.length }}</b></b-col\r\n                      >\r\n                      <b-col class=\"text-nowrap\" cols=\"12\" lg=\"3\"\r\n                        >Pedidos: <b>{{ r.TPedidos }}</b></b-col\r\n                      >\r\n                      <b-col class=\"text-nowrap\" cols=\"12\" lg=\"3\"\r\n                        >Volumes: <b>{{ r.volumes }}</b></b-col\r\n                      >\r\n                      <b-col class=\"text-nowrap\" cols=\"12\" lg=\"3\"\r\n                        >Última Coleta:\r\n                        <b>{{ r.ultimacoleta | time }}</b></b-col\r\n                      >\r\n                      <b-col class=\"text-nowrap\" cols=\"12\" lg=\"3\"\r\n                        >Valor Total: <b>{{ r.Valor_Com_IPI | R$ }}</b></b-col\r\n                      >\r\n                    </b-row>\r\n                  </b-col>\r\n                  <b-col cols=\"6\" class=\"text-right\">\r\n                    <b-row>\r\n                      <b-col cols=\"12\" lg=\"9\">\r\n                        <span\r\n                          ><b>{{ r.motorista }}</b></span\r\n                        >\r\n                      </b-col>\r\n                      <b-col cols=\"12\" lg=\"3\">\r\n                        <span class=\"text-nowrap\" v-copy @click.stop=\"\">{{\r\n                          r.placa\r\n                        }}</span>\r\n                      </b-col>\r\n                    </b-row>\r\n                  </b-col>\r\n                </b-row>\r\n              </div>\r\n\r\n              <b-collapse\r\n                :id=\"`collapse-romaneio-${r.id}`\"\r\n                v-model=\"r.collapsed\"\r\n                @input=\"getCarregamentoRomaneioDetail(r.idCarregamento)\"\r\n              >\r\n                <b-list-group>\r\n                  <b-list-group-item\r\n                    v-for=\"p in r.Romaneios\"\r\n                    :key=\"p.Romaneio\"\r\n                    :variant=\"\r\n                      p.checked == true\r\n                        ? 'warning'\r\n                        : p.sigImage\r\n                        ? 'success'\r\n                        : ''\r\n                    \"\r\n                    @click.stop=\"\"\r\n                  >\r\n                    <div class=\"d-flex w-100 justify-content-between\">\r\n                      <div class=\"mb-3\">\r\n                        Romaneio:\r\n                        <span class=\"font-weight-bold mb-3\" v-copy>{{\r\n                          p.Romaneio\r\n                        }}</span>\r\n                        Valor:\r\n                        <span class=\"font-weight-bold mb-3\" v-copy>{{\r\n                          p.Valor_Com_IPI | R$\r\n                        }}</span>\r\n                      </div>\r\n                      <div style=\"min-width: 80px\">\r\n                        <b-progress\r\n                          :value=\"p.PercColetados\"\r\n                          :label=\"`${p.PercColetados}%`\"\r\n                          :max=\"100\"\r\n                          :variant=\"classperc(p.PercColetados)\"\r\n                          show-progress\r\n                        ></b-progress>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div class=\"d-flex w-100 justify-content-between\">\r\n                      <div>\r\n                        <span\r\n                          class=\"text-nowrap iconbutton\"\r\n                          @click=\"modalpedidos(p.Pedidos)\"\r\n                          >Pedidos:\r\n                          <b\r\n                            ><span v-copy @click.stop=\"\">{{\r\n                              p.Pedidos.length\r\n                            }}</span></b\r\n                          ></span\r\n                        >\r\n                        |\r\n                        <span class=\"text-nowrap\"\r\n                          >Volumes: <b>{{ p.TVolumes }}</b></span\r\n                        >\r\n                        |\r\n                        <span class=\"text-nowrap\"\r\n                          >Peso: <b>{{ p.PesoBruto }}</b></span\r\n                        >\r\n                        |\r\n                        <span class=\"text-nowrap\"\r\n                          >Cubagem: <b>{{ p.Cubagem }}</b></span\r\n                        >\r\n                      </div>\r\n                      <div>\r\n                        <b-row>\r\n                          <b-col>\r\n                            <span\r\n                              class=\"iconbutton\"\r\n                              v-if=\"p.sigImage\"\r\n                              @click.stop=\"assinarromaneio(r, p.Romaneio)\"\r\n                            >\r\n                              <b-icon-pen-fill\r\n                                variant=\"success\"\r\n                                title=\"Assinar\"\r\n                              />\r\n                            </span>\r\n                            <span\r\n                              class=\"iconbutton\"\r\n                              v-else\r\n                              @click.stop=\"assinarromaneio(r, p.Romaneio)\"\r\n                            >\r\n                              <b-icon-pen-fill\r\n                                variant=\"danger\"\r\n                                title=\"Assinar\"\r\n                              />\r\n                            </span>\r\n                          </b-col>\r\n\r\n                          <b-col>\r\n                            <b-form-checkbox\r\n                              v-model=\"p.checked\"\r\n                              @click.stop=\"\"\r\n                            />\r\n                          </b-col>\r\n                        </b-row>\r\n                      </div>\r\n                    </div>\r\n                  </b-list-group-item>\r\n                </b-list-group>\r\n              </b-collapse>\r\n            </b-list-group-item>\r\n          </b-list-group>\r\n        </b-col>\r\n      </b-row>\r\n    </b-card>\r\n\r\n    <!-- MODAIS -->\r\n    <b-modal\r\n      id=\"modal-assinar\"\r\n      ref=\"modal-assinar\"\r\n      size=\"lg\"\r\n      scrollable\r\n      no-close-on-backdrop\r\n      :title=\"signatureTitle\"\r\n      ok-only\r\n      ok-title=\"Confirmar Assinaturas\"\r\n      @shown=\"signatureShown\"\r\n      @ok=\"signatureOk\"\r\n      @hide=\"signatureHidden\"\r\n      :ok-disabled=\"!signatureValid\"\r\n    >\r\n      <b-card no-body>\r\n        <b-tabs card v-model=\"tabIndex\">\r\n          <b-tab title=\"Detalhes\" active>\r\n            <div class=\"p-3\">\r\n              <b-row>\r\n                <b-col class=\"colsalign\">\r\n                  <span>Transportadora:</span>\r\n                </b-col>\r\n                <b-col cols=\"12\" sm=\"8\">\r\n                  <div class=\"font-weight-bold\">{{ selected.transp }}</div>\r\n                </b-col>\r\n              </b-row>\r\n              <b-row>\r\n                <b-col class=\"colsalign\">\r\n                  <span class=\"colsalign\">Motorista:</span>\r\n                </b-col>\r\n                <b-col cols=\"12\" sm=\"8\">\r\n                  <div class=\"font-weight-bold\">{{ selected.motorista }}</div>\r\n                </b-col>\r\n              </b-row>\r\n              <b-row>\r\n                <b-col class=\"colsalign\">\r\n                  <span>Placa:</span>\r\n                </b-col>\r\n                <b-col cols=\"12\" sm=\"8\">\r\n                  <div class=\"font-weight-bold\">{{ selected.placa }}</div>\r\n                </b-col>\r\n              </b-row>\r\n              <b-row>\r\n                <b-col class=\"colsalign\">\r\n                  <span>Romaneios:</span>\r\n                </b-col>\r\n                <b-col cols=\"12\" sm=\"8\">\r\n                  <div\r\n                    class=\"font-weight-bold\"\r\n                    :class=\"selectedcheckedlength > 0 ? 'text-danger' : ''\"\r\n                  >\r\n                    {{\r\n                      `${\r\n                        selectedcheckedlength > 0\r\n                          ? selectedcheckedlength + \" de \"\r\n                          : \"\"\r\n                      }`\r\n                    }}{{\r\n                      selected &&\r\n                      selected.Romaneios &&\r\n                      selected.Romaneios.length\r\n                    }}\r\n                  </div>\r\n                </b-col>\r\n              </b-row>\r\n              <b-row>\r\n                <b-col class=\"colsalign\">\r\n                  <span>Volumes:</span>\r\n                </b-col>\r\n                <b-col cols=\"12\" sm=\"8\">\r\n                  <div class=\"font-weight-bold\">{{ selected.volumes }}</div>\r\n                </b-col>\r\n              </b-row>\r\n              <b-row>\r\n                <b-col class=\"colsalign\">\r\n                  <span>Última Coleta:</span>\r\n                </b-col>\r\n                <b-col cols=\"12\" sm=\"8\">\r\n                  <div class=\"font-weight-bold\">\r\n                    {{ selected.ultimacoleta | dateBR }}\r\n                    {{ selected.ultimacoleta | time }}\r\n                  </div>\r\n                </b-col>\r\n              </b-row>\r\n            </div>\r\n          </b-tab>\r\n          <b-tab title=\"Assinatura Motorista\">\r\n            <Signature\r\n              v-if=\"tabIndex == 1\"\r\n              ref=\"signatureRef\"\r\n              :sigImage=\"sigImage\"\r\n              :buttons=\"['clear']\"\r\n              @evtSignatureChange=\"sigChange = true\"\r\n              v-model=\"sigImage\"\r\n            />\r\n          </b-tab>\r\n          <b-tab title=\"Assinatura Conferente\">\r\n            <b-form-group\r\n              id=\"input-group-obsconferente\"\r\n              label-for=\"input-obsconferente\"\r\n              label=\"Observação\"\r\n            >\r\n              <b-form-textarea\r\n                id=\"input-obsconferente\"\r\n                rows=\"3\"\r\n                v-model=\"sigObsConf\"\r\n              />\r\n            </b-form-group>\r\n            <b-form-group\r\n              id=\"input-group-opcoes\"\r\n              label-for=\"input-opcoes\"\r\n              label=\"Opções\"\r\n            >\r\n              <b-form-checkbox-group\r\n                id=\"input-opcoes\"\r\n                :options=\"signatureOptions\"\r\n                v-model=\"opcoes\"\r\n              />\r\n            </b-form-group>\r\n            <Signature\r\n              v-if=\"tabIndex == 2\"\r\n              ref=\"signatureConfRef\"\r\n              :sigImage=\"sigImageConf\"\r\n              :buttons=\"['clear']\"\r\n              @evtSignatureChange=\"sigChangeConf = true\"\r\n              v-model=\"sigImageConf\"\r\n            />\r\n          </b-tab>\r\n          <b-tab title=\"Assinatura Responsável Carga\">\r\n            <Signature\r\n              v-if=\"tabIndex == 3\"\r\n              ref=\"signatureRef\"\r\n              :sigImage=\"sigImageResponCarga\"\r\n              :buttons=\"['clear']\"\r\n              @evtSignatureChange=\"sigChangeResponCarga = true\"\r\n              v-model=\"sigImageResponCarga\"\r\n            />\r\n          </b-tab>\r\n        </b-tabs>\r\n      </b-card>\r\n    </b-modal>\r\n\r\n    <b-modal\r\n      id=\"modal-pedidos\"\r\n      ref=\"modal-pedidos\"\r\n      size=\"lg\"\r\n      scrollable\r\n      no-close-on-backdrop\r\n      :title=\"pedidosTitle\"\r\n      ok-only\r\n      ok-title=\"Fechar\"\r\n    >\r\n      <b-list-group>\r\n        <b-list-group-item\r\n          v-b-toggle=\"`collapse-pedido-${p.Pedido}`\"\r\n          v-for=\"p in pedidos\"\r\n          :key=\"p.Pedido\"\r\n          :variant=\"classpedidos(p)\"\r\n          @click.stop=\"pedidosselected = p\"\r\n          class=\"flex-column align-items-start\"\r\n        >\r\n          <div class=\"d-flex w-100 justify-content-between\">\r\n            <div class=\"mb-3\">\r\n              Pedido:\r\n              <span class=\"mb-3\"\r\n                ><b\r\n                  ><span v-copy @click.stop=\"\">{{ p.Pedido }}</span></b\r\n                ></span\r\n              >\r\n              |\r\n              <span class=\"text-nowrap\"\r\n                >Notas:\r\n                <b\r\n                  ><span v-copy @click.stop=\"\">{{ pedidosNotasSplit }}</span></b\r\n                ></span\r\n              >\r\n            </div>\r\n            <div style=\"min-width: 80px\">\r\n              <b-progress\r\n                :value=\"p.Percentual\"\r\n                :label=\"`${p.Percentual}%`\"\r\n                :max=\"100\"\r\n                :variant=\"classperc(p.Percentual)\"\r\n                show-progress\r\n              ></b-progress>\r\n            </div>\r\n          </div>\r\n          <div class=\"d-flex w-100 justify-content-between\">\r\n            <h5 class=\"mb-3\">{{ p.Codigo_Cliente }} - {{ p.NomeCliente }}</h5>\r\n          </div>\r\n\r\n          <div class=\"d-flex w-100 justify-content-between\">\r\n            <div style=\"font-weight: italic; font-size: 14px\">\r\n              <span class=\"text-nowrap\"\r\n                >Marca: <b>{{ p.marca }}</b></span\r\n              >\r\n              |\r\n              <span class=\"text-nowrap\"\r\n                >Volumes: <b>{{ p.Volumes }}</b></span\r\n              >\r\n              |\r\n              <span class=\"text-nowrap\"\r\n                >Cubagem: <b>{{ p.Cubagem }}</b></span\r\n              >\r\n              |\r\n              <span class=\"text-nowrap\"\r\n                >Peso Bruto: <b>{{ p.PesoBruto }}</b></span\r\n              >\r\n            </div>\r\n            <!-- <span class=\"font-weight-bold\">{{r.motorista}} [ {{r.placa}} ]</span> -->\r\n          </div>\r\n\r\n          <b-collapse :id=\"`collapse-pedido-${p.Pedido}`\" v-model=\"p.collapsed\">\r\n            <b-list-group>\r\n              <b-list-group-item\r\n                v-for=\"n in p.Notas\"\r\n                :key=\"n.Numero_nota\"\r\n                @click.stop=\"\"\r\n              >\r\n                <div class=\"d-flex w-100 justify-content-between\">\r\n                  <div class=\"mb-3\">\r\n                    Nota:\r\n                    <span class=\"font-weight-bold mb-3\" v-copy @click.stop=\"\">{{\r\n                      n.Numero_nota\r\n                    }}</span>\r\n                  </div>\r\n                  <div style=\"min-width: 80px\">\r\n                    <b-progress\r\n                      :value=\"n.PercColeta\"\r\n                      :label=\"`${n.PercColeta}%`\"\r\n                      :max=\"100\"\r\n                      :variant=\"classperc(n.PercColeta)\"\r\n                      show-progress\r\n                    ></b-progress>\r\n                  </div>\r\n                </div>\r\n                <div class=\"d-flex w-100 justify-content-between\">\r\n                  <div style=\"font-weight: italic; font-size: 14px\">\r\n                    <span class=\"text-nowrap\"\r\n                      >Volumes: <b>{{ n.TVolumes }}</b></span\r\n                    >\r\n                    |\r\n                    <span class=\"text-nowrap\"\r\n                      >Última Coleta:\r\n                      <b\r\n                        >{{ n.UltimaColeta | dateBR }}\r\n                        {{ n.UltimaColeta | time }}</b\r\n                      ></span\r\n                    >\r\n                  </div>\r\n                  <!-- <span class=\"font-weight-bold\">{{r.motorista}} [ {{r.placa}} ]</span> -->\r\n                </div>\r\n              </b-list-group-item>\r\n            </b-list-group>\r\n          </b-collapse>\r\n        </b-list-group-item>\r\n      </b-list-group>\r\n    </b-modal>\r\n\r\n    <b-modal\r\n      id=\"modal-1\"\r\n      hide-header-close\r\n      centered\r\n      title=\"Qual o Tipo do Caminhão?\"\r\n    >\r\n      <b-row>\r\n        <b-col cols=\"12\" sm=\"4\" class=\"buttons-modal-chamainspesao\">\r\n          <b-button\r\n            id=\"1\"\r\n            class=\"Layoutcaminhaobutton\"\r\n            @click=\"chamatelasiderbau()\"\r\n          >\r\n            <img\r\n              src=\"@/assets/siderebau.png\"\r\n              class=\"layout-icon-button-caminhao\"\r\n              alt=\"Ícone Sider e Baú\"\r\n            />\r\n            <p class=\"text-button\">Sider e Baú</p>\r\n          </b-button>\r\n        </b-col>\r\n        <b-col cols=\"12\" sm=\"4\" class=\"buttons-modal-chamainspesao\">\r\n          <b-button\r\n            class=\"Layoutcaminhaobutton\"\r\n            id=\"2\"\r\n            @click=\"chamatelatruck()\"\r\n          >\r\n            <img\r\n              src=\"@/assets/caminhaotruck.png\"\r\n              class=\"layout-icon-button-caminhao\"\r\n              alt=\"Ícone Sider e Baú\"\r\n            />\r\n            <p class=\"text-button\">Truck</p></b-button\r\n          >\r\n        </b-col>\r\n        <b-col cols=\"12\" sm=\"4\" class=\"buttons-modal-chamainspesao\">\r\n          <b-button\r\n            class=\"Layoutcaminhaobutton\"\r\n            id=\"3\"\r\n            @click=\"chamatelacontainer()\"\r\n          >\r\n            <img\r\n              src=\"@/assets/caminhaocontainer.png\"\r\n              class=\"layout-icon-button-caminhao\"\r\n              alt=\"Ícone Sider e Baú\"\r\n            />\r\n            <p class=\"text-button\">Container</p></b-button\r\n          >\r\n        </b-col>\r\n      </b-row>\r\n    </b-modal>\r\n\r\n    <b-modal\r\n      id=\"modal-Foto\"\r\n      hide-header-close\r\n      centered\r\n      ok-only\r\n      ok-title=\"Fechar\"\r\n      ok-variant=\"secondary\"\r\n      title=\"Foto da Carga\"\r\n      @hidden=\"onModalHidden\"\r\n    >\r\n      <b-row>\r\n        <CameraCapture\r\n          :idcarregamentoinspecao=\"idcarregamentoinspecao\"\r\n          :key=\"cameraKey\"\r\n        />\r\n      </b-row>\r\n    </b-modal>\r\n\r\n    <b-modal\r\n      id=\"modal-Foto-True\"\r\n      hide-header-close\r\n      centered\r\n      ok-only\r\n      ok-title=\"Fechar\"\r\n      ok-variant=\"secondary\"\r\n      title=\"Foto da Carga\"\r\n      size=\"xl\"\r\n    >\r\n      <b-container fluid class=\"p-4 container-fluid-color\">\r\n        <b-row class=\"thumbnail-container\">\r\n          <div v-for=\"(f, i) of Files\" :key=\"i\">\r\n            <b-img\r\n              class=\"thumbnail-fluid-files\"\r\n              thumbnail\r\n              fluid\r\n              :src=\"f.Files\"\r\n            ></b-img>\r\n          </div>\r\n        </b-row>\r\n      </b-container>\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport API from \"../../../services/api.service\";\r\nimport Signature from \"../../../components/Signature\";\r\nimport Properties from \"../../../components/Properties\";\r\nimport { mapGetters } from \"vuex\";\r\nimport CameraCapture from \"../../../components/CameraCapture\";\r\n\r\nexport default {\r\n  name: \"Carregamento\",\r\n  components: {\r\n    Signature,\r\n    Properties,\r\n    CameraCapture,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      modalVisivel: false,\r\n      idcarregamentoinspecao: null,\r\n      cameraKey: 0,\r\n      form: {\r\n        idCarregamento: 0,\r\n        entrada: new Date(),\r\n        nometransp: \"\",\r\n        motorista: \"\",\r\n        placa: \"\",\r\n      },\r\n      filtro: \"\",\r\n      filterOn: [\"id\", \"transp\", \"motorista\", \"placa\"],\r\n      filtroassinados: false,\r\n      filtrochecklistassinados: false,\r\n      filtrocoletados: true,\r\n      timer: null,\r\n      updatetimeout: 15000,\r\n      updatestop: false,\r\n      data: [],\r\n      marcas: [],\r\n      sigOpcoes: [],\r\n      tabIndex: 0,\r\n      sigImage: null,\r\n      sigImageConf: null,\r\n      sigImageResponCarga: null,\r\n      sigObsConf: \"\",\r\n      sigChange: false,\r\n      sigChangeConf: false,\r\n      sigChangeResponCarga: false,\r\n      selected: [],\r\n      pedidosselected: null,\r\n      pedidos: [],\r\n      opcoes: [],\r\n\r\n      formcollapsed: false,\r\n      Files: [],\r\n      PedidosRomaneios: [],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"gtxConfigParemp\", \"gtxConfigGrupoemp\"]),\r\n    hoje() {\r\n      const h = new Date();\r\n      return (\r\n        h.getDay().toString().padStart(2, \"0\") +\r\n        \"/\" +\r\n        h.getMonth().toString().padStart(2, \"0\") +\r\n        \"/\" +\r\n        h.getFullYear().toString().padStart(4, \"0\")\r\n      );\r\n    },\r\n    fields() {\r\n      return [\r\n        // { key: \"transp\", label: \"Transportadora\", sortable: true },\r\n        // { key: \"motorista\", sortable: true },\r\n        // { key: \"placa\", sortable: true },\r\n        // { key: \"perc\", label: \"Coletas\", sortable: true },\r\n        { key: \"carga\", label: \"Carga\" },\r\n        { key: \"actions\", label: \"\", sortable: false },\r\n      ];\r\n    },\r\n    parametros() {\r\n      return {\r\n        idCarregamento: this.form.idCarregamento,\r\n      };\r\n    },\r\n    params() {\r\n      return {\r\n        idCarregamento: this.form.idCarregamento,\r\n        grupoempresa: this.gtxConfigParemp || 8,\r\n        entrada: this.form.entrada,\r\n        nometransp: this.form.nometransp,\r\n        motorista: this.form.motorista,\r\n        placa: this.form.placa,\r\n      };\r\n    },\r\n    // paramsdetails() {\r\n    //   return { idCarregamento: this.form.idCarregamento };\r\n    // },\r\n    marcasselected() {\r\n      return this.marcas.filter((m) => m.checked);\r\n    },\r\n\r\n    romaneios() {\r\n      return this.data\r\n        .map((r) => ({\r\n          id: r.id,\r\n          codTransp: r.Codigo_Transp,\r\n          transp: r.Razao_Social,\r\n          motorista: r.Motorista,\r\n          ultimacoleta: r.UltimaColeta,\r\n          volumes: r.TVolumes,\r\n          coletados: r.TVolumesColetados,\r\n          TPedidos: r.TPedidos,\r\n          perc: r.PercColetados,\r\n          placa: r.Placa,\r\n          sigImage: r.sigImage,\r\n          sigImageConf: r.sigImageConf,\r\n          sigImageResponCarga: r.sigImageResponCarga,\r\n          PercAssinados: r.PercAssinados,\r\n          checklistassinatura: r.checklistassinatura,\r\n          checklistfotos: r.checklistfotos,\r\n          idTiposCaminhao: r.idTiposCaminhao,\r\n          sigObsConf: r.sigObsConf,\r\n          signed:\r\n            (r.sigImage && r.sigImage !== \"\") ||\r\n            (r.sigImageConf && r.sigImageConf !== \"\") ||\r\n            (r.sigImageResponCarga && r.sigImageResponCarga !== \"\")\r\n              ? true\r\n              : false,\r\n          Romaneios: r.Romaneios || [],\r\n          collapsed: r.collapsed,\r\n          checked: r.checked,\r\n          Opcoes: r.Opcoes,\r\n          _rowVariant:\r\n            r.sigImage && r.sigImageConf && r.sigImageResponCarga\r\n              ? \"success\"\r\n              : \"\",\r\n          tURL: r.tURL,\r\n          Valor_Com_IPI: r.Romaneios.reduce((a, b) => a + b.Valor_Com_IPI, 0),\r\n        }))\r\n        .filter((f) => this.romaneiosfiltros(f));\r\n      //.filter(f=>f.signed == this.filtroassinados && (f.perc > 99) == this.filtrocoletados )\r\n    },\r\n    paramsignature() {\r\n      return {\r\n        idCarregamento: this.selected.id,\r\n        sigImage: this.sigImage,\r\n        sigImageConf: this.sigImageConf,\r\n        sigImageResponCarga: this.sigImageResponCarga,\r\n        sigObsConf: this.sigObsConf,\r\n        opcoes: JSON.stringify(this.opcoes),\r\n        romaneios: this.selected.Romaneios.filter((r) => r.checked),\r\n      };\r\n    },\r\n    signatureOptions() {\r\n      return this.sigOpcoes.map((o) => ({\r\n        text: o.descricao,\r\n        value: o.id,\r\n      }));\r\n    },\r\n    selectedchecked() {\r\n      return this.selected.Romaneios\r\n        ? this.selected.Romaneios.filter((c) => c.checked)\r\n        : [];\r\n    },\r\n    selectedcheckedlength() {\r\n      return this.selectedchecked.length || 0;\r\n    },\r\n    signatureFields() {\r\n      return {\r\n        Transportadora: this.selected.transp,\r\n        Motorista: this.selected.motorista,\r\n        Placa: this.selected.placa,\r\n      };\r\n    },\r\n    signatureValid() {\r\n      return (\r\n        (this.sigChange && this.sigImage && this.sigImage !== \"\") ||\r\n        (this.sigChangeConf && this.sigImageConf && this.sigImageConf !== \"\") ||\r\n        (this.sigChangeResponCarga &&\r\n          this.sigImageResponCarga &&\r\n          this.sigImageResponCarga !== \"\")\r\n      );\r\n    },\r\n    signatureTitle() {\r\n      return \"Carga: \" + ((this.selected && this.selected.id) || \"\");\r\n    },\r\n    pedidosTitle() {\r\n      return (\r\n        \"Romaneio: \" +\r\n        ((this.pedidos && this.pedidos[0] && this.pedidos[0].Romaneio) || \"\")\r\n      );\r\n    },\r\n    pedidosNotasSplit() {\r\n      return (\r\n        (this.pedidos &&\r\n          this.pedidos[0] &&\r\n          this.pedidos[0].Notas &&\r\n          this.pedidos[0].Notas.map((n) => n.Numero_nota).join(\",\")) ||\r\n        \"\"\r\n      );\r\n    },\r\n  },\r\n  created() {\r\n    API.getLocalDBDocument(\"carregamento\").then((doc) => {\r\n      if (doc) {\r\n        this.form.idCarregamento = doc.form.idCarregamento || 0;\r\n        // this.form.entrada = doc.entrada || new Date();\r\n        this.form.nometransp = doc.form.nometransp || \"\";\r\n        this.form.motorista = doc.form.motorista || \"\";\r\n        this.form.placa = doc.form.placa || \"\";\r\n        this.updatetimeout = doc.updatetimeout || this.updatetimeout;\r\n        this.filtroassinados = doc.filtroassinados || this.filtroassinados;\r\n        this.marcas = doc.marcas || this.marcas;\r\n        this.filtro = doc.filtro || this.filtro;\r\n        if (this.marcas.length == 0) {\r\n          this.getMarcas();\r\n        }\r\n      } else {\r\n        if (this.marcas.length == 0) {\r\n          this.getMarcas();\r\n        }\r\n      }\r\n    });\r\n  },\r\n  beforeMount() {\r\n    this.getCarregamentoOpcoes();\r\n\r\n    this.getCarregamento();\r\n\r\n    // seta o timer que atualiza os totais ...\r\n    this.updatestop = false;\r\n    this.timer = setInterval(() => {\r\n      if (!this.updatestop) this.getCarregamentoTotais();\r\n    }, this.updatetimeout);\r\n  },\r\n  methods: {\r\n    onModalHidden() {\r\n      this.getCarregamento();\r\n    },\r\n    refreshCamera() {\r\n      // Atualiza a chave da câmera para forçar a atualização do componente CameraCapture\r\n      this.cameraKey += 1;\r\n    },\r\n\r\n    teste(val) {\r\n      console.log(\"teste:\", val);\r\n      val.collapsed = !val.collapsed;\r\n    },\r\n\r\n    ChamaModal(id) {\r\n      this.idcarregamentoinspecao = id;\r\n      this.$bvModal.show(\"modal-1\");\r\n    },\r\n\r\n    ChamarModalFoto(id) {\r\n      this.idcarregamentoinspecao = id;\r\n      this.$bvModal.show(\"modal-Foto\");\r\n    },\r\n\r\n    ChamarModalFotoTrue(id) {\r\n      this.idcarregamentoinspecao = id;\r\n      this.$bvModal.show(\"modal-Foto-True\");\r\n      this.InspecaoCarregamentoFotosGet(id);\r\n    },\r\n\r\n    ChamaDiretoTela(tURL) {\r\n      // this.$router.push({\r\n      //   name: \"inspecaosiderebau\",\r\n      //   params: { GUID: GUID },\r\n      // });\r\n      this.$router.push(tURL);\r\n    },\r\n\r\n    chamatelasiderbau() {\r\n      this.$router.push({\r\n        name: \"inspecaosiderebau\",\r\n        params: { id: this.idcarregamentoinspecao },\r\n      });\r\n    },\r\n\r\n    chamatelasiderbau() {\r\n      this.$router.push({\r\n        name: \"inspecaosiderebau\",\r\n        params: { id: this.idcarregamentoinspecao },\r\n      });\r\n    },\r\n    chamatelatruck() {\r\n      this.$router.push({\r\n        name: \"inspecaotruck\",\r\n        params: { id: this.idcarregamentoinspecao },\r\n      });\r\n    },\r\n    chamatelacontainer() {\r\n      this.$router.push({\r\n        name: \"inspecaocontainer\",\r\n        params: { id: this.idcarregamentoinspecao },\r\n      });\r\n    },\r\n    romaneiosfiltros(item) {\r\n      // console.log('romaneiosfiltros(item)', item);\r\n      let ret = false;\r\n      const marcas =\r\n        this.marcas.filter((m) => m.checked).map((m) => m.id) || [];\r\n      //const marcas = []\r\n\r\n      // ret = ((item.signed == this.filtroassinados) && ((item.perc > 99) == this.filtrocoletados));\r\n      ret =\r\n        (item.PercAssinados == 100) == this.filtroassinados &&\r\n        (item.checklistassinatura == 1) == this.filtrochecklistassinados;\r\n\r\n      if (marcas.length > 0) {\r\n        ret =\r\n          ret &&\r\n          item.Romaneios.filter((r) =>\r\n            r.Marcas.find((m) => marcas.includes(m.id))\r\n          ).length > 0;\r\n      }\r\n\r\n      if (this.filtro !== \"\") {\r\n        ret =\r\n          ret &&\r\n          (item.id.toString().includes(this.filtro) ||\r\n            item.transp.includes(this.filtro.toUpperCase()) ||\r\n            item.motorista.includes(this.filtro.toUpperCase()) ||\r\n            item.placa.includes(this.filtro.toUpperCase()));\r\n      }\r\n\r\n      return ret;\r\n    },\r\n    marcar(check) {\r\n      if (this.data.find((d) => d.id == this.selected.id)) {\r\n        this.data\r\n          .find((d) => d.id == this.selected.id)\r\n          .Romaneios.map((r) => {\r\n            r.checked = check;\r\n          });\r\n      }\r\n    },\r\n    modalpedidos(pedidos) {\r\n      this.pedidos = pedidos;\r\n      this.$bvModal.show(\"modal-pedidos\");\r\n    },\r\n    getMarcas() {\r\n      // console.log('getMarcas', this.marcas);\r\n      API.get(\"v2/Servicos/Marcas/Get\", { pesquisa: \"%\", PageSize: 30 }).then(\r\n        (apidata) => {\r\n          if (apidata.data.Success == \"True\" || apidata.data.Success) {\r\n            const res = API.prepareData(apidata.data);\r\n            // console.log(res);\r\n            this.marcas = res.data;\r\n          } else {\r\n            this.marcas = [];\r\n          }\r\n        }\r\n      );\r\n    },\r\n    getCarregamentoOpcoes() {\r\n      API.get(\"v2/Servicos/Carregamento/OpcoesGet\", {}).then((apidata) => {\r\n        if (apidata.data.Success == \"True\" || apidata.data.Success) {\r\n          const res = API.prepareData(apidata.data);\r\n          this.sigOpcoes = res.apiresponse.Data;\r\n        } else {\r\n          this.sigOpcoes = [];\r\n        }\r\n      });\r\n    },\r\n    getCarregamento() {\r\n      this.updatestop = true;\r\n      API.get(\"v2/Servicos/Carregamento/Get\", this.params).then((apidata) => {\r\n        if (apidata.data.Success == \"True\" || apidata.data.Success) {\r\n          const res = API.prepareData(apidata.data);\r\n          this.data = res.apiresponse.Data;\r\n          this.formcollapsed = false;\r\n          API.setLocalDBDocument(this.$data, \"carregamento\");\r\n        } else {\r\n          this.data = [];\r\n          this.formcollapsed = true;\r\n        }\r\n      });\r\n    },\r\n    getCarregamentoRomaneioDetail(idCarregamento) {\r\n      API.get(\"v2/Servicos/CarregamentoRomaneiosDetails/Get\", {\r\n        params: { idCarregamento: idCarregamento },\r\n      }).then((api) => {\r\n        if (api.data.Success == \"True\" || api.data.Success) {\r\n          this.PedidosRomaneios = api.data.Data;\r\n          this.formcollapsed = false;\r\n        } else {\r\n          this.PedidosRomaneios = [];\r\n          this.formcollapsed = true;\r\n        }\r\n      });\r\n    },\r\n\r\n    InspecaoCarregamentoFotosGet(id) {\r\n      API.get(\"v2/Servicos/CarregamentoFotos/Get\", {\r\n        params: { idCarregamento: id },\r\n      }).then((api) => {\r\n        if (api.data.Success == \"True\" || api.data.Success) {\r\n          this.Files = api.data.Data;\r\n        } else {\r\n          this.Files = [];\r\n        }\r\n      });\r\n    },\r\n    getCarregamentoTotais() {\r\n      API.get(\"v2/Servicos/CarregamentoTotais/Get\", this.params, false).then(\r\n        (apidata) => {\r\n          if (apidata.data.Success == \"True\" || apidata.data.Success) {\r\n            const res = API.prepareData(apidata.data);\r\n\r\n            //console.log('getCarregamentoTotais:hit');\r\n\r\n            res.apiresponse.Data.map((t) => {\r\n              if (this.data.find((c) => c.id == t.id)) {\r\n                this.data.find((c) => c.id == t.id).TVolumesColetados =\r\n                  t.TVolumesColetados;\r\n                this.data.find((c) => c.id == t.id).PercColetados =\r\n                  t.PercColetados;\r\n                this.data.find((c) => c.id == t.id).sigImage = t.sigImage;\r\n                this.data.find((c) => c.id == t.id).sigImageConf =\r\n                  t.sigImageConf;\r\n                this.data.find((c) => c.id == t.id).sigImageResponCarga =\r\n                  t.sigImageResponCarga;\r\n                this.data.find((c) => c.id == t.id).sigObsConf = t.sigObsConf;\r\n                this.data.find((c) => c.id == t.id).Opcoes = t.Opcoes;\r\n                this.data.find((c) => c.id == t.id).UltimaColeta =\r\n                  t.UltimaColeta;\r\n              }\r\n            });\r\n          }\r\n        }\r\n      );\r\n    },\r\n    async assinar(item) {\r\n      console.log(\"assinar.item:\", item);\r\n      let perc = item.perc;\r\n\r\n      // sugerido não poder liberar sem estar 100% coletado\r\n      /*\r\n      if (perc < 100) {\r\n        this.$root.toastdanger(\"A carga não está 100% coletada, não é possível solicitar a assinatura !\");\r\n      }\r\n      */\r\n      if (perc < 100) {\r\n        await this.$root\r\n          .showmessage(\r\n            \"A carga não está 100% coletada, deseja realmente solicitar a assinatura ?\"\r\n          )\r\n          .then((choice) => {\r\n            if (choice) {\r\n              perc = 100;\r\n            }\r\n          });\r\n      }\r\n\r\n      if (perc > 99.9) {\r\n        // this.selected = item;\r\n        this.doselected(item);\r\n\r\n        const params = {\r\n          idCarregamento: item.id,\r\n          Romaneios: this.selectedchecked.map((r) => r.Romaneio).join(\",\"),\r\n        };\r\n        console.log(\"assinar.params:\", params);\r\n\r\n        // busca a assinatuda da API ...\r\n        API.get(\"v2/Servicos/CarregamentoSignature/Get\", params, false).then(\r\n          (apidata) => {\r\n            const res = API.prepareData(apidata.data);\r\n            console.log(\"res:\", res);\r\n            if (res.success && res.data.length > 0) {\r\n              const data = res.data[0];\r\n              this.sigImage = data.sigImage || \"\";\r\n              this.sigImageConf = data.sigImageConf || \"\";\r\n              this.sigImageResponCarga = data.sigImageResponCarga || \"\";\r\n              this.sigObsConf = data.sigObsConf || \"\";\r\n              this.opcoes = JSON.parse(data.Opcoes || \"[]\");\r\n            } else {\r\n              this.sigImage = \"\";\r\n              this.sigImageConf = \"\";\r\n              this.sigImageResponCarga = \"\";\r\n              this.sigObsConf = \"\";\r\n              this.opcoes = [];\r\n            }\r\n            this.sigChange = false;\r\n            this.sigChangeConf = false;\r\n            this.sigChangeResponCarga = false;\r\n\r\n            this.$bvModal.show(\"modal-assinar\");\r\n          }\r\n        );\r\n        /*\r\n        // console.log(\"assinar.opcoes:\", item.Opcoes);\r\n        if (item.Romaneios.find(r=>r.checked)) {\r\n          this.sigImage = item.Romaneios.find(r=>r.checked).sigImage;\r\n          this.sigImageConf = item.Romaneios.find(r=>r.checked).sigImageConf;\r\n          this.sigObsConf = item.Romaneios.find(r=>r.checked).sigObsConf;\r\n          this.opcoes = JSON.parse(item.Romaneios.find(r=>r.checked).Opcoes || \"[]\");\r\n        } else {\r\n          this.sigImage = item.sigImage;\r\n          this.sigImageConf = item.sigImageConf;\r\n          this.sigObsConf = item.sigObsConf;\r\n          this.opcoes = JSON.parse(item.Opcoes || \"[]\");\r\n        }\r\n        this.sigChange = false;\r\n        this.sigChangeConf = false;\r\n        // console.log(\"assinar.item:\", item);\r\n        this.$bvModal.show(\"modal-assinar\");\r\n        */\r\n      }\r\n    },\r\n    assinarromaneio(carga, romaneio) {\r\n      if (this.data.find((d) => d.id == carga.id)) {\r\n        // desmarca os outros ...\r\n        this.data\r\n          .find((d) => d.id == carga.id)\r\n          .Romaneios.filter((r) => r.checked)\r\n          .map((m) => (m.checked = false));\r\n        if (\r\n          this.data\r\n            .find((d) => d.id == carga.id)\r\n            .Romaneios.find((r) => r.Romaneio == romaneio)\r\n        ) {\r\n          this.data\r\n            .find((d) => d.id == carga.id)\r\n            .Romaneios.find((r) => r.Romaneio == romaneio).checked = true;\r\n          this.assinar(carga);\r\n        }\r\n      }\r\n    },\r\n    signatureShown() {\r\n      this.updatestop = true;\r\n    },\r\n    signatureHidden() {\r\n      this.updatestop = false;\r\n    },\r\n    signatureOk() {\r\n      // console.log(\"signatureOk.sigImage:\", this.sigImage);\r\n      API.post(\r\n        \"v2/Servicos/Carregamento/SignatureSet\",\r\n        this.paramsignature\r\n      ).then((apidata) => {\r\n        if (apidata.data.Success == \"True\" || apidata.data.Success) {\r\n          if (this.data.find((c) => c.id == this.selected.id)) {\r\n            this.data.find((c) => c.id == this.selected.id).sigImage =\r\n              this.sigImage;\r\n            this.data.find((c) => c.id == this.selected.id).sigImageConf =\r\n              this.sigImageConf;\r\n            this.data.find(\r\n              (c) => c.id == this.selected.id\r\n            ).sigImageResponCarga = this.sigImageResponCarga;\r\n            this.data.find((c) => c.id == this.selected.id).sigObsConf =\r\n              this.sigObsConf;\r\n            this.data.find((c) => c.id == this.selected.id).Opcoes =\r\n              JSON.stringify(this.opcoes);\r\n            this.data\r\n              .find((c) => c.id == this.selected.id)\r\n              .Romaneios.filter((r) => r.checked)\r\n              .map((d) => {\r\n                d.sigImage = this.sigImage;\r\n                d.sigImageConf = this.sigImageConf;\r\n                d.sigImageResponCarga = this.sigImageResponCarga;\r\n                d.sigObsConf = this.sigObsConf;\r\n                d.Opcoes = JSON.stringify(this.opcoes);\r\n                d.checked = false;\r\n              });\r\n          }\r\n          const res = API.prepareData(apidata.data);\r\n\r\n          this.$root.toastsuccess(res.data[0].Mensagem);\r\n          this.updatestop = false;\r\n\r\n          if (\r\n            !this.sigImage ||\r\n            this.sigImage == \"\" ||\r\n            !this.sigImageConf ||\r\n            this.sigImageConf == \"\"\r\n            // !this.sigImageResponCarga ||\r\n            // this.sigImageResponCarga == \"\"\r\n          ) {\r\n            if (!this.sigImage || this.sigImage == \"\")\r\n              this.$root.toastdanger(\"Assinatura do motorista não informada!\");\r\n            if (!this.sigImageConf || this.sigImageConf == \"\")\r\n              this.$root.toastdanger(\"Assinatura do conferente não informada!\");\r\n            // if (!this.sigImageResponCarga || this.sigImageResponCarga == \"\")\r\n            //   this.$root.toastdanger(\r\n            //     \"Assinatura do responsável da carga não informada!\"\r\n            //   );\r\n          }\r\n        } else {\r\n          this.$root.toastdanger(apidata.Error);\r\n          this.formcollapsed = false;\r\n        }\r\n      });\r\n    },\r\n    doselected(item) {\r\n      this.selected = item;\r\n    },\r\n    classperc(perc) {\r\n      return perc > 99 ? \"success\" : \"primary\";\r\n    },\r\n    classselected(item) {\r\n      return item.id == this.selected.id ? \"primary\" : \"\";\r\n    },\r\n    classpedidos(item) {\r\n      return this.pedidosselected && item.Pedido == this.pedidosselected.Pedido\r\n        ? \"primary\"\r\n        : \"\";\r\n    },\r\n  },\r\n  watch: {\r\n    formcollapsed(collapsed) {\r\n      this.updatestop = collapsed;\r\n    },\r\n    updatetimeout() {\r\n      clearInterval(this.timer);\r\n      console.log(\"updatetimeout:\", new Date());\r\n      this.timer = null;\r\n      this.timer = setInterval(() => {\r\n        console.log(\"Carregamento.timer:\", new Date().toLocaleTimeString());\r\n      }, this.runtimeout());\r\n    },\r\n    runtimeout() {\r\n      if (!this.updatestop) this.getCarregamentoTotais();\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    this.updatestop = true;\r\n    clearInterval(this.timer);\r\n    this.timer = null;\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.colsalign {\r\n  text-align: right;\r\n}\r\n.buttons-modal-chamainspesao {\r\n  text-align: center;\r\n}\r\n.Layoutcaminhaobutton {\r\n  height: 82px;\r\n  width: 126px;\r\n}\r\n.text-button {\r\n  color: black;\r\n  font-weight: bold;\r\n}\r\n\r\n.layout-icon-button-caminhao {\r\n  margin-bottom: -15px;\r\n}\r\n.container-fluid-color {\r\n  background-color: rgb(72, 81, 86);\r\n}\r\n.thumbnail-container {\r\n  margin-left: 20px;\r\n  margin-right: 20px;\r\n\r\n  justify-content: center;\r\n}\r\n.thumbnail-fluid-files {\r\n  margin-left: 6px;\r\n  margin-right: 6px;\r\n  margin-top: 6px;\r\n  margin-bottom: 6px;\r\n  max-width: 272px;\r\n}\r\n@media (max-width: 576px) {\r\n  .container,\r\n  .container-sm {\r\n    max-width: 609px;\r\n  }\r\n}\r\n@media screen and (max-width: 600px) {\r\n  .colsalign {\r\n    text-align: left;\r\n  }\r\n  .lista {\r\n    padding-left: 3px;\r\n    padding-right: 3px;\r\n  }\r\n}\r\n</style>\r\n"]}]}