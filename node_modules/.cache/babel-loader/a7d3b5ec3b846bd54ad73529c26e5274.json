{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\components\\TableEditApi.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\components\\TableEditApi.vue","mtime":1701906516412},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBcGlTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL2FwaS5zZXJ2aWNlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJUYWJsZUVkaXRBcGkiLAogIHByb3BzOiB7CiAgICB0YWJsZUlkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gInRhYmxlLWFwaSI7CiAgICAgIH0KICAgIH0sCiAgICBoZWFkZXI6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQogICAgfSwKICAgIGZpZWxkczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICBzb21hOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIG1hc2s6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgaXRlbXM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgZ2V0dGVyOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIGJ1dHRvbnM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgLy8gaW5mb3JtYXIgJ2VkaXQnLCdkZWxldGUnLCdpbmZvJywnaW5zZXJ0JywncnVuJywnbmV3JwogICAgcGFnZTogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIDE7CiAgICAgIH0KICAgIH0sCiAgICBwYWdlczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gWzEwLCAzMCwgNTAsIDEwMCwgNTAwLCAxMDAwLCA5OTk5OTk5XTsKICAgICAgfQogICAgfSwKICAgIHBlclBhZ2U6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiAxMDsKICAgICAgfQogICAgfSwKICAgIHJvdXRlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgIH0sCiAgICBwYXJhbXM6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfSwKICAgIGJ1c3k6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBydW46IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiAxOwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW5wdXRQZXNxdWlzYTogIiIsCiAgICAgIGNoZWNrOiBmYWxzZSwKICAgICAgY2hlY2thbGw6IGZhbHNlLAogICAgICBzZWxlY3RlZHM6IFtdLAogICAgICBsb2FkOiB0aGlzLmJ1c3kgfHwgZmFsc2UsCiAgICAgIGNvbHVtbnM6IFtdLAogICAgICBhcGlyZXNwb25zZTogewogICAgICAgIERhdGE6IFtdLAogICAgICAgIFBhZ2luYXM6IHsKICAgICAgICAgIFBhZ2VDb3VudDogMSwKICAgICAgICAgIFBhZ2VTaXplOiAxMAogICAgICAgIH0KICAgICAgfSwKICAgICAgc2VsZWN0ZWQ6IG51bGwsCiAgICAgIHNvcnRCeTogIiIsCiAgICAgIHNvcnREZXNjOiBmYWxzZSwKICAgICAgY3VycmVudFBhZ2U6IHRoaXMucGFnZSwKICAgICAgY3VycmVudHBlclBhZ2U6IHRoaXMucGVyUGFnZQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyBjb25zb2xlLmxvZygnVGFibGVFZGl0QXBpLicpCgogICAgaWYgKHRoaXMucm91dGUgIT09ICIiICYmIHRoaXMucnVuID4gMCkgewogICAgICB0aGlzLmdldEZyb21BcGkoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY29sdW1ucyA9IHRoaXMuZ2V0Q29sdW1uc0FycmF5KHRoaXMuaXRlbXMpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGN1c3RvbWJ1dHRvbnMoKSB7CiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbnMuZmlsdGVyKGIgPT4gdHlwZW9mIGIgPT0gIm9iamVjdCIgJiYgIWIuaGVhZGVyKTsKICAgIH0sCiAgICBjdXN0b21idXR0b25zaGVhZGVyKCkgewogICAgICByZXR1cm4gdGhpcy5idXR0b25zLmZpbHRlcihiID0+IHR5cGVvZiBiID09ICJvYmplY3QiICYmIGIuaGVhZGVyKTsKICAgIH0sCiAgICBhY3RpdmVwYWdlKCkgewogICAgICByZXR1cm4gdGhpcy5yb3V0ZSAhPT0gIiIgPyAxIDogdGhpcy5jdXJyZW50UGFnZTsKICAgIH0sCiAgICBzaG93Y29sdW1ucygpIHsKICAgICAgcmV0dXJuIHRoaXMuY29sdW1ucy5sZW5ndGggPiAwID8gdGhpcy5jb2x1bW5zLmZpbHRlcihmID0+IGYudmlzaWJsZSkgfHwgT2JqZWN0LmtleXModGhpcy5pdGVtcykgOiBbXTsKICAgIH0sCiAgICBzdW1jb2x1bW5zKCkgewogICAgICByZXR1cm4gdGhpcy5zaG93Y29sdW1ucy5tYXAoYyA9PiB0aGlzLnN1bWZpZWxkKGMua2V5KSk7CiAgICB9LAogICAgY29sdW1uc3BhbigpIHsKICAgICAgcmV0dXJuIHRoaXMuc2hvd2NvbHVtbnMubGVuZ3RoIHx8IDE7CiAgICB9LAogICAgdG90YWxSb3dzKCkgewogICAgICBpZiAodGhpcy5yb3V0ZSAhPT0gIiIpIHsKICAgICAgICByZXR1cm4gdGhpcy5hcGlyZXNwb25zZSAmJiB0aGlzLmFwaXJlc3BvbnNlLlBhZ2luYXMgPyB0aGlzLmFwaXJlc3BvbnNlLlBhZ2luYXMuUGFnZUNvdW50ICogdGhpcy5hcGlyZXNwb25zZS5QYWdpbmFzLlBhZ2VTaXplIDogMDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5sZW5ndGg7CiAgICAgIH0KICAgIH0sCiAgICBpdGVtc0xpc3QoKSB7CiAgICAgIGxldCByZXQgPSB0aGlzLml0ZW1zLmxlbmd0aCA+IDAgPyB0aGlzLml0ZW1zIDogdGhpcy5hcGlyZXNwb25zZS5EYXRhOwogICAgICByZXR1cm4gcmV0IHx8IFtdOwogICAgfSwKICAgIHBhZ2luYXRlKCkgewogICAgICByZXR1cm4gewogICAgICAgIFBhZ2VOdW1iZXI6IHRoaXMuY3VycmVudFBhZ2UsCiAgICAgICAgUGFnZVNpemU6IHRoaXMuY3VycmVudHBlclBhZ2UsCiAgICAgICAgVG90YWxSb3dzOiB0aGlzLnRvdGFsUm93cwogICAgICB9OwogICAgfSwKICAgIHBhcmFtc2FwaSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAuLi50aGlzLnBhcmFtcywKICAgICAgICAuLi50aGlzLnBhZ2luYXRlCiAgICAgIH07CiAgICB9LAogICAgY29sdW1uU29ydGVkKCkgewogICAgICByZXR1cm4gdGhpcy5jb2x1bW5zLmZpbmQoYyA9PiBjLmxhYmVsID09IHRoaXMuc29ydEJ5KSB8fCAiIjsKICAgIH0sCiAgICBjaGVja2VkcygpIHsKICAgICAgcmV0dXJuIHRoaXMuaXRlbXNMaXN0LmZpbHRlcihmID0+IGYuY2hlY2tlZCk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgY3VycmVudFBhZ2UocGFnZSkgewogICAgICBpZiAodGhpcy5yb3V0ZSAhPT0gIiIgJiYgcGFnZSA+IDApIHRoaXMuZ2V0RnJvbUFwaSgpOwogICAgfSwKICAgIGN1cnJlbnRwZXJQYWdlKHBlcnBhZ2UpIHsKICAgICAgaWYgKHRoaXMucm91dGUgIT09ICIiICYmIHBlcnBhZ2UgPiAwKSB0aGlzLmdldEZyb21BcGkoKTsKICAgIH0sCiAgICBhcGlyZXNwb25zZSgpIHsKICAgICAgaWYgKHRoaXMuY29sdW1ucy5sZW5ndGggPT0gMCkgdGhpcy5jb2x1bW5zID0gdGhpcy5nZXRDb2x1bW5zQXJyYXkodGhpcy5pdGVtc0xpc3QpOwogICAgICAvLyBUT0RPOiBkYXIgbyBmb2NvIG5vIHByaW1laXJvIHJlZ2lzdHJvIGRhIHRhYmVsYSBwYXJhIHBvZGVyIG5hdmVnYXIgY29tIG8gdGVjbGFkbyAuLi4KICAgICAgLy8gdGhpcy4kcmVmc1sidGFibGVTZWFyY2giXS5mb2N1cygpCiAgICB9LAoKICAgIHJ1bigpIHsKICAgICAgaWYgKHRoaXMucnVuID4gMCkgdGhpcy5nZXRGcm9tQXBpKCk7CiAgICB9LAogICAgcGVyUGFnZSgpIHsKICAgICAgdGhpcy5wYWdlID0gMTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldEZyb21BcGkoKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdnZXRGcm9tQXBpJykKCiAgICAgIHRoaXMubG9hZCA9IHRydWU7CiAgICAgIGF3YWl0IEFwaVNlcnZpY2UuZ2V0KHRoaXMucm91dGUsIHsKICAgICAgICBwYXJhbXM6IHRoaXMucGFyYW1zYXBpCiAgICAgIH0pLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgLy8gc2UgdmVtIGRhIEFQSSByZW1vdmUgbyBjb250cm9sZSBkZSBwYWdpbmHDp8OjbyAuLi4KICAgICAgICB0aGlzLmxvYWQgPSBmYWxzZTsKICAgICAgICB0aGlzLmFwaXJlc3BvbnNlID0gZGF0YS5kYXRhOwogICAgICAgIC8vIGNvbnNvbGUubG9nKCdUYWJsZUVkaXRBcGkuYXBpcmVzcG9uc2U6JywgdGhpcy5hcGlyZXNwb25zZSkKCiAgICAgICAgdGhpcy4kZW1pdCgiZXZ0LWRvbmUiLCB0aGlzLmFwaXJlc3BvbnNlKTsKICAgICAgfSk7CiAgICB9LAogICAgc2VhcmNoY2xpY2soKSB7CiAgICAgIGNvbnNvbGUubG9nKCJUYWJsZUVkaXRBcGkuc2VhcmNoY2xpY2s6IiwgdGhpcy5pbnB1dFBlc3F1aXNhKTsKICAgIH0sCiAgICBnZXRDb2x1bW5zQXJyYXkoYXJyKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdnZXRDb2x1bW5zQXJyYXk6JywgYXJyLmxlbmd0aCkKICAgICAgbGV0IGNvbHVtbnMgPSBbXTsKICAgICAgaWYgKGFyci5sZW5ndGggPiAwKSB7CiAgICAgICAgY29sdW1ucyA9IE9iamVjdC5rZXlzKGFyclswXSkubWFwKGsgPT4gewogICAgICAgICAgbGV0IGNvbCA9IHRoaXMuZmllbGRzLmZpbmQoZiA9PiBmLmtleSA9PSBrKTsKICAgICAgICAgIGlmIChjb2wpIHsKICAgICAgICAgICAgY29sLnZpc2libGUgPSBjb2wudmlzaWJsZSB8fCBmYWxzZTsKICAgICAgICAgICAgY29sLnNvcnRhYmxlID0gY29sLnNvcnRhYmxlIHx8IGZhbHNlOwogICAgICAgICAgICBjb2wubGFiZWwgPSBjb2wubGFiZWwgfHwgazsKICAgICAgICAgIH0gZWxzZSBjb2wgPSB7CiAgICAgICAgICAgIGtleTogaywKICAgICAgICAgICAgbGFiZWw6IGssCiAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgICAgICB2aXNpYmxlOiAhdGhpcy5maWVsZHMubGVuZ3RoID4gMAogICAgICAgICAgfTsKICAgICAgICAgIHJldHVybiBjb2w7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29sdW1ucyA9IHRoaXMuZmllbGRzOwogICAgICB9CiAgICAgIGlmIChjb2x1bW5zLmxlbmd0aCA+IDApIGlmICghY29sdW1ucy5maW5kKGYgPT4gZi5rZXkgPT0gImFjdGlvbnMiKSkgaWYgKHRoaXMuYnV0dG9ucy5sZW5ndGggPiAwKSBjb2x1bW5zLnB1c2goewogICAgICAgIGtleTogImFjdGlvbnMiLAogICAgICAgIGxhYmVsOiAiQcOnw7VlcyIsCiAgICAgICAgc29ydGFibGU6IGZhbHNlLAogICAgICAgIHZpc2libGU6IHRydWUKICAgICAgfSk7CiAgICAgIHJldHVybiBjb2x1bW5zOwogICAgfSwKICAgIHN1bWZpZWxkKGZsZCkgewogICAgICBpZiAodGhpcy5zb21hLmZpbmQoZiA9PiBmLmtleS50b1VwcGVyQ2FzZSgpID09IGZsZC50b1VwcGVyQ2FzZSgpKSkgewogICAgICAgIHJldHVybiB0aGlzLml0ZW1zTGlzdC5yZWR1Y2UoKGEsIGIpID0+IGEgKyBwYXJzZUZsb2F0KGJbZmxkXSksIDApIHx8ICIiOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQogICAgfSwKICAgIHNldFZpc2liaWxpdHlDb2x1bW4oY29sKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdzZXRWaXNpYmlsaXR5Q29sdW1uOicsIGNvbCkKICAgICAgLy8gY29uc29sZS5sb2coJ3NldFZpc2liaWxpdHlDb2x1bW4udmlzaWJsZTonLCBjb2wudmlzaWJsZSkKICAgICAgLy9jb2wudmlzaWJsZSA9ICFjb2wudmlzaWJsZSB8fCBmYWxzZQogICAgICB0aGlzLmNvbHVtbnMuZmluZChjID0+IGMua2V5ID09IGNvbC5rZXkpLnZpc2libGUgPSAhY29sLnZpc2libGUgfHwgZmFsc2U7CiAgICB9LAogICAgaXNCdXR0b24obmFtZSkgewogICAgICByZXR1cm4gdGhpcy5idXR0b25zLmluY2x1ZGVzKG5hbWUpIHx8IGZhbHNlOwogICAgfSwKICAgIHByaW50SXQobykgewogICAgICBjb25zb2xlLmxvZygicHJpbnRJdDoiLCBvKTsKICAgIH0sCiAgICBkb01hcmNhcigpIHsKICAgICAgbGV0IGkgPSB0aGlzLmNvbHVtbnMuZmluZEluZGV4KGkgPT4gaS5rZXkgPT0gImNoZWNrIik7CiAgICAgIGlmIChpID4gLTEpIHRoaXMuY29sdW1ucy5zcGxpY2UoaSwgMSk7ZWxzZSB0aGlzLmNvbHVtbnMucHVzaCh7CiAgICAgICAga2V5OiAiY2hlY2siLAogICAgICAgIGxhYmVsOiAiTWFyY2FyIiwKICAgICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgICAgdmlzaWJsZTogdHJ1ZQogICAgICB9KTsKICAgICAgY29uc29sZS5sb2coImRvTWFyY2FyOiIsIHRoaXMuc2VsZWN0ZWRzLmxlbmd0aCk7CiAgICB9LAogICAgZG9FbnZpYU1hcmNhZG9zKCkgewogICAgICBjb25zb2xlLmxvZygiZG9FbnZpYU1hcmNhZG9zOiIsIHRoaXMuY2hlY2tlZHMpOwogICAgICB0aGlzLiRlbWl0KCJldnQtc2VsZWN0ZWQiLCB0aGlzLmNoZWNrZWRzKTsKICAgIH0sCiAgICByb3dDdXN0b21CdXR0b24oYnV0dG9uLCBkYXRhKSB7CiAgICAgIGJ1dHRvbi5kYXRhID0gZGF0YTsKICAgICAgdGhpcy4kZW1pdCgiZXZ0LXJvd2J1dHRvbiIsIGJ1dHRvbik7CiAgICB9LAogICAgQ3VzdG9tQnV0dG9uQ2xpY2soYnV0dG9uKSB7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkcy5sZW5ndGggPiAwKSB7CiAgICAgICAgYnV0dG9uLmRhdGEgPSB0aGlzLnNlbGVjdGVkczsKICAgICAgfSBlbHNlIHsKICAgICAgICBidXR0b24uZGF0YSA9IHRoaXMuaXRlbXNMaXN0OwogICAgICB9CiAgICAgIHRoaXMuJGVtaXQoImV2dC1oZWFkZXJidXR0b24iLCBidXR0b24pOwogICAgfSwKICAgIG9uQ2hlY2thbGwoKSB7CiAgICAgIHRoaXMuY2hlY2thbGwgPSAhdGhpcy5jaGVja2FsbDsKICAgICAgY29uc29sZS5sb2coIm9uQ2hlY2thbGwiLCB0aGlzLmNoZWNrYWxsKTsKICAgICAgaWYgKHRoaXMuaXRlbXMubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuaXRlbXMubWFwKGkgPT4gaS5jaGVja2VkID0gdGhpcy5jaGVja2FsbCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5hcGlyZXNwb25zZS5EYXRhLm1hcChpID0+IGkuY2hlY2tlZCA9IHRoaXMuY2hlY2thbGwpOwogICAgICB9CgogICAgICAvLyB0aGlzLml0ZW1zTGlzdC5tYXAoaSA9PiBpLmNoZWNrZWQgPSB0aGlzLmNoZWNrYWxsKQogICAgfSwKCiAgICByb3dDaGVja2VkKGl0ZW0sIHR5cGUpIHsKICAgICAgaWYgKCFpdGVtIHx8IHR5cGUgIT09ICJyb3ciKSByZXR1cm4gIiI7CiAgICAgIGlmIChpdGVtLmNoZWNrZWQpIHJldHVybiAidGFibGUtaW5mbyI7CiAgICB9LAogICAgTmV3KCkgewogICAgICAvLyBjb25zb2xlLmxvZygnRWRpdG91IG5vIGl0ZW06JywgZXZ0Lml0ZW0udmFsdWUsIGV2dCkKICAgICAgdGhpcy4kZW1pdCgiZXZ0LW5ldyIpOwogICAgfSwKICAgIHJvd3NTZWxlY3QoZXZ0KSB7CiAgICAgIC8qDQogICAgICAgICAgICBpZiAoKCF0aGlzLnNlbGVjdGVkcy5maW5kKGYgPT4gZiA9PSBldnQpKSAmJiAoZXZ0LmNoZWNrZWQpKQ0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRzLnB1c2goZXZ0KQ0KICAgICAgICAgICAgICBpZiAoKHRoaXMuc2VsZWN0ZWRzLmZpbmQoZiA9PiBmID09IGV2dCkpICYmICghZXZ0LmNoZWNrZWQpKQ0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRzLnNwbGljZSh0aGlzLnNlbGVjdGVkcy5maW5kSW5kZXgoZiA9PiBmID09IGV2dCksIDEpDQogICAgICAgICAgICAqLwoKICAgICAgZXZ0LmNoZWNrZWQgPSAhZXZ0LmNoZWNrZWQ7CiAgICAgIHRoaXMuJGVtaXQoImV2dC1jaGVja2VkIiwgdGhpcy5zZWxlY3RlZHMpOwogICAgfSwKICAgIHJvd1NlbGVjdChldnQpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ1NlbGVjaW9ub3UgbyBpdGVtOicsIGV2dCkKICAgICAgdGhpcy4kZW1pdCgiZXZ0LXNlbGVjdCIsIGV2dCk7CiAgICB9LAogICAgcm93RWRpdChldnQpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ0VkaXRvdSBubyBpdGVtOicsIGV2dC5pdGVtLnZhbHVlLCBldnQpCiAgICAgIHRoaXMuJGVtaXQoImV2dC1lZGl0IiwgZXZ0KTsKICAgIH0sCiAgICByb3dEZWxldGUoZXZ0KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdFeGNsdWl1IG5vIGl0ZW06JywgZXZ0Lml0ZW0udmFsdWUsIGV2dCkKICAgICAgdGhpcy4kZW1pdCgiZXZ0LWRlbGV0ZSIsIGV2dCk7CiAgICB9LAogICAgcm93SW5zZXJ0KGV2dCkgewogICAgICAvLyBjb25zb2xlLmxvZygnaW5zZXJpdSBvIGl0ZW06JywgZXZ0Lml0ZW0udmFsdWUsIGV2dCkKICAgICAgdGhpcy4kZW1pdCgiZXZ0LWluc2VydCIsIGV2dCk7CiAgICB9LAogICAgcm93UnVuKGV2dCkgewogICAgICAvLyBjb25zb2xlLmxvZygnaW5zZXJpdSBvIGl0ZW06JywgZXZ0Lml0ZW0udmFsdWUsIGV2dCkKICAgICAgdGhpcy4kZW1pdCgiZXZ0LXJ1biIsIGV2dCk7CiAgICB9LAogICAgcm93SW5mb3JtKGV2dCkgewogICAgICAvLyBjb25zb2xlLmxvZygnRXhjbHVpdSBubyBpdGVtOicsIGV2dC5pdGVtLnZhbHVlLCBldnQpCiAgICAgIHRoaXMuJGVtaXQoImV2dC1pbmZvcm0iLCBldnQpOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoSA;AACA;EACAA;EAEAC;IACAC;MACAC;MACAC;QACA;MACA;IACA;IACAC;MACAF;MACAC;QACA;MACA;IACA;IACAE;MACAH;MACAC;QACA;MACA;IACA;IACAG;MACAJ;MACAC;QACA;MACA;IACA;IACAI;MACAL;MACAC;QACA;MACA;IACA;IACAK;MACAN;MACAC;QACA;MACA;IACA;IACAM;MACAP;MACAC;QACA;MACA;IACA;IACAO;MACAR;MACAC;QACA;MACA;IACA;IAAA;IACAQ;MACAT;MACAC;QACA;MACA;IACA;IACAS;MACAV;MACAC;QACA;MACA;IACA;IACAU;MACAX;MACAC;QACA;MACA;IACA;IACAW;MACAZ;MACAC;QACA;MACA;IACA;IACAY;MACAb;MACAC;QACA;MACA;IACA;IACAa;MACAd;MACAC;QACA;MACA;IACA;IACAc;MACAf;MACAC;QACA;MACA;IACA;EACA;EAEAe;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QAAAC;QAAAC;UAAAC;UAAAC;QAAA;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACA;;IAEA;MACA;IACA;MACA;IACA;EACA;EAEAC;IACAC;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA,iCACA,iEACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;QACA,sDACA,qCACA,oCACA;MACA;QACA;MACA;IACA;IAEAC;MACA;MACA;IACA;IAEAC;MACA;QACAC;QACAjB;QACAkB;MACA;IACA;IAEAC;MACA;QAAA;QAAA;MAAA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;IACA;EACA;EAEAC;IACAlB;MACA;IACA;IAEAC;MACA;IACA;IAEAT;MACA,8BACA;MACA;MACA;IACA;;IAEAR;MACA;IACA;IAEAJ;MACA;IACA;EACA;EAEAuC;IACA;MACA;;MAEA;MACA;QAAArC;MAAA,QACAG;QACA;QACA;QACA;QACA;;QAEA;MACA,EACA;IACA;IAEAmC;MACAC;IACA;IAEAC;MACA;MACA;MACA;QACA/B;UACA;UACA;YACAgC;YACAA;YACAA;UACA,OACAA;YACAC;YACAC;YACAC;YACAC;UACA;UAEA;QACA;MACA;QACApC;MACA;MAEA,wBACA,4CACA,6BACAA;QACAiC;QACAC;QACAC;QACAC;MACA;MAEA;IACA;IAEAC;MACA;QACA;MACA;QACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MACA,mDACA;IACA;IAEAC;MACA;IACA;IAEAC;MACAV;IACA;IAEAW;MACA;MACA,2CAEA;QACAR;QACAC;QACAC;QACAC;MACA;MACAN;IACA;IAEAY;MACAZ;MACA;IACA;IAEAa;MACAC;MAEA;IACA;IAEAC;MACA;QACAD;MACA;QACAA;MACA;MAEA;IACA;IAEAE;MACA;MACAhB;MAEA;QACA;MACA;QACA;MACA;;MAEA;IACA;;IAEAiB;MACA;MACA;IACA;IAEAC;MACA;MACA;IACA;IACAC;MACA;AACA;AACA;;AAEA;AACA;;MAGAC;MAEA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;EACA;AACA","names":["name","props","tableId","type","default","header","fields","soma","mask","items","getter","buttons","page","pages","perPage","route","params","busy","run","data","inputPesquisa","check","checkall","selecteds","load","columns","apiresponse","Data","Paginas","PageCount","PageSize","selected","sortBy","sortDesc","currentPage","currentperPage","created","computed","custombuttons","custombuttonsheader","activepage","showcolumns","sumcolumns","columnspan","totalRows","itemsList","paginate","PageNumber","TotalRows","paramsapi","columnSorted","checkeds","watch","methods","searchclick","console","getColumnsArray","col","key","label","sortable","visible","sumfield","setVisibilityColumn","isButton","printIt","doMarcar","doEnviaMarcados","rowCustomButton","button","CustomButtonClick","onCheckall","rowChecked","New","rowsSelect","evt","rowSelect","rowEdit","rowDelete","rowInsert","rowRun","rowInform"],"sourceRoot":"src/components","sources":["TableEditApi.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <b-overlay :show=\"load\" rounded=\"sm\">\r\n      <div class=\"d-flex float-right mb-2\">\r\n        <b-pagination\r\n          v-if=\"totalRows > perPage\"\r\n          v-model=\"currentPage\"\r\n          :total-rows=\"totalRows\"\r\n          :per-page=\"currentperPage\"\r\n          aria-controls=\"tableSearch\"\r\n          size=\"sm\"\r\n        >\r\n        </b-pagination>\r\n        <b-form-select\r\n          v-model=\"currentperPage\"\r\n          :options=\"pages\"\r\n          size=\"sm\"\r\n          width=\"10px\"\r\n          class=\"ml-2\"\r\n        >\r\n        </b-form-select>\r\n      </div>\r\n\r\n      <b-table\r\n        v-if=\"showcolumns\"\r\n        id=\"tableSearch\"\r\n        ref=\"tableSearch\"\r\n        striped\r\n        hover\r\n        small\r\n        bordered\r\n        responsive=\"sm\"\r\n        head-variant=\"light\"\r\n        selectable\r\n        select-mode=\"single\"\r\n        selected-variant=\"success\"\r\n        :items=\"itemsList\"\r\n        :fields=\"showcolumns\"\r\n        :current-page=\"activepage\"\r\n        :total-rows=\"totalRows\"\r\n        :perPage=\"currentperPage\"\r\n        :tbody-tr-class=\"rowChecked\"\r\n        sort-icon-left\r\n        :sort-by.sync=\"sortBy\"\r\n        :sort-desc.sync=\"sortDesc\"\r\n        @row-selected=\"rowSelect\"\r\n      >\r\n        <template #thead-top>\r\n          <b-tr v-if=\"header.length > 0\">\r\n            <b-th :colspan=\"columnspan\" variant=\"secondary\">\r\n              <div class=\"d-flex justify-content-between align-items-center\">\r\n                <div class=\"ml-2\">\r\n                  {{ header }}\r\n                </div>\r\n                <div>\r\n                  <b-button\r\n                    v-for=\"(b, i) of custombuttonsheader\"\r\n                    :key=\"i\"\r\n                    :size=\"b.size\"\r\n                    :variant=\"b.variant\"\r\n                    v-b-tooltip\r\n                    :title=\"b.tooltip\"\r\n                    class=\"ml-1\"\r\n                    @click=\"CustomButtonClick(b)\"\r\n                  >\r\n                    <b-icon v-if=\"b.icon\" :icon=\"b.icon\" />\r\n                    <span v-if=\"b.label\">{{ b.label }}</span>\r\n                  </b-button>\r\n                  <b-button\r\n                    v-if=\"isButton('new')\"\r\n                    variant=\"outline-primary\"\r\n                    size=\"sm\"\r\n                    v-b-tooltip.hover.topleft=\"'Novo registro'\"\r\n                    @click=\"New\"\r\n                  >\r\n                    <b-icon-plus-circle class=\"mr-2\" />\r\n                    Incluir\r\n                  </b-button>\r\n\r\n                  <b-dropdown\r\n                    right\r\n                    variant=\"outline-primary\"\r\n                    size=\"sm\"\r\n                    class=\"ml-1\"\r\n                  >\r\n                    <template #button-content>\r\n                      <b-icon-gear-fill />\r\n                    </template>\r\n                    <b-dropdown-item\r\n                      @click=\"doMarcar\"\r\n                      v-if=\"checkeds.length == 0\"\r\n                    >\r\n                      <b-icon-check-square />\r\n                      Marcar</b-dropdown-item\r\n                    >\r\n                    <b-dropdown-item @click=\"doEnviaMarcados\" v-else\r\n                      >Enviar Marcados</b-dropdown-item\r\n                    >\r\n                    <b-dropdown-divider></b-dropdown-divider>\r\n                    <b-dropdown-form style=\"width: 200px;\">\r\n                      <b-input-group block>\r\n                        <b-form-input\r\n                          size=\"sm\"\r\n                          placeholder=\"Pesquisar\"\r\n                          v-model=\"inputPesquisa\"\r\n                        ></b-form-input>\r\n                        <b-input-group-append>\r\n                          <b-button\r\n                            size=\"sm\"\r\n                            variant=\"outline-success\"\r\n                            type=\"button\"\r\n                            :disabled=\"inputPesquisa.length == 0\"\r\n                            @click=\"searchclick\"\r\n                            ><b-icon-search\r\n                          /></b-button>\r\n                        </b-input-group-append>\r\n                      </b-input-group>\r\n                    </b-dropdown-form>\r\n                    <b-dropdown-divider></b-dropdown-divider>\r\n                    <b-dropdown-item\r\n                      v-for=\"(col, i) of columns\"\r\n                      :key=\"i\"\r\n                      @click=\"setVisibilityColumn(col)\"\r\n                    >\r\n                      <b-icon-eye class=\"mr-2\" v-if=\"col.visible\" />\r\n                      <b-icon-eye-slash class=\"mr-2\" v-else />\r\n                      {{ col.label }}\r\n                    </b-dropdown-item>\r\n                  </b-dropdown>\r\n                </div>\r\n              </div>\r\n            </b-th>\r\n          </b-tr>\r\n        </template>\r\n\r\n        <!-- header da coluna actions -->\r\n        <template #head(actions)=\"data\">\r\n          <div class=\"text-center\">\r\n            {{ data.label }}\r\n          </div>\r\n        </template>\r\n\r\n        <!-- detalhe da coluna actions -->\r\n        <template #cell(actions)=\"data\">\r\n          <div class=\"text-center\">\r\n            <!-- Botões fixos para edição -->\r\n            <b-button-group>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('insert')\"\r\n                variant=\"outline-primary\"\r\n                v-b-tooltip.hover.topleft=\"'Incluir'\"\r\n                @click=\"rowInsert(data)\"\r\n                ><b-icon-plus\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('edit')\"\r\n                variant=\"outline-success\"\r\n                v-b-tooltip.hover.topleft=\"'Editar'\"\r\n                @click=\"rowEdit(data)\"\r\n                ><b-icon-pencil\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('delete')\"\r\n                variant=\"outline-danger\"\r\n                v-b-tooltip.hover.topleft=\"'Deletar'\"\r\n                @click=\"rowDelete(data)\"\r\n                ><b-icon-trash\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('run')\"\r\n                variant=\"outline-warning\"\r\n                v-b-tooltip.hover.topleft=\"'Executar'\"\r\n                @click=\"rowRun(data)\"\r\n                ><b-icon-lightning\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('info')\"\r\n                variant=\"outline-info\"\r\n                v-b-tooltip.hover.topleft=\"'Informações'\"\r\n                @click=\"rowInform(data)\"\r\n                ><b-icon-info-circle\r\n              /></b-button>\r\n            </b-button-group>\r\n            <!-- Botões dinamicos criados pelo usuário -->\r\n            <b-button\r\n              v-for=\"(b, i) of custombuttons\"\r\n              :key=\"i\"\r\n              :size=\"b.size\"\r\n              :variant=\"b.variant\"\r\n              v-b-tooltip\r\n              :title=\"b.tooltip\"\r\n              class=\"ml-1\"\r\n              @click=\"rowCustomButton(b, data.item)\"\r\n            >\r\n              <b-icon v-if=\"b.icon\" :icon=\"b.icon\" />\r\n              <span v-if=\"b.label\">{{ b.label }}</span>\r\n            </b-button>\r\n          </div>\r\n        </template>\r\n\r\n        <!-- header da coluna check -->\r\n        <template #head(check)>\r\n          <div class=\"text-center\">\r\n            <b-form-checkbox @change=\"onCheckall\"></b-form-checkbox>\r\n          </div>\r\n        </template>\r\n        <!-- detalhe da coluna check -->\r\n        <template #cell(check)=\"data\">\r\n          <div class=\"text-center\">\r\n            <b-form-checkbox v-model=\"data.item.checked\"></b-form-checkbox>\r\n          </div>\r\n        </template>\r\n\r\n        <!-- Default fall-back custom formatted footer cell\r\n            <template #foot()=\"data\">\r\n                <i>{{ data.item }}</i>\r\n                pq não aparece isso ?\r\n            </template> \r\n            -->\r\n        <template #head(custombuttons)=\"data\">\r\n          <div class=\"text-center\">\r\n            {{ data.label }}\r\n          </div>\r\n        </template>\r\n        <template v-slot:cell(custombuttons)>\r\n          <slot class=\"text-center\"></slot>\r\n        </template>\r\n\r\n        <template slot=\"bottom-row\" v-if=\"soma.lenght > 0\">\r\n          <td v-for=\"(c, i) of sumcolumns\" :key=\"i\">\r\n            <span class=\"font-weight-bolder\">{{ c }}</span>\r\n          </td>\r\n        </template>\r\n      </b-table>\r\n\r\n      <div class=\"d-flex float-left font-weight-bold ml-3\">\r\n        <span v-if=\"totalRows == 1\"> {{ totalRows }} registro </span>\r\n        <span v-else> {{ totalRows }} registros </span>\r\n      </div>\r\n\r\n      <div class=\"d-flex float-right\">\r\n        <b-pagination\r\n          v-if=\"totalRows > perPage\"\r\n          v-model=\"currentPage\"\r\n          :total-rows=\"totalRows\"\r\n          :per-page=\"currentperPage\"\r\n          aria-controls=\"tableSearch\"\r\n          size=\"sm\"\r\n        >\r\n        </b-pagination>\r\n        <b-form-select\r\n          v-model=\"currentperPage\"\r\n          :options=\"pages\"\r\n          size=\"sm\"\r\n          class=\"ml-2\"\r\n        ></b-form-select>\r\n      </div>\r\n    </b-overlay>\r\n\r\n    <!--\r\n        checkeds:\r\n        <pre>\r\n            {{ checkeds }}\r\n        </pre>\r\n        paginate: {{paginate}}<br/>\r\n        showcolumns: {{showcolumns}}<br/>\r\n        itemsList: {{itemsList}}<br/>\r\n\r\n\r\n        soma: {{soma}}<br/>\r\n        sumcolumns: {{sumcolumns}}<br/>\r\n\r\n\r\n        <b-table striped hover :fields=\"fields\" :items=\"items\">\r\n            <template #cell(actions)=\"data\">\r\n                {{ data.index + 1 }}\r\n            </template>\r\n        </b-table>\r\n-->\r\n\r\n    <!--         buttons: {{buttons.length}}<br/>\r\n        columns: {{columns}}<br/>\r\n        selecteds: {{selecteds}} -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ApiService from \"../services/api.service\";\r\nexport default {\r\n  name: \"TableEditApi\",\r\n\r\n  props: {\r\n    tableId: {\r\n      type: String,\r\n      default() {\r\n        return \"table-api\";\r\n      },\r\n    },\r\n    header: {\r\n      type: String,\r\n      default() {\r\n        return \"\";\r\n      },\r\n    },\r\n    fields: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    soma: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    mask: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    items: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    getter: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    buttons: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    }, // informar 'edit','delete','info','insert','run','new'\r\n    page: {\r\n      type: Number,\r\n      default() {\r\n        return 1;\r\n      },\r\n    },\r\n    pages: {\r\n      type: Array,\r\n      default() {\r\n        return [10, 30, 50, 100, 500, 1000, 9999999];\r\n      },\r\n    },\r\n    perPage: {\r\n      type: Number,\r\n      default() {\r\n        return 10;\r\n      },\r\n    },\r\n    route: {\r\n      type: String,\r\n      default() {\r\n        return \"\";\r\n      },\r\n    },\r\n    params: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n    busy: {\r\n      type: Boolean,\r\n      default() {\r\n        return false;\r\n      },\r\n    },\r\n    run: {\r\n      type: Number,\r\n      default() {\r\n        return 1;\r\n      },\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      inputPesquisa: \"\",\r\n      check: false,\r\n      checkall: false,\r\n      selecteds: [],\r\n      load: this.busy || false,\r\n      columns: [],\r\n      apiresponse: { Data: [], Paginas: { PageCount: 1, PageSize: 10 } },\r\n      selected: null,\r\n      sortBy: \"\",\r\n      sortDesc: false,\r\n      currentPage: this.page,\r\n      currentperPage: this.perPage,\r\n    };\r\n  },\r\n\r\n  created() {\r\n    // console.log('TableEditApi.')\r\n\r\n    if (this.route !== \"\" && this.run > 0) {\r\n      this.getFromApi();\r\n    } else {\r\n      this.columns = this.getColumnsArray(this.items);\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    custombuttons() {\r\n      return this.buttons.filter((b) => typeof b == \"object\" && !b.header);\r\n    },\r\n\r\n    custombuttonsheader() {\r\n      return this.buttons.filter((b) => typeof b == \"object\" && b.header);\r\n    },\r\n\r\n    activepage() {\r\n      return this.route !== \"\" ? 1 : this.currentPage;\r\n    },\r\n\r\n    showcolumns() {\r\n      return this.columns.length > 0\r\n        ? this.columns.filter((f) => f.visible) || Object.keys(this.items)\r\n        : [];\r\n    },\r\n\r\n    sumcolumns() {\r\n      return this.showcolumns.map((c) => this.sumfield(c.key));\r\n    },\r\n\r\n    columnspan() {\r\n      return this.showcolumns.length || 1;\r\n    },\r\n\r\n    totalRows() {\r\n      if (this.route !== \"\") {\r\n        return this.apiresponse && this.apiresponse.Paginas\r\n          ? this.apiresponse.Paginas.PageCount *\r\n              this.apiresponse.Paginas.PageSize\r\n          : 0;\r\n      } else {\r\n        return this.items.length;\r\n      }\r\n    },\r\n\r\n    itemsList() {\r\n      let ret = this.items.length > 0 ? this.items : this.apiresponse.Data;\r\n      return ret || [];\r\n    },\r\n\r\n    paginate() {\r\n      return {\r\n        PageNumber: this.currentPage,\r\n        PageSize: this.currentperPage,\r\n        TotalRows: this.totalRows,\r\n      };\r\n    },\r\n\r\n    paramsapi() {\r\n      return { ...this.params, ...this.paginate };\r\n    },\r\n\r\n    columnSorted() {\r\n      return this.columns.find((c) => c.label == this.sortBy) || \"\";\r\n    },\r\n\r\n    checkeds() {\r\n      return this.itemsList.filter((f) => f.checked);\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    currentPage(page) {\r\n      if (this.route !== \"\" && page > 0) this.getFromApi();\r\n    },\r\n\r\n    currentperPage(perpage) {\r\n      if (this.route !== \"\" && perpage > 0) this.getFromApi();\r\n    },\r\n\r\n    apiresponse() {\r\n      if (this.columns.length == 0)\r\n        this.columns = this.getColumnsArray(this.itemsList);\r\n      // TODO: dar o foco no primeiro registro da tabela para poder navegar com o teclado ...\r\n      // this.$refs[\"tableSearch\"].focus()\r\n    },\r\n\r\n    run() {\r\n      if (this.run > 0) this.getFromApi();\r\n    },\r\n\r\n    perPage() {\r\n      this.page = 1;\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    async getFromApi() {\r\n      // console.log('getFromApi')\r\n\r\n      this.load = true;\r\n      await ApiService.get(this.route, { params: this.paramsapi }).then(\r\n        (data) => {\r\n          // se vem da API remove o controle de paginação ...\r\n          this.load = false;\r\n          this.apiresponse = data.data;\r\n          // console.log('TableEditApi.apiresponse:', this.apiresponse)\r\n\r\n          this.$emit(\"evt-done\", this.apiresponse);\r\n        }\r\n      );\r\n    },\r\n\r\n    searchclick() {\r\n      console.log(\"TableEditApi.searchclick:\", this.inputPesquisa);\r\n    },\r\n\r\n    getColumnsArray(arr) {\r\n      // console.log('getColumnsArray:', arr.length)\r\n      let columns = [];\r\n      if (arr.length > 0) {\r\n        columns = Object.keys(arr[0]).map((k) => {\r\n          let col = this.fields.find((f) => f.key == k);\r\n          if (col) {\r\n            col.visible = col.visible || false;\r\n            col.sortable = col.sortable || false;\r\n            col.label = col.label || k;\r\n          } else\r\n            col = {\r\n              key: k,\r\n              label: k,\r\n              sortable: true,\r\n              visible: !this.fields.length > 0,\r\n            };\r\n\r\n          return col;\r\n        });\r\n      } else {\r\n        columns = this.fields;\r\n      }\r\n\r\n      if (columns.length > 0)\r\n        if (!columns.find((f) => f.key == \"actions\"))\r\n          if (this.buttons.length > 0)\r\n            columns.push({\r\n              key: \"actions\",\r\n              label: \"Ações\",\r\n              sortable: false,\r\n              visible: true,\r\n            });\r\n\r\n      return columns;\r\n    },\r\n\r\n    sumfield(fld) {\r\n      if (this.soma.find((f) => f.key.toUpperCase() == fld.toUpperCase())) {\r\n        return this.itemsList.reduce((a, b) => a + parseFloat(b[fld]), 0) || \"\";\r\n      } else {\r\n        return \"\";\r\n      }\r\n    },\r\n\r\n    setVisibilityColumn(col) {\r\n      // console.log('setVisibilityColumn:', col)\r\n      // console.log('setVisibilityColumn.visible:', col.visible)\r\n      //col.visible = !col.visible || false\r\n      this.columns.find((c) => c.key == col.key).visible =\r\n        !col.visible || false;\r\n    },\r\n\r\n    isButton(name) {\r\n      return this.buttons.includes(name) || false;\r\n    },\r\n\r\n    printIt(o) {\r\n      console.log(\"printIt:\", o);\r\n    },\r\n\r\n    doMarcar() {\r\n      let i = this.columns.findIndex((i) => i.key == \"check\");\r\n      if (i > -1) this.columns.splice(i, 1);\r\n      else\r\n        this.columns.push({\r\n          key: \"check\",\r\n          label: \"Marcar\",\r\n          sortable: false,\r\n          visible: true,\r\n        });\r\n      console.log(\"doMarcar:\", this.selecteds.length);\r\n    },\r\n\r\n    doEnviaMarcados() {\r\n      console.log(\"doEnviaMarcados:\", this.checkeds);\r\n      this.$emit(\"evt-selected\", this.checkeds);\r\n    },\r\n\r\n    rowCustomButton(button, data) {\r\n      button.data = data;\r\n\r\n      this.$emit(\"evt-rowbutton\", button);\r\n    },\r\n\r\n    CustomButtonClick(button) {\r\n      if (this.selecteds.length > 0) {\r\n        button.data = this.selecteds;\r\n      } else {\r\n        button.data = this.itemsList;\r\n      }\r\n\r\n      this.$emit(\"evt-headerbutton\", button);\r\n    },\r\n\r\n    onCheckall() {\r\n      this.checkall = !this.checkall;\r\n      console.log(\"onCheckall\", this.checkall);\r\n\r\n      if (this.items.length > 0) {\r\n        this.items.map((i) => (i.checked = this.checkall));\r\n      } else {\r\n        this.apiresponse.Data.map((i) => (i.checked = this.checkall));\r\n      }\r\n\r\n      // this.itemsList.map(i => i.checked = this.checkall)\r\n    },\r\n\r\n    rowChecked(item, type) {\r\n      if (!item || type !== \"row\") return \"\";\r\n      if (item.checked) return \"table-info\";\r\n    },\r\n\r\n    New() {\r\n      // console.log('Editou no item:', evt.item.value, evt)\r\n      this.$emit(\"evt-new\");\r\n    },\r\n    rowsSelect(evt) {\r\n      /*\r\n            if ((!this.selecteds.find(f => f == evt)) && (evt.checked))\r\n                this.selecteds.push(evt)\r\n\r\n            if ((this.selecteds.find(f => f == evt)) && (!evt.checked))\r\n                this.selecteds.splice(this.selecteds.findIndex(f => f == evt), 1)\r\n            */\r\n\r\n      evt.checked = !evt.checked;\r\n\r\n      this.$emit(\"evt-checked\", this.selecteds);\r\n    },\r\n    rowSelect(evt) {\r\n      // console.log('Selecionou o item:', evt)\r\n      this.$emit(\"evt-select\", evt);\r\n    },\r\n    rowEdit(evt) {\r\n      // console.log('Editou no item:', evt.item.value, evt)\r\n      this.$emit(\"evt-edit\", evt);\r\n    },\r\n    rowDelete(evt) {\r\n      // console.log('Excluiu no item:', evt.item.value, evt)\r\n      this.$emit(\"evt-delete\", evt);\r\n    },\r\n    rowInsert(evt) {\r\n      // console.log('inseriu o item:', evt.item.value, evt)\r\n      this.$emit(\"evt-insert\", evt);\r\n    },\r\n    rowRun(evt) {\r\n      // console.log('inseriu o item:', evt.item.value, evt)\r\n      this.$emit(\"evt-run\", evt);\r\n    },\r\n    rowInform(evt) {\r\n      // console.log('Excluiu no item:', evt.item.value, evt)\r\n      this.$emit(\"evt-inform\", evt);\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}