{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\src\\services\\api.service.js","dependencies":[{"path":"C:\\k1-services\\src\\services\\api.service.js","mtime":1701905648763},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgVnVlQXhpb3MgZnJvbSAidnVlLWF4aW9zIjsKaW1wb3J0IEp3dFNlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9qd3Quc2VydmljZSI7CmltcG9ydCBzdG9yZSBmcm9tICIuLi9zdG9yZSI7Ci8vaW1wb3J0IHsgQVBJX01PREVMLCBBUElfVVJMLCBBUElfQVVUSE9SLCBDT09LSUVfVElNRU9VVCwgQ09PS0lFX0FOT05JTU9VU1RPS0VOIH0gZnJvbSAiQC9zZXJ2aWNlcy9jb25maWciOwppbXBvcnQgeyBBUElfTU9ERUwsIEFQSV9VUkwsIEFQSV9VUkxERVYsIEFQSV9BVVRIT1IsIENPT0tJRV9USU1FT1VULCBDT09LSUVfQU5PTklNT1VTVE9LRU4gfSBmcm9tICJAL2Fzc2V0cy9jb25maWciOwppbXBvcnQgbG9jYWxzdG9yZSBmcm9tICJAL3NlcnZpY2VzL2xvY2Fsc3RvcmUiOwovLyBpbXBvcnQgVnVlQ29va2llcyBmcm9tICJ2dWUtY29va2llcyI7Ci8vIGltcG9ydCBhdXRoIGZyb20gIkAvc3RvcmUvYXV0aCI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vcm91dGVyIjsKaW1wb3J0IE9ic2VydmFibGUgZnJvbSAiLi9vYnNlcnZhYmxlIjsKCi8vIG7Do28gcHVkZSB1c2FyIG8gVnVlQ29va2llcyBwb2lzIGVsZSBuw6NvIGVzdMOhIGNhcnJlZ2FkbyBuZXNzYSBldGFwYSBkbyBzaXN0ZW1hIC4uLgppbXBvcnQgY29va2llcyBmcm9tICIuL2Nvb2tpZSI7CmltcG9ydCBtaW1lcyBmcm9tICIuLi9hc3NldHMvanNvbi9taW1ldHlwZXMuanNvbiI7CmltcG9ydCBMb2NhbGJhc2UgZnJvbSAibG9jYWxiYXNlIjsKY29uc3QgQXBpU2VydmljZSA9IHsKICAvL2NvbnN0cnVjdG9yKCkgewogIC8vICB0aGlzLmFwaW1vZGVsID0gQVBJX01PREVMOwogIC8vfSwKICAvLyBhcGltb2RlbCA9IEFQSV9NT0RFTCwKICBhcGltb2RlbDogewogICAgZ2V0KCkgewogICAgICByZXR1cm4gQVBJX01PREVMOwogICAgfQogIH0sCiAgbG9jYWxzdG9yZWRhdGE6IGxvY2Fsc3RvcmUuZ2V0U3RvcmVEYXRhKCksCiAgZXJyb3I6IFtdLAogIC8vIElOSUNJTyAtIG9ic2VydmFibGVzIC4uLgoKICBsb2FkT2JzZXJ2ZXI6IG5ldyBPYnNlcnZhYmxlKCksCiAgbG9naW5PYnNlcnZlcjogbmV3IE9ic2VydmFibGUoKSwKICBlcnJvck9ic2VydmVyOiBuZXcgT2JzZXJ2YWJsZSgpLAogIG5vdGlmeU9ic2VydmVyOiBuZXcgT2JzZXJ2YWJsZSgpLAogIGNoYXRPYnNlcnZlcjogbmV3IE9ic2VydmFibGUoKSwKICBhcGlSZXFPYnNlcnZlcjogbmV3IE9ic2VydmFibGUoKSwKICBhcGlSZW5ld1Rva2VuOiBuZXcgT2JzZXJ2YWJsZSgpLAogIC8vIEZJTSAtIG9ic2VydmFibGVzIC4uLgoKICAvLyBsb2NhbGJhc2UgLSBJTklDSU8gICAgCiAgbG9jYWxEQjogbmV3IExvY2FsYmFzZSgiZGJJbnRyYW5ldCIpLAogIGluaXQoKSB7CiAgICBWdWUudXNlKFZ1ZUF4aW9zLCBheGlvcyk7CiAgICBheGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBBUElfVVJMREVWIDogQVBJX1VSTCB8fCAiIjsKCiAgICAvLyBWdWUuYXhpb3MuZGVmYXVsdHMud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTsgLy8gcGFyYSBhdXRvcml6YXIgZG93bmxvYWRzIHZpYSBheGlvcyBlcnJvOiBvYnJpZ291IGEgdGVyIGF1dGVudGljYcOnw6NvIGUgbsOjbyBjYXJyZWdhIG1haXMgYSBww6FnaW5hIC4uLgogICAgdGhpcy5zZXRCYXNpY0hlYWRlcigpOwogICAgdGhpcy5sb2NhbERCLmNvbmZpZy5kZWJ1ZyA9IGZhbHNlOwogICAgLy8gY29uc29sZS5sb2coJ2FwaS5zZXJ2aWNlLmluaXQ6aGl0JykKCiAgICAvLyBjb25zb2xlLmxvZygnQVBJU2VydmljZTppbml0LmxvY2Fsc3RvcmVkYXRhOiAnLCB0aGlzLmxvY2Fsc3RvcmVkYXRhKQogICAgLy8gY29uc29sZS5sb2coJ0FQSVNlcnZpY2U6aW5pdC51c2VybmFtZTogJywgSnd0U2VydmljZS5nZXRVc2VyTmFtZSgpKQogIH0sCgogIGFzeW5jIGdldExvY2FsREJEb2N1bWVudChrZXksIGNvbGxlY3Rpb24gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibGFzdGxvZ2luIikgfHwgJ2Fub25pbW91cycpIHsKICAgIHJldHVybiBhd2FpdCB0aGlzLmxvY2FsREIuY29sbGVjdGlvbihjb2xsZWN0aW9uKS5kb2Moa2V5KS5nZXQoKTsKICB9LAogIGFzeW5jIHNldExvY2FsREJEb2N1bWVudChkYXRhLCBrZXksIGNvbGxlY3Rpb24gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibGFzdGxvZ2luIikgfHwgJ2Fub25pbW91cycpIHsKICAgIGlmIChrZXkpIHsKICAgICAgYXdhaXQgdGhpcy5sb2NhbERCLmNvbGxlY3Rpb24oY29sbGVjdGlvbikuZG9jKGtleSkuZ2V0KCkudGhlbihkb2N1bWVudCA9PiB7CiAgICAgICAgLy8gY29uc29sZS5sb2coZG9jdW1lbnQpOwogICAgICAgIGlmIChkb2N1bWVudCkgewogICAgICAgICAgLy8gY29uc29sZS5sb2coJ3NldExvY2FsREJEb2N1bWVudDonLCBrZXksICdleGlzdHMnKTsKICAgICAgICAgIHRoaXMubG9jYWxEQi5jb2xsZWN0aW9uKGNvbGxlY3Rpb24pLmRvYyhrZXkpLnVwZGF0ZShkYXRhKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gY29uc29sZS5sb2coJ3NldExvY2FsREJEb2N1bWVudDonLCBrZXksICdub3QgZXhpc3RzJyk7CiAgICAgICAgICB0aGlzLmxvY2FsREIuY29sbGVjdGlvbihjb2xsZWN0aW9uKS5hZGQoZGF0YSwga2V5KTsKICAgICAgICB9CiAgICAgICAgOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGF3YWl0IHRoaXMubG9jYWxEQi5jb2xsZWN0aW9uKGNvbGxlY3Rpb24pLmFkZChkYXRhKTsKICAgIH0KICB9LAogIGFzeW5jIGRlbExvY2FsREJEb2N1bWVudChjb2xsZWN0aW9uLCBrZXkpIHsKICAgIGF3YWl0IHRoaXMubG9jYWxEQi5jb2xsZWN0aW9uKGNvbGxlY3Rpb24pLmRvYyhrZXkpLmRlbGV0ZSgpOwogIH0sCiAgc2V0bG9jYWxEQih2dWVvYmplY3QpIHsKICAgIGNvbnNvbGUubG9nKCdzZXRsb2NhbERCLm5hbWU6JywgdnVlb2JqZWN0LiRvcHRpb25zLm5hbWUpOwogICAgQXBpU2VydmljZS5zZXRMb2NhbERCRG9jdW1lbnQoewogICAgICBkYXRhOiB2dWVvYmplY3QuJGRhdGEKICAgIH0sIHZ1ZW9iamVjdC4kb3B0aW9ucy5uYW1lKTsKICB9LAogIGdldGxvY2FsREIodnVlb2JqZWN0KSB7CiAgICByZXR1cm4gQXBpU2VydmljZS5nZXRMb2NhbERCRG9jdW1lbnQodnVlb2JqZWN0LiRvcHRpb25zLm5hbWUpOwogIH0sCiAgLy8gbG9jYWxiYXNlIC0gRklNCgogIHNldEJhc2ljSGVhZGVyKCkgewogICAgVnVlLmF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4iXSA9ICIqIjsKICAgIFZ1ZS5heGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyJdID0gIkdFVCwgUE9TVCwgUFVULCBERUxFVEUiOwogICAgVnVlLmF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzIl0gPSAiQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcywgQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luLCBPcmlnaW4sIEFjY2VwdCwgQ29udGVudC1UeXBlIjsKICAgIFZ1ZS5heGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQ29udGVudC1UeXBlIl0gPSAiYXBwbGljYXRpb24vanNvbiI7CiAgICBWdWUuYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bIkFjY2VwdCJdID0gImFwcGxpY2F0aW9uL2pzb24iOwogICAgVnVlLmF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBdXRvciJdID0gQVBJX0FVVEhPUjsKICAgIFZ1ZS5heGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiZG9Mb2FkaW5nIl0gPSB0cnVlOwogIH0sCiAgc2V0QXV0aEhlYWRlcih0b2tlbikgewogICAgLyoNCiAgICAgICAgaWYgKCF0b2tlbikgdG9rZW4gPSBKd3RTZXJ2aWNlLmdldEF1dGhUb2tlbigpDQogICAgICAgIGlmICh0b2tlbikgew0KICAgICAgICAgICAgVnVlLmF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBdXRob3JpemF0aW9uIl0gPSBgQmVhcmVyICR7dG9rZW59YDsNCiAgICAgICAgICAgIFZ1ZUNvb2tpZXMuc2V0KCdhdXRoVG9rZW4nLCB0b2tlbiwgQ09PS0lFX1RJTUVPVVQpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygnQXBpU2VydmljZS5pbnRlcmNlcHRvcjogIkNvbmV4w6NvIGV4cGlyYWRhISInKQ0KICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ2FjdExvZ2luQXV0aE9mZicpDQogICAgICAgICAgICBzdG9yZS5jb21taXQoJ3NldEFsZXJ0JywgeyBtZXNzYWdlOiAnRXhwaXJhZG8gbyBwcmF6byBkZSBjb25leMOjbyEnLCB2YXJpYW50OiAnZGFuZ2VyJyB9KQ0KICAgICAgICB9DQogICAgICAgICAgcmV0dXJuICgodG9rZW4gfHwgJycpICE9ICcnKQ0KICAgICovCiAgICByZXR1cm4gVnVlLmF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBdXRob3JpemF0aW9uIl0gIT09ICIiOwogIH0sCiAgc2V0QW5vbkhlYWRlcih0b2tlbikgewogICAgaWYgKCF0b2tlbikgdG9rZW4gPSBKd3RTZXJ2aWNlLmdldEFub25Ub2tlbigpOwoKICAgIC8vIGNvbnNvbGUubG9nKCdzZXRBbm9uSGVhZGVyLnRva2VuJyx0b2tlbik7CgogICAgaWYgKHRva2VuKSB7CiAgICAgIFZ1ZS5heGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQXV0aG9yaXphdGlvbiJdID0gYEJlYXJlciAke3Rva2VufWA7CiAgICAgIC8vIFZ1ZUNvb2tpZXMuc2V0KCJhbm9uVG9rZW4iLCB0b2tlbiwgQ09PS0lFX1RJTUVPVVQpOwogICAgfQoKICAgIHJldHVybiAodG9rZW4gfHwgIiIpICE9ICIiOwogIH0sCiAgZGVsVG9rZW5IZWFkZXIoKSB7CiAgICBkZWxldGUgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bIkF1dGhvcml6YXRpb24iXTsKICB9LAogIGlzTG9nZ2VkaW4oKSB7CiAgICAvLyByZXR1cm4gKEp3dFNlcnZpY2UuZ2V0TG9jYWxzdG9yZVRva2VuKCkpID8gdHJ1ZSA6IGZhbHNlCiAgICByZXR1cm4gSnd0U2VydmljZS5nZXRMb2NhbHN0b3JlVG9rZW4oKTsKICB9LAogIHF1ZXJ5KHJlc291cmNlLCBwYXJhbXMpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiBWdWUuYXhpb3MuZ2V0KHJlc291cmNlLCBwYXJhbXMpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgLy8gY29uc29sZS5sb2coInF1ZXJ5OjplcnJvcjogIiwgZXJyb3IpOwogICAgICB0aHJvdyBuZXcgRXJyb3IoYFtSV1ZdIEFwaVNlcnZpY2UgJHtlcnJvcn1gKTsKICAgIH0KICB9LAogIGdldChyZXNvdXJjZSwgcGFyYW1zID0ge30sIGxvYWRpbmcgPSB0cnVlLCB0aW1lb3V0ID0gMTUwMDApIHsKICAgIC8vIGNvbnNvbGUubG9nKCdBcGlTZXJ2aWNlLmdldCcsIHJlc291cmNlLCBwYXJhbXMsKQogICAgLy9pZiAoand0U2VydmljZS5pc1Rva2VuVmFsaWQoKSkgewogICAgaWYgKCFwYXJhbXMuaGFzT3duUHJvcGVydHkoInBhcmFtcyIpKSB7CiAgICAgIHBhcmFtcyA9IHsKICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICB9OwogICAgfQogICAgcGFyYW1zID0gewogICAgICAuLi5wYXJhbXMsCiAgICAgIC4uLnsKICAgICAgICB0aW1lb3V0OiB0aW1lb3V0CiAgICAgIH0KICAgIH07CiAgICB0cnkgewogICAgICBWdWUuYXhpb3MuZGVmYXVsdHMuaGVhZGVyc1siZG9Mb2FkaW5nIl0gPSBsb2FkaW5nOwogICAgICAvLyBzdG9yZS5kaXNwYXRjaCgnYWN0TG9hZGluZ1Zpc2libGUnLCB0cnVlKQogICAgICAvLyBjb25zb2xlLmxvZygiQXBpU2VydmljZS5nZXQ6IiwgcGFyYW1zKTsKICAgICAgcmV0dXJuIFZ1ZS5heGlvcy5nZXQocmVzb3VyY2UsIHBhcmFtcyk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAvLyBjb25zb2xlLmxvZygiZ2V0OjplcnJvcjogIiwgZXJyb3IpOwogICAgICB0aHJvdyBuZXcgRXJyb3IoYFtSV1ZdIEFwaVNlcnZpY2UgJHtlcnJvcn1gKTsKICAgIH0KICAgIC8vfSBlbHNlIHsKICAgIC8vICBpZiAoKEp3dFNlcnZpY2UuZ2V0VXNlck5hbWUoKSAhPT0gIiIpICYmIChKd3RTZXJ2aWNlLmdldFVzZXJOYW1lKCkgIT09ICJBbm9ueW1vdXNBUEkiKSkgewogICAgLy8gICAgQXBpU2VydmljZS5lcnJvck9ic2VydmVyLm5vdGlmeSh7IG1lc3NhZ2U6ICJUb2tlbiBpbnbDoWxpZG8gb3UgZXhwaXJhZG8iLCB2YXJpYW50OiAiZGFuZ2VyIiB9KTsKICAgIC8vICB9CgogICAgLy8gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzcG9uc2UsIHJlamVjdCkgPT4geyByZWplY3QoeyBtZXNzYWdlOiAiVG9rZW4gaW52w6FsaWRvIG91IGV4cGlyYWRvIiB9KSB9KTsKICAgIC8vfQogIH0sCgogIHBvc3QocmVzb3VyY2UsIHBhcmFtcyA9IHt9LCBsb2FkaW5nID0gdHJ1ZSkgewogICAgdHJ5IHsKICAgICAgVnVlLmF4aW9zLmRlZmF1bHRzLmhlYWRlcnNbImRvTG9hZGluZyJdID0gbG9hZGluZzsKICAgICAgcmV0dXJuIFZ1ZS5heGlvcy5wb3N0KHJlc291cmNlLCBwYXJhbXMpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgLy8gY29uc29sZS5sb2coInBvc3Q6OmVycm9yOiAiLCBlcnJvcik7CiAgICAgIHRocm93IG5ldyBFcnJvcihgW1JXVl0gQXBpU2VydmljZSAke2Vycm9yfWApOwogICAgfQogIH0sCiAgdXBkYXRlKHJlc291cmNlLCBwYXJhbXMpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiBWdWUuYXhpb3MucHV0KHJlc291cmNlLCBwYXJhbXMpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgLy8gY29uc29sZS5sb2coInVwZGF0ZTo6ZXJyb3I6ICIsIGVycm9yKTsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBbUldWXSBBcGlTZXJ2aWNlICR7ZXJyb3J9YCk7CiAgICB9CiAgfSwKICBwdXQocmVzb3VyY2UsIHBhcmFtcykgewogICAgdHJ5IHsKICAgICAgcmV0dXJuIFZ1ZS5heGlvcy5wdXQoYCR7cmVzb3VyY2V9YCwgcGFyYW1zKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJwdXQ6OmVycm9yOiAiLCBlcnJvcik7CiAgICAgIHRocm93IG5ldyBFcnJvcihgW1JXVl0gQXBpU2VydmljZSAke2Vycm9yfWApOwogICAgfQogIH0sCiAgZGVsZXRlKHJlc291cmNlKSB7CiAgICB0cnkgewogICAgICByZXR1cm4gVnVlLmF4aW9zLmRlbGV0ZShyZXNvdXJjZSk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAvLyBjb25zb2xlLmxvZygiZGVsZXRlOjplcnJvcjogIiwgZXJyb3IpOwogICAgICB0aHJvdyBuZXcgRXJyb3IoYFtSV1ZdIEFwaVNlcnZpY2UgJHtlcnJvcn1gKTsKICAgIH0KICB9LAogIC8vIGF1dGggcG9kZSBzZXIgMD1zZW07IDE9YXV0aCBhbm9uaW1vOyAyPWF1dGggbG9naW4KICAvLyBuw6NvIGVzdMOhIHNlbmRvIHVzYWRvLi4uCiAgY2FsbE1ldGhvZChtZXRob2QsIHJlc291cmNlID0gIiIsIGNvbmZpZyA9IHt9LCBhdXRoID0gMCkgewogICAgaWYgKGF1dGggPT09IDEpIHsKICAgICAgdGhpcy5zZXRBbm9uSGVhZGVyKCk7CiAgICB9CiAgICBpZiAoYXV0aCA9PT0gMikgewogICAgICB0aGlzLnNldEF1dGhIZWFkZXIoKTsKICAgIH0KICAgIGlmIChtZXRob2QgPT09ICJxdWVyeSIpIHsKICAgICAgcmV0dXJuIHRoaXMucXVlcnkocmVzb3VyY2UsIGNvbmZpZyk7CiAgICB9CiAgICBpZiAobWV0aG9kID09PSAiZ2V0IikgewogICAgICByZXR1cm4gdGhpcy5nZXQocmVzb3VyY2UpOwogICAgfQogICAgaWYgKG1ldGhvZCA9PT0gInBvc3QiKSB7CiAgICAgIHJldHVybiB0aGlzLnBvc3QocmVzb3VyY2UsIGNvbmZpZyk7CiAgICB9CiAgICBpZiAobWV0aG9kID09PSAidXBkYXRlIikgewogICAgICByZXR1cm4gdGhpcy51cGRhdGUocmVzb3VyY2UsIGNvbmZpZyk7CiAgICB9CiAgICBpZiAobWV0aG9kID09PSAicHV0IikgewogICAgICByZXR1cm4gdGhpcy5wdXQocmVzb3VyY2UsIGNvbmZpZyk7CiAgICB9CiAgICBpZiAobWV0aG9kID09PSAiZGVsZXRlIikgewogICAgICByZXR1cm4gdGhpcy5kZWxldGUocmVzb3VyY2UpOwogICAgfQogIH0sCiAgLy8gdGVzdGUKICBwcmVwYXJlRGF0YShyZXNwb25zZSkgewogICAgbGV0IGRhdGEgPSB7CiAgICAgIGJ1c3k6IGZhbHNlLAogICAgICBhcGlyZXNwb25zZTogcmVzcG9uc2UsCiAgICAgIHN1Y2Nlc3M6IHJlc3BvbnNlICYmIChyZXNwb25zZS5TdWNjZXNzIHx8IHJlc3BvbnNlLlN1Y2Nlc3MgPT0gIlRydWUiKSA/IHRydWUgOiBmYWxzZSwKICAgICAgZXJyb3I6IHJlc3BvbnNlICYmIHJlc3BvbnNlLkVycm9yIHx8IFtdLAogICAgICBkYXRhOiByZXNwb25zZSAmJiByZXNwb25zZS5EYXRhIHx8IFtdLAogICAgICB1cGRhdGVkYXRlOiBuZXcgRGF0ZSgpCiAgICB9OwogICAgLy8gY29uc29sZS5sb2coIkFwaVNlcnZpY2UucmVzcG9uc2U6IiwgcmVzcG9uc2UpOwogICAgLy8gY29uc29sZS5sb2coIkFwaVNlcnZpY2UuZGF0YToiLCBkYXRhKTsKICAgIHJldHVybiBkYXRhOwogIH0sCiAgY2hlY2t1cGRhdGUoc3RvcmVuYW1lKSB7CiAgICBpZiAoIXN0b3JlLmdldHRlcnMuZ3R4dXBkYXRlcyB8fCBzdG9yZS5nZXR0ZXJzLmd0eHVwZGF0ZXMubGVuZ3RoID09IDApIHsKICAgICAgc3RvcmUuZGlzcGF0Y2goImFjdFVwZGF0ZXMiLCBzdG9yZW5hbWUpLnRoZW4oKCkgPT4gewogICAgICAgIC8vIGNoYW1hIG5vdmFtZW50ZSBwcSBhZ29yYSB0ZW0gbyB1cGRhdGVzIC4uLgogICAgICAgIHRoaXMuY2hlY2t1cGRhdGUoc3RvcmVuYW1lKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICAvLyBUT0RPOiBjcmlhciBmdW7Dp8OjbyBxdWUgdmVyaWZpY2Egc2UgYSBzdG9yZSBlc3TDoSBsw6Egb3Ugc2UgcHJlY2lzYSBhdHVhbGl6YXIgLi4uCiAgICAgIGxldCBsU3RvcmUgPSBsb2NhbHN0b3JlLmdldFVzZXJTdG9yZURhdGFCeU5hbWUoc3RvcmVuYW1lKTsKICAgICAgaWYgKGxTdG9yZSkgbFN0b3JlLnVwZGF0ZWRhdGUgPSBuZXcgRGF0ZShsU3RvcmUudXBkYXRlZGF0ZSk7CgogICAgICAvLyBjb25zb2xlLmxvZygnQXBpU2VydmljZS5sU3RvcmU6JywgbFN0b3JlKQogICAgICAvLyBjb25zb2xlLmxvZygnQXBpU2VydmljZS5ndHh1cGRhdGVzOicsIHN0b3JlLmdldHRlcnMuZ3R4dXBkYXRlcykKCiAgICAgIGNvbnN0IHVwZGF0ZSA9IHN0b3JlLmdldHRlcnNbImd0eHVwZGF0ZXMiXS5maW5kKHUgPT4gdS5zdG9yZSA9PSBzdG9yZW5hbWUpIHx8IHsKICAgICAgICB1cGRhdGVkYXRlOiBuZXcgRGF0ZSgpCiAgICAgIH07CgogICAgICAvLyBjb25zb2xlLmxvZygnQXBpU2VydmljZS5zdG9yZW5hbWU6Jywgc3RvcmVuYW1lKQogICAgICAvLyBjb25zb2xlLmxvZygnQXBpU2VydmljZS5ndHh1cGRhdGVzOicsIHVwZGF0ZS51cGRhdGVkYXRlKQoKICAgICAgLy8gc2UgYSBkYXRhIGRhIMO6bHRpbWEgYXR1YWxpemHDp8OjbyBmb3IgbWVub3IgcXVlIGEgYXR1YWwsIGZvcsOnYSB1bWEgYXR1YWxpemHDp8OjbyAuLi4KICAgICAgaWYgKGxTdG9yZSAmJiBsU3RvcmUudXBkYXRlZGF0ZSkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKCdBcGlTZXJ2aWNlLmxTdG9yZTogICAgJywgbFN0b3JlLnVwZGF0ZWRhdGUpCiAgICAgICAgaWYgKGxTdG9yZS51cGRhdGVkYXRlIDwgdXBkYXRlLnVwZGF0ZWRhdGUpIGxTdG9yZSA9IG51bGw7CiAgICAgIH0KICAgICAgcmV0dXJuIGxTdG9yZTsKICAgIH0KICB9LAogIC8vIG1ldG9kb3MgcGFyYSBzYWx2YXIgbm8gdnVleC4uLgogIHNldFN0b3JlKHJvdGEsIHBhcmFtcywgc3RvcmVzKSB7CiAgICAvLyBzZSBwYXNzYXIgc29tZW50ZSBvIG5vbWUsIG1vbnRhIG8gb2JqZXRvCiAgICBpZiAodHlwZW9mIHN0b3JlcyA9PSAic3RyaW5nIikgewogICAgICBzdG9yZXMgPSB7CiAgICAgICAgbmFtZTogc3RvcmVzLAogICAgICAgIHJvdXRlOiByb3RhLAogICAgICAgIGdldHRlcjogYGd0eCR7c3RvcmVzfWAsCiAgICAgICAgc2V0dGVyOiBgc2V0JHtzdG9yZXN9YCwKICAgICAgICBhY3Rpb246IGBhY3Qke3N0b3Jlc31gCiAgICAgIH07CiAgICB9CgogICAgLy8gdmVyaWZpY2Egc2UgcHJlY2lhIGF0dWFsaXphciBhIHN0b3JlIG91IHBlZ2FyIGRvIGxvY2FsU3RvcmFnZSAuLi4KICAgIGxldCBsU3RvcmUgPSB0aGlzLmNoZWNrdXBkYXRlKHN0b3Jlcy5uYW1lKTsKICAgIGlmIChsU3RvcmUpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ0FQaVNlcnZpY2Uuc2V0U3RvcmU6IEdldCcsIHN0b3Jlcy5uYW1lLCAnZnJvbSBsb2NhbFN0b3JlJykKICAgICAgaWYgKGxTdG9yZS5oYXNPd25Qcm9wZXJ0eSgiZGF0YSIpKSBsU3RvcmUgPSBsU3RvcmUuZGF0YTsKICAgICAgaWYgKHN0b3Jlcy5zZXR0ZXIpIHN0b3JlLmNvbW1pdChzdG9yZXMuc2V0dGVyLCBsU3RvcmUpOwogICAgfSBlbHNlIHsKICAgICAgLy9jb25zb2xlLmxvZygnQVBpU2VydmljZS5zZXRTdG9yZTogR2V0Jywgc3RvcmVzLm5hbWUsICdmcm9tIEFQSScpCiAgICAgIC8vIGNvbnNvbGUubG9nKCdBcGlTZXJ2aWNlOiAnLCBzdG9yZXMuc2V0dGVyLCAnOicsIGxTdG9yZSkKCiAgICAgIC8vIHNlIGVzdMOhIGF1dGVudGljYWRvLi4uCiAgICAgIGlmIChzdG9yZS5nZXR0ZXJzWyJndHhsb2dpbkF1dGgiXSkgewogICAgICAgIEFwaVNlcnZpY2Uuc2V0QXV0aEhlYWRlcihzdG9yZS5nZXR0ZXJzWyJndHhBdXRoVG9rZW4iXSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgQXBpU2VydmljZS5zZXRBbm9uSGVhZGVyKCk7CiAgICAgIH0KICAgICAgY29uc3QgY29uZmlnID0gewogICAgICAgIHBhcmFtczogewogICAgICAgICAgUGVzcXVpc2E6IHBhcmFtcyA/IHBhcmFtcy5wZXNxdWlzYSA6ICIlIiwKICAgICAgICAgIFBhZ2VOdW1iZXI6IHBhcmFtcyA/IHBhcmFtcy5QYWdlTnVtYmVyIDogMSwKICAgICAgICAgIFBhZ2VDb3VudDogcGFyYW1zID8gcGFyYW1zLlBhZ2VDb3VudCA6IDEwMAogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8vIGNvbnNvbGUubG9nKCdBcGlTZXJ2aWNlOjpyb3RhJywgcm90YSkKICAgICAgLy8gY29uc29sZS5sb2coJ0FwaVNlcnZpY2U6OmNvbmZpZycsIGNvbmZpZykKCiAgICAgIEFwaVNlcnZpY2UuZ2V0KHJvdGEsIGNvbmZpZykudGhlbihyZXMgPT4gewogICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZXMuZGF0YTogJywgcmVzLmRhdGEpCiAgICAgICAgLy8gYWRpY2lvbmEgYSBkYXRhIHF1ZSBmb2kgYXR1YWxpemFkbyAuLi4KICAgICAgICBpZiAocmVzLmRhdGEuU3VjY2VzcyA9PSAiVHJ1ZSIgfHwgcmVzLmRhdGEuU3VjY2VzcykgewogICAgICAgICAgLy8gY29uc29sZS5sb2coc3RvcmVzLm5hbWUsIHJlcy5kYXRhLkRhdGEpCiAgICAgICAgICBpZiAoc3RvcmVzLnNldHRlcikgc3RvcmUuY29tbWl0KHN0b3Jlcy5zZXR0ZXIsIHJlcy5kYXRhLkRhdGEpOwoKICAgICAgICAgIC8vc2FsdmEgYSBzdG9yZSBubyBub21lIGRvIGxvZ2luIC4uLgogICAgICAgICAgLy8gbG9jYWxzdG9yZS5zZXRsb2NhbFN0b3JlKHN0b3Jlcy5uYW1lLCByZXMuZGF0YS5EYXRhKQogICAgICAgICAgbG9jYWxzdG9yZS5zZXRVc2VyU3RvcmVEYXRhKHN0b3Jlcy5uYW1lLCByZXMuZGF0YS5EYXRhKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBbQXBpU2VydmljZV0gJHtyZXMuZGF0YS5lcnJvcn1gKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAvKiAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0FwaVNlcnZpY2U6OnN0b3Jlcy4nLCBzdG9yZXMpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5lcnJvcihlcnJvci5tZXNzYWdlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZihlcnJvcikgPT0gJ3N0cmluZycpIGNvbnNvbGUubG9nKCdBcGlTZXJ2aWNlLnNldFN0b3JlIHN0cmluZzogJywgZXJyb3IpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mKGVycm9yKSA9PSAnb2JqZWN0JykgY29uc29sZS5sb2coJ0FwaVNlcnZpY2Uuc2V0U3RvcmUgb2JqZWN0OiAnLCBlcnJvcikNCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgW0FwaVNlcnZpY2VdICR7ZXJyb3J9YCkNCiAgICAgICAgICAgICAgICAgICAgfSkgKi8KICAgICAgLyogfSBlbHNlIHsNCiAgICAgICAgY29uc29sZS5lcnJvcigiVXN1w6FyaW8gbsOjbyBhdXRlbnRpY2FkbyIpOw0KICAgICAgICBzdG9yZS5jb21taXQoInNldEFsZXJ0Iiwgew0KICAgICAgICAgIG1lc3NhZ2U6ICJVc3XDoXJpbyBuw6NvIGF1dGVudGljYWRvISIsDQogICAgICAgICAgdmFyaWFudDogImRhbmdlciIsDQogICAgICAgIH0pOw0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdsb2dpbkF1dGg6Jywgc3RvcmUuZ2V0dGVyc1snZ3R4QXV0aEFsbCddKQ0KICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIltBcGlTZXJ2aWNlXSBVc3XDoXJpbyBuw6NvIGF1dGVudGljYWRvIik7DQogICAgICB9ICovCiAgICB9CiAgfSwKCiAgLy8gZGVwcmFjZWQKICBzYXZlU3RvcmUoc3RvcmVuYW1lLCBkYXRhKSB7CiAgICAvLyBsZXQgc2F2ZXN0b3JlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzdG9yZW5hbWUpKQoKICAgIC8vIGlmICghc2F2ZXN0b3JlKSBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShzdG9yZW5hbWUsIEpTT04uc3RyaW5naWZ5KGRhdGEpKQoKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHN0b3JlbmFtZSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpOwoKICAgIC8vIHNhbHZhIHRhbWLDqW0gbmEgc3RvcmUgZG8gdXN1YXJpbyAuLi4KICAgIC8vIG1lbm9zIHNlIGZvciBlbGUgbWVzbW8KICAgIGlmIChzdG9yZW5hbWUgIT09IEp3dFNlcnZpY2UuZ2V0VXNlck5hbWUoKSAmJiBzdG9yZW5hbWUgIT09ICJsb2dpbkFub24iKSB7CiAgICAgIHRoaXMuc2F2ZVVzZXJTdGF0ZShzdG9yZW5hbWUsIGRhdGEpOwogICAgfQogIH0sCiAgLy8gc2FsdmEgbyBzdGF0ZSBkbyB1c3XDoXJpbyBsb2dhZG8sIGUgYXR1YWxpemEgc2UgasOhIHRpdmVyIGRhZG9zIHNhbHZvcyBubyBsb2NhbHN0b3JlIHBhcmEKICAvLyBuw6NvIHBlcmRlciBhcyBzdG9yZXMgZGUgZGFkb3MgZG8gc3RvcmVkYXRhIC4uLgogIHNhdmVVc2VyU3RhdGUoc3RvcmVuYW1lLCBkYXRhKSB7CiAgICAvLyBwZWdhIGRvIGxvY2Fsc3RvcmUgc2UgZXhpc3RpciAuLi4KICAgIGxldCBsdXNlciA9IEp3dFNlcnZpY2UuZ2V0VXNlclN0b3JlKHN0b3JlbmFtZSk7CgogICAgLy8gc2UgasOhIHRlbSBvIHVzdcOhcmlvIHNhbHZvIG5vIGxvY2Fsc3RvcmUsIGF0dWFsaXphIC4uLgogICAgaWYgKCFsdXNlcikgewogICAgICBsdXNlciA9IGRhdGE7CiAgICB9IGVsc2UgewogICAgICBsdXNlci5hdXRoID0gZGF0YS5hdXRoOwogICAgICBsdXNlci50b2tlbiA9IGRhdGEudG9rZW47CiAgICAgIGx1c2VyLmxhc3RMb2dpbiA9IGRhdGEubGFzdExvZ2luOwogICAgfQogICAgbG9jYWxzdG9yZS5zYXZlbG9jYWxTdG9yZShzdG9yZW5hbWUsIGx1c2VyKTsKICB9LAogIHNhdmVTdG9yZWRhdGEoc3RvcmVuYW1lLCBkYXRhKSB7CiAgICAvLyBwZWdhIGRvIGxvY2Fsc3RvcmUgc2UgZXhpc3RpciAuLi4KICAgIGxldCBsdXNlciA9IEp3dFNlcnZpY2UuZ2V0VXNlclN0b3JlKHN0b3JlbmFtZSk7CgogICAgLy8gc2UgbsOjbyB0ZW0gbyBzdG9yZWRhdGEgY3JpYSB2YXppbwogICAgaWYgKCFsdXNlci5zdG9yZWRhdGEpIGx1c2VyLnN0b3JlZGF0YSA9IFtdOwogICAgbGV0IGxkYXRhID0gbHVzZXIuc3RvcmVkYXRhLmZpbmQocyA9PiBzLnN0b3JlID09IHN0b3JlbmFtZSk7CiAgICBpZiAoIWxkYXRhKSB7CiAgICAgIGxkYXRhID0gewogICAgICAgIHN0b3JlOiBzdG9yZW5hbWUsCiAgICAgICAgZGF0YTogZGF0YQogICAgICB9OwogICAgICBsdXNlci5zdG9yZWRhdGEucHVzaChsZGF0YSk7CiAgICB9IGVsc2UgewogICAgICBsZGF0YS5kYXRhID0gZGF0YTsKICAgIH0KCiAgICAvLyBzYWx2YSBhIHN0b3JlIG5hIHN0b3JlIGRvIGxvZ2luIC4uLgogICAgbG9jYWxzdG9yZS5zZXRsb2NhbFN0b3JlKHN0b3JlbmFtZSwgbGRhdGEpOwogIH0sCiAgLy8gc2FsdmEgYSBzdG9yZSBjb20gbyBub21lIGRvIHVzdcOhcmlvIGxvZ2FkbyAuLi4KICBzYXZlU3RvcmVVc2VyKHVzZXJuYW1lLCBkYXRhKSB7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgibG9naW5BdXRoIiwgdXNlcm5hbWUpOwogICAgdGhpcy5zYXZlVXNlclN0YXRlKHVzZXJuYW1lLCBkYXRhKTsKICB9LAogIGRvd25sb2FkRmlsZSh7CiAgICB1cmwsCiAgICBmaWxlbmFtZQogIH0pIHsKICAgIFZ1ZS5heGlvcy5nZXQodXJsLCB7CiAgICAgIHJlc3BvbnNlVHlwZTogImJsb2IiCiAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgY29uc3QgZXh0ID0gYC4ke3VybC5zcGxpdCgiLiIpLnJldmVyc2UoKVswXX1gOyAvLyBwZWdhIG8gw7psdGltbyBwb250byBxdWUgw6kgYSBleHRlbnPDo28gZG8gYXJxdWl2bwogICAgICBjb25zdCBtaW1lID0gbWltZXMuZmluZChtID0+IG0uZXh0ZW5zYW8gPT0gZXh0KSB8fCAiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIjsKICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtyZXNwb25zZS5kYXRhXSwgewogICAgICAgIHR5cGU6IG1pbWUKICAgICAgfSk7CiAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgIGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgIGxpbmsuZG93bmxvYWQgPSBmaWxlbmFtZTsKICAgICAgbGluay5jbGljaygpOwogICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGxpbmsuaHJlZik7CiAgICB9KS5jYXRjaChjb25zb2xlLmVycm9yKTsKICB9LAogIHRvYXN0ZXJyb3IobWVzc2FnZSkgewogICAgQXBpU2VydmljZS5lcnJvck9ic2VydmVyLm5vdGlmeSh7CiAgICAgIHN0YXR1czogNDAxLAogICAgICBtZXNzYWdlOiBtZXNzYWdlCiAgICB9KTsKICB9Cn07CgovLyBpbmljaWEgYXMgY29uZmlndXJhw6fDtWVzIC4uLgpBcGlTZXJ2aWNlLmluaXQoKTsKCi8vIElOSUNJTyAtIEludGVyY2VwdG9ycwovLyBxdWFuZG8gcmVxdWlzaXRhciB1bSBlbmRwb2ludApheGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoYXN5bmMgY29uZmlnID0+IHsKICAvL2NvbnNvbGUubG9nKCdheGlvcy5pbnRlcmNlcHRvcnMuY29uZmlnOicsIGNvbmZpZyk7CiAgaWYgKGNvbmZpZy51cmwgIT09ICJBdXRoZW50aWNhdGlvbi9HZXRBbm9ueW1vdXNUb2tlbiIpIHsKICAgIGNvbnN0IHRva2VuID0gY29va2llcy5nZXRjb29raWUoInRva2VuIikgJiYgY29va2llcy5nZXRjb29raWUoInRva2VuIikgIT09ICIiID8gY29va2llcy5nZXRjb29raWUoInRva2VuIikgOiBjb29raWVzLmdldGNvb2tpZSgiYW5vbnRva2VuIikgJiYgY29va2llcy5nZXRjb29raWUoImFub250b2tlbiIpICE9PSAiIiA/IGNvb2tpZXMuZ2V0Y29va2llKCJhbm9udG9rZW4iKSA6ICIiOwogICAgY29uc3QgaXNBbm9uaW1vdXMgPSAhY29va2llcy5nZXRjb29raWUoInRva2VuIikgfHwgY29va2llcy5nZXRjb29raWUoInRva2VuIikgPT0gIiI7CgogICAgLy8gc2UgbyB0b2tlbiBuw6NvIMOpIG1haXMgdsOhbGlkby4uLgogICAgLy9jb25zb2xlLmxvZygnSnd0U2VydmljZS5pc1Rva2VuVmFsaWQodG9rZW4pOicsIEp3dFNlcnZpY2UuaXNUb2tlblZhbGlkKHRva2VuKSwgdG9rZW4pOwogICAgaWYgKCFKd3RTZXJ2aWNlLmlzVG9rZW5WYWxpZCh0b2tlbikpIHsKICAgICAgaWYgKGlzQW5vbmltb3VzKSB7CiAgICAgICAgLy8gcmVub3ZhIG8gdG9rZW4gYW7DtG5pbW8KICAgICAgICBzdG9yZS5kaXNwYXRjaCgiYWN0TG9naW5Bbm9uIik7CiAgICAgICAgY29uc29sZS5sb2coJ1ByZWNpc2EgcmVub3ZhciBvIHRva2VuIGFuw7RuaW1vJyk7CiAgICAgICAgQXBpU2VydmljZS5hcGlSZW5ld1Rva2VuLm5vdGlmeSgiQW5vbnltb3VzQVBJIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGNvbmZpZzsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKEp3dFNlcnZpY2UuZ2V0VXNlck5hbWUodG9rZW4pID09ICJBbm9ueW1vdXNBUEkiKSB7CiAgICAgICAgVnVlLiRjb29raWVzLnNldCgiYW5vbnRva2VuIiwgdG9rZW4sIENPT0tJRV9BTk9OSU1PVVNUT0tFTik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgVnVlLiRjb29raWVzLnNldCgidG9rZW4iLCB0b2tlbiwgQ09PS0lFX1RJTUVPVVQpOwogICAgICB9CiAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7dG9rZW59YDsKICAgIH0KICAgIGNvbnN0IGxvYWRpbmcgPSBjb25maWcuaGVhZGVyc1siZG9Mb2FkaW5nIl07CiAgICBpZiAobG9hZGluZykgQXBpU2VydmljZS5sb2FkT2JzZXJ2ZXIubm90aWZ5KHRydWUpOwogICAgcmV0dXJuIGNvbmZpZzsKICB9IGVsc2UgewogICAgcmV0dXJuIGNvbmZpZzsKICB9Cn0sIGVycm9yID0+IHsKICBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwoKLy8gcXVhbmRvIHJlc3BvbmRlciAKYXhpb3MuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShyZXMgPT4gewogIC8vIGNvbnNvbGUubG9nKCJBcGlTZXJ2aWNlLnJvdXRlcjoiLCByb3V0ZXIuaGlzdG9yeS5jdXJyZW50LnBhdGgpOwogIC8vIGNvbnNvbGUubG9nKCJBcGlTZXJ2aWNlLnJlc3BvbnNlOiIsIHJlcy5jb25maWcuZGF0YSk7CiAgY29uc3Qgbm90aWZpY2F0aW9ucyA9IHsKICAgIHZhcmlhbnQ6ICJzdWNjZXNzIiwKICAgIG1lc3NhZ2U6ICIiCiAgfTsKICBpZiAocmVzLmNvbmZpZy51cmwgPT09ICJBdXRoZW50aWNhdGlvbiIpIHsKICAgIGNvbnN0IHVzZXIgPSBKU09OLnBhcnNlKHJlcy5jb25maWcuZGF0YSk7CiAgICBjb25zdCBpc0F1dGggPSAocmVzLmRhdGEuVG9rZW5BY2Nlc3MgfHwgIiIpICE9PSAiIjsKICAgIGlmIChpc0F1dGgpIHsKICAgICAgcmVzLmNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyOiAke3Jlcy5kYXRhLlRva2VuQWNjZXNzfWA7CiAgICAgIFZ1ZS4kY29va2llcy5zZXQoInRva2VuIiwgcmVzLmRhdGEuVG9rZW5BY2Nlc3MsIENPT0tJRV9USU1FT1VUKTsKICAgICAgVnVlLiRjb29raWVzLnNldCgibGFzdGxvZ2luIiwgdXNlci5Vc2VyKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImxhc3Rsb2dpbiIsIHVzZXIuVXNlcik7CiAgICAgIG5vdGlmaWNhdGlvbnMubWVzc2FnZSA9ICJBdXRlbnRpY2FkbyBjb20gc3VjZXNzbyEiOwogICAgICBub3RpZmljYXRpb25zLnZhcmlhbnQgPSAic3VjY2VzcyI7CiAgICAgIEFwaVNlcnZpY2Uubm90aWZ5T2JzZXJ2ZXIubm90aWZ5KG5vdGlmaWNhdGlvbnMpOwogICAgfQogICAgQXBpU2VydmljZS5sb2dpbk9ic2VydmVyLm5vdGlmeShpc0F1dGgpOwogIH0KICBpZiAocmVzLmNvbmZpZy51cmwgPT09ICJBdXRoZW50aWNhdGlvbi9HZXRBbm9ueW1vdXNUb2tlbiIpIHsKICAgIFZ1ZS5heGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbi5BdXRob3JpemF0aW9uID0gYEJlYXJlcjogJHtyZXMuZGF0YS5Ub2tlbkFjY2Vzc31gOwogICAgVnVlLiRjb29raWVzLnNldCgiYW5vbnRva2VuIiwgcmVzLmRhdGEuVG9rZW5BY2Nlc3MsIHsKICAgICAgZXhwaXJlczogIjFEIgogICAgfSk7CiAgICAvLyBjb25zb2xlLmxvZygiQW5vbnltb3VzOiIsICciQXV0ZW50aWNhZG8gY29tIHN1Y2Vzc28hIicpOwogIH0KCiAgLy8gaXNzbyB0ZXN0YSBhcyBkdWFzIEFQSXMgYSBOb3JtYWwgZSBhIHYyCiAgaWYgKHJlcy5kYXRhLlN1Y2Nlc3MgPT09ICJGYWxzZSIgfHwgcmVzLmRhdGEuU3VjY2VzcyA9PT0gZmFsc2UpIHsKICAgIG5vdGlmaWNhdGlvbnMudmFyaWFudCA9ICJkYW5nZXIiOwogICAgbm90aWZpY2F0aW9ucy5tZXNzYWdlID0gcmVzLmRhdGEuRXJyb3I7CiAgICBBcGlTZXJ2aWNlLm5vdGlmeU9ic2VydmVyLm5vdGlmeShub3RpZmljYXRpb25zKTsKICB9CiAgQXBpU2VydmljZS5sb2FkT2JzZXJ2ZXIubm90aWZ5KGZhbHNlKTsKICByZXR1cm4gcmVzOwp9LCBlcnIgPT4gewogIC8vIGNvbnNvbGUubG9nKCJBcGlTZXJ2aWNlLmVycm9yLnJvdXRlci5oaXN0b3J5LmN1cnJlbnQ6Iixyb3V0ZXIuaGlzdG9yeS5jdXJyZW50KTsKICAvLyBjb25zb2xlLmxvZygiZXJyOiIsIGVycik7CiAgY29uc3QgZXJyb3IgPSB7CiAgICBlcnJvcjogZXJyLAogICAgcmVzcG9uc2U6IG51bGwsCiAgICByb3V0ZTogcm91dGVyLmhpc3RvcnkuY3VycmVudC5wYXRoLAogICAgc3RhdHVzOiAwLAogICAgZGF0YTogbnVsbCwKICAgIGhlYWRlcnM6IG51bGwsCiAgICBtZXNzYWdlOiBudWxsLAogICAgdmFyaWFudDogIiIKICB9OwogIGlmIChlcnIuY29kZSA9PSAiRUNPTk5BQk9SVEVEIikgewogICAgc3RvcmUuZGlzcGF0Y2goInNldGRhbmdlciIsICJUZW1wbyBleGNlZGlkbyBwYXJhIGEgZXhlY3XDp8OjbyBkZXN0YSByZXF1aXNpw6fDo28iKTsKICAgIGVycm9yLm1lc3NhZ2UgPSAiVGVtcG8gZXhjZWRpZG8gcGFyYSBhIGV4ZWN1w6fDo28gZGVzdGEgcmVxdWlzacOnw6NvIjsKICB9IGVsc2UgewogICAgaWYgKCFlcnIucmVzcG9uc2UpIHsKICAgICAgLy8gc3RvcmUuZGlzcGF0Y2goCiAgICAgIC8vICAgInNldGRhbmdlciIsCiAgICAgIC8vICAgIkVycm8gZ2VyYWwgZGUgcmVkZSEhIVxuVmVyaWZpcXVlIHN1YSBjb25leMOjbyBjb20gYSBpbnRlcm5ldCIKICAgICAgLy8gKTsKICAgICAgZXJyb3IubWVzc2FnZSA9ICJFcnJvIGdlcmFsIGRlIHJlZGUhISEgVmVyaWZpcXVlIHN1YSBjb25leMOjbyBjb20gYSBpbnRlcm5ldCI7CiAgICB9IGVsc2UgewogICAgICBlcnJvci5zdGF0dXMgPSBlcnIucmVzcG9uc2Uuc3RhdHVzOwogICAgICBlcnJvci5kYXRhID0gZXJyLnJlc3BvbnNlLmRhdGE7CiAgICAgIGVycm9yLmhlYWRlcnMgPSBlcnIucmVzcG9uc2UuaGVhZGVyczsKICAgICAgZXJyb3IucmVzcG9uc2UgPSBlcnIucmVzcG9uc2U7CiAgICAgIHN3aXRjaCAoZXJyLnJlc3BvbnNlLnN0YXR1cykgewogICAgICAgIGNhc2UgNDAwOgogICAgICAgICAgaWYgKGVyci5yZXNwb25zZS5kYXRhLlVzZXIpIHsKICAgICAgICAgICAgLy8gc3RvcmUuZGlzcGF0Y2goJ3NldGRhbmdlcicsICdOZWNlc3PDoXJpbyBpbmZvcm1hciBvIHVzdcOhcmlvJykKICAgICAgICAgICAgLy8gc3RvcmUuZGlzcGF0Y2goJ3NldGF1dGgnLCBmYWxzZSkKICAgICAgICAgICAgZXJyb3IubWVzc2FnZSA9ICJOZWNlc3PDoXJpbyBpbmZvcm1hciBvIHVzdcOhcmlvIjsKICAgICAgICAgICAgZXJyb3IudmFyaWFudCA9ICJpbmZvIjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChlcnIucmVzcG9uc2UuZGF0YS5QYXNzd29yZCkgewogICAgICAgICAgICAgIC8vIHN0b3JlLmRpc3BhdGNoKCdzZXRkYW5nZXInLCAnTmVjZXNzw6FyaW8gaW5mb3JtYXIgYSBzZW5oYScpCiAgICAgICAgICAgICAgLy8gc3RvcmUuZGlzcGF0Y2goJ3NldGF1dGgnLCBmYWxzZSkKICAgICAgICAgICAgICBlcnJvci5tZXNzYWdlID0gIk5lY2Vzc8OhcmlvIGluZm9ybWFyIGEgc2VuaGEiOwogICAgICAgICAgICAgIGVycm9yLnZhcmlhbnQgPSAiaW5mbyI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKGVyci5yZXNwb25zZS5kYXRhLmRhdGEpIHsKICAgICAgICAgICAgICAgIC8vIHN0b3JlLmRpc3BhdGNoKCdzZXRkYW5nZXInLCBgNDAwIC0gJHtlcnIucmVzcG9uc2UuZGF0YS5kYXRhWzBdfWApCiAgICAgICAgICAgICAgICBlcnJvci5tZXNzYWdlID0gZXJyLnJlc3BvbnNlLmRhdGEuZGF0YVswXTsKICAgICAgICAgICAgICAgIGVycm9yLnZhcmlhbnQgPSAid2FybmluZyI7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIHN0b3JlLmRpc3BhdGNoKCdzZXRkYW5nZXInLCBgNDAwIC0gJHtlcnIucmVzcG9uc2UuZGF0YX1gKQogICAgICAgICAgICAgICAgZXJyb3IubWVzc2FnZSA9IGVyci5yZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgZXJyb3IudmFyaWFudCA9ICJ3YXJuaW5nIjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gc3RvcmUuZGlzcGF0Y2goJ3NldGF1dGgnLCBmYWxzZSkKICAgICAgICAgICAgICAvLyBWdWUubWV0aG9kcy50b2FzdGRhbmdlcignRXJybyBkZSBhdXRlbnRpY2HDp8OjbyEnKQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSA0MDE6CiAgICAgICAgICBjb25zdCBpc0Fub25pbW91cyA9ICFjb29raWVzLmdldGNvb2tpZSgidG9rZW4iKSB8fCBjb29raWVzLmdldGNvb2tpZSgidG9rZW4iKSA9PSAiIjsKICAgICAgICAgIGlmICghaXNBbm9uaW1vdXMpIHsKICAgICAgICAgICAgLy8gc3RvcmUuZGlzcGF0Y2goJ3NldGRhbmdlcicsICc0MDEgLSBFcnJvIG5hIGF1dGVudGljYcOnw6NvLCB2ZXJpZmlxdWUgdXN1w6FyaW8gZSBzZW5oYScpCiAgICAgICAgICAgIC8vIHN0b3JlLmRpc3BhdGNoKCdsb2dvZmYnKQogICAgICAgICAgICBlcnJvci52YXJpYW50ID0gImluZm8iOwogICAgICAgICAgICBpZiAoZXJyLnJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICBlcnJvci5tZXNzYWdlID0gZXJyLnJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZXJyb3IubWVzc2FnZSA9ICJFcnJvIG5hIGF1dGVudGljYcOnw6NvLCB2ZXJpZmlxdWUgdXN1w6FyaW8gZSBzZW5oYSI7CiAgICAgICAgICAgICAgLy8gQXBpU2VydmljZS5sb2dpbkVtaXQoZmFsc2UpOwogICAgICAgICAgICAgIEFwaVNlcnZpY2UubG9naW5PYnNlcnZlci5ub3RpZnkoZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDQwNDoKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJyb3V0ZXI6Iiwgcm91dGVyLmN1cnJlbnRSb3V0ZSk7CiAgICAgICAgICAvLyBzdG9yZS5kaXNwYXRjaCgnc2V0ZGFuZ2VyJywgJzQwNCAtIFDDoWdpbmEgaW5leGlzdGVudGUnKQogICAgICAgICAgZXJyb3IubWVzc2FnZSA9ICJQw6FnaW5hIGluZXhpc3RlbnRlIjsKICAgICAgICAgIGVycm9yLnZhcmlhbnQgPSAiZGFuZ2VyIjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAvLyBzdG9yZS5kaXNwYXRjaCgnc2V0ZGFuZ2VyJywgJ09jb3JyZXUgdW0gZXJybyBuYSByZXF1aXNpw6fDo28nKQogICAgICAgICAgZXJyb3IubWVzc2FnZSA9ICJPY29ycmV1IHVtIGVycm8gbmEgcmVxdWlzacOnw6NvIjsKICAgICAgICAgIGVycm9yLnZhcmlhbnQgPSAiZGFuZ2VyIjsKICAgICAgfQogICAgfQogIH0KICAvLyBjb25zb2xlLmxvZygiQXBpU2VydmljZS5lcnI6IiwgZXJyKTsKICAvLyBjb25zb2xlLmxvZygiQXBpU2VydmljZS5lcnJvcjoiLCBlcnJvcik7CgogIC8vIEFwaVNlcnZpY2UuZXJyb3JFbWl0KGVycm9yKTsKICBBcGlTZXJ2aWNlLmVycm9yT2JzZXJ2ZXIubm90aWZ5KGVycm9yKTsKCiAgLy8gaWYgKGVycm9yLnZhcmlhbnQgPT0gImRhbmdlciIpIHsKICAvLyAgc3RvcmUuZGlzcGF0Y2goInNldGVycm9ycyIsIGVycm9yKTsKICAvLyB9IGVsc2UgewogIC8vICAgc3RvcmUuZGlzcGF0Y2goImFjdFRvYXN0IiwgZXJyb3IpOwogIC8vIH0KCiAgLy8gc3RvcmUuZGlzcGF0Y2goJ3NldGxvYWRpbmcnLCBmYWxzZSkKICAvLyBBcGlTZXJ2aWNlLmxvYWRpbmdFbWl0KGZhbHNlKTsKICBBcGlTZXJ2aWNlLmxvYWRPYnNlcnZlci5ub3RpZnkoZmFsc2UpOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOwp9KTsKLy8gRklNIC0gSW50ZXJjZXB0b3JzCgovLyBjb25zb2xlLmxvZygnQXBpU2VydmljZTo6ZGVwb2lzIGRlIGNoYW1hciBvIGluaXQnKQoKZXhwb3J0IGRlZmF1bHQgQXBpU2VydmljZTs="},{"version":3,"names":["Vue","axios","VueAxios","JwtService","store","API_MODEL","API_URL","API_URLDEV","API_AUTHOR","COOKIE_TIMEOUT","COOKIE_ANONIMOUSTOKEN","localstore","router","Observable","cookies","mimes","Localbase","ApiService","apimodel","get","localstoredata","getStoreData","error","loadObserver","loginObserver","errorObserver","notifyObserver","chatObserver","apiReqObserver","apiRenewToken","localDB","init","use","defaults","baseURL","process","env","NODE_ENV","setBasicHeader","config","debug","getLocalDBDocument","key","collection","localStorage","getItem","doc","setLocalDBDocument","data","then","document","update","add","delLocalDBDocument","delete","setlocalDB","vueobject","console","log","$options","name","$data","getlocalDB","headers","common","setAuthHeader","token","setAnonHeader","getAnonToken","delTokenHeader","isLoggedin","getLocalstoreToken","query","resource","params","Error","loading","timeout","hasOwnProperty","post","put","callMethod","method","auth","prepareData","response","busy","apiresponse","success","Success","Data","updatedate","Date","checkupdate","storename","getters","gtxupdates","length","dispatch","lStore","getUserStoreDataByName","find","u","setStore","rota","stores","route","getter","setter","action","commit","Pesquisa","pesquisa","PageNumber","PageCount","res","setUserStoreData","saveStore","setItem","JSON","stringify","getUserName","saveUserState","luser","getUserStore","lastLogin","savelocalStore","saveStoredata","storedata","ldata","s","push","setlocalStore","saveStoreUser","username","downloadFile","url","filename","responseType","ext","split","reverse","mime","m","extensao","blob","Blob","type","link","createElement","href","URL","createObjectURL","download","click","revokeObjectURL","catch","toasterror","message","notify","status","interceptors","request","getcookie","isAnonimous","isTokenValid","$cookies","set","Authorization","Promise","reject","notifications","variant","user","parse","isAuth","TokenAccess","User","expires","err","history","current","path","code","Password"],"sources":["C:/k1-services/src/services/api.service.js"],"sourcesContent":["import Vue from \"vue\";\r\nimport axios from \"axios\";\r\nimport VueAxios from \"vue-axios\";\r\nimport JwtService from \"@/services/jwt.service\";\r\nimport store from \"../store\";\r\n//import { API_MODEL, API_URL, API_AUTHOR, COOKIE_TIMEOUT, COOKIE_ANONIMOUSTOKEN } from \"@/services/config\";\r\nimport { API_MODEL, API_URL, API_URLDEV, API_AUTHOR, COOKIE_TIMEOUT, COOKIE_ANONIMOUSTOKEN } from \"@/assets/config\";\r\nimport localstore from \"@/services/localstore\";\r\n// import VueCookies from \"vue-cookies\";\r\n// import auth from \"@/store/auth\";\r\nimport router from \"../router\";\r\nimport Observable from \"./observable\";\r\n\r\n// não pude usar o VueCookies pois ele não está carregado nessa etapa do sistema ...\r\nimport cookies from \"./cookie\";\r\nimport mimes from \"../assets/json/mimetypes.json\";\r\nimport Localbase from \"localbase\";\r\n\r\nconst ApiService = {\r\n  //constructor() {\r\n  //  this.apimodel = API_MODEL;\r\n  //},\r\n  // apimodel = API_MODEL,\r\n  apimodel: {\r\n    get() {\r\n      return API_MODEL;\r\n    },\r\n  },\r\n\r\n  localstoredata: localstore.getStoreData(),\r\n\r\n  error: [],\r\n\r\n  // INICIO - observables ...\r\n\r\n  loadObserver: new Observable(),\r\n  loginObserver: new Observable(),\r\n  errorObserver: new Observable(),\r\n  notifyObserver: new Observable(),\r\n  chatObserver: new Observable(),\r\n  apiReqObserver: new Observable(),\r\n  apiRenewToken: new Observable(),\r\n  \r\n  // FIM - observables ...\r\n\r\n  // localbase - INICIO    \r\n  localDB: new Localbase(\"dbIntranet\"),\r\n\r\n  init() {\r\n    Vue.use(VueAxios, axios);\r\n\r\n    axios.defaults.baseURL = (process.env.NODE_ENV === 'development') ? API_URLDEV : API_URL || \"\";\r\n\r\n    // Vue.axios.defaults.withCredentials = true; // para autorizar downloads via axios erro: obrigou a ter autenticação e não carrega mais a página ...\r\n    this.setBasicHeader();\r\n\r\n    this.localDB.config.debug = false;\r\n    // console.log('api.service.init:hit')\r\n\r\n    // console.log('APIService:init.localstoredata: ', this.localstoredata)\r\n    // console.log('APIService:init.username: ', JwtService.getUserName())\r\n  },\r\n\r\n  async getLocalDBDocument(key, collection = localStorage.getItem(\"lastlogin\") || 'anonimous') {\r\n      \r\n    return await this.localDB\r\n      .collection(collection)\r\n      .doc(key)\r\n      .get()\r\n\r\n  },\r\n\r\n  async setLocalDBDocument(data, key, collection = localStorage.getItem(\"lastlogin\") || 'anonimous') {\r\n\r\n    if (key) {\r\n      await this.localDB.collection(collection).doc(key).get().then(document => {\r\n        // console.log(document);\r\n        if (document) {\r\n          // console.log('setLocalDBDocument:', key, 'exists');\r\n          this.localDB.collection(collection).doc(key).update(data)\r\n        }\r\n        else {\r\n          // console.log('setLocalDBDocument:', key, 'not exists');\r\n          this.localDB.collection(collection).add(data, key)\r\n        };\r\n      })\r\n    } else {\r\n      await this.localDB.collection(collection).add(data);\r\n    }\r\n\r\n  },\r\n\r\n  async delLocalDBDocument(collection, key) {\r\n\r\n    await this.localDB.collection(collection).doc(key).delete();\r\n\r\n  },\r\n\r\n  setlocalDB(vueobject) {\r\n    console.log('setlocalDB.name:', vueobject.$options.name);\r\n    ApiService.setLocalDBDocument(\r\n        { data: vueobject.$data },\r\n        vueobject.$options.name\r\n      );\r\n  },\r\n  getlocalDB(vueobject) {\r\n    return ApiService.getLocalDBDocument(vueobject.$options.name);\r\n  },\r\n  // localbase - FIM\r\n\r\n  setBasicHeader() {\r\n    Vue.axios.defaults.headers.common[\"Access-Control-Allow-Origin\"] = \"*\";\r\n    Vue.axios.defaults.headers.common[\"Access-Control-Allow-Methods\"] =\r\n      \"GET, POST, PUT, DELETE\";\r\n    Vue.axios.defaults.headers.common[\"Access-Control-Allow-Headers\"] =\r\n      \"Access-Control-Allow-Methods, Access-Control-Allow-Origin, Origin, Accept, Content-Type\";\r\n    Vue.axios.defaults.headers.common[\"Content-Type\"] = \"application/json\";\r\n    Vue.axios.defaults.headers.common[\"Accept\"] = \"application/json\";\r\n    Vue.axios.defaults.headers.common[\"Autor\"] = API_AUTHOR;\r\n    Vue.axios.defaults.headers.common[\"doLoading\"] = true;\r\n  },\r\n\r\n  setAuthHeader(token) {\r\n    /*\r\n        if (!token) token = JwtService.getAuthToken()\r\n        if (token) {\r\n            Vue.axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\r\n            VueCookies.set('authToken', token, COOKIE_TIMEOUT)\r\n        } else {\r\n            console.log('ApiService.interceptor: \"Conexão expirada!\"')\r\n            store.dispatch('actLoginAuthOff')\r\n            store.commit('setAlert', { message: 'Expirado o prazo de conexão!', variant: 'danger' })\r\n        }\r\n\r\n        return ((token || '') != '')\r\n    */\r\n    return Vue.axios.defaults.headers.common[\"Authorization\"] !== \"\";\r\n  },\r\n\r\n  setAnonHeader(token) {\r\n    if (!token) token = JwtService.getAnonToken();\r\n\r\n    // console.log('setAnonHeader.token',token);\r\n\r\n    if (token) {\r\n      Vue.axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\r\n      // VueCookies.set(\"anonToken\", token, COOKIE_TIMEOUT);\r\n    }\r\n\r\n    return (token || \"\") != \"\";\r\n  },\r\n\r\n  delTokenHeader() {\r\n    delete axios.defaults.headers.common[\"Authorization\"];\r\n  },\r\n\r\n  isLoggedin() {\r\n    // return (JwtService.getLocalstoreToken()) ? true : false\r\n    return JwtService.getLocalstoreToken();\r\n  },\r\n\r\n  query(resource, params) {\r\n    try {\r\n      return Vue.axios.get(resource, params);\r\n    } catch (error) {\r\n      // console.log(\"query::error: \", error);\r\n      throw new Error(`[RWV] ApiService ${error}`);\r\n    }\r\n  },\r\n\r\n  get(resource, params = {}, loading = true, timeout = 15000) {\r\n    // console.log('ApiService.get', resource, params,)\r\n    //if (jwtService.isTokenValid()) {\r\n      if (!params.hasOwnProperty(\"params\")) {\r\n        params = { params: params };\r\n      }\r\n      params = { ...params, ...{ timeout: timeout } };\r\n      try {\r\n        Vue.axios.defaults.headers[\"doLoading\"] = loading;\r\n        // store.dispatch('actLoadingVisible', true)\r\n        // console.log(\"ApiService.get:\", params);\r\n        return Vue.axios.get(resource, params);\r\n      } catch (error) {\r\n        // console.log(\"get::error: \", error);\r\n        throw new Error(`[RWV] ApiService ${error}`);\r\n      }\r\n    //} else {\r\n    //  if ((JwtService.getUserName() !== \"\") && (JwtService.getUserName() !== \"AnonymousAPI\")) {\r\n    //    ApiService.errorObserver.notify({ message: \"Token inválido ou expirado\", variant: \"danger\" });\r\n    //  }\r\n      \r\n    //  return new Promise((response, reject) => { reject({ message: \"Token inválido ou expirado\" }) });\r\n    //}\r\n  },\r\n\r\n  post(resource, params = {}, loading = true) {\r\n    try {\r\n      Vue.axios.defaults.headers[\"doLoading\"] = loading;\r\n      return Vue.axios.post(resource, params);\r\n    } catch (error) {\r\n      // console.log(\"post::error: \", error);\r\n      throw new Error(`[RWV] ApiService ${error}`);\r\n    }\r\n  },\r\n\r\n  update(resource, params) {\r\n    try {\r\n      return Vue.axios.put(resource, params);\r\n    } catch (error) {\r\n      // console.log(\"update::error: \", error);\r\n      throw new Error(`[RWV] ApiService ${error}`);\r\n    }\r\n  },\r\n\r\n  put(resource, params) {\r\n    try {\r\n      return Vue.axios.put(`${resource}`, params);\r\n    } catch (error) {\r\n      // console.log(\"put::error: \", error);\r\n      throw new Error(`[RWV] ApiService ${error}`);\r\n    }\r\n  },\r\n\r\n  delete(resource) {\r\n    try {\r\n      return Vue.axios.delete(resource);\r\n    } catch (error) {\r\n      // console.log(\"delete::error: \", error);\r\n      throw new Error(`[RWV] ApiService ${error}`);\r\n    }\r\n  },\r\n\r\n  // auth pode ser 0=sem; 1=auth anonimo; 2=auth login\r\n  // não está sendo usado...\r\n  callMethod(method, resource = \"\", config = {}, auth = 0) {\r\n    if (auth === 1) {\r\n      this.setAnonHeader();\r\n    }\r\n    if (auth === 2) {\r\n      this.setAuthHeader();\r\n    }\r\n\r\n    if (method === \"query\") {\r\n      return this.query(resource, config);\r\n    }\r\n    if (method === \"get\") {\r\n      return this.get(resource);\r\n    }\r\n    if (method === \"post\") {\r\n      return this.post(resource, config);\r\n    }\r\n    if (method === \"update\") {\r\n      return this.update(resource, config);\r\n    }\r\n    if (method === \"put\") {\r\n      return this.put(resource, config);\r\n    }\r\n    if (method === \"delete\") {\r\n      return this.delete(resource);\r\n    }\r\n  },\r\n\r\n  // teste\r\n  prepareData(response) {\r\n    let data = {\r\n      busy: false,\r\n      apiresponse: response,\r\n      success: response && (response.Success || response.Success == \"True\") ? true : false,\r\n      error: (response && response.Error) || [],\r\n      data: (response && response.Data) || [],\r\n      updatedate: new Date()\r\n    };\r\n    // console.log(\"ApiService.response:\", response);\r\n    // console.log(\"ApiService.data:\", data);\r\n    return data;\r\n  },\r\n\r\n  checkupdate(storename) {\r\n    if (!store.getters.gtxupdates || store.getters.gtxupdates.length == 0) {\r\n      store.dispatch(\"actUpdates\", storename).then(() => {\r\n        // chama novamente pq agora tem o updates ...\r\n        this.checkupdate(storename);\r\n      });\r\n    } else {\r\n      // TODO: criar função que verifica se a store está lá ou se precisa atualizar ...\r\n      let lStore = localstore.getUserStoreDataByName(storename);\r\n      if (lStore) lStore.updatedate = new Date(lStore.updatedate);\r\n\r\n      // console.log('ApiService.lStore:', lStore)\r\n      // console.log('ApiService.gtxupdates:', store.getters.gtxupdates)\r\n\r\n      const update = store.getters[\"gtxupdates\"].find(\r\n        (u) => u.store == storename\r\n      ) || { updatedate: new Date() };\r\n\r\n      // console.log('ApiService.storename:', storename)\r\n      // console.log('ApiService.gtxupdates:', update.updatedate)\r\n\r\n      // se a data da última atualização for menor que a atual, força uma atualização ...\r\n      if (lStore && lStore.updatedate) {\r\n        // console.log('ApiService.lStore:    ', lStore.updatedate)\r\n        if (lStore.updatedate < update.updatedate) lStore = null;\r\n      }\r\n\r\n      return lStore;\r\n    }\r\n  },\r\n\r\n  // metodos para salvar no vuex...\r\n  setStore(rota, params, stores) {\r\n    // se passar somente o nome, monta o objeto\r\n    if (typeof stores == \"string\") {\r\n      stores = {\r\n        name: stores,\r\n        route: rota,\r\n        getter: `gtx${stores}`,\r\n        setter: `set${stores}`,\r\n        action: `act${stores}`,\r\n      };\r\n    }\r\n\r\n    // verifica se precia atualizar a store ou pegar do localStorage ...\r\n    let lStore = this.checkupdate(stores.name);\r\n\r\n    if (lStore) {\r\n      // console.log('APiService.setStore: Get', stores.name, 'from localStore')\r\n      if (lStore.hasOwnProperty(\"data\")) lStore = lStore.data;\r\n      if (stores.setter) store.commit(stores.setter, lStore);\r\n    } else {\r\n      //console.log('APiService.setStore: Get', stores.name, 'from API')\r\n      // console.log('ApiService: ', stores.setter, ':', lStore)\r\n\r\n      // se está autenticado...\r\n      if (store.getters[\"gtxloginAuth\"]) {\r\n        ApiService.setAuthHeader(store.getters[\"gtxAuthToken\"]);\r\n      } else {\r\n        ApiService.setAnonHeader();\r\n      }\r\n      const config = {\r\n        params: {\r\n          Pesquisa: params ? params.pesquisa : \"%\",\r\n          PageNumber: params ? params.PageNumber : 1,\r\n          PageCount: params ? params.PageCount : 100,\r\n        },\r\n      };\r\n\r\n      // console.log('ApiService::rota', rota)\r\n      // console.log('ApiService::config', config)\r\n\r\n      ApiService.get(rota, config).then((res) => {\r\n        // console.log('res.data: ', res.data)\r\n        // adiciona a data que foi atualizado ...\r\n        if (res.data.Success == \"True\" || res.data.Success) {\r\n          // console.log(stores.name, res.data.Data)\r\n          if (stores.setter) store.commit(stores.setter, res.data.Data);\r\n\r\n          //salva a store no nome do login ...\r\n          // localstore.setlocalStore(stores.name, res.data.Data)\r\n          localstore.setUserStoreData(stores.name, res.data.Data);\r\n        } else {\r\n          throw new Error(`[ApiService] ${res.data.error}`);\r\n        }\r\n      });\r\n      /* .catch(error => {\r\n                        console.log('ApiService::stores.', stores)\r\n                            // console.error(error.message)\r\n                        if (typeof(error) == 'string') console.log('ApiService.setStore string: ', error)\r\n                        if (typeof(error) == 'object') console.log('ApiService.setStore object: ', error)\r\n                        throw new Error(`[ApiService] ${error}`)\r\n                    }) */\r\n      /* } else {\r\n        console.error(\"Usuário não autenticado\");\r\n        store.commit(\"setAlert\", {\r\n          message: \"Usuário não autenticado!\",\r\n          variant: \"danger\",\r\n        });\r\n\r\n        // console.log('loginAuth:', store.getters['gtxAuthAll'])\r\n        throw new Error(\"[ApiService] Usuário não autenticado\");\r\n      } */\r\n    }\r\n  },\r\n\r\n  // depraced\r\n  saveStore(storename, data) {\r\n    // let savestore = JSON.parse(localStorage.getItem(storename))\r\n\r\n    // if (!savestore) localStorage.setItem(storename, JSON.stringify(data))\r\n\r\n    localStorage.setItem(storename, JSON.stringify(data));\r\n\r\n    // salva também na store do usuario ...\r\n    // menos se for ele mesmo\r\n    if (storename !== JwtService.getUserName() && storename !== \"loginAnon\") {\r\n      this.saveUserState(storename, data);\r\n    }\r\n  },\r\n\r\n  // salva o state do usuário logado, e atualiza se já tiver dados salvos no localstore para\r\n  // não perder as stores de dados do storedata ...\r\n  saveUserState(storename, data) {\r\n    // pega do localstore se existir ...\r\n    let luser = JwtService.getUserStore(storename);\r\n\r\n    // se já tem o usuário salvo no localstore, atualiza ...\r\n    if (!luser) {\r\n      luser = data;\r\n    } else {\r\n      luser.auth = data.auth;\r\n      luser.token = data.token;\r\n      luser.lastLogin = data.lastLogin;\r\n    }\r\n\r\n    localstore.savelocalStore(storename, luser);\r\n  },\r\n\r\n  saveStoredata(storename, data) {\r\n    // pega do localstore se existir ...\r\n    let luser = JwtService.getUserStore(storename);\r\n\r\n    // se não tem o storedata cria vazio\r\n    if (!luser.storedata) luser.storedata = [];\r\n\r\n    let ldata = luser.storedata.find((s) => s.store == storename);\r\n\r\n    if (!ldata) {\r\n      ldata = { store: storename, data: data };\r\n      luser.storedata.push(ldata);\r\n    } else {\r\n      ldata.data = data;\r\n    }\r\n\r\n    // salva a store na store do login ...\r\n    localstore.setlocalStore(storename, ldata);\r\n  },\r\n\r\n  // salva a store com o nome do usuário logado ...\r\n  saveStoreUser(username, data) {\r\n    localStorage.setItem(\"loginAuth\", username);\r\n    this.saveUserState(username, data);\r\n  },\r\n\r\n  downloadFile({ url, filename }) {\r\n    Vue.axios\r\n      .get(url, { responseType: \"blob\" })\r\n      .then((response) => {\r\n        const ext = `.${url.split(\".\").reverse()[0]}`; // pega o último ponto que é a extensão do arquivo\r\n        const mime =\r\n          mimes.find((m) => m.extensao == ext) || \"application/octet-stream\";\r\n        const blob = new Blob([response.data], {\r\n          type: mime,\r\n        });\r\n        const link = document.createElement(\"a\");\r\n        link.href = URL.createObjectURL(blob);\r\n        link.download = filename;\r\n        link.click();\r\n        URL.revokeObjectURL(link.href);\r\n      })\r\n      .catch(console.error);\r\n  },\r\n\r\n  toasterror(message) {\r\n    ApiService.errorObserver.notify({status: 401, message: message});\r\n  }\r\n};\r\n\r\n// inicia as configurações ...\r\nApiService.init();\r\n\r\n// INICIO - Interceptors\r\n// quando requisitar um endpoint\r\naxios.interceptors.request.use(\r\n  async (config) => {\r\n    //console.log('axios.interceptors.config:', config);\r\n    if (config.url !== \"Authentication/GetAnonymousToken\") {\r\n      const token = ((cookies.getcookie(\"token\")) && (cookies.getcookie(\"token\") !== \"\"))\r\n        ? cookies.getcookie(\"token\")\r\n        : ((cookies.getcookie(\"anontoken\")) && (cookies.getcookie(\"anontoken\") !== \"\"))\r\n          ? cookies.getcookie(\"anontoken\")\r\n          : \"\";\r\n      const isAnonimous = ((!cookies.getcookie(\"token\")) || (cookies.getcookie(\"token\") == \"\"));\r\n\r\n    // se o token não é mais válido...\r\n    //console.log('JwtService.isTokenValid(token):', JwtService.isTokenValid(token), token);\r\n      if (!JwtService.isTokenValid(token)) {\r\n      if (isAnonimous) {\r\n        // renova o token anônimo\r\n        store.dispatch(\"actLoginAnon\");\r\n        console.log('Precisa renovar o token anônimo');\r\n        ApiService.apiRenewToken.notify(\"AnonymousAPI\");\r\n      } else {\r\n        return config;\r\n      }\r\n    } else {\r\n      if (JwtService.getUserName(token) == \"AnonymousAPI\") {\r\n        Vue.$cookies.set(\"anontoken\", token, COOKIE_ANONIMOUSTOKEN);\r\n      } else {\r\n        Vue.$cookies.set(\"token\", token, COOKIE_TIMEOUT);\r\n      }\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n\r\n    const loading = config.headers[\"doLoading\"];\r\n    if (loading) ApiService.loadObserver.notify(true);\r\n\r\n    return config;      \r\n    } else {\r\n      return config;\r\n    }\r\n  },\r\n  (error) => {\r\n    Promise.reject(error);\r\n  }\r\n);\r\n\r\n// quando responder \r\naxios.interceptors.response.use(\r\n  (res) => {\r\n    // console.log(\"ApiService.router:\", router.history.current.path);\r\n    // console.log(\"ApiService.response:\", res.config.data);\r\n    const notifications = {\r\n      variant: \"success\",\r\n      message: \"\",\r\n    };\r\n    if (res.config.url === \"Authentication\") {\r\n      const user = JSON.parse(res.config.data);\r\n      const isAuth = (res.data.TokenAccess || \"\") !== \"\";\r\n      if (isAuth) {\r\n        res.config.headers.Authorization = `Bearer: ${res.data.TokenAccess}`;\r\n        Vue.$cookies.set(\"token\", res.data.TokenAccess, COOKIE_TIMEOUT);\r\n        Vue.$cookies.set(\"lastlogin\", user.User);\r\n        localStorage.setItem(\"lastlogin\", user.User);\r\n        notifications.message = \"Autenticado com sucesso!\";\r\n        notifications.variant = \"success\";\r\n        ApiService.notifyObserver.notify(notifications);\r\n      }\r\n      ApiService.loginObserver.notify(isAuth);\r\n    }\r\n\r\n    if (res.config.url === \"Authentication/GetAnonymousToken\") {\r\n      Vue.axios.defaults.headers.common.Authorization = `Bearer: ${res.data.TokenAccess}`;\r\n      Vue.$cookies.set(\"anontoken\", res.data.TokenAccess, { expires: \"1D\" });\r\n      // console.log(\"Anonymous:\", '\"Autenticado com sucesso!\"');\r\n    }\r\n\r\n    // isso testa as duas APIs a Normal e a v2\r\n    if (res.data.Success === \"False\" || res.data.Success === false) {\r\n      notifications.variant = \"danger\";\r\n      notifications.message = res.data.Error;\r\n      ApiService.notifyObserver.notify(notifications);\r\n    }\r\n\r\n    ApiService.loadObserver.notify(false);\r\n    return res;\r\n  },\r\n  (err) => {\r\n    // console.log(\"ApiService.error.router.history.current:\",router.history.current);\r\n    // console.log(\"err:\", err);\r\n    const error = {\r\n      error: err,\r\n      response: null,\r\n      route: router.history.current.path,\r\n      status: 0,\r\n      data: null,\r\n      headers: null,\r\n      message: null,\r\n      variant: \"\",\r\n    };\r\n\r\n    if (err.code == \"ECONNABORTED\") {\r\n      store.dispatch(\r\n        \"setdanger\",\r\n        \"Tempo excedido para a execução desta requisição\"\r\n      );\r\n      error.message = \"Tempo excedido para a execução desta requisição\";\r\n    } else {\r\n      if (!err.response) {\r\n        // store.dispatch(\r\n        //   \"setdanger\",\r\n        //   \"Erro geral de rede!!!\\nVerifique sua conexão com a internet\"\r\n        // );\r\n        error.message =\r\n          \"Erro geral de rede!!! Verifique sua conexão com a internet\";\r\n      } else {\r\n        error.status = err.response.status;\r\n        error.data = err.response.data;\r\n        error.headers = err.response.headers;\r\n        error.response = err.response;\r\n        switch (err.response.status) {\r\n          case 400:\r\n            if (err.response.data.User) {\r\n              // store.dispatch('setdanger', 'Necessário informar o usuário')\r\n              // store.dispatch('setauth', false)\r\n              error.message = \"Necessário informar o usuário\";\r\n              error.variant = \"info\";\r\n            } else {\r\n              if (err.response.data.Password) {\r\n                // store.dispatch('setdanger', 'Necessário informar a senha')\r\n                // store.dispatch('setauth', false)\r\n                error.message = \"Necessário informar a senha\";\r\n                error.variant = \"info\";\r\n              } else {\r\n                if (err.response.data.data) {\r\n                  // store.dispatch('setdanger', `400 - ${err.response.data.data[0]}`)\r\n                  error.message = err.response.data.data[0];\r\n                  error.variant = \"warning\";\r\n                } else {\r\n                  // store.dispatch('setdanger', `400 - ${err.response.data}`)\r\n                  error.message = err.response.data;\r\n                  error.variant = \"warning\";\r\n                }\r\n                // store.dispatch('setauth', false)\r\n                // Vue.methods.toastdanger('Erro de autenticação!')\r\n              }\r\n            }\r\n            break;\r\n          case 401:\r\n            const isAnonimous = ((!cookies.getcookie(\"token\")) || (cookies.getcookie(\"token\") == \"\"));\r\n            if (!isAnonimous) {\r\n              // store.dispatch('setdanger', '401 - Erro na autenticação, verifique usuário e senha')\r\n              // store.dispatch('logoff')\r\n              error.variant = \"info\";\r\n              \r\n              if (err.response.data) {\r\n                error.message = err.response.data;\r\n              } else {\r\n                error.message = \"Erro na autenticação, verifique usuário e senha\";\r\n                // ApiService.loginEmit(false);\r\n                ApiService.loginObserver.notify(false);\r\n              }\r\n            }\r\n            break;\r\n          case 404:\r\n            // console.log(\"router:\", router.currentRoute);\r\n            // store.dispatch('setdanger', '404 - Página inexistente')\r\n            error.message = \"Página inexistente\";\r\n            error.variant = \"danger\";\r\n            break;\r\n          default:\r\n            // store.dispatch('setdanger', 'Ocorreu um erro na requisição')\r\n            error.message = \"Ocorreu um erro na requisição\";\r\n            error.variant = \"danger\";\r\n        }\r\n      }\r\n    }\r\n    // console.log(\"ApiService.err:\", err);\r\n    // console.log(\"ApiService.error:\", error);\r\n\r\n    // ApiService.errorEmit(error);\r\n    ApiService.errorObserver.notify(error);\r\n\r\n    // if (error.variant == \"danger\") {\r\n    //  store.dispatch(\"seterrors\", error);\r\n    // } else {\r\n    //   store.dispatch(\"actToast\", error);\r\n    // }\r\n\r\n    // store.dispatch('setloading', false)\r\n    // ApiService.loadingEmit(false);\r\n    ApiService.loadObserver.notify(false);\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n// FIM - Interceptors\r\n\r\n// console.log('ApiService::depois de chamar o init')\r\n\r\nexport default ApiService;"],"mappings":"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"}]}