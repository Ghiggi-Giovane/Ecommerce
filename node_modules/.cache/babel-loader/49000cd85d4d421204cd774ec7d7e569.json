{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\producaoidelli\\views\\simulaproducao.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\producaoidelli\\views\\simulaproducao.vue","mtime":1670977910661},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwQWN0aW9ucywgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgVGFibGVFZGl0QXBpIGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvVGFibGVFZGl0QXBpJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdTaW11bGFQcm9kdWNhbycsCiAgY29tcG9uZW50czogewogICAgVGFibGVFZGl0QXBpCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVtcHJlc2E6ICc4JywKICAgICAgbG90ZXM6IFtdLAogICAgICBidXN5OiBmYWxzZSwKICAgICAgZmllbGRzOiBbewogICAgICAgIGtleTogJ1JlZmVyZW5jaWEnLAogICAgICAgIGxhYmVsOiAnUmVmw6pyZW5jaWEnLAogICAgICAgIHZpc2libGU6IHRydWUsCiAgICAgICAgc29ydGFibGU6IHRydWUKICAgICAgfSwgewogICAgICAgIGtleTogJ1BsYW5vQ29ydGUnLAogICAgICAgIGxhYmVsOiAnUGxhbm8gQ29ydGUnLAogICAgICAgIHZpc2libGU6IHRydWUsCiAgICAgICAgc29ydGFibGU6IHRydWUKICAgICAgfSwgewogICAgICAgIGtleTogJ0l0ZW0nLAogICAgICAgIGxhYmVsOiAnSXRlbScsCiAgICAgICAgdmlzaWJsZTogdHJ1ZSwKICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAga2V5OiAnRGVzY3JpY2FvJywKICAgICAgICBsYWJlbDogJ0Rlc2NyacOnw6NvJywKICAgICAgICB2aXNpYmxlOiB0cnVlLAogICAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICdUb3RhbCcsCiAgICAgICAgbGFiZWw6ICdUb3RhbCcsCiAgICAgICAgdmlzaWJsZTogdHJ1ZSwKICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICB9XQogICAgfTsKICB9LAoKICBjb21wdXRlZDogeyAuLi5tYXBHZXR0ZXJzKFsnZ3R4c2ltdWxhcHJvZHVjYW9kYXRhJywgJ2d0eFBhcmVtcERhdGFFbXByZXNhcyddKSwKCiAgICBkaXNhYmxlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuZW1wcmVzYSA9PSBudWxsIHx8IHRoaXMubG90ZXMubGVuZ3RoID09IDA7CiAgICB9LAoKICAgIHBhcmFtcygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBlbXA6IHRoaXMuZW1wcmVzYSwKICAgICAgICBsb3RlczogdGhpcy5sb3Rlcy5qb2luKCc7JyksCiAgICAgICAgcGxhbm86IDAKICAgICAgfTsKICAgIH0sCgogICAgdGFibGV0aXRsZSgpIHsKICAgICAgcmV0dXJuIGBMb3RlczogJHt0aGlzLmxvdGVzLmpvaW4oJywnKX1gOwogICAgfSwKCiAgICBwbGFub3MoKSB7CiAgICAgIGxldCBsaXN0YSA9IFtdOwogICAgICBsZXQgcGxhbm8gPSAnJzsKICAgICAgdGhpcy5ndHhzaW11bGFwcm9kdWNhb2RhdGEubWFwKG0gPT4gewogICAgICAgIHBsYW5vID0gbS5QbGFub0NvcnRlOwogICAgICAgIGlmICghbGlzdGEuaW5jbHVkZXMocGxhbm8pKSBsaXN0YS5wdXNoKHBsYW5vKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBsaXN0YTsKICAgIH0KCiAgfSwKCiAgYmVmb3JlTW91bnQoKSB7CiAgICB0aGlzLmFjdFBhcmVtcCgpOwogIH0sCgogIG1ldGhvZHM6IHsgLi4ubWFwQWN0aW9ucyhbJ2FjdFBhcmVtcCcsICdhY3RzaW11bGFwcm9kdWNhbyddKSwKCiAgICBidG5TaW11bGFyKCkgewogICAgICB0aGlzLmJ1c3kgPSB0cnVlOwogICAgICB0aGlzLmFjdHNpbXVsYXByb2R1Y2FvKHRoaXMucGFyYW1zKTsKICAgIH0sCgogICAgbGlzdGEocGxhbm8pIHsKICAgICAgLy8gcGxhbm8gPSAnU0lNVUxBIFBST0RVw4fDg08nCiAgICAgIHJldHVybiB0aGlzLmd0eHNpbXVsYXByb2R1Y2FvZGF0YS5maWx0ZXIoZiA9PiBmLlBsYW5vQ29ydGUgPT0gcGxhbm8pOwogICAgfQoKICB9LAogIHdhdGNoOiB7CiAgICBndHhzaW11bGFwcm9kdWNhb2RhdGEoKSB7CiAgICAgIHRoaXMuYnVzeSA9IGZhbHNlOwogICAgfQoKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;EAEAA,sBAFA;EAIAC;IAEAC;EAFA,CAJA;;EAUAC;IACA;MACAC,YADA;MAEAC,SAFA;MAGAC,WAHA;MAIAC,SACA;QAAAC;QAAAC;QAAAC;QAAAC;MAAA,CADA,EAEA;QAAAH;QAAAC;QAAAC;QAAAC;MAAA,CAFA,EAGA;QAAAH;QAAAC;QAAAC;QAAAC;MAAA,CAHA,EAIA;QAAAH;QAAAC;QAAAC;QAAAC;MAAA,CAJA,EAKA;QAAAH;QAAAC;QAAAC;QAAAC;MAAA,CALA;IAJA;EAYA,CAvBA;;EAyBAC,YAEA,eACA,uBADA,EAEA,uBAFA,EAFA;;IAOAC;MACA;IACA,CATA;;IAWAC;MACA;QAAAC;QAAAV;QAAAW;MAAA;IACA,CAbA;;IAeAC;MACA;IACA,CAjBA;;IAmBAC;MACA;MACA;MACA;QACAF;QACA;MACA,CAHA;MAIA;IACA;;EA3BA,CAzBA;;EAwDAG;IAEA;EAEA,CA5DA;;EA8DAC,WAEA,eACA,WADA,EAEA,mBAFA,EAFA;;IAOAC;MACA;MACA;IACA,CAVA;;IAYAC;MACA;MACA;IACA;;EAfA,CA9DA;EAiFAC;IACAC;MACA;IACA;;EAHA;AAjFA","names":["name","components","TableEditApi","data","empresa","lotes","busy","fields","key","label","visible","sortable","computed","disabled","params","emp","plano","tabletitle","planos","beforeMount","methods","btnSimular","lista","watch","gtxsimulaproducaodata"],"sourceRoot":"src/pages/producaoidelli/views","sources":["simulaproducao.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <b-card class=\"m-2\">\r\n            <div align=\"center\">\r\n                <h1>Simula Produção</h1>\r\n            </div>\r\n\r\n            <b-form-group :label=\"`Empresa ${empresa}`\" label-for=\"input-empresa\">\r\n                <!-- <b-form-input type=\"number\" id=\"input-empresa\" v-model=\"form.emp\"></b-form-input> -->\r\n                <b-form-select id=\"input-empresa\" v-model=\"empresa\" :options=\"gtxParempDataEmpresas\"></b-form-select>\r\n            </b-form-group>\r\n\r\n            <b-form-group label=\"Lotes\" label-for=\"tags-lotes\">\r\n                <b-form-tags separator=\" ,;\" placeholder=\"Lotes\" add-button-text=\"Adicionar\" id=\"tags-lotes\" v-model=\"lotes\"></b-form-tags>\r\n            </b-form-group>\r\n\r\n            <b-form-group class=\"float-right\">\r\n                <b-button variant=\"primary\" @click=\"btnSimular\" :disabled=\"disabled\">Simular</b-button>\r\n            </b-form-group>\r\n        </b-card>\r\n\r\n        <b-card class=\"m-2\">\r\n            <b-overlay :show=\"busy\" rounded=\"sm\">\r\n                <div class=\"accordion\" role=\"tablist\">\r\n                    <b-card no-body class=\"mb-1\" v-for=\"(plano, index) of planos\" :key=\"index\">\r\n                        <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                            <b-button block v-b-toggle=\"plano.split(' ').join('_')\" variant=\"info\">{{plano}}</b-button>\r\n                        </b-card-header>\r\n                        <b-collapse :id=\"plano.split(' ').join('_')\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                            <b-card-body>\r\n                                <TableEditApi v-if=\"gtxsimulaproducaodata\" :header=\"tabletitle\" :items=\"lista(plano)\" :fields=\"fields\" :buttons=\"[]\" :perPage=\"1000\"/>\r\n                            </b-card-body>\r\n                        </b-collapse>\r\n                    </b-card>\r\n                </div>\r\n            </b-overlay>\r\n        </b-card>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from 'vuex'\r\nimport TableEditApi from '../../../components/TableEditApi'\r\nexport default {\r\n    \r\n    name: 'SimulaProducao',\r\n\r\n    components: {\r\n\r\n        TableEditApi\r\n\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            empresa: '8',\r\n            lotes: [],\r\n            busy: false,\r\n            fields: [\r\n                {key: 'Referencia', label: 'Refêrencia', visible: true, sortable: true},\r\n                {key: 'PlanoCorte', label: 'Plano Corte', visible: true, sortable: true},\r\n                {key: 'Item', label: 'Item', visible: true, sortable: true},\r\n                {key: 'Descricao', label: 'Descrição', visible: true, sortable: true},\r\n                {key: 'Total', label: 'Total', visible: true, sortable: true},\r\n            ]\r\n        }\r\n    },\r\n\r\n    computed: {\r\n\r\n        ...mapGetters([\r\n            'gtxsimulaproducaodata',\r\n            'gtxParempDataEmpresas'\r\n        ]),\r\n\r\n        disabled() {\r\n            return (this.empresa == null || this.lotes.length==0)\r\n        },\r\n\r\n        params() {\r\n            return {emp: this.empresa, lotes: this.lotes.join(';'), plano: 0}\r\n        },\r\n\r\n        tabletitle() {\r\n            return `Lotes: ${this.lotes.join(',')}`\r\n        },\r\n\r\n        planos() {\r\n            let lista = []\r\n            let plano = ''\r\n            this.gtxsimulaproducaodata.map(m => {\r\n                plano = m.PlanoCorte\r\n                if (!lista.includes(plano)) lista.push(plano)\r\n            })\r\n            return lista\r\n        }        \r\n\r\n    },\r\n\r\n    beforeMount() {\r\n\r\n        this.actParemp()\r\n\r\n    },\r\n\r\n    methods: {\r\n\r\n        ...mapActions([\r\n            'actParemp',\r\n            'actsimulaproducao'\r\n        ]),\r\n\r\n        btnSimular() {\r\n            this.busy = true\r\n            this.actsimulaproducao(this.params)\r\n        },\r\n\r\n        lista(plano) {\r\n            // plano = 'SIMULA PRODUÇÃO'\r\n            return this.gtxsimulaproducaodata.filter(f => f.PlanoCorte == plano)\r\n        }\r\n\r\n    },\r\n\r\n    watch: {\r\n        gtxsimulaproducaodata() {\r\n            this.busy = false\r\n        }\r\n    }\r\n\r\n}\r\n</script>"]}]}