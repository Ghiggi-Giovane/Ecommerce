{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\nfe\\views\\nfe.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\nfe\\views\\nfe.vue","mtime":1670977910651},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgQVBJIGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2FwaS5zZXJ2aWNlIjsKaW1wb3J0IEFsbW94YXJpZmFkb01vdmltZW50YWNvZXMgZnJvbSAiLi4vLi4vYWxtb3hhcmlmYWRvL3ZpZXdzL0FsbW94YXJpZmFkb01vdmltZW50YWNvZXMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk5mZSIsCiAgY29tcG9uZW50czogewogICAgQWxtb3hhcmlmYWRvTW92aW1lbnRhY29lcwogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpdGVuc2FsbW94OiBudWxsLAogICAgICBlbXByZXNhOiA4LAogICAgICBkYXRhYmFzZTogbmV3IERhdGUobmV3IERhdGUoKS5zZXREYXRlKG5ldyBEYXRlKCkuZ2V0RGF0ZSgpIC0gMikpLAogICAgICBudW1lcm86IG51bGwsCiAgICAgIHNlcmllOiBudWxsLAogICAgICBjb2RpZ29fZm9ybmVjOiBudWxsLAogICAgICBub21lZm9ybmVjOiBudWxsLAogICAgICBjaGF2ZWFjZXNzbzogbnVsbCwKICAgICAgbmZlOiB7CiAgICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgICAgcGVyUGFnZTogMjAsCiAgICAgICAgZmlsdGVyOiAiIiwKICAgICAgICBmaWx0ZXJPbjogWyJudW1lcm8iLCAiRm9ybmVjZWRvciIsICJWYWxvciJdLAogICAgICAgIGZpZWxkczogW3sKICAgICAgICAgIGtleTogIm51bWVybyIsCiAgICAgICAgICBsYWJlbDogIk5vdGEvU8OpcmllIgogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogImRhdGFfZW1pc3NhbyIsCiAgICAgICAgICBsYWJlbDogIkVtaXNzw6NvIgogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogImRhdGFfZW50cmFkYSIsCiAgICAgICAgICBsYWJlbDogIkVudHJhZGEiCiAgICAgICAgfSwgImZvcm5lY2Vkb3IiLCB7CiAgICAgICAgICBrZXk6ICJuaXRlbnMiLAogICAgICAgICAgbGFiZWw6ICJQcm9kIgogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogInF0ZGVfbm90YSIsCiAgICAgICAgICBsYWJlbDogIlF0ZGUiCiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAicXRkZV9hbG1veCIsCiAgICAgICAgICBsYWJlbDogIkxjdG8iCiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAicXRkZV9zYWxkbyIsCiAgICAgICAgICBsYWJlbDogIlNhbGRvIgogICAgICAgIH0sICJhY3Rpb25zIl0sCiAgICAgICAgZGF0YTogW10sCiAgICAgICAgaXRlbnM6IHsKICAgICAgICAgIGZpZWxkczogWyJpdGVtIiwgImRlc2NyaWNhbyIsICJ1biIsIHsKICAgICAgICAgICAga2V5OiAicXRkZV9ub3RhIiwKICAgICAgICAgICAgbGFiZWw6ICJRdGRlIgogICAgICAgICAgfSwgewogICAgICAgICAgICBrZXk6ICJxdGRlX2FsbW94IiwKICAgICAgICAgICAgbGFiZWw6ICJMY3RvIgogICAgICAgICAgfSwgewogICAgICAgICAgICBrZXk6ICJzYWxkb19ub3RhIiwKICAgICAgICAgICAgbGFiZWw6ICJTYWxkbyIKICAgICAgICAgIH0sICJjdWJhZ2VtIiwgImFjdGlvbnMiXQogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9LAoKICBiZWZvcmVNb3VudCgpIHsKICAgIHRoaXMuYnVzY2FuZmUoKTsKICB9LAoKICBjb21wdXRlZDogeyAuLi5tYXBHZXR0ZXJzKFsic3lzZGV2bW9kZSIsICJndHhDb25maWdEYXRldGltZVBpY2tlckZvcm1hdCJdKSwKCiAgICBwYXJhbXMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgZW1wcmVzYTogdGhpcy5lbXByZXNhLAogICAgICAgIGRhdGFiYXNlOiB0aGlzLmRhdGFiYXNlLAogICAgICAgIG51bWVybzogdGhpcy5udW1lcm8sCiAgICAgICAgc2VyaWU6IHRoaXMuc2VyaWUsCiAgICAgICAgY29kaWdvX2Zvcm5lYzogdGhpcy5jb2RpZ29fZm9ybmVjLAogICAgICAgIG5vbWVmb3JuZWM6IHRoaXMubm9tZWZvcm5lYywKICAgICAgICBjaGF2ZWFjZXNzbzogdGhpcy5jaGF2ZWFjZXNzbwogICAgICB9OwogICAgfSwKCiAgICB0YmxfbmZlKCkgewogICAgICByZXR1cm4gdGhpcy5uZmUuZGF0YS5tYXAobSA9PiAoeyAuLi5tLAogICAgICAgIG5pdGVuczogbS5pdGVucy5sZW5ndGgsCiAgICAgICAgcXRkZV9ub3RhOiB0aGlzLnNvbWEobS5pdGVucywgInF0ZGVfbm90YSIpLAogICAgICAgIHF0ZGVfYWxtb3g6IHRoaXMuc29tYShtLml0ZW5zLCAicXRkZV9hbG1veCIpLAogICAgICAgIHF0ZGVfc2FsZG86IHRoaXMuc29tYShtLml0ZW5zLCAic2FsZG9fbm90YSIpLAogICAgICAgIF9yb3dWYXJpYW50OiB0aGlzLnJvd1ZhcmlhbnRTYWxkbyh0aGlzLnNvbWEobS5pdGVucywgInF0ZGVfbm90YSIpLCB0aGlzLnNvbWEobS5pdGVucywgInNhbGRvX25vdGEiKSkKICAgICAgfSkpOwogICAgfQoKICB9LAogIG1ldGhvZHM6IHsKICAgIGJ1c2NhbmZlKCkgewogICAgICBBUEkuZ2V0KCJ2Mi9TZXJ2aWNvcy9ORkUvR2V0IiwgdGhpcy5wYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZygiYnVzY2FuZmUiLCByZXMuZGF0YSk7CiAgICAgICAgaWYgKHJlcy5kYXRhLlN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMubmZlLmRhdGEgPSByZXMuZGF0YS5EYXRhOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm5mZS5kYXRhID0gW107CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgc29tYShhcnJheSwgY2FtcG8pIHsKICAgICAgcmV0dXJuIGFycmF5LnJlZHVjZSgoYSwgYikgPT4gYSArIGJbY2FtcG9dLCAwKTsKICAgIH0sCgogICAgcm93VmFyaWFudFNhbGRvKHF0ZGVfbm90YSwgc2FsZG9fbm90YSkgewogICAgICBpZiAoc2FsZG9fbm90YSA9PSAwKSByZXR1cm4gInN1Y2Nlc3MiOwogICAgICBpZiAoc2FsZG9fbm90YSA9PSBxdGRlX25vdGEpIHJldHVybiAiZGFuZ2VyIjsKICAgICAgaWYgKHNhbGRvX25vdGEgPCBxdGRlX25vdGEpIHJldHVybiAid2FybmluZyI7CiAgICB9LAoKICAgIG9uU3RvY2tDbGljayhpdGVtKSB7CiAgICAgIHRoaXMuaXRlbnNhbG1veCA9IGl0ZW07CiAgICAgIHRoaXMuJHJlZnNbIm1vZGFsLW1hdGVyaWFpc1N0b2NrIl0uc2hvdygpOyAvLyB0aGlzLiRyZWZzWyJBbG1veGFyaWZhZG9Nb3ZpbWVudGFjb2VzIl0uYnVzY2FpbmRpdmlkdWFsKCk7CiAgICB9LAoKICAgIEFsbW94YXJpZmFkb01vdmltZW50YWNvZXNzaG93bigpIHsKICAgICAgLy8gY29uc29sZS5sb2coIkFsbW94YXJpZmFkb01vdmltZW50YWNvZXNzaG93biIsIHRoaXMuaXRlbnNhbG1veCk7CiAgICAgIHRoaXMuJHJlZnMuQWxtb3hhcmlmYWRvTW92aW1lbnRhY29lcy5lbXByZXNhID0gODsKICAgICAgdGhpcy4kcmVmcy5BbG1veGFyaWZhZG9Nb3ZpbWVudGFjb2VzLmRlcG9zaXRvID0gMzc7CiAgICAgIHRoaXMuJHJlZnMuQWxtb3hhcmlmYWRvTW92aW1lbnRhY29lcy5ib3ggPSAwOwogICAgICB0aGlzLiRyZWZzLkFsbW94YXJpZmFkb01vdmltZW50YWNvZXMubml2ZWwgPSAwOwogICAgICB0aGlzLiRyZWZzLkFsbW94YXJpZmFkb01vdmltZW50YWNvZXMuaXRlbnMgPSBbdGhpcy5pdGVuc2FsbW94Lml0ZW1dOwogICAgICB0aGlzLiRyZWZzLkFsbW94YXJpZmFkb01vdmltZW50YWNvZXMuaXRlbnNyZXEgPSBbewogICAgICAgIGl0ZW06IHRoaXMuaXRlbnNhbG1veC5pdGVtLAogICAgICAgIHF0ZGU6IHRoaXMuaXRlbnNhbG1veC5zYWxkb19ub3RhLAogICAgICAgIGxvdGU6IHRoaXMuaXRlbnNhbG1veC5pZG5mZQogICAgICB9XTsKICAgICAgdGhpcy4kcmVmcy5BbG1veGFyaWZhZG9Nb3ZpbWVudGFjb2VzLmJ1c2NhKCk7CiAgICB9LAoKICAgIEFsbW94YXJpZmFkb01vdmltZW50YWNvZXNoaWRkZW4oKSB7CiAgICAgIHRoaXMuYnVzY2FuZmUoKTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyNA;AACA;AACA;AACA;EACAA,WADA;EAGAC;IACAC;EADA,CAHA;;EAOAC;IACA;MACAC,gBADA;MAEAC,UAFA;MAGAC,gEAHA;MAIAC,YAJA;MAKAC,WALA;MAMAC,mBANA;MAOAC,gBAPA;MAQAC,iBARA;MAUAC;QACAC,cADA;QAEAC,WAFA;QAGAC,UAHA;QAIAC,2CAJA;QAKAC,SACA;UAAAC;UAAAC;QAAA,CADA,EAEA;UAAAD;UAAAC;QAAA,CAFA,EAGA;UAAAD;UAAAC;QAAA,CAHA,EAIA,YAJA,EAKA;UAAAD;UAAAC;QAAA,CALA,EAMA;UAAAD;UAAAC;QAAA,CANA,EAOA;UAAAD;UAAAC;QAAA,CAPA,EAQA;UAAAD;UAAAC;QAAA,CARA,EASA,SATA,CALA;QAgBAhB,QAhBA;QAiBAiB;UACAH,SACA,MADA,EAEA,WAFA,EAGA,IAHA,EAIA;YAAAC;YAAAC;UAAA,CAJA,EAKA;YAAAD;YAAAC;UAAA,CALA,EAMA;YAAAD;YAAAC;UAAA,CANA,EAOA,SAPA,EAQA,SARA;QADA;MAjBA;IAVA;EAyCA,CAjDA;;EAmDAE;IACA;EACA,CArDA;;EAuDAC,YACA,8DADA;;IAEAC;MACA;QACAlB,qBADA;QAEAC,uBAFA;QAGAC,mBAHA;QAIAC,iBAJA;QAKAC,iCALA;QAMAC,2BANA;QAOAC;MAPA;IASA,CAZA;;IAaAa;MACA,iCACA,IADA;QAEAC,sBAFA;QAGAC,0CAHA;QAIAC,4CAJA;QAKAC,4CALA;QAMAC,kCACA,+BADA,EAEA,gCAFA;MANA;IAWA;;EAzBA,CAvDA;EAmFAC;IACAC;MACAC;QACA;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CAPA;IAQA,CAVA;;IAWAC;MACA;IACA,CAbA;;IAcAC;MACA;MACA;MACA;IACA,CAlBA;;IAmBAC;MACA;MAEA,0CAHA,CAKA;IACA,CAzBA;;IA0BAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA,iDACA;QACAC,0BADA;QAEAC,gCAFA;QAGAC;MAHA,CADA;MAQA;IACA,CA1CA;;IA2CAC;MACA;IACA;;EA7CA;AAnFA","names":["name","components","AlmoxarifadoMovimentacoes","data","itensalmox","empresa","database","numero","serie","codigo_fornec","nomefornec","chaveacesso","nfe","currentPage","perPage","filter","filterOn","fields","key","label","itens","beforeMount","computed","params","tbl_nfe","nitens","qtde_nota","qtde_almox","qtde_saldo","_rowVariant","methods","buscanfe","API","soma","rowVariantSaldo","onStockClick","AlmoxarifadoMovimentacoesshown","item","qtde","lote","AlmoxarifadoMovimentacoeshidden"],"sourceRoot":"src/pages/nfe/views","sources":["nfe.vue"],"sourcesContent":["<template>\r\n  <div class=\"container card py-4 my-2\">\r\n    <div>\r\n      <b-row>\r\n        <b-col>\r\n          <label for=\"form-database\">Data de Emissão</label>\r\n          <b-form-datepicker\r\n            id=\"form-database\"\r\n            v-model=\"database\"\r\n            class=\"mb-2\"\r\n            locale=\"pt\"\r\n            size=\"sm\"\r\n            :date-format-options=\"gtxConfigDatetimePickerFormat\"\r\n          ></b-form-datepicker>\r\n        </b-col>\r\n        <b-col>\r\n          <label for=\"numero\">Número Nota</label>\r\n          <b-form-input\r\n            id=\"numero\"\r\n            type=\"number\"\r\n            v-model=\"numero\"\r\n          ></b-form-input>\r\n        </b-col>\r\n        <b-col cols=\"2\">\r\n          <label for=\"serie\">Série</label>\r\n          <b-form-input id=\"serie\" type=\"text\" v-model=\"serie\"></b-form-input>\r\n        </b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col>\r\n          <label for=\"nomefornec\">Nome Fornecedor</label>\r\n          <b-form-input\r\n            id=\"nomefornec\"\r\n            type=\"text\"\r\n            v-model=\"nomefornec\"\r\n          ></b-form-input>\r\n        </b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col>\r\n          <b-form-group label=\"Chave DANFE\" label-for=\"formid\">\r\n            <b-form-input\r\n              id=\"chaveacesso\"\r\n              type=\"number\"\r\n              v-model=\"chaveacesso\"\r\n            ></b-form-input>\r\n          </b-form-group>\r\n        </b-col>\r\n      </b-row>\r\n\r\n      <b-row>\r\n        <b-col class=\"text-right\">\r\n          <b-button variant=\"primary\" @click=\"buscanfe\">Buscar</b-button>\r\n        </b-col>\r\n      </b-row>\r\n\r\n      <b-table\r\n        small\r\n        hover\r\n        striped\r\n        responsive\r\n        headerTitle=\"Extrato do Estoque\"\r\n        class=\"mt-2\"\r\n        head-variant=\"dark\"\r\n        :items=\"tbl_nfe\"\r\n        :fields=\"nfe.fields\"\r\n      >\r\n        <template #cell(numero)=\"data\">\r\n          <span class=\"no-wrap\"\r\n            >{{ data.item.numero }}/{{ data.item.serie }}</span\r\n          >\r\n        </template>\r\n\r\n        <template #cell(fornecedor)=\"data\">\r\n          <span :title=\"data.item.fornecedor\"\r\n            >{{ data.item.fornecedor.substr(0, 15)\r\n            }}{{ data.item.fornecedor.substr(15) != \"\" ? \"...\" : \"\" }}</span\r\n          >\r\n        </template>\r\n\r\n        <template #cell(data_emissao)=\"data\">\r\n          <span>{{ data.item.data_emissao | dateBR }}</span>\r\n        </template>\r\n\r\n        <template #cell(data_entrada)=\"data\">\r\n          <span>{{ data.item.data_entrada | dateBR }}</span>\r\n        </template>\r\n\r\n        <template #cell(actions)=\"data\">\r\n          <span class=\"iconbutton\">\r\n            <b-icon-clipboard-check\r\n              @click=\"$root.copyclip(data.item.chaveacesso)\"\r\n              title=\"Copiar Chave DANFE\"\r\n            />\r\n          </span>\r\n          <span class=\"iconbutton\" @click=\"data.toggleDetails\">\r\n            <b-icon-caret-down\r\n              variant=\"primary\"\r\n              title=\"Ocultar produtos\"\r\n              v-if=\"!data.detailsShowing\"\r\n            />\r\n            <b-icon-caret-up variant=\"primary\" title=\"Ver produtos\" v-else />\r\n          </span>\r\n        </template>\r\n\r\n        <template #row-details=\"row\">\r\n          <b-card class=\"bg-light\">\r\n            <b-table\r\n              small\r\n              hover\r\n              striped\r\n              responsive\r\n              headerTitle=\"Produtos\"\r\n              class=\"mt-2\"\r\n              :items=\"row.item.itens\"\r\n              :fields=\"nfe.itens.fields\"\r\n            >\r\n              <template #cell(actions)=\"data\" class=\"text-center\">\r\n                <!--\r\n                <span\r\n                  title=\"Movimentar estoque\"\r\n                  class=\"iconbutton\"\r\n                  :disabled=\"data.item.saldo_nota == 0\"\r\n                  @click=\"onStockClick(data.item)\"\r\n                >\r\n                  <b-icon-archive variant=\"success\" />\r\n                </span>\r\n                <label :disabled=\"data.item.saldo_nota == 0\">\r\n                  <span\r\n                    title=\"Movimentar estoque\"\r\n                    class=\"iconbutton\"\r\n                    @click=\"onStockClick(data.item)\"\r\n                  >\r\n                    <b-icon-archive variant=\"success\" />\r\n                  </span>\r\n                </label>\r\n                <b-badge\r\n                  title=\"Movimentar estoque\"\r\n                  variant=\"success\"\r\n                  size=\"xl\"\r\n                  :disabled=\"data.item.saldo_nota == 0\"\r\n                  @click=\"onStockClick(data.item)\"\r\n                >\r\n                  <b-icon-archive />\r\n                </b-badge>\r\n                -->\r\n                <b-button\r\n                  title=\"Movimentar estoque\"\r\n                  size=\"sm\"\r\n                  style=\"font-size:10px;\"\r\n                  variant=\"success\"\r\n                  :disabled=\"data.item.saldo_nota == 0\"\r\n                  @click=\"onStockClick(data.item)\"\r\n                >\r\n                  <b-icon-cart-plus />\r\n                </b-button>\r\n                <b-button\r\n                  title=\"Movimentar estoque\"\r\n                  size=\"sm\"\r\n                  style=\"font-size:10px;\"\r\n                  variant=\"success\"\r\n                  :disabled=\"data.item.saldo_nota == 0\"\r\n                  @click=\"onStockClick(data.item)\"\r\n                >\r\n                  <b-icon-archive />\r\n                </b-button>\r\n              </template>\r\n            </b-table>\r\n          </b-card>\r\n        </template>\r\n      </b-table>\r\n\r\n      <!--\r\n      <json-viewer\r\n        :value=\"params\"\r\n        :expand-depth=\"5\"\r\n        v-if=\"sysdevmode\"\r\n        copyable\r\n        boxed\r\n        sort\r\n      >\r\n      </json-viewer>\r\n      <json-viewer\r\n        :value=\"nfe.data\"\r\n        :expand-depth=\"5\"\r\n        v-if=\"sysdevmode\"\r\n        copyable\r\n        boxed\r\n        sort\r\n      >\r\n      </json-viewer>\r\n      -->\r\n    </div>\r\n\r\n    <b-modal\r\n      id=\"modal-materiaisStock\"\r\n      ref=\"modal-materiaisStock\"\r\n      title=\"Movimentação de estoque\"\r\n      variant=\"dark\"\r\n      size=\"xl\"\r\n      hide-footer\r\n      centered\r\n      @shown=\"AlmoxarifadoMovimentacoesshown\"\r\n      @hidden=\"AlmoxarifadoMovimentacoeshidden\"\r\n    >\r\n      <!-- <GaiolasItensBusca :value=\"itembusca\" /> -->\r\n      <!--:value=\"itembusca\"-->\r\n      <!--@etv-gaiolasitensupdate=\"evtGaiolasItensUpdate\"/>-->\r\n      <AlmoxarifadoMovimentacoes\r\n        tipoMovimentacao=\"NFE\"\r\n        ref=\"AlmoxarifadoMovimentacoes\"\r\n      />\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport API from \"../../../services/api.service\";\r\nimport AlmoxarifadoMovimentacoes from \"../../almoxarifado/views/AlmoxarifadoMovimentacoes\";\r\nexport default {\r\n  name: \"Nfe\",\r\n\r\n  components: {\r\n    AlmoxarifadoMovimentacoes,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      itensalmox: null,\r\n      empresa: 8,\r\n      database: new Date(new Date().setDate(new Date().getDate() - 2)),\r\n      numero: null,\r\n      serie: null,\r\n      codigo_fornec: null,\r\n      nomefornec: null,\r\n      chaveacesso: null,\r\n\r\n      nfe: {\r\n        currentPage: 1,\r\n        perPage: 20,\r\n        filter: \"\",\r\n        filterOn: [\"numero\", \"Fornecedor\", \"Valor\"],\r\n        fields: [\r\n          { key: \"numero\", label: \"Nota/Série\" },\r\n          { key: \"data_emissao\", label: \"Emissão\" },\r\n          { key: \"data_entrada\", label: \"Entrada\" },\r\n          \"fornecedor\",\r\n          { key: \"nitens\", label: \"Prod\" },\r\n          { key: \"qtde_nota\", label: \"Qtde\" },\r\n          { key: \"qtde_almox\", label: \"Lcto\" },\r\n          { key: \"qtde_saldo\", label: \"Saldo\" },\r\n          \"actions\",\r\n        ],\r\n        data: [],\r\n        itens: {\r\n          fields: [\r\n            \"item\",\r\n            \"descricao\",\r\n            \"un\",\r\n            { key: \"qtde_nota\", label: \"Qtde\" },\r\n            { key: \"qtde_almox\", label: \"Lcto\" },\r\n            { key: \"saldo_nota\", label: \"Saldo\" },\r\n            \"cubagem\",\r\n            \"actions\",\r\n          ],\r\n        },\r\n      },\r\n    };\r\n  },\r\n\r\n  beforeMount() {\r\n    this.buscanfe();\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"sysdevmode\", \"gtxConfigDatetimePickerFormat\"]),\r\n    params() {\r\n      return {\r\n        empresa: this.empresa,\r\n        database: this.database,\r\n        numero: this.numero,\r\n        serie: this.serie,\r\n        codigo_fornec: this.codigo_fornec,\r\n        nomefornec: this.nomefornec,\r\n        chaveacesso: this.chaveacesso,\r\n      };\r\n    },\r\n    tbl_nfe() {\r\n      return this.nfe.data.map((m) => ({\r\n        ...m,\r\n        nitens: m.itens.length,\r\n        qtde_nota: this.soma(m.itens, \"qtde_nota\"),\r\n        qtde_almox: this.soma(m.itens, \"qtde_almox\"),\r\n        qtde_saldo: this.soma(m.itens, \"saldo_nota\"),\r\n        _rowVariant: this.rowVariantSaldo(\r\n          this.soma(m.itens, \"qtde_nota\"),\r\n          this.soma(m.itens, \"saldo_nota\")\r\n        ),\r\n      }));\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    buscanfe() {\r\n      API.get(\"v2/Servicos/NFE/Get\", this.params).then((res) => {\r\n        // console.log(\"buscanfe\", res.data);\r\n        if (res.data.Success) {\r\n          this.nfe.data = res.data.Data;\r\n        } else {\r\n          this.nfe.data = [];\r\n        }\r\n      });\r\n    },\r\n    soma(array, campo) {\r\n      return array.reduce((a, b) => a + b[campo], 0);\r\n    },\r\n    rowVariantSaldo(qtde_nota, saldo_nota) {\r\n      if (saldo_nota == 0) return \"success\";\r\n      if (saldo_nota == qtde_nota) return \"danger\";\r\n      if (saldo_nota < qtde_nota) return \"warning\";\r\n    },\r\n    onStockClick(item) {\r\n      this.itensalmox = item;\r\n\r\n      this.$refs[\"modal-materiaisStock\"].show();\r\n\r\n      // this.$refs[\"AlmoxarifadoMovimentacoes\"].buscaindividual();\r\n    },\r\n    AlmoxarifadoMovimentacoesshown() {\r\n      // console.log(\"AlmoxarifadoMovimentacoesshown\", this.itensalmox);\r\n      this.$refs.AlmoxarifadoMovimentacoes.empresa = 8;\r\n      this.$refs.AlmoxarifadoMovimentacoes.deposito = 37;\r\n      this.$refs.AlmoxarifadoMovimentacoes.box = 0;\r\n      this.$refs.AlmoxarifadoMovimentacoes.nivel = 0;\r\n      this.$refs.AlmoxarifadoMovimentacoes.itens = [this.itensalmox.item];\r\n      this.$refs.AlmoxarifadoMovimentacoes.itensreq = [\r\n        {\r\n          item: this.itensalmox.item,\r\n          qtde: this.itensalmox.saldo_nota,\r\n          lote: this.itensalmox.idnfe,\r\n        },\r\n      ];\r\n\r\n      this.$refs.AlmoxarifadoMovimentacoes.busca();\r\n    },\r\n    AlmoxarifadoMovimentacoeshidden() {\r\n      this.buscanfe();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.trunc {\r\n  max-width: 300px;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n}\r\n</style>\r\n"]}]}