{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\consulta\\components\\ParamConsulta.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\consulta\\components\\ParamConsulta.vue","mtime":1670977910610},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEFwaVNlcnZpY2UgZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvYXBpLnNlcnZpY2UnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1BhcmFtQ29uc3VsdGEnLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogMCwKICAgICAgcGFyYW1zbGlzdDogdGhpcy5wYXJhbXMgfHwgW10gLy8gY29tbyBwcm9wcyBuw6NvIHBvZGVtIHNlciBhbHRlcmFkYXMsIHByZWNpc28gcGFzc2FyIGFxdWkgcGFyYSBhZGljaW9uYXIgb3MgZGFkb3Mgc2UgdmllcmVtIGRlIHVtYSBhcGkKCiAgICB9OwogIH0sCgogIHByb3BzOiB7CiAgICBwYXJhbXM6IHsKICAgICAgdHlwZTogQXJyYXkKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBjb21wdXRlZHBhcmFtcygpIHsKICAgICAgcmV0dXJuIHRoaXMucGFyYW1zbGlzdDsKICAgIH0sCgogICAgc2VsZWN0ZWRwYXJhbXMoKSB7CiAgICAgIHJldHVybiB0aGlzLnBhcmFtc2xpc3QubWFwKHAgPT4gewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBbcC5ub21lXTogcC52YWx1ZQogICAgICAgIH07CiAgICAgIH0pOwogICAgfQoKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvYWRwYXJhbXMoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IDA7IC8vdGhpcy5zZWxlY3RlZCA9IGl0ZW0gLy8gZXNzZSBuw6NvIGZ1bmNpb25hIHBxIMOpIGJhc2VhZG8gbnVuIGZpbHRybyAuLi4KCiAgICAgIHRoaXMucGFyYW1zbGlzdC5tYXAocGFyID0+IHsKICAgICAgICBpZiAocGFyLmFwaSkgewogICAgICAgICAgLy8gc2UgbyBwYXJhbWV0cm8gbsOjbyB0ZW0gbyBjYW1wbyBkYXRhIHZhemlvIGVsZSBwcmVjaXNhIGVzcGVyYXIgbyByZXRvcm5vIGRhIGFwaSBwYXJhIGNyaWFyIGUgcmVuZGVyaXphciBuYSB0ZWxhCiAgICAgICAgICAvLyBlbnTDo28gw6kgdXNhZG8gZXNzZSBjb250YWRvciBwYXJhIHPDsyBhYnJpciBhIGFiYSBkb3MgcGFyYW1ldHJvcyBkZXBvaXMgZGUgdGVyIG8gY2FtcG8gZGF0YSBwYXJhIHBvZGVyIGNhcnJlZ2FyIG5hIHRlbGEKICAgICAgICAgIGlmICghcGFyLmRhdGEgfHwgcGFyLmRhdGEubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nKys7CiAgICAgICAgICAgIHRoaXMuYXBpR2V0KHBhcikudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZGluZyA+IDApIHRoaXMubG9hZGluZy0tOwogICAgICAgICAgICAgIGlmICh0aGlzLmxvYWRpbmcgPT0gMCkgdGhpcy50YWJJbmRleCA9IDE7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIGFzeW5jIGFwaUdldChwYXIpIHsKICAgICAgQXBpU2VydmljZS5zZXRBdXRoSGVhZGVyKCk7CiAgICAgIGF3YWl0IEFwaVNlcnZpY2UuZ2V0KHBhci5hcGkpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnBhcmFtc2xpc3QuZmluZChmID0+IGYubm9tZSA9PSBwYXIubm9tZSkuZGF0YSA9IHJlcy5kYXRhLkRhdGE7CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yLm1lc3NhZ2UpOwogICAgICAgIHRocm93IG5ldyBFcnJvcihgW0FwaVNlcnZpY2UuYXBpR2V0XSAke2Vycm9yfWApOwogICAgICB9KTsKICAgIH0KCiAgfSwKICB3YXRjaDogewogICAgcGFyYW1zKHBhcmFtcykgewogICAgICB0aGlzLnBhcmFtc2xpc3QgPSBwYXJhbXMgfHwgW107CiAgICAgIHRoaXMubG9hZHBhcmFtcygpOwogICAgfSwKCiAgICBzZWxlY3RlZHBhcmFtcyhwYXJhbSkgewogICAgICB0aGlzLiRlbWl0KCdldnRfcGFyYW1zZWxlY3RlZCcsIHBhcmFtKTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;AAmBA;AACA;EAEAA,qBAFA;;EAIAC;IACA;MACAC,UADA;MAEAC,6BAFA,CAEA;;IAFA;EAIA,CATA;;EAWAC;IAEAC;MACAC;IADA;EAFA,CAXA;EAmBAC;IACAC;MAAA;IAAA,CADA;;IAEAC;MAAA;QAAA;UAAA;QAAA;MAAA;IAAA;;EAFA,CAnBA;EAwBAC;IAEAC;MACA,iBADA,CAEA;;MACA;QACA;UACA;UACA;UACA;YACA;YACA;cACA;cACA;YACA,CAHA;UAIA;QACA;MACA,CAZA;IAcA,CAnBA;;IAqBA;MAEAC;MAEA,8BACAC,IADA,CACAC;QACA;MACA,CAHA,EAIAC,KAJA,CAIAC;QACAC;QACA;MACA,CAPA;IAQA;;EAjCA,CAxBA;EA6DAC;IAEAb;MACA;MACA;IACA,CALA;;IAOAI;MACA;IACA;;EATA;AA7DA","names":["name","data","loading","paramslist","props","params","type","computed","computedparams","selectedparams","methods","loadparams","ApiService","then","res","catch","error","console","watch"],"sourceRoot":"src/pages/consulta/components","sources":["ParamConsulta.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <b-row>\r\n            <b-col cols=\"12\" md=\"4\" sm=\"6\" v-for=\"(par, i) of computedparams\" :key=\"i\">\r\n                <b-form-group :label=\"par.caption\">\r\n                    <b-form-input :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='number'\" type=\"number\" :min=\"par.min || 0\" :max=\"par.max || 0\">{{ par.tipo }}</b-form-input>\r\n                    <b-form-input :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='string'\" type=\"text\">{{ par.tipo }}</b-form-input>\r\n                    <b-form-select :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='select' && !par.api\" :options=\"par.data\"></b-form-select>\r\n                    <b-form-select :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='select' && par.api\" :options=\"par.data\"></b-form-select>\r\n                    <b-form-select :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='multiple' && par.api\" :options=\"par.data\"></b-form-select>\r\n                </b-form-group>\r\n            </b-col>\r\n        </b-row>\r\n\r\n        <!-- paramslist: {{paramslist}}\r\n        selectedparams: {{selectedparams}} -->\r\n    </div>\r\n</template>\r\n<script>\r\nimport ApiService from '../../../services/api.service'\r\nexport default {\r\n    \r\n    name: 'ParamConsulta',\r\n\r\n    data() {\r\n        return {\r\n            loading: 0,\r\n            paramslist: this.params ||  [] // como props não podem ser alteradas, preciso passar aqui para adicionar os dados se vierem de uma api\r\n        }\r\n    },\r\n\r\n    props: {\r\n\r\n        params: {\r\n            type: Array\r\n        }\r\n\r\n    },\r\n\r\n    computed: {\r\n        computedparams() { return this.paramslist },\r\n        selectedparams() { return this.paramslist.map(p => {return {[p.nome]: p.value}}) }\r\n    },\r\n\r\n    methods: {\r\n\r\n        loadparams() {\r\n            this.loading = 0\r\n            //this.selected = item // esse não funciona pq é baseado nun filtro ...\r\n            this.paramslist.map(par => {\r\n                if (par.api) {\r\n                    // se o parametro não tem o campo data vazio ele precisa esperar o retorno da api para criar e renderizar na tela\r\n                    // então é usado esse contador para só abrir a aba dos parametros depois de ter o campo data para poder carregar na tela\r\n                    if (!par.data || par.data.length==0) {\r\n                        this.loading++\r\n                        this.apiGet(par).then(() => {\r\n                            if (this.loading>0) this.loading--\r\n                            if (this.loading==0) this.tabIndex = 1\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n\r\n        },\r\n\r\n        async apiGet(par) {\r\n\r\n        ApiService.setAuthHeader()\r\n        \r\n        await ApiService.get(par.api)\r\n            .then(res => {\r\n                this.paramslist.find(f => f.nome == par.nome).data = res.data.Data\r\n            })\r\n            .catch (error => {\r\n                console.error(error.message)\r\n                throw new Error(`[ApiService.apiGet] ${error}`)\r\n            })\r\n        }\r\n\r\n    },\r\n\r\n    watch: {\r\n\r\n        params(params) {\r\n            this.paramslist = params ||  [] \r\n            this.loadparams()\r\n        },\r\n\r\n        selectedparams(param) {\r\n            this.$emit('evt_paramselected', param)\r\n        }\r\n\r\n    }\r\n}\r\n</script>"]}]}