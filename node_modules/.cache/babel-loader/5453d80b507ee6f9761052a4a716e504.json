{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\consulta\\components\\TabsConsultas.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\consulta\\components\\TabsConsultas.vue","mtime":1701906516455},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUYWJsZUVkaXRBcGkgZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9UYWJsZUVkaXRBcGknOwppbXBvcnQgQXBpU2VydmljZSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9hcGkuc2VydmljZSc7CmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdUYWJzQ29uc3VsdGFzJywKICBjb21wb25lbnRzOiB7CiAgICBUYWJsZUVkaXRBcGkKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmaWx0cm86ICcnLAogICAgICB0YWJJbmRleDogMCwKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIHRvdGFsUGFnZTogMSwKICAgICAgcGVyUGFnZTogNSwKICAgICAgY3VycmVudFBhcmFtczogJycsCiAgICAgIGNvbnN1bHRhczogW10sCiAgICAgIHJlc3VsdHM6IHsKICAgICAgICBEYXRhOiBbXQogICAgICB9LAogICAgICBzZWxlY3RlZDogewogICAgICAgIE5vbWU6ICdDb25zdWx0YSBuw6NvIHNlbGVjaW9uYWRhJywKICAgICAgICBjb25maWc6IHsKICAgICAgICAgIGNhcHRpb246ICdDb25zdWx0YSBuw6NvIGNhZGFzdHJhZGEnCiAgICAgICAgfQogICAgICB9LAogICAgICBsb2FkaW5nOiAwLAogICAgICBsb2FkY29uc3VsdGFzOiB0cnVlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWydndHhjb25zdWx0YXNEYXRhJywgJ2d0eGNvbnN1bHRhc3NlbGVjdGVkJywgJ2d0eGNvbnN1bHRhc3NlbGVjdGVkcGFyYW1zJywgJ2d0eGNvbnN1bHRhc3NlbGVjdGVkcmVzdWx0J10pLAogICAgY29tcHV0ZWRwYXJhbXMoKSB7CiAgICAgIHJldHVybiB0aGlzLnBhcmFtczsKICAgIH0sCiAgICBzZWxlY3RlZHJvdXRlKCkgewogICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZC5Ob21lICE9PSAnQ29uc3VsdGEgbsOjbyBzZWxlY2lvbmFkYScgPyAnU2Vydmljb3MvQ09OU18vJyArIHRoaXMuc2VsZWN0ZWQuTm9tZSA6ICcnOwogICAgfSwKICAgIHNlbGVjdGVkcGFyYW1zKCkgewogICAgICBsZXQgcGFyYW0gPSB7fTsKICAgICAgaWYgKHRoaXMucGFyYW1zKSB0aGlzLnBhcmFtcy5tYXAocCA9PiB7CiAgICAgICAgcGFyYW0gPSB7CiAgICAgICAgICAuLi5wYXJhbSwKICAgICAgICAgIC4uLnsKICAgICAgICAgICAgW3Aubm9tZV06IHAudmFsdWUKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9KTsKICAgICAgcmV0dXJuIHBhcmFtOwogICAgfSwKICAgIHBhcmFtcygpIHsKICAgICAgbGV0IHBhcnMgPSB0aGlzLmd0eGNvbnN1bHRhc3NlbGVjdGVkcGFyYW1zIHx8IFtdOwoKICAgICAgLyogICAgICAgICAgICAgaWYgKCh0aGlzLnNlbGVjdGVkKSAmJiAodGhpcy5zZWxlY3RlZC5jb25maWcpKQ0KICAgICAgICAgICAgICAgICAgICBwYXJzID0gdGhpcy5zZWxlY3RlZC5jb25maWcucGFyYW0gKi8KCiAgICAgIHJldHVybiBwYXJzOwogICAgfSwKICAgIHNlbGVjdFBhcmFtcygpIHsKICAgICAgbGV0IHBhcnMgPSBbXTsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWQuY29uZmlnICYmIHRoaXMuc2VsZWN0ZWQuY29uZmlnLnBhcmFtKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZC5jb25maWcucGFyYW0ubWFwKHBhciA9PiB7CiAgICAgICAgICAvLyBwYXJzLnB1c2goe1twYXIubm9tZV06IHBhci52YWx1ZSB8fCBudWxsfSkKICAgICAgICAgIHBhcnMucHVzaCh7CiAgICAgICAgICAgIG5vbWU6IHBhci5ub21lLAogICAgICAgICAgICB2YWx1ZTogcGFyLnZhbHVlIHx8IG51bGwKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiBwYXJzOwogICAgfSwKICAgIHNlbGVjdERhdGEocGFyYW0pIHsKICAgICAgbGV0IHJlcyA9IG51bGw7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkICYmIHRoaXMuc2VsZWN0ZWQuY29uZmlnLnBhcmFtICYmIHRoaXMuc2VsZWN0ZWQuY29uZmlnLnBhcmFtLmZpbmQocCA9PiBwLm5vbWUgPSBwYXJhbS5ub21lKSkgcmVzID0gdGhpcy5zZWxlY3RlZC5jb25maWcucGFyYW0uZmluZChwID0+IHAubm9tZSA9IHBhcmFtLm5vbWUpLmRhdGEgfHwgW107CiAgICAgIHJldHVybiByZXMgfHwgW107CiAgICB9LAogICAgcGFnaW5hdGlvbigpIHsKICAgICAgLy8gcmV0dXJuIGAmUGFnZU51bWJlcj0ke3RoaXMuY3VycmVudFBhZ2V9JlBhZ2VTaXplPSR7dGhpcy5wZXJQYWdlfWAKICAgICAgcmV0dXJuIHsKICAgICAgICBQYWdlTnVtYmVyOiB0aGlzLmN1cnJlbnRQYWdlLAogICAgICAgIFBhZ2VTaXplOiB0aGlzLnBlclBhZ2UKICAgICAgfTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmFjdENvbnN1bHRhcygpOwogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucyhbJ2FjdENvbnN1bHRhcycsICdhY3RDb25zdWx0YXNTZWxlY3RlZCddKSwKICAgIGNvbnN1bHRhc2ZpbHRlcmVkKGZpbHRybykgewogICAgICByZXR1cm4gdGhpcy5ndHhjb25zdWx0YXNEYXRhLmZpbHRlcihjID0+IChjLmNvbmZpZy5jYXB0aW9uIHx8IGMuTm9tZSkudG9VcHBlckNhc2UoKS5pbmNsdWRlcyhmaWx0cm8udG9VcHBlckNhc2UoKSkpOwogICAgfSwKICAgIGV4ZWN1dGFDb25zdWx0YSgpIHsKICAgICAgY29uc29sZS5sb2coJ2V4ZWN1dGFDb25zdWx0YScpOwogICAgICB0aGlzLiRyZWZzLnJlc3VsdC5nZXRGcm9tQXBpKCk7CiAgICAgIHRoaXMudGFiSW5kZXgrKzsKICAgIH0sCiAgICBfZXhlY3V0YUNvbnN1bHRhKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSAxOwogICAgICBsZXQgcm91dGUgPSAnU2Vydmljb3MvQ09OU18nICsgdGhpcy5zZWxlY3RlZC5Ob21lOwogICAgICAvLyBsZXQgcGFyYW0gPSBudWxsCiAgICAgIC8vdGhpcy5jdXJyZW50UGFyYW1zID0gJycKICAgICAgdGhpcy5jdXJyZW50UGFyYW1zID0ge307CiAgICAgIHRoaXMuc2VsZWN0UGFyYW1zLm1hcChwYXIgPT4gewogICAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9IHsKICAgICAgICAgIC4uLnRoaXMuY3VycmVudFBhcmFtcywKICAgICAgICAgIC4uLnsKICAgICAgICAgICAgW3Bhci5ub21lXTogcGFyLnZhbHVlIHx8IG51bGwKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIC8vIHRoaXMuY3VycmVudFBhcmFtcyArPSAnJicgKyBwYXIubm9tZSArICc9JyArIChwYXIudmFsdWUgfHwgJ251bGwnKQogICAgICAgIC8vIGNvbnNvbGUubG9nKHBhcikKICAgICAgfSk7CiAgICAgIC8vIHRoaXMuY3VycmVudFBhcmFtcyA9IHRoaXMuY3VycmVudFBhcmFtcy5zdWJzdHIoMSkKICAgICAgY29uc29sZS5sb2coJ3JvdXRlOicsIHJvdXRlKTsKICAgICAgY29uc29sZS5sb2coJ3BhcmFtOicsIHRoaXMuY3VycmVudFBhcmFtcyk7CiAgICAgIGNvbnNvbGUubG9nKCdwYWdpbmF0aW9uOicsIHRoaXMucGFnaW5hdGlvbik7CiAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9IHsKICAgICAgICAuLi50aGlzLmN1cnJlbnRQYXJhbXMsCiAgICAgICAgLi4udGhpcy5wYWdpbmF0aW9uCiAgICAgIH07CiAgICAgIEFwaVNlcnZpY2UuZ2V0KHJvdXRlLCB7CiAgICAgICAgcGFyYW1zOiB0aGlzLmN1cnJlbnRQYXJhbXMKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMucmVzdWx0cyA9IHJlcy5kYXRhOwogICAgICAgIHRoaXMudG90YWxQYWdlID0gcmVzLmRhdGEuUGFnaW5hcy5QYWdlQ291bnQgKiByZXMuZGF0YS5QYWdpbmFzLlBhZ2VTaXplOwogICAgICAgIHRoaXMucGVyUGFnZSA9IHJlcy5kYXRhLlBhZ2luYXMuUGFnZVNpemU7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gMDsKICAgICAgfSk7CiAgICAgIHRoaXMudGFiSW5kZXggPSAyOwogICAgfSwKICAgIC8vIGV4ZWN1dGFDb25zdWx0YSgpCgogICAgc29tYShmbGQpIHsKICAgICAgY29uc29sZS5sb2coZmxkKTsKICAgICAgbGV0IHNvbWEgPSAnJzsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWQuY29uZmlnICYmIHRoaXMuc2VsZWN0ZWQuY29uZmlnLnNvbWEpIHsKICAgICAgICB0aGlzLnNlbGVjdGVkLmNvbmZpZy5zb21hLm1hcChzID0+IHsKICAgICAgICAgIGlmIChmbGQuY29sdW1uLnRvVXBwZXJDYXNlKCkgPT0gcy5ub21lLnRvVXBwZXJDYXNlKCkpIHsKICAgICAgICAgICAgY29uc29sZS5sb2cocyk7CiAgICAgICAgICAgIHNvbWEgPSB0aGlzLnJlc3VsdHMuRGF0YS5tYXAoZiA9PiBmW2ZsZC5jb2x1bW5dKS5yZWR1Y2UoKGEsIGIpID0+IHBhcnNlRmxvYXQoYSkgKyBwYXJzZUZsb2F0KGIpKS50b0ZpeGVkKDIpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiBzb21hOwogICAgfSwKICAgIHNlbGVjdChpdGVtKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IDA7CiAgICAgIHRoaXMuYWN0Q29uc3VsdGFzU2VsZWN0ZWQoaXRlbS5pZCk7IC8vIHBvc2ljaW9uYSBuYSBzdG9yZSBhIGNvbnN1bHRhIHNlbGVjaW9uYWRhIC4uLgogICAgICB0aGlzLnNlbGVjdGVkID0gdGhpcy5jb25zdWx0YXMuZmluZChmID0+IGYuTm9tZSA9PSBpdGVtLk5vbWUpOwogICAgICAvLyBlbWl0ZSBhIGNvbnN1bHRhIC4uLgogICAgICB0aGlzLiRlbWl0KCdvbkNvbnN1bHRhU2VsZWN0ZWQnLCB0aGlzLnNlbGVjdGVkKTsKCiAgICAgIC8qICAgICAgICAgICAgIGlmICgodGhpcy5zZWxlY3RlZC5jb25maWcpICYmICh0aGlzLnNlbGVjdGVkLmNvbmZpZy5wYXJhbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkLmNvbmZpZy5wYXJhbS5tYXAocGFyID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhci5hcGkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlIG8gcGFyYW1ldHJvIG7Do28gdGVtIG8gY2FtcG8gZGF0YSB2YXppbyBlbGUgcHJlY2lzYSBlc3BlcmFyIG8gcmV0b3JubyBkYSBhcGkgcGFyYSBjcmlhciBlIHJlbmRlcml6YXIgbmEgdGVsYQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW50w6NvIMOpIHVzYWRvIGVzc2UgY29udGFkb3IgcGFyYSBzw7MgYWJyaXIgYSBhYmEgZG9zIHBhcmFtZXRyb3MgZGVwb2lzIGRlIHRlciBvIGNhbXBvIGRhdGEgcGFyYSBwb2RlciBjYXJyZWdhciBuYSB0ZWxhDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhci5kYXRhIHx8IHBhci5kYXRhLmxlbmd0aD09MCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZysrDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcGlHZXQocGFyKS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZGluZz4wKSB0aGlzLmxvYWRpbmctLQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYXBpR2V0Ojpnbz0nLCB0aGlzLmxvYWRpbmcpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvYWRpbmc9PTApIHRoaXMudGFiSW5kZXggPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICB9ICovCgogICAgICBpZiAoIXRoaXMudGFiSW5kZXggPT0gMSAmJiB0aGlzLmxvYWRpbmcgPT0gMCkgdGhpcy50YWJJbmRleCA9IDE7CiAgICB9LAogICAgLy8gc2VsZWN0KGl0ZW0pCgogICAgYXN5bmMgYXBpR2V0KHBhcikgewogICAgICBBcGlTZXJ2aWNlLnNldEF1dGhIZWFkZXIoKTsKICAgICAgYXdhaXQgQXBpU2VydmljZS5nZXQocGFyLmFwaSkudGhlbihyZXMgPT4gewogICAgICAgIHBhci5kYXRhID0gcmVzLmRhdGEuRGF0YTsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IubWVzc2FnZSk7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBbQXBpU2VydmljZV0gJHtlcnJvcn1gKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICAvLyBhc3luYyBhcGlHZXQocGFyKQoKICB3YXRjaDogewogICAgZ3R4Y29uc3VsdGFzRGF0YSgpIHsKICAgICAgdGhpcy5jb25zdWx0YXMgPSB0aGlzLmd0eGNvbnN1bHRhc0RhdGE7CiAgICAgIHRoaXMubG9hZGNvbnN1bHRhcyA9IGZhbHNlOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AAEA;EAEAA;EAEAC;IAEAC;EAEA;EAEAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;MACA;MACAC;QAAAC;QAAAC;UAAAC;QAAA;MAAA;MACAC;MACAC;IACA;EACA;EAEAC;IAEA;IAEAC;MAAA;IAAA;IAEAC;MAAA;IAAA;IAEAC;MACA;MACA,iBACA;QAAAC;UAAA;UAAA;YAAA;UAAA;QAAA;MAAA;MACA;IACA;IAEAC;MACA;;MAEA;AACA;;MAEA;IACA;IAEAC;MACA;MACA;QACA;UACA;UACAC;YAAAC;YAAAC;UAAA;QACA;MACA;MACA;IACA;IAEAC;MACA;MACA,8GACAC;MACA;IACA;IAEAC;MACA;MACA;QAAAC;QAAAC;MAAA;IACA;EAEA;EAEAC;IAEA;EAEA;EAEAC;IAEA;IAEAC;MACA;IACA;IAIAC;MACAC;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MACA;MACA;MACA;QACA;UAAA;UAAA;YAAA;UAAA;QAAA;QACA;QACA;MACA;MACA;MACAD;MACAA;MACAA;MACA;QAAA;QAAA;MAAA;MAEAE;QAAAhB;MAAA,GACAiB;QACA;QACA;QACA;QACA;MACA;MAEA;IACA;IAAA;;IAEAC;MACAJ;MACA;MACA;QACA;UACA;YACAA;YACAI,yBACAC,wBACAC;UACA;QACA;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MACA;MACA;;MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;MAEA;IACA;IAAA;;IAEA;MAEAL;MAEA,8BACAC;QACAK;MACA,GACAC;QACAT;QACA;MACA;IACA;EAEA;EAAA;;EAEAU;IAEAC;MACA;MACA;IACA;EAEA;AACA","names":["name","components","TableEditApi","data","filtro","tabIndex","currentPage","totalPage","perPage","currentParams","consultas","results","Data","selected","Nome","config","caption","loading","loadconsultas","computed","computedparams","selectedroute","selectedparams","param","params","selectParams","pars","nome","value","selectData","res","pagination","PageNumber","PageSize","mounted","methods","consultasfiltered","executaConsulta","console","_executaConsulta","ApiService","then","soma","map","reduce","select","par","catch","watch","gtxconsultasData"],"sourceRoot":"src/pages/consulta/components","sources":["TabsConsultas.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <!-- <b-button variant=\"primary\" @click=\"buscaConsultas\">Busca consultas</b-button> -->\r\n        \r\n        <b-card no-body>\r\n            <b-tabs content-class=\"mt-3\" v-model=\"tabIndex\" justified>\r\n                <b-tab title=\"Consultas\" active>\r\n                    <b-row class=\"m-2\">\r\n                        <b-col>\r\n                            <b-input-group>\r\n                                <b-input-group-prepend is-text>\r\n                                    <b-icon icon=\"search\"></b-icon>\r\n                                </b-input-group-prepend>\r\n                                <b-form-input v-model=\"filtro\" placeholder=\"Localizar consulta\"></b-form-input>\r\n                            </b-input-group>\r\n                        </b-col>\r\n                    </b-row>\r\n                    <b-row class=\"m-2\">\r\n                        <b-col>\r\n                            <b-list-group>\r\n                                <!-- <b-overlay :show=\"loadconsultas\"> -->\r\n                                <b-skeleton-wrapper :loading=\"loadconsultas\">\r\n                                    <template #loading>\r\n                                        <b-list-group-item v-for=\"i of [85,76,89]\" :key=\"i\">\r\n                                            <b-skeleton :width=\"`${i}%`\"></b-skeleton>\r\n                                        </b-list-group-item>\r\n                                    </template>\r\n                                    <b-list-group-item\r\n                                        button\r\n                                        v-for=\"(item, i) of consultasfiltered(filtro)\" :key=\"i\"\r\n                                        @click=\"select(item)\"\r\n                                    >\r\n                                        {{item.config.caption || item.Nome}}\r\n                                    </b-list-group-item>\r\n                                <!-- </b-overlay> -->\r\n                                </b-skeleton-wrapper>\r\n                            </b-list-group>                        \r\n                        </b-col>\r\n                    </b-row>\r\n                    <!-- <b-button v-b-toggle=\"`collapse-${consultas.id}`\" variant=\"primary\" block class=\"mt-2\">Show JSON consultas</b-button>\r\n                    <b-collapse :id=\"`collapse-${consultas.id}`\">\r\n                        <pre>\r\n                            {{ consultas }}\r\n                        </pre>\r\n                    </b-collapse> -->\r\n                </b-tab>\r\n                <b-tab title=\"Parametros\">\r\n\r\n                    <b-row class=\"m-2\">\r\n                        <b-col cols=\"12\" md=\"4\" sm=\"6\" v-for=\"(par, i) of params\" :key=\"i\">\r\n                            <!-- <label :for=\"`par${i}`\">{{ par.caption }}</label> -->\r\n                            <b-form-group :label=\"par.caption\">\r\n                            <b-form-input :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='number'\" type=\"number\" :min=\"par.min || 0\" :max=\"par.max || 0\">{{ par.tipo }}</b-form-input>\r\n                            <b-form-input :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='string'\" type=\"text\">{{ par.tipo }}</b-form-input>\r\n                            <b-form-select :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='select' && !par.api\" :options=\"par.data\"></b-form-select>\r\n                            <b-form-select :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='select' && par.api\" :options=\"par.data\"></b-form-select>\r\n                            <b-form-select :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='multiple' && par.api\" :options=\"par.data\"></b-form-select>\r\n                            </b-form-group>\r\n                        </b-col>\r\n                    </b-row>\r\n                    <b-row align-h=\"end\" class=\"m-2\">\r\n                        <b-col>\r\n                            <b-button variant=\"success\" @click=\"executaConsulta\" class=\"float-right\">Consultar</b-button>\r\n                        </b-col>\r\n                    </b-row>\r\n                    <!-- <b-button v-b-toggle=\"`collapse-${selected.id}`\" variant=\"primary\" block class=\"mt-2\">Show JSON selected</b-button>\r\n                    <b-collapse :id=\"`collapse-${selected.id}`\">\r\n                        <pre>\r\n                            {{ selected }}\r\n                        </pre>\r\n                    </b-collapse> -->\r\n                </b-tab>\r\n                <b-tab title=\"Resultado\">\r\n                    <b-overlay :show=\"loading>0\" rounded=\"sm\">\r\n\r\n                        <TableEditApi\r\n                            ref=\"result\"\r\n                            :route=\"selectedroute\"\r\n                            :params=\"selectedparams\"\r\n                            :soma=\"[{key: 'valor'}]\"\r\n                            :perPage=\"5\"/>\r\n\r\n                    </b-overlay>\r\n\r\n                    <hr/>\r\n\r\n                    <b-pagination\r\n                        v-model=\"currentPage\"\r\n                        :total-rows=\"totalPage\"\r\n                        :per-page=\"perPage\"\r\n                        align=\"right\">\r\n                    </b-pagination>\r\n                </b-tab>\r\n            </b-tabs>\r\n\r\n        </b-card>\r\n\r\n        <!-- gtxconsultasData: {{gtxconsultasData}}<br/> -->\r\n        gtxconsultasselected: {{gtxconsultasselected}}<br/>\r\n        <!-- gtxconsultasselectedparams: {{gtxconsultasselectedparams}}<br/> -->\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport TableEditApi from '../../../components/TableEditApi'\r\nimport ApiService from '../../../services/api.service'\r\nimport { mapGetters, mapActions } from 'vuex'\r\n\r\nexport default {\r\n\r\n    name: 'TabsConsultas',\r\n\r\n    components: {\r\n\r\n        TableEditApi\r\n\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            filtro: '',\r\n            tabIndex: 0,\r\n            currentPage: 1,\r\n            totalPage: 1,\r\n            perPage: 5,\r\n            currentParams: '',\r\n            consultas: [],\r\n            results: {\r\n                Data: []\r\n            },\r\n            selected: {Nome: 'Consulta não selecionada', config: {caption: 'Consulta não cadastrada'}},\r\n            loading: 0,\r\n            loadconsultas: true\r\n        }\r\n    },\r\n    \r\n    computed: {\r\n\r\n        ...mapGetters(['gtxconsultasData', 'gtxconsultasselected', 'gtxconsultasselectedparams', 'gtxconsultasselectedresult']),\r\n\r\n        computedparams() { return this.params },\r\n\r\n        selectedroute() { return (this.selected.Nome !== 'Consulta não selecionada') ? 'Servicos/CONS_/' + this.selected.Nome : '' },\r\n        \r\n        selectedparams() { \r\n            let param = {}\r\n            if (this.params) \r\n              this.params.map(p => {param = {...param, ...{[p.nome]: p.value}}})\r\n            return param\r\n        },      \r\n\r\n        params() {\r\n            let pars = this.gtxconsultasselectedparams || []\r\n\r\n/*             if ((this.selected) && (this.selected.config))\r\n              pars = this.selected.config.param */\r\n\r\n            return pars\r\n        },\r\n\r\n        selectParams() {\r\n            let pars = []\r\n            if ((this.selected.config) && (this.selected.config.param)) {\r\n                this.selected.config.param.map(par => {\r\n                    // pars.push({[par.nome]: par.value || null})\r\n                    pars.push({nome: par.nome, value: par.value || null})\r\n                })\r\n            }\r\n            return pars\r\n        },\r\n\r\n        selectData(param) {\r\n            let res = null\r\n            if (this.selected && this.selected.config.param && this.selected.config.param.find(p => p.nome = param.nome))\r\n              res = this.selected.config.param.find(p => p.nome = param.nome).data || []\r\n            return res || []\r\n        },\r\n        \r\n        pagination() {\r\n            // return `&PageNumber=${this.currentPage}&PageSize=${this.perPage}`\r\n            return { PageNumber: this.currentPage, PageSize: this.perPage }\r\n        },\r\n\r\n    },\r\n\r\n    mounted() {\r\n\r\n        this.actConsultas()\r\n\r\n    },\r\n\r\n    methods: {\r\n\r\n        ...mapActions(['actConsultas', 'actConsultasSelected']),\r\n\r\n        consultasfiltered(filtro) {\r\n            return this.gtxconsultasData.filter(c => (c.config.caption || c.Nome).toUpperCase().includes(filtro.toUpperCase()))\r\n        },        \r\n\r\n\r\n\r\n        executaConsulta() {\r\n            console.log('executaConsulta')\r\n            this.$refs.result.getFromApi()\r\n            this.tabIndex++\r\n        },\r\n\r\n        _executaConsulta() {\r\n            this.loading = 1\r\n            let route = 'Servicos/CONS_' + this.selected.Nome\r\n            // let param = null\r\n            //this.currentParams = ''\r\n            this.currentParams = {}\r\n            this.selectParams.map(par => {\r\n                this.currentParams = {...this.currentParams, ...{[par.nome]: par.value || null}}\r\n                // this.currentParams += '&' + par.nome + '=' + (par.value || 'null')\r\n                // console.log(par)\r\n            })\r\n            // this.currentParams = this.currentParams.substr(1)\r\n            console.log('route:', route)\r\n            console.log('param:', this.currentParams)\r\n            console.log('pagination:', this.pagination)\r\n            this.currentParams = {...this.currentParams, ...this.pagination}\r\n\r\n            ApiService.get(route, { params: this.currentParams })\r\n                .then(res => {\r\n                    this.results = res.data\r\n                    this.totalPage = (res.data.Paginas.PageCount * res.data.Paginas.PageSize)\r\n                    this.perPage = res.data.Paginas.PageSize\r\n                    this.loading = 0\r\n                })\r\n\r\n            this.tabIndex = 2\r\n        }, // executaConsulta()\r\n\r\n        soma(fld) {\r\n            console.log(fld)\r\n            let soma = '';\r\n            if (this.selected.config && this.selected.config.soma) {\r\n                this.selected.config.soma.map(s => {\r\n                    if (fld.column.toUpperCase() ==  s.nome.toUpperCase()) {\r\n                        console.log(s)\r\n                        soma = (this.results.Data\r\n                                .map(f => f[fld.column])\r\n                                .reduce((a,b) => parseFloat(a)+parseFloat(b))).toFixed(2)\r\n                    }\r\n                })\r\n            }\r\n            return soma;\r\n        },\r\n\r\n        select(item) {\r\n            this.loading = 0\r\n            this.actConsultasSelected(item.id) // posiciona na store a consulta selecionada ...\r\n            this.selected = this.consultas.find(f => f.Nome == item.Nome)\r\n            // emite a consulta ...\r\n            this.$emit('onConsultaSelected', this.selected)\r\n\r\n/*             if ((this.selected.config) && (this.selected.config.param)) {\r\n                this.selected.config.param.map(par => {\r\n                    if (par.api) {\r\n                        // se o parametro não tem o campo data vazio ele precisa esperar o retorno da api para criar e renderizar na tela\r\n                        // então é usado esse contador para só abrir a aba dos parametros depois de ter o campo data para poder carregar na tela\r\n                        if (!par.data || par.data.length==0) {\r\n                            this.loading++\r\n                            this.apiGet(par).then(() => {\r\n                                if (this.loading>0) this.loading--\r\n                                // console.log('apiGet::go=', this.loading)\r\n                                if (this.loading==0) this.tabIndex = 1\r\n                            })\r\n                        }\r\n                    }\r\n                })\r\n            } */\r\n\r\n            if (!this.tabIndex==1 && this.loading==0) this.tabIndex = 1\r\n        }, // select(item)\r\n\r\n        async apiGet(par) {\r\n\r\n            ApiService.setAuthHeader()\r\n            \r\n            await ApiService.get(par.api)\r\n                .then(res => {\r\n                    par.data = res.data.Data\r\n                })\r\n                .catch (error => {\r\n                    console.error(error.message)\r\n                    throw new Error(`[ApiService] ${error}`)\r\n                })\r\n        }\r\n\r\n    }, // async apiGet(par)\r\n\r\n    watch: {\r\n\r\n        gtxconsultasData() {\r\n            this.consultas = this.gtxconsultasData\r\n            this.loadconsultas = false\r\n        }\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .col-form-label {\r\n      padding-bottom: 0;\r\n  }\r\n\r\n</style>"]}]}