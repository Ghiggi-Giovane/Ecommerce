{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\arquivosdirectory\\views\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\arquivosdirectory\\views\\index.vue","mtime":1670977910602},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgQVBJIGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2FwaS5zZXJ2aWNlIjsKaW1wb3J0IERhc2hjYXJkIGZyb20gIi4uLy4uLy4uL2NvbXBvbmVudHMvRGFzaGNhcmQudnVlIjsKaW1wb3J0IENhcmRDb2xsYXBzZWQgZnJvbSAiQC9jb21wb25lbnRzL0NhcmRDb2xsYXBzZWQudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBcnF1aXZvc0RpcmVjdG9yeSIsCiAgY29tcG9uZW50czogewogICAgRGFzaGNhcmQsCiAgICBDYXJkQ29sbGFwc2VkCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbGxhcHNlZm9ybW9wZW46IGZhbHNlLAogICAgICBkYXRhYmFzZTogbmV3IERhdGUoKSwKICAgICAgaWRhY2FvOiAyLAogICAgICAvLyBGVFAgUFJPTU9CCiAgICAgIGZpbGVuYW1lOiAiIiwKICAgICAgZXJybzogW3RydWUsIGZhbHNlLCBudWxsLCAiYWxsIl0sCiAgICAgIGFjb2VzOiBbewogICAgICAgIHZhbHVlOiA3LAogICAgICAgIHRleHQ6ICJXb3JrZXIgQldQWCIKICAgICAgfSwgewogICAgICAgIHZhbHVlOiA1LAogICAgICAgIHRleHQ6ICJXb3JrZXIgSW52YWxpZFByb2plY3RzUmVwb3NpdG9yeSIKICAgICAgfSwgewogICAgICAgIHZhbHVlOiA0LAogICAgICAgIHRleHQ6ICJXb3JrZXIgU3VjY2Vzc1Byb2plY3RzUmVwb3NpdG9yeSIKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAzLAogICAgICAgIHRleHQ6ICJXb3JrZXIgUHJvbW9iIgogICAgICB9LCB7CiAgICAgICAgdmFsdWU6IDIsCiAgICAgICAgdGV4dDogIkZUUCBQcm9tb2IiCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogMSwKICAgICAgICB0ZXh0OiAiU0VSQVNBIFJFTEFUTyAtIENPTkNJTElBQ0FPIgogICAgICB9XSwKICAgICAgYXJxdWl2b3M6IHsKICAgICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgICBwZXJQYWdlOiAyMCwKICAgICAgICBmaWx0ZXI6ICIiLAogICAgICAgIGZpbHRlck9uOiBbIkFjYW8iLCAiTm9tZUFycXVpdm8iLCAiUmV0b3JubyJdLAogICAgICAgIGZpZWxkczogWyJpZCIsIHsKICAgICAgICAgIGtleTogIkFjb2VzIiwKICAgICAgICAgIGxhYmVsOiAiQcOnw7VlcyIKICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICJEYXRhTGVpdHVyYSIsCiAgICAgICAgICBsYWJlbDogIkRhdGEiCiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAiTm9tZUFycXVpdm8iLAogICAgICAgICAgbGFiZWw6ICJBcnF1aXZvIgogICAgICAgIH0sICJSZXRvcm5vIiwgewogICAgICAgICAga2V5OiAiYnV0dG9ucyIsCiAgICAgICAgICBsYWJlbDogIiIKICAgICAgICB9XSwKICAgICAgICBkYXRhOiBbXSwKICAgICAgICB4bWw6IFtdCiAgICAgIH0KICAgIH07CiAgfSwKCiAgYXN5bmMgYmVmb3JlTW91bnQoKSB7CiAgICAvLyBjb25zdCBpZENvbGxlY3Rpb24gPSAnaG9ybGxlJzsKICAgIC8vIGNvbnN0IGlkRG9jdW1lbnQgPSB7aWQ6IHRoaXMuJHJvdXRlLnBhdGguc3Vic3RyKDEpfTsKICAgIC8vIGF3YWl0IEFQSS5nZXRMb2NhbERCRG9jdW1lbnQoKQogICAgLy8gICAudGhlbigoZG9jKSA9PiB7CiAgICAvLyAgICAgaWYgKGRvYykgewogICAgLy8gICAgICAgLy8gdGhpcy5kYXRhREIgPSBkb2MuZGF0YTsKICAgIC8vICAgICB9ICAgICAgICAKICAgIC8vICAgfSkKICAgIHRoaXMuYXJxdWl2b3NHZXQoKTsKICB9LAoKICBjb21wdXRlZDogeyAuLi5tYXBHZXR0ZXJzKFsiZ3R4Q29uZmlnRGF0ZXRpbWVQaWNrZXJGb3JtYXQiXSksCiAgICBkYXRhREI6IHsKICAgICAgZ2V0KCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBkYXRhYmFzZTogdGhpcy5kYXRhYmFzZSwKICAgICAgICAgIGlkYWNhbzogdGhpcy5pZGFjYW8sCiAgICAgICAgICBmaWxlbmFtZTogdGhpcy5maWxlbmFtZSwKICAgICAgICAgIGFycXVpdm9zOiB7CiAgICAgICAgICAgIGZpbHRlcjogdGhpcy5maWx0ZXIKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9LAoKICAgICAgc2V0KHZhbHVlKSB7CiAgICAgICAgdGhpcy5kYXRhYmFzZSA9IHZhbHVlLmRhdGFiYXNlOwogICAgICAgIHRoaXMuaWRhY2FvID0gdmFsdWUuaWRhY2FvOwogICAgICAgIHRoaXMuZmlsZW5hbWUgPSB2YWx1ZS5maWxlbmFtZTsKICAgICAgICB0aGlzLmFycXVpdm9zLmZpbHRlciA9IHZhbHVlLmZpbHRlcjsKICAgICAgfQoKICAgIH0sCgogICAgcGFyYW1zKCkgewogICAgICByZXR1cm4gewogICAgICAgIGRhdGFiYXNlOiB0aGlzLmRhdGFiYXNlLAogICAgICAgIGlkYWNhbzogdGhpcy5pZGFjYW8sCiAgICAgICAgZmlsZW5hbWU6IHRoaXMuZmlsZW5hbWUKICAgICAgfTsKICAgIH0sCgogICAgYXJxdWl2b3NmaWx0ZXJlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXJxdWl2b3MuZGF0YS5maWx0ZXIoZiA9PiB0aGlzLmVycm8uaW5jbHVkZXMoZi5FcnJvKSB8fCB0aGlzLmVycm8gPT0gImFsbCIpOwogICAgfSwKCiAgICBucm9kYW5nZXJzKCkgewogICAgICByZXR1cm4gdGhpcy5hcnF1aXZvcy5kYXRhLmZpbHRlcihmID0+IGYuRXJybykubGVuZ3RoLnRvU3RyaW5nKCk7CiAgICB9LAoKICAgIG5yb3N1Y2Nlc3MoKSB7CiAgICAgIHJldHVybiB0aGlzLmFycXVpdm9zLmRhdGEuZmlsdGVyKGYgPT4gZi5FcnJvICE9PSBudWxsICYmICFmLkVycm8pLmxlbmd0aC50b1N0cmluZygpOwogICAgfSwKCiAgICBucm93YXJuaW5ncygpIHsKICAgICAgcmV0dXJuIHRoaXMuYXJxdWl2b3MuZGF0YS5maWx0ZXIoZiA9PiBmLkVycm8gPT0gbnVsbCkubGVuZ3RoLnRvU3RyaW5nKCk7CiAgICB9LAoKICAgIG5yb2luZm8oKSB7CiAgICAgIHJldHVybiB0aGlzLmFycXVpdm9zLmRhdGEubGVuZ3RoLnRvU3RyaW5nKCk7CiAgICB9CgogIH0sCiAgbWV0aG9kczogewogICAgcm93Q2xhc3MoaXRlbSwgdHlwZSkgewogICAgICBpZiAoIWl0ZW0gfHwgdHlwZSAhPT0gInJvdyIpIHJldHVybjsKICAgICAgaWYgKGl0ZW0uRXJybyA9PSBudWxsKSByZXR1cm4gInRhYmxlLXdhcm5pbmciOwogICAgICByZXR1cm4gaXRlbS5FcnJvID8gInRhYmxlLWRhbmdlciIgOiAidGFibGUtc3VjY2VzcyI7CiAgICB9LAoKICAgIGRhc2hjYXJkZm9vdGVyY2xpY2soZm9vdGVyc3RhdGUsIHZhbHVlKSB7CiAgICAgIGNvbnN0IGkgPSB0aGlzLmVycm8uZmluZEluZGV4KGYgPT4gZiA9PSB2YWx1ZSk7CgogICAgICBpZiAoZm9vdGVyc3RhdGUpIHsKICAgICAgICBpZiAoaSA9PSAtMSkgewogICAgICAgICAgdGhpcy5lcnJvLnB1c2godmFsdWUpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoaSA+IC0xKSB7CiAgICAgICAgICB0aGlzLmVycm8uc3BsaWNlKGksIDEpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBhcnF1aXZvc0dldCgpIHsKICAgICAgQVBJLmdldCgidjIvU2Vydmljb3MvQXJxdWl2b3NEaXJlY3RvcnkvR2V0IiwgdGhpcy5wYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmRhdGEuU3VjY2VzcykgewogICAgICAgICAgdGhpcy5hcnF1aXZvcy5kYXRhID0gcmVzLmRhdGEuRGF0YTsKICAgICAgICAgIHRoaXMuY29sbGFwc2Vmb3Jtb3BlbiA9IGZhbHNlOyAvLyBzYWx2YSBubyBsb2NhbERCCiAgICAgICAgICAvLyBjb25zdCBpZENvbGxlY3Rpb24gPSAnaG9ybGxlJzsKCiAgICAgICAgICBjb25zdCBsb2NhbHJvdXRlID0gdGhpcy4kcm91dGUucGF0aC5zdWJzdHIoMSk7CiAgICAgICAgICBjb25zdCBsb2NhbGRhdGEgPSB7CiAgICAgICAgICAgIGlkOiBsb2NhbHJvdXRlLAogICAgICAgICAgICBkYXRhOiB0aGlzLmRhdGFEQgogICAgICAgICAgfTsgLy8gQVBJLnNldExvY2FsREJEb2N1bWVudCh0aGlzLmRhdGFEQik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYXJxdWl2b3MuZGF0YSA9IFtdOwogICAgICAgICAgdGhpcy5jb2xsYXBzZWZvcm1vcGVuID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBhcnF1aXZvc09wZW4oaXRlbSkgewogICAgICB0aGlzLiRyb290LnNob3dtZXNzYWdlKCdDb25maXJtZSBhIGV4Y2x1c8OjbyBkZXN0ZSBoaXN0w7NyaWNvPycsICdFeGNsdWlyIHJlZ2lzdHJvJykudGhlbihjaG9pY2UgPT4gewogICAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICAgIGlkWE1MSW1wb3J0OiBpdGVtLmlkWE1MSW1wb3J0UHJvbW9iCiAgICAgICAgfTsKICAgICAgICBBUEkuZ2V0KCJ2Mi9TZXJ2aWNvcy9BcnF1aXZvc0RpcmVjdG9yeS9CdWlsZGVyWE1MR2V0IiwgcGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLmRhdGEuU3VjY2VzcykgewogICAgICAgICAgICB0aGlzLmFycXVpdm9zLnhtbCA9IHJlcy5kYXRhLkRhdGE7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmFycXVpdm9zLnhtbCA9IFtdOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCgogICAgaGlzdG9yeURlbChpdGVtKSB7CiAgICAgIGNvbnN0IGJvZHkgPSB7CiAgICAgICAgaWRIaXN0b3J5OiBpdGVtLmlkSGlzdG9yeQogICAgICB9OwogICAgICBBUEkucG9zdCgidjIvU2Vydmljb3MvQXJxdWl2b3NEaXJlY3RvcnkvRmluYWxpZGFkZXNIaXN0b3J5RGVsIiwgYm9keSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuZGF0YS5TdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLiRyb290LnRvYXN0c3VjY2VzcyhyZXMuZGF0YS5EYXRhLk1lbnNhZ2VtKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kcm9vdC50b2FzdGRhbmdlcihyZXMuZGF0YS5EYXRhLk1lbnNhZ2VtKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuJA;AACA;AACA;AACA;AAEA;EACAA,yBADA;EAGAC;IACAC,QADA;IAEAC;EAFA,CAHA;;EAQAC;IACA;MACAC,uBADA;MAEAC,oBAFA;MAGAC,SAHA;MAGA;MACAC,YAJA;MAKAC,gCALA;MAMAC,QACA;QAAAC;QAAAC;MAAA,CADA,EAEA;QAAAD;QAAAC;MAAA,CAFA,EAGA;QAAAD;QAAAC;MAAA,CAHA,EAIA;QAAAD;QAAAC;MAAA,CAJA,EAKA;QAAAD;QAAAC;MAAA,CALA,EAMA;QAAAD;QAAAC;MAAA,CANA,CANA;MAcAC;QACAC,cADA;QAEAC,WAFA;QAGAC,UAHA;QAIAC,4CAJA;QAKAC,SACA,IADA,EAEA;UAAAC;UAAAC;QAAA,CAFA,EAGA;UAAAD;UAAAC;QAAA,CAHA,EAIA;UAAAD;UAAAC;QAAA,CAJA,EAKA,SALA,EAMA;UAAAD;UAAAC;QAAA,CANA,CALA;QAaAhB,QAbA;QAcAiB;MAdA;IAdA;EA+BA,CAxCA;;EA0CA;IAEA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IAEA;EAEA,CAxDA;;EA0DAC,YACA,gDADA;IAEAC;MACAC;QACA;UACAlB,uBADA;UAEAC,mBAFA;UAGAC,uBAHA;UAIAK;YACAG;UADA;QAJA;MAQA,CAVA;;MAWAS;QACA;QACA;QACA;QACA;MACA;;IAhBA,CAFA;;IAoBAC;MACA;QACApB,uBADA;QAEAC,mBAFA;QAGAC;MAHA;IAKA,CA1BA;;IA2BAmB;MACA,iCACAC,qDADA;IAGA,CA/BA;;IAgCAC;MACA;IACA,CAlCA;;IAmCAC;MACA,0BACAd,MADA,CACAY,+BADA,EAEAG,MAFA,CAEAC,QAFA;IAGA,CAvCA;;IAwCAC;MACA;IACA,CA1CA;;IA2CAC;MACA;IACA;;EA7CA,CA1DA;EA0GAC;IACAC;MACA;MACA;MACA;IACA,CALA;;IAMAC;MACA;;MACA;QACA;UACA;QACA;MACA,CAJA,MAIA;QACA;UACA;QACA;MACA;IACA,CAjBA;;IAkBAC;MACAC;QACA;UACA;UACA,8BAFA,CAGA;UACA;;UACA;UACA;YAAAC;YAAApC;UAAA,EANA,CAQA;QAEA,CAVA,MAUA;UACA;UACA;QACA;MACA,CAfA;IAgBA,CAnCA;;IAoCAqC;MACA,mFACAC,IADA,CACAC;QACA;UACAC;QADA;QAGAL,oEACAM;UACA;YACA;UACA,CAFA,MAEA;YACA;UACA;QACA,CAPA;MASA,CAdA;IAeA,CApDA;;IAqDAC;MACA;QACAC;MADA;MAGAR,2EACAM;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CAPA;IASA;;EAlEA;AA1GA","names":["name","components","Dashcard","CardCollapsed","data","collapseformopen","database","idacao","filename","erro","acoes","value","text","arquivos","currentPage","perPage","filter","filterOn","fields","key","label","xml","computed","dataDB","get","set","params","arquivosfiltered","f","nrodangers","nrosuccess","length","toString","nrowarnings","nroinfo","methods","rowClass","dashcardfooterclick","arquivosGet","API","id","arquivosOpen","then","choice","idXMLImport","res","historyDel","idHistory"],"sourceRoot":"src/pages/arquivosdirectory/views","sources":["index.vue"],"sourcesContent":["<template>\r\n  <CardCollapsed ref=\"CardCollapsed\" v-model=\"collapseformopen\" title=\"Pedidos\" @evtBusca=\"arquivosGet\">\r\n    <template #collapsedform>\r\n    <div>\r\n      <label for=\"form-dataleitura\">Data de Leitura</label>\r\n      <b-form-datepicker\r\n        id=\"form-dataleitura\"\r\n        v-model=\"database\"\r\n        class=\"mb-2\"\r\n        locale=\"pt\"\r\n        :date-format-options=\"gtxConfigDatetimePickerFormat\"\r\n      ></b-form-datepicker>\r\n    </div>\r\n    <div>\r\n      <label for=\"form-idacao\">Processo</label>\r\n      <b-form-select\r\n        id=\"form-idacao\"\r\n        v-model=\"idacao\"\r\n        :options=\"acoes\"\r\n      ></b-form-select>\r\n    </div>\r\n    <div>\r\n      <label for=\"form-filename\">Nome do Arquivo</label>\r\n      <b-form-input id=\"form-filename\" v-model=\"filename\"></b-form-input>\r\n    </div>\r\n    <div class=\"mt-2 text-right\">\r\n      <b-button-group>\r\n        <b-button variant=\"primary\" @click=\"arquivosGet\">\r\n          <b-icon-search class=\"mr-1\"/>\r\n          Buscar\r\n        </b-button>\r\n      </b-button-group>\r\n    </div>\r\n  </template>\r\n\r\n  <template #collapsedbody>\r\n    <div>\r\n      <b-row>\r\n        <b-col>\r\n          <Dashcard\r\n            :value=\"nrodangers\"\r\n            details=\"Com erros\"\r\n            icon=\"bug\"\r\n            css=\"bg-danger-light\"\r\n            textlink=\"Filtrar com erros\"\r\n            @evt_footerclick=\"dashcardfooterclick($event, true)\"\r\n          />\r\n        </b-col>\r\n        <b-col>\r\n          <Dashcard\r\n            :value=\"nrosuccess\"\r\n            details=\"Processados\"\r\n            icon=\"check2\"\r\n            css=\"bg-success-light\"\r\n            textlink=\"Filtrar com sucesso\"\r\n            @evt_footerclick=\"dashcardfooterclick($event, false)\"\r\n          />\r\n        </b-col>\r\n        <b-col>\r\n          <Dashcard\r\n            :value=\"nrowarnings\"\r\n            details=\"Não processados\"\r\n            icon=\"slash-circle\"\r\n            css=\"bg-warning-light\"\r\n            textlink=\"Filtrar não processados\"\r\n            @evt_footerclick=\"dashcardfooterclick($event, null)\"\r\n          />\r\n        </b-col>\r\n        <b-col>\r\n          <Dashcard\r\n            :value=\"nroinfo\"\r\n            details=\"Todos os arquivos\"\r\n            icon=\"check2-all\"\r\n            css=\"bg-info-light\"\r\n            textlink=\"Todos\"\r\n            @evt_footerclick=\"dashcardfooterclick($event, 'all')\"\r\n          />\r\n        </b-col>\r\n      </b-row>\r\n    </div>\r\n\r\n    <div>\r\n      <div class=\"d-flex\">\r\n        <b-input-group prepend=\"Filtro\" size=\"sm\" class=\"mb-2 mr-2\">\r\n          <b-form-input\r\n            id=\"input-filtro\"\r\n            type=\"search\"\r\n            v-model=\"arquivos.filtro\"\r\n            placeholder=\"Informe o nome do arquivo\"\r\n          ></b-form-input>\r\n        </b-input-group>\r\n\r\n        <b-pagination\r\n          id=\"input-pagination\"\r\n          v-model=\"arquivos.currentPage\"\r\n          :total-rows=\"arquivos.data.length\"\r\n          :per-page=\"arquivos.perPage\"\r\n          size=\"sm\"\r\n          class=\"my-0\"\r\n        >\r\n        </b-pagination>\r\n      </div>\r\n\r\n      <b-table\r\n        small\r\n        hover\r\n        responsive\r\n        striped\r\n        bordered\r\n        head-variant=\"dark\"\r\n        :current-page=\"arquivos.currentPage\"\r\n        :per-page=\"arquivos.perPage\"\r\n        :filter=\"arquivos.filtro\"\r\n        :filter-included-fields=\"arquivos.filterOn\"\r\n        :fields=\"arquivos.fields\"\r\n        :items=\"arquivosfiltered\"\r\n        :tbody-tr-class=\"rowClass\"\r\n      >\r\n        <template #cell(DataLeitura)=\"data\">\r\n          {{ data.item.DataLeitura | datetime }}\r\n        </template>\r\n        <template #cell(id)=\"data\">\r\n          <span  v-copy>{{ data.item.id }}</span>\r\n        </template>\r\n        <template #cell(buttons)=\"data\">\r\n          <span class=\"spaced iconbutton\" @click=\"arquivosOpen(data.item)\">\r\n            <b-icon-file-earmark-text />\r\n          </span>\r\n          <span class=\"spaced iconbutton\" @click=\"historyDel(data.item)\">\r\n            <b-icon-trash />\r\n          </span>\r\n        </template>\r\n      </b-table>\r\n\r\n      <div class=\"d-flex float-right\">\r\n        <b-pagination\r\n          id=\"input-pagination\"\r\n          v-model=\"arquivos.currentPage\"\r\n          :total-rows=\"arquivos.data.length\"\r\n          :per-page=\"arquivos.perPage\"\r\n          size=\"sm\"\r\n          class=\"my-0\"\r\n        >\r\n        </b-pagination>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  </CardCollapsed>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport API from \"../../../services/api.service\";\r\nimport Dashcard from \"../../../components/Dashcard.vue\";\r\nimport CardCollapsed from \"@/components/CardCollapsed.vue\";\r\n\r\nexport default {\r\n  name: \"ArquivosDirectory\",\r\n\r\n  components: {\r\n    Dashcard,\r\n    CardCollapsed,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      collapseformopen: false,\r\n      database: new Date(),\r\n      idacao: 2, // FTP PROMOB\r\n      filename: \"\",\r\n      erro: [true, false, null, \"all\"],\r\n      acoes: [\r\n        { value: 7, text: \"Worker BWPX\" },\r\n        { value: 5, text: \"Worker InvalidProjectsRepository\" },\r\n        { value: 4, text: \"Worker SuccessProjectsRepository\" },\r\n        { value: 3, text: \"Worker Promob\" },\r\n        { value: 2, text: \"FTP Promob\" },\r\n        { value: 1, text: \"SERASA RELATO - CONCILIACAO\" },\r\n      ],\r\n      arquivos: {\r\n        currentPage: 1,\r\n        perPage: 20,\r\n        filter: \"\",\r\n        filterOn: [\"Acao\", \"NomeArquivo\", \"Retorno\"],\r\n        fields: [\r\n          \"id\",\r\n          { key: \"Acoes\", label: \"Ações\" },\r\n          { key: \"DataLeitura\", label: \"Data\" },\r\n          { key: \"NomeArquivo\", label: \"Arquivo\" },\r\n          \"Retorno\",\r\n          { key: \"buttons\", label: \"\" },\r\n        ],\r\n        data: [],\r\n        xml: [],\r\n      },\r\n    };\r\n  },\r\n\r\n  async beforeMount() {\r\n\r\n    // const idCollection = 'horlle';\r\n    // const idDocument = {id: this.$route.path.substr(1)};\r\n\r\n    // await API.getLocalDBDocument()\r\n    //   .then((doc) => {\r\n    //     if (doc) {\r\n    //       // this.dataDB = doc.data;\r\n    //     }        \r\n    //   })\r\n\r\n    this.arquivosGet();\r\n  \r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"gtxConfigDatetimePickerFormat\"]),\r\n    dataDB: {\r\n      get() {\r\n        return {\r\n          database: this.database,\r\n          idacao: this.idacao,\r\n          filename: this.filename,\r\n          arquivos: {\r\n            filter: this.filter,\r\n          }\r\n        }\r\n      },\r\n      set(value) {\r\n        this.database = value.database;\r\n        this.idacao = value.idacao;\r\n        this.filename = value.filename;\r\n        this.arquivos.filter = value.filter;\r\n      }\r\n    },\r\n    params() {\r\n      return {\r\n        database: this.database,\r\n        idacao: this.idacao,\r\n        filename: this.filename,\r\n      };\r\n    },\r\n    arquivosfiltered() {\r\n      return this.arquivos.data.filter(\r\n        (f) => this.erro.includes(f.Erro) || this.erro == \"all\"\r\n      );\r\n    },\r\n    nrodangers() {\r\n      return this.arquivos.data.filter((f) => f.Erro).length.toString();\r\n    },\r\n    nrosuccess() {\r\n      return this.arquivos.data\r\n        .filter((f) => f.Erro !== null && !f.Erro)\r\n        .length.toString();\r\n    },\r\n    nrowarnings() {\r\n      return this.arquivos.data.filter((f) => f.Erro == null).length.toString();\r\n    },\r\n    nroinfo() {\r\n      return this.arquivos.data.length.toString();\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    rowClass(item, type) {\r\n      if (!item || type !== \"row\") return;\r\n      if (item.Erro == null) return \"table-warning\";\r\n      return item.Erro ? \"table-danger\" : \"table-success\";\r\n    },\r\n    dashcardfooterclick(footerstate, value) {\r\n      const i = this.erro.findIndex((f) => f == value);\r\n      if (footerstate) {\r\n        if (i == -1) {\r\n          this.erro.push(value);\r\n        }\r\n      } else {\r\n        if (i > -1) {\r\n          this.erro.splice(i, 1);\r\n        }\r\n      }\r\n    },\r\n    arquivosGet() {\r\n      API.get(\"v2/Servicos/ArquivosDirectory/Get\", this.params).then((res) => {\r\n        if (res.data.Success) {\r\n          this.arquivos.data = res.data.Data;\r\n          this.collapseformopen = false;\r\n          // salva no localDB\r\n          // const idCollection = 'horlle';\r\n          const localroute = this.$route.path.substr(1);\r\n          const localdata = {id: localroute, data: this.dataDB};\r\n\r\n          // API.setLocalDBDocument(this.dataDB);\r\n\r\n        } else {\r\n          this.arquivos.data = [];\r\n          this.collapseformopen = true;\r\n        }\r\n      });\r\n    },\r\n    arquivosOpen(item) {\r\n      this.$root.showmessage('Confirme a exclusão deste histórico?', 'Excluir registro')\r\n        .then(choice => {\r\n          const params = {\r\n            idXMLImport: item.idXMLImportPromob,\r\n          };\r\n          API.get(\"v2/Servicos/ArquivosDirectory/BuilderXMLGet\", params).then(\r\n            (res) => {\r\n              if (res.data.Success) {\r\n                this.arquivos.xml = res.data.Data;\r\n              } else {\r\n                this.arquivos.xml = [];\r\n              }\r\n            }\r\n          );\r\n        })\r\n    },\r\n    historyDel(item) {\r\n      const body = {\r\n        idHistory: item.idHistory,\r\n      };\r\n      API.post(\"v2/Servicos/ArquivosDirectory/FinalidadesHistoryDel\", body).then(\r\n        (res) => {\r\n          if (res.data.Success) {\r\n            this.$root.toastsuccess(res.data.Data.Mensagem);\r\n          } else {\r\n            this.$root.toastdanger(res.data.Data.Mensagem);\r\n          }\r\n        }\r\n      );\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}