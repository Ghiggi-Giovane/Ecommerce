{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\funcionarios\\views\\CartaoPonto.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\funcionarios\\views\\CartaoPonto.vue","mtime":1701906516488},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IG1lc2VzIGZyb20gIi4uLy4uLy4uL2Fzc2V0cy9qc29uL21lc2VzLmpzb24iOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNhcnRhb1BvbnRvIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVhZHk6IGZhbHNlLAogICAgICBtZXNlczogbWVzZXMsCiAgICAgIGFubzogMjAyMSwKICAgICAgbWVzOiAxMiwKICAgICAgZmllbGRzOiBbImRpYSIsICJyZWdpc3Ryb3MiLCAiaG9yYXMiXQogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmFubyA9IHRoaXMuc3lzZGF0ZS55ZWFyOwogICAgdGhpcy5tZXMgPSB0aGlzLnN5c2RhdGUubW9udGg7CiAgICB0aGlzLnJlYWR5ID0gdHJ1ZTsKICAgIC8qDQogICAgaWYgKHRoaXMuc3lzZGF0ZS5kYXkgPiAyMCkgew0KICAgICAgdGhpcy5tZXMrKzsNCiAgICAgIGlmICh0aGlzLm1lcyA+IDEyKSB7DQogICAgICAgIHRoaXMuYW5vKys7DQogICAgICAgIHRoaXMubWVzID0gMTsNCiAgICAgIH0NCiAgICB9DQogICAgKi8KICB9LAoKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbImd0eGNhcnRhb3BvbnRvRGF0YSIsICJzeXNkYXRlIl0pLAogICAgcG9udG8oKSB7CiAgICAgIHJldHVybiB0aGlzLmd0eGNhcnRhb3BvbnRvRGF0YS5tYXAoYyA9PiAoewogICAgICAgIC4uLmMsCiAgICAgICAgX3Jvd1ZhcmlhbnQ6IGMuZGlhc3V0ZWlzID09IDEgJiYgYy5pbnZhbGlkbyA9PSAxID8gJ2RhbmdlcicgOiBjLmZlcmlhcyA9PSAxID8gJ3N1Y2Nlc3MnIDogYy5mZXJpYWRvID09IDEgPyAnaW5mbycgOiBjLmRpYXN1dGVpcyA9PSAwID8gJ3NlY29uZGFyeScgOiAnJwogICAgICB9KSk7CiAgICB9LAogICAgcGFyYW1idXNjYSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBhbm86IHRoaXMuYW5vLAogICAgICAgIG1lczogdGhpcy5tZXMKICAgICAgfTsKICAgIH0sCiAgICBtZXNlc3JlZHV6aWRvKCkgewogICAgICByZXR1cm4gdGhpcy5tZXNlcy5tYXAobSA9PiBtLnRleHQuc3Vic3RyKDAsIDMpKTsKICAgIH0sCiAgICB0b3RhbGhvcmFzKCkgewogICAgICByZXR1cm4gdGhpcy5wb250by5yZWR1Y2UoKGEsIGIpID0+IHBhcnNlRmxvYXQoYSkgKyBwYXJzZUZsb2F0KGIuaG9yYXMpLCAwKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWyJhY3RjYXJ0YW9wb250b2J1c2NhciJdKSwKICAgIG1lc2NsaWNrKG1lcykgewogICAgICB0aGlzLm1lcyA9IG1lczsKICAgIH0sCiAgICBidG5tZXMobWVzKSB7CiAgICAgIHJldHVybiBtZXMgPT0gdGhpcy5tZXMgLSAxID8gImJnLXByaW1hcnkiIDogIiI7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgcGFyYW1idXNjYShwYXJhbSkgewogICAgICBpZiAodGhpcy5yZWFkeSkgdGhpcy5hY3RjYXJ0YW9wb250b2J1c2NhcihwYXJhbSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;EACAA;EAEAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACA;IACA;IACA;IACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA;;EAEAC;IACA;IACAC;MACA;QAAA;QAAAC;MAAA;IACA;IACAC;MACA;QACAP;QACAC;MACA;IACA;IACAO;MACA;IACA;IACAC;MACA,yBACA,+CACA,EACA;IACA;EACA;EAEAC;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;EAEAC;IACAN;MACA;IACA;EACA;AACA","names":["name","data","ready","meses","ano","mes","fields","mounted","computed","ponto","_rowVariant","parambusca","mesesreduzido","totalhoras","methods","mesclick","btnmes","watch"],"sourceRoot":"src/pages/funcionarios/views","sources":["CartaoPonto.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mt-2\">\r\n    <b-card>\r\n      <template #header>\r\n        <h4 class=\"mb-0\">Cart√£o Ponto</h4>\r\n      </template>\r\n      <b-card-sub-title class=\"mb-2\">\r\n        <div class=\"d-inline-flex\">\r\n          <b-form-input\r\n            class=\"mr-2\"\r\n            type=\"number\"\r\n            v-model=\"ano\"\r\n            placeholder=\"Informe o ano\"\r\n            style=\"width: 65px\"\r\n          ></b-form-input>\r\n          <b-button-group style=\"flex-wrap: wrap\">\r\n            <b-button\r\n              v-for=\"(mes, i) of mesesreduzido\"\r\n              :key=\"i\"\r\n              :class=\"btnmes(i)\"\r\n              @click=\"mesclick(i + 1)\"\r\n            >\r\n              {{ mes }}\r\n            </b-button>\r\n          </b-button-group>\r\n        </div>\r\n      </b-card-sub-title>\r\n      <b-table hover small foot-clone :items=\"ponto\" :fields=\"fields\">\r\n        <template #cell(dia)=\"data\">\r\n          <span>\r\n            {{ data.item.data | dateDAY | LZero(2) }}\r\n            {{ data.item.data | weekname }}\r\n          </span>\r\n        </template>\r\n        <template #cell(registros)=\"data\">\r\n          <span v-if=\"data.item.feriado == 1 || data.item.ferias == 1\">\r\n            {{ data.item.resultado }}\r\n          </span>\r\n          <span v-else>\r\n            {{ data.item.entrada_1 | Time }} {{ data.item.saida_1 ? \"-\" : \"\" }}\r\n            {{ data.item.saida_1 | Time }}&nbsp;&nbsp;&nbsp;\r\n            {{ data.item.entrada_2 | Time }}  {{ data.item.saida_2 ? \"-\" : \"\" }} {{ data.item.saida_2 | Time }}\r\n          </span>\r\n        </template>\r\n        <template #cell(horas)=\"data\">\r\n          <!-- <span>{{ data.item.horas | decimals(2) }} | {{ (data.item.horas - 8.98) | decimals(2) }}</span> -->\r\n          <span>{{ data.item.horas | decimals(2) }}&nbsp;<b-badge v-b-tooltip.hover :title=\"data.item.resultado\" variant=\"danger\" v-if=\"data.item.invalido==1\"><b-icon-bug></b-icon-bug></b-badge></span>\r\n        </template>\r\n        <template #foot(dia)=\"data\">\r\n          <span>{{ gtxcartaopontoData.length }}</span>\r\n        </template>\r\n        <template #foot()=\"data\">\r\n          <span></span>\r\n        </template>\r\n        <template #foot(horas)=\"data\">\r\n          <span>{{ totalhoras | decimals(2) }}</span>\r\n        </template>\r\n      </b-table>\r\n      <!--\r\n      <b-card-text>\r\n        {{ parambusca }} <br />\r\n        {{ sysdate }}\r\n        {{ \"900.566.980-20\" | RSecret }}\r\n      </b-card-text>\r\n      -->\r\n    </b-card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nimport meses from \"../../../assets/json/meses.json\";\r\nexport default {\r\n  name: \"CartaoPonto\",\r\n\r\n  data() {\r\n    return {\r\n      ready: false,\r\n      meses: meses,\r\n      ano: 2021,\r\n      mes: 12,\r\n      fields: [\"dia\", \"registros\", \"horas\"],\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.ano = this.sysdate.year;\r\n    this.mes = this.sysdate.month;\r\n    this.ready = true;\r\n    /*\r\n    if (this.sysdate.day > 20) {\r\n      this.mes++;\r\n      if (this.mes > 12) {\r\n        this.ano++;\r\n        this.mes = 1;\r\n      }\r\n    }\r\n    */\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"gtxcartaopontoData\", \"sysdate\"]),\r\n    ponto() {\r\n      return this.gtxcartaopontoData.map(c=>({...c, _rowVariant: (c.diasuteis==1 && c.invalido==1) ? 'danger' : c.ferias==1 ? 'success' : c.feriado==1 ? 'info' : c.diasuteis==0 ? 'secondary' : ''}));\r\n    },\r\n    parambusca() {\r\n      return {\r\n        ano: this.ano,\r\n        mes: this.mes,\r\n      };\r\n    },\r\n    mesesreduzido() {\r\n      return this.meses.map(m=>(m.text.substr(0,3)));\r\n    },\r\n    totalhoras() {\r\n      return this.ponto.reduce(\r\n        (a, b) => parseFloat(a) + parseFloat(b.horas),\r\n        0\r\n      );\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"actcartaopontobuscar\"]),\r\n    mesclick(mes) {\r\n      this.mes = mes;\r\n    },\r\n    btnmes(mes) {\r\n      return mes == this.mes - 1 ? \"bg-primary\" : \"\";\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    parambusca(param) {\r\n      if (this.ready) this.actcartaopontobuscar(param);\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}