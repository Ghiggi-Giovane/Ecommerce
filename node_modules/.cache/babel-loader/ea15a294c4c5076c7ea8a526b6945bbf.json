{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\consulta\\components\\TabsConsultas.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\consulta\\components\\TabsConsultas.vue","mtime":1670977910610},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFRhYmxlRWRpdEFwaSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL1RhYmxlRWRpdEFwaSc7CmltcG9ydCBBcGlTZXJ2aWNlIGZyb20gJy4uLy4uLy4uL3NlcnZpY2VzL2FwaS5zZXJ2aWNlJzsKaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1RhYnNDb25zdWx0YXMnLAogIGNvbXBvbmVudHM6IHsKICAgIFRhYmxlRWRpdEFwaQogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmaWx0cm86ICcnLAogICAgICB0YWJJbmRleDogMCwKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIHRvdGFsUGFnZTogMSwKICAgICAgcGVyUGFnZTogNSwKICAgICAgY3VycmVudFBhcmFtczogJycsCiAgICAgIGNvbnN1bHRhczogW10sCiAgICAgIHJlc3VsdHM6IHsKICAgICAgICBEYXRhOiBbXQogICAgICB9LAogICAgICBzZWxlY3RlZDogewogICAgICAgIE5vbWU6ICdDb25zdWx0YSBuw6NvIHNlbGVjaW9uYWRhJywKICAgICAgICBjb25maWc6IHsKICAgICAgICAgIGNhcHRpb246ICdDb25zdWx0YSBuw6NvIGNhZGFzdHJhZGEnCiAgICAgICAgfQogICAgICB9LAogICAgICBsb2FkaW5nOiAwLAogICAgICBsb2FkY29uc3VsdGFzOiB0cnVlCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7IC4uLm1hcEdldHRlcnMoWydndHhjb25zdWx0YXNEYXRhJywgJ2d0eGNvbnN1bHRhc3NlbGVjdGVkJywgJ2d0eGNvbnN1bHRhc3NlbGVjdGVkcGFyYW1zJywgJ2d0eGNvbnN1bHRhc3NlbGVjdGVkcmVzdWx0J10pLAoKICAgIGNvbXB1dGVkcGFyYW1zKCkgewogICAgICByZXR1cm4gdGhpcy5wYXJhbXM7CiAgICB9LAoKICAgIHNlbGVjdGVkcm91dGUoKSB7CiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkLk5vbWUgIT09ICdDb25zdWx0YSBuw6NvIHNlbGVjaW9uYWRhJyA/ICdTZXJ2aWNvcy9DT05TXy8nICsgdGhpcy5zZWxlY3RlZC5Ob21lIDogJyc7CiAgICB9LAoKICAgIHNlbGVjdGVkcGFyYW1zKCkgewogICAgICBsZXQgcGFyYW0gPSB7fTsKICAgICAgaWYgKHRoaXMucGFyYW1zKSB0aGlzLnBhcmFtcy5tYXAocCA9PiB7CiAgICAgICAgcGFyYW0gPSB7IC4uLnBhcmFtLAogICAgICAgICAgLi4uewogICAgICAgICAgICBbcC5ub21lXTogcC52YWx1ZQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0pOwogICAgICByZXR1cm4gcGFyYW07CiAgICB9LAoKICAgIHBhcmFtcygpIHsKICAgICAgbGV0IHBhcnMgPSB0aGlzLmd0eGNvbnN1bHRhc3NlbGVjdGVkcGFyYW1zIHx8IFtdOwogICAgICAvKiAgICAgICAgICAgICBpZiAoKHRoaXMuc2VsZWN0ZWQpICYmICh0aGlzLnNlbGVjdGVkLmNvbmZpZykpDQogICAgICAgICAgICAgICAgICAgIHBhcnMgPSB0aGlzLnNlbGVjdGVkLmNvbmZpZy5wYXJhbSAqLwoKICAgICAgcmV0dXJuIHBhcnM7CiAgICB9LAoKICAgIHNlbGVjdFBhcmFtcygpIHsKICAgICAgbGV0IHBhcnMgPSBbXTsKCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkLmNvbmZpZyAmJiB0aGlzLnNlbGVjdGVkLmNvbmZpZy5wYXJhbSkgewogICAgICAgIHRoaXMuc2VsZWN0ZWQuY29uZmlnLnBhcmFtLm1hcChwYXIgPT4gewogICAgICAgICAgLy8gcGFycy5wdXNoKHtbcGFyLm5vbWVdOiBwYXIudmFsdWUgfHwgbnVsbH0pCiAgICAgICAgICBwYXJzLnB1c2goewogICAgICAgICAgICBub21lOiBwYXIubm9tZSwKICAgICAgICAgICAgdmFsdWU6IHBhci52YWx1ZSB8fCBudWxsCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHBhcnM7CiAgICB9LAoKICAgIHNlbGVjdERhdGEocGFyYW0pIHsKICAgICAgbGV0IHJlcyA9IG51bGw7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkICYmIHRoaXMuc2VsZWN0ZWQuY29uZmlnLnBhcmFtICYmIHRoaXMuc2VsZWN0ZWQuY29uZmlnLnBhcmFtLmZpbmQocCA9PiBwLm5vbWUgPSBwYXJhbS5ub21lKSkgcmVzID0gdGhpcy5zZWxlY3RlZC5jb25maWcucGFyYW0uZmluZChwID0+IHAubm9tZSA9IHBhcmFtLm5vbWUpLmRhdGEgfHwgW107CiAgICAgIHJldHVybiByZXMgfHwgW107CiAgICB9LAoKICAgIHBhZ2luYXRpb24oKSB7CiAgICAgIC8vIHJldHVybiBgJlBhZ2VOdW1iZXI9JHt0aGlzLmN1cnJlbnRQYWdlfSZQYWdlU2l6ZT0ke3RoaXMucGVyUGFnZX1gCiAgICAgIHJldHVybiB7CiAgICAgICAgUGFnZU51bWJlcjogdGhpcy5jdXJyZW50UGFnZSwKICAgICAgICBQYWdlU2l6ZTogdGhpcy5wZXJQYWdlCiAgICAgIH07CiAgICB9CgogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmFjdENvbnN1bHRhcygpOwogIH0sCgogIG1ldGhvZHM6IHsgLi4ubWFwQWN0aW9ucyhbJ2FjdENvbnN1bHRhcycsICdhY3RDb25zdWx0YXNTZWxlY3RlZCddKSwKCiAgICBjb25zdWx0YXNmaWx0ZXJlZChmaWx0cm8pIHsKICAgICAgcmV0dXJuIHRoaXMuZ3R4Y29uc3VsdGFzRGF0YS5maWx0ZXIoYyA9PiAoYy5jb25maWcuY2FwdGlvbiB8fCBjLk5vbWUpLnRvVXBwZXJDYXNlKCkuaW5jbHVkZXMoZmlsdHJvLnRvVXBwZXJDYXNlKCkpKTsKICAgIH0sCgogICAgZXhlY3V0YUNvbnN1bHRhKCkgewogICAgICBjb25zb2xlLmxvZygnZXhlY3V0YUNvbnN1bHRhJyk7CiAgICAgIHRoaXMuJHJlZnMucmVzdWx0LmdldEZyb21BcGkoKTsKICAgICAgdGhpcy50YWJJbmRleCsrOwogICAgfSwKCiAgICBfZXhlY3V0YUNvbnN1bHRhKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSAxOwogICAgICBsZXQgcm91dGUgPSAnU2Vydmljb3MvQ09OU18nICsgdGhpcy5zZWxlY3RlZC5Ob21lOyAvLyBsZXQgcGFyYW0gPSBudWxsCiAgICAgIC8vdGhpcy5jdXJyZW50UGFyYW1zID0gJycKCiAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9IHt9OwogICAgICB0aGlzLnNlbGVjdFBhcmFtcy5tYXAocGFyID0+IHsKICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMgPSB7IC4uLnRoaXMuY3VycmVudFBhcmFtcywKICAgICAgICAgIC4uLnsKICAgICAgICAgICAgW3Bhci5ub21lXTogcGFyLnZhbHVlIHx8IG51bGwKICAgICAgICAgIH0KICAgICAgICB9OyAvLyB0aGlzLmN1cnJlbnRQYXJhbXMgKz0gJyYnICsgcGFyLm5vbWUgKyAnPScgKyAocGFyLnZhbHVlIHx8ICdudWxsJykKICAgICAgICAvLyBjb25zb2xlLmxvZyhwYXIpCiAgICAgIH0pOyAvLyB0aGlzLmN1cnJlbnRQYXJhbXMgPSB0aGlzLmN1cnJlbnRQYXJhbXMuc3Vic3RyKDEpCgogICAgICBjb25zb2xlLmxvZygncm91dGU6Jywgcm91dGUpOwogICAgICBjb25zb2xlLmxvZygncGFyYW06JywgdGhpcy5jdXJyZW50UGFyYW1zKTsKICAgICAgY29uc29sZS5sb2coJ3BhZ2luYXRpb246JywgdGhpcy5wYWdpbmF0aW9uKTsKICAgICAgdGhpcy5jdXJyZW50UGFyYW1zID0geyAuLi50aGlzLmN1cnJlbnRQYXJhbXMsCiAgICAgICAgLi4udGhpcy5wYWdpbmF0aW9uCiAgICAgIH07CiAgICAgIEFwaVNlcnZpY2UuZ2V0KHJvdXRlLCB7CiAgICAgICAgcGFyYW1zOiB0aGlzLmN1cnJlbnRQYXJhbXMKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMucmVzdWx0cyA9IHJlcy5kYXRhOwogICAgICAgIHRoaXMudG90YWxQYWdlID0gcmVzLmRhdGEuUGFnaW5hcy5QYWdlQ291bnQgKiByZXMuZGF0YS5QYWdpbmFzLlBhZ2VTaXplOwogICAgICAgIHRoaXMucGVyUGFnZSA9IHJlcy5kYXRhLlBhZ2luYXMuUGFnZVNpemU7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gMDsKICAgICAgfSk7CiAgICAgIHRoaXMudGFiSW5kZXggPSAyOwogICAgfSwKCiAgICAvLyBleGVjdXRhQ29uc3VsdGEoKQogICAgc29tYShmbGQpIHsKICAgICAgY29uc29sZS5sb2coZmxkKTsKICAgICAgbGV0IHNvbWEgPSAnJzsKCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkLmNvbmZpZyAmJiB0aGlzLnNlbGVjdGVkLmNvbmZpZy5zb21hKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZC5jb25maWcuc29tYS5tYXAocyA9PiB7CiAgICAgICAgICBpZiAoZmxkLmNvbHVtbi50b1VwcGVyQ2FzZSgpID09IHMubm9tZS50b1VwcGVyQ2FzZSgpKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHMpOwogICAgICAgICAgICBzb21hID0gdGhpcy5yZXN1bHRzLkRhdGEubWFwKGYgPT4gZltmbGQuY29sdW1uXSkucmVkdWNlKChhLCBiKSA9PiBwYXJzZUZsb2F0KGEpICsgcGFyc2VGbG9hdChiKSkudG9GaXhlZCgyKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHNvbWE7CiAgICB9LAoKICAgIHNlbGVjdChpdGVtKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IDA7CiAgICAgIHRoaXMuYWN0Q29uc3VsdGFzU2VsZWN0ZWQoaXRlbS5pZCk7IC8vIHBvc2ljaW9uYSBuYSBzdG9yZSBhIGNvbnN1bHRhIHNlbGVjaW9uYWRhIC4uLgoKICAgICAgdGhpcy5zZWxlY3RlZCA9IHRoaXMuY29uc3VsdGFzLmZpbmQoZiA9PiBmLk5vbWUgPT0gaXRlbS5Ob21lKTsgLy8gZW1pdGUgYSBjb25zdWx0YSAuLi4KCiAgICAgIHRoaXMuJGVtaXQoJ29uQ29uc3VsdGFTZWxlY3RlZCcsIHRoaXMuc2VsZWN0ZWQpOwogICAgICAvKiAgICAgICAgICAgICBpZiAoKHRoaXMuc2VsZWN0ZWQuY29uZmlnKSAmJiAodGhpcy5zZWxlY3RlZC5jb25maWcucGFyYW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZC5jb25maWcucGFyYW0ubWFwKHBhciA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXIuYXBpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZSBvIHBhcmFtZXRybyBuw6NvIHRlbSBvIGNhbXBvIGRhdGEgdmF6aW8gZWxlIHByZWNpc2EgZXNwZXJhciBvIHJldG9ybm8gZGEgYXBpIHBhcmEgY3JpYXIgZSByZW5kZXJpemFyIG5hIHRlbGENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVudMOjbyDDqSB1c2FkbyBlc3NlIGNvbnRhZG9yIHBhcmEgc8OzIGFicmlyIGEgYWJhIGRvcyBwYXJhbWV0cm9zIGRlcG9pcyBkZSB0ZXIgbyBjYW1wbyBkYXRhIHBhcmEgcG9kZXIgY2FycmVnYXIgbmEgdGVsYQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXIuZGF0YSB8fCBwYXIuZGF0YS5sZW5ndGg9PTApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcrKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBpR2V0KHBhcikudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvYWRpbmc+MCkgdGhpcy5sb2FkaW5nLS0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2FwaUdldDo6Z289JywgdGhpcy5sb2FkaW5nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sb2FkaW5nPT0wKSB0aGlzLnRhYkluZGV4ID0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgfSAqLwoKICAgICAgaWYgKCF0aGlzLnRhYkluZGV4ID09IDEgJiYgdGhpcy5sb2FkaW5nID09IDApIHRoaXMudGFiSW5kZXggPSAxOwogICAgfSwKCiAgICAvLyBzZWxlY3QoaXRlbSkKICAgIGFzeW5jIGFwaUdldChwYXIpIHsKICAgICAgQXBpU2VydmljZS5zZXRBdXRoSGVhZGVyKCk7CiAgICAgIGF3YWl0IEFwaVNlcnZpY2UuZ2V0KHBhci5hcGkpLnRoZW4ocmVzID0+IHsKICAgICAgICBwYXIuZGF0YSA9IHJlcy5kYXRhLkRhdGE7CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yLm1lc3NhZ2UpOwogICAgICAgIHRocm93IG5ldyBFcnJvcihgW0FwaVNlcnZpY2VdICR7ZXJyb3J9YCk7CiAgICAgIH0pOwogICAgfQoKICB9LAogIC8vIGFzeW5jIGFwaUdldChwYXIpCiAgd2F0Y2g6IHsKICAgIGd0eGNvbnN1bHRhc0RhdGEoKSB7CiAgICAgIHRoaXMuY29uc3VsdGFzID0gdGhpcy5ndHhjb25zdWx0YXNEYXRhOwogICAgICB0aGlzLmxvYWRjb25zdWx0YXMgPSBmYWxzZTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AAEA;EAEAA,qBAFA;EAIAC;IAEAC;EAFA,CAJA;;EAUAC;IACA;MACAC,UADA;MAEAC,WAFA;MAGAC,cAHA;MAIAC,YAJA;MAKAC,UALA;MAMAC,iBANA;MAOAC,aAPA;MAQAC;QACAC;MADA,CARA;MAWAC;QAAAC;QAAAC;UAAAC;QAAA;MAAA,CAXA;MAYAC,UAZA;MAaAC;IAbA;EAeA,CA1BA;;EA4BAC,YAEA,uHAFA;;IAIAC;MAAA;IAAA,CAJA;;IAMAC;MAAA;IAAA,CANA;;IAQAC;MACA;MACA,iBACA;QAAAC;UAAA;YAAA;UAAA;QAAA;MAAA;MACA;IACA,CAbA;;IAeAC;MACA;MAEA;AACA;;MAEA;IACA,CAtBA;;IAwBAC;MACA;;MACA;QACA;UACA;UACAC;YAAAC;YAAAC;UAAA;QACA,CAHA;MAIA;;MACA;IACA,CAjCA;;IAmCAC;MACA;MACA,8GACAC;MACA;IACA,CAxCA;;IA0CAC;MACA;MACA;QAAAC;QAAAC;MAAA;IACA;;EA7CA,CA5BA;;EA6EAC;IAEA;EAEA,CAjFA;;EAmFAC,WAEA,uDAFA;;IAIAC;MACA;IACA,CANA;;IAUAC;MACAC;MACA;MACA;IACA,CAdA;;IAgBAC;MACA;MACA,kDAFA,CAGA;MACA;;MACA;MACA;QACA;UAAA;YAAA;UAAA;QAAA,EADA,CAEA;QACA;MACA,CAJA,EANA,CAWA;;MACAD;MACAA;MACAA;MACA;QAAA;MAAA;MAEAE;QAAAhB;MAAA,GACAiB,IADA,CACAX;QACA;QACA;QACA;QACA;MACA,CANA;MAQA;IACA,CA1CA;;IA0CA;IAEAY;MACAJ;MACA;;MACA;QACA;UACA;YACAA;YACAI,yBACAC,GADA,CACAC,kBADA,EAEAC,MAFA,CAEA,uCAFA,EAEAC,OAFA,CAEA,CAFA;UAGA;QACA,CAPA;MAQA;;MACA;IACA,CA1DA;;IA4DAC;MACA;MACA,mCAFA,CAEA;;MACA,8DAHA,CAIA;;MACA;MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;MAEA;IACA,CArFA;;IAqFA;IAEA;MAEAP;MAEA,8BACAC,IADA,CACAX;QACAkB;MACA,CAHA,EAIAC,KAJA,CAIAC;QACAZ;QACA;MACA,CAPA;IAQA;;EAnGA,CAnFA;EAwLA;EAEAa;IAEAC;MACA;MACA;IACA;;EALA;AA1LA","names":["name","components","TableEditApi","data","filtro","tabIndex","currentPage","totalPage","perPage","currentParams","consultas","results","Data","selected","Nome","config","caption","loading","loadconsultas","computed","computedparams","selectedroute","selectedparams","param","params","selectParams","pars","nome","value","selectData","res","pagination","PageNumber","PageSize","mounted","methods","consultasfiltered","executaConsulta","console","_executaConsulta","ApiService","then","soma","map","f","reduce","toFixed","select","par","catch","error","watch","gtxconsultasData"],"sourceRoot":"src/pages/consulta/components","sources":["TabsConsultas.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <!-- <b-button variant=\"primary\" @click=\"buscaConsultas\">Busca consultas</b-button> -->\r\n        \r\n        <b-card no-body>\r\n            <b-tabs content-class=\"mt-3\" v-model=\"tabIndex\" justified>\r\n                <b-tab title=\"Consultas\" active>\r\n                    <b-row class=\"m-2\">\r\n                        <b-col>\r\n                            <b-input-group>\r\n                                <b-input-group-prepend is-text>\r\n                                    <b-icon icon=\"search\"></b-icon>\r\n                                </b-input-group-prepend>\r\n                                <b-form-input v-model=\"filtro\" placeholder=\"Localizar consulta\"></b-form-input>\r\n                            </b-input-group>\r\n                        </b-col>\r\n                    </b-row>\r\n                    <b-row class=\"m-2\">\r\n                        <b-col>\r\n                            <b-list-group>\r\n                                <!-- <b-overlay :show=\"loadconsultas\"> -->\r\n                                <b-skeleton-wrapper :loading=\"loadconsultas\">\r\n                                    <template #loading>\r\n                                        <b-list-group-item v-for=\"i of [85,76,89]\" :key=\"i\">\r\n                                            <b-skeleton :width=\"`${i}%`\"></b-skeleton>\r\n                                        </b-list-group-item>\r\n                                    </template>\r\n                                    <b-list-group-item\r\n                                        button\r\n                                        v-for=\"(item, i) of consultasfiltered(filtro)\" :key=\"i\"\r\n                                        @click=\"select(item)\"\r\n                                    >\r\n                                        {{item.config.caption || item.Nome}}\r\n                                    </b-list-group-item>\r\n                                <!-- </b-overlay> -->\r\n                                </b-skeleton-wrapper>\r\n                            </b-list-group>                        \r\n                        </b-col>\r\n                    </b-row>\r\n                    <!-- <b-button v-b-toggle=\"`collapse-${consultas.id}`\" variant=\"primary\" block class=\"mt-2\">Show JSON consultas</b-button>\r\n                    <b-collapse :id=\"`collapse-${consultas.id}`\">\r\n                        <pre>\r\n                            {{ consultas }}\r\n                        </pre>\r\n                    </b-collapse> -->\r\n                </b-tab>\r\n                <b-tab title=\"Parametros\">\r\n\r\n                    <b-row class=\"m-2\">\r\n                        <b-col cols=\"12\" md=\"4\" sm=\"6\" v-for=\"(par, i) of params\" :key=\"i\">\r\n                            <!-- <label :for=\"`par${i}`\">{{ par.caption }}</label> -->\r\n                            <b-form-group :label=\"par.caption\">\r\n                            <b-form-input :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='number'\" type=\"number\" :min=\"par.min || 0\" :max=\"par.max || 0\">{{ par.tipo }}</b-form-input>\r\n                            <b-form-input :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='string'\" type=\"text\">{{ par.tipo }}</b-form-input>\r\n                            <b-form-select :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='select' && !par.api\" :options=\"par.data\"></b-form-select>\r\n                            <b-form-select :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='select' && par.api\" :options=\"par.data\"></b-form-select>\r\n                            <b-form-select :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='multiple' && par.api\" :options=\"par.data\"></b-form-select>\r\n                            </b-form-group>\r\n                        </b-col>\r\n                    </b-row>\r\n                    <b-row align-h=\"end\" class=\"m-2\">\r\n                        <b-col>\r\n                            <b-button variant=\"success\" @click=\"executaConsulta\" class=\"float-right\">Consultar</b-button>\r\n                        </b-col>\r\n                    </b-row>\r\n                    <!-- <b-button v-b-toggle=\"`collapse-${selected.id}`\" variant=\"primary\" block class=\"mt-2\">Show JSON selected</b-button>\r\n                    <b-collapse :id=\"`collapse-${selected.id}`\">\r\n                        <pre>\r\n                            {{ selected }}\r\n                        </pre>\r\n                    </b-collapse> -->\r\n                </b-tab>\r\n                <b-tab title=\"Resultado\">\r\n                    <b-overlay :show=\"loading>0\" rounded=\"sm\">\r\n\r\n                        <TableEditApi\r\n                            ref=\"result\"\r\n                            :route=\"selectedroute\"\r\n                            :params=\"selectedparams\"\r\n                            :soma=\"[{key: 'valor'}]\"\r\n                            :perPage=\"5\"/>\r\n\r\n                    </b-overlay>\r\n\r\n                    <hr/>\r\n\r\n                    <b-pagination\r\n                        v-model=\"currentPage\"\r\n                        :total-rows=\"totalPage\"\r\n                        :per-page=\"perPage\"\r\n                        align=\"right\">\r\n                    </b-pagination>\r\n                </b-tab>\r\n            </b-tabs>\r\n\r\n        </b-card>\r\n\r\n        <!-- gtxconsultasData: {{gtxconsultasData}}<br/> -->\r\n        gtxconsultasselected: {{gtxconsultasselected}}<br/>\r\n        <!-- gtxconsultasselectedparams: {{gtxconsultasselectedparams}}<br/> -->\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport TableEditApi from '../../../components/TableEditApi'\r\nimport ApiService from '../../../services/api.service'\r\nimport { mapGetters, mapActions } from 'vuex'\r\n\r\nexport default {\r\n\r\n    name: 'TabsConsultas',\r\n\r\n    components: {\r\n\r\n        TableEditApi\r\n\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            filtro: '',\r\n            tabIndex: 0,\r\n            currentPage: 1,\r\n            totalPage: 1,\r\n            perPage: 5,\r\n            currentParams: '',\r\n            consultas: [],\r\n            results: {\r\n                Data: []\r\n            },\r\n            selected: {Nome: 'Consulta não selecionada', config: {caption: 'Consulta não cadastrada'}},\r\n            loading: 0,\r\n            loadconsultas: true\r\n        }\r\n    },\r\n    \r\n    computed: {\r\n\r\n        ...mapGetters(['gtxconsultasData', 'gtxconsultasselected', 'gtxconsultasselectedparams', 'gtxconsultasselectedresult']),\r\n\r\n        computedparams() { return this.params },\r\n\r\n        selectedroute() { return (this.selected.Nome !== 'Consulta não selecionada') ? 'Servicos/CONS_/' + this.selected.Nome : '' },\r\n        \r\n        selectedparams() { \r\n            let param = {}\r\n            if (this.params) \r\n              this.params.map(p => {param = {...param, ...{[p.nome]: p.value}}})\r\n            return param\r\n        },      \r\n\r\n        params() {\r\n            let pars = this.gtxconsultasselectedparams || []\r\n\r\n/*             if ((this.selected) && (this.selected.config))\r\n              pars = this.selected.config.param */\r\n\r\n            return pars\r\n        },\r\n\r\n        selectParams() {\r\n            let pars = []\r\n            if ((this.selected.config) && (this.selected.config.param)) {\r\n                this.selected.config.param.map(par => {\r\n                    // pars.push({[par.nome]: par.value || null})\r\n                    pars.push({nome: par.nome, value: par.value || null})\r\n                })\r\n            }\r\n            return pars\r\n        },\r\n\r\n        selectData(param) {\r\n            let res = null\r\n            if (this.selected && this.selected.config.param && this.selected.config.param.find(p => p.nome = param.nome))\r\n              res = this.selected.config.param.find(p => p.nome = param.nome).data || []\r\n            return res || []\r\n        },\r\n        \r\n        pagination() {\r\n            // return `&PageNumber=${this.currentPage}&PageSize=${this.perPage}`\r\n            return { PageNumber: this.currentPage, PageSize: this.perPage }\r\n        },\r\n\r\n    },\r\n\r\n    mounted() {\r\n\r\n        this.actConsultas()\r\n\r\n    },\r\n\r\n    methods: {\r\n\r\n        ...mapActions(['actConsultas', 'actConsultasSelected']),\r\n\r\n        consultasfiltered(filtro) {\r\n            return this.gtxconsultasData.filter(c => (c.config.caption || c.Nome).toUpperCase().includes(filtro.toUpperCase()))\r\n        },        \r\n\r\n\r\n\r\n        executaConsulta() {\r\n            console.log('executaConsulta')\r\n            this.$refs.result.getFromApi()\r\n            this.tabIndex++\r\n        },\r\n\r\n        _executaConsulta() {\r\n            this.loading = 1\r\n            let route = 'Servicos/CONS_' + this.selected.Nome\r\n            // let param = null\r\n            //this.currentParams = ''\r\n            this.currentParams = {}\r\n            this.selectParams.map(par => {\r\n                this.currentParams = {...this.currentParams, ...{[par.nome]: par.value || null}}\r\n                // this.currentParams += '&' + par.nome + '=' + (par.value || 'null')\r\n                // console.log(par)\r\n            })\r\n            // this.currentParams = this.currentParams.substr(1)\r\n            console.log('route:', route)\r\n            console.log('param:', this.currentParams)\r\n            console.log('pagination:', this.pagination)\r\n            this.currentParams = {...this.currentParams, ...this.pagination}\r\n\r\n            ApiService.get(route, { params: this.currentParams })\r\n                .then(res => {\r\n                    this.results = res.data\r\n                    this.totalPage = (res.data.Paginas.PageCount * res.data.Paginas.PageSize)\r\n                    this.perPage = res.data.Paginas.PageSize\r\n                    this.loading = 0\r\n                })\r\n\r\n            this.tabIndex = 2\r\n        }, // executaConsulta()\r\n\r\n        soma(fld) {\r\n            console.log(fld)\r\n            let soma = '';\r\n            if (this.selected.config && this.selected.config.soma) {\r\n                this.selected.config.soma.map(s => {\r\n                    if (fld.column.toUpperCase() ==  s.nome.toUpperCase()) {\r\n                        console.log(s)\r\n                        soma = (this.results.Data\r\n                                .map(f => f[fld.column])\r\n                                .reduce((a,b) => parseFloat(a)+parseFloat(b))).toFixed(2)\r\n                    }\r\n                })\r\n            }\r\n            return soma;\r\n        },\r\n\r\n        select(item) {\r\n            this.loading = 0\r\n            this.actConsultasSelected(item.id) // posiciona na store a consulta selecionada ...\r\n            this.selected = this.consultas.find(f => f.Nome == item.Nome)\r\n            // emite a consulta ...\r\n            this.$emit('onConsultaSelected', this.selected)\r\n\r\n/*             if ((this.selected.config) && (this.selected.config.param)) {\r\n                this.selected.config.param.map(par => {\r\n                    if (par.api) {\r\n                        // se o parametro não tem o campo data vazio ele precisa esperar o retorno da api para criar e renderizar na tela\r\n                        // então é usado esse contador para só abrir a aba dos parametros depois de ter o campo data para poder carregar na tela\r\n                        if (!par.data || par.data.length==0) {\r\n                            this.loading++\r\n                            this.apiGet(par).then(() => {\r\n                                if (this.loading>0) this.loading--\r\n                                // console.log('apiGet::go=', this.loading)\r\n                                if (this.loading==0) this.tabIndex = 1\r\n                            })\r\n                        }\r\n                    }\r\n                })\r\n            } */\r\n\r\n            if (!this.tabIndex==1 && this.loading==0) this.tabIndex = 1\r\n        }, // select(item)\r\n\r\n        async apiGet(par) {\r\n\r\n            ApiService.setAuthHeader()\r\n            \r\n            await ApiService.get(par.api)\r\n                .then(res => {\r\n                    par.data = res.data.Data\r\n                })\r\n                .catch (error => {\r\n                    console.error(error.message)\r\n                    throw new Error(`[ApiService] ${error}`)\r\n                })\r\n        }\r\n\r\n    }, // async apiGet(par)\r\n\r\n    watch: {\r\n\r\n        gtxconsultasData() {\r\n            this.consultas = this.gtxconsultasData\r\n            this.loadconsultas = false\r\n        }\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .col-form-label {\r\n      padding-bottom: 0;\r\n  }\r\n\r\n</style>"]}]}