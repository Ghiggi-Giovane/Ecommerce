{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\arquivosdirectory\\views\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\arquivosdirectory\\views\\index.vue","mtime":1701906516434},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IEFQSSBmcm9tICIuLi8uLi8uLi9zZXJ2aWNlcy9hcGkuc2VydmljZSI7CmltcG9ydCBEYXNoY2FyZCBmcm9tICIuLi8uLi8uLi9jb21wb25lbnRzL0Rhc2hjYXJkLnZ1ZSI7CmltcG9ydCBDYXJkQ29sbGFwc2VkIGZyb20gIkAvY29tcG9uZW50cy9DYXJkQ29sbGFwc2VkLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQXJxdWl2b3NEaXJlY3RvcnkiLAogIGNvbXBvbmVudHM6IHsKICAgIERhc2hjYXJkLAogICAgQ2FyZENvbGxhcHNlZAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbGxhcHNlZm9ybW9wZW46IGZhbHNlLAogICAgICBkYXRhYmFzZTogbmV3IERhdGUoKSwKICAgICAgaWRhY2FvOiAyLAogICAgICAvLyBGVFAgUFJPTU9CCiAgICAgIGZpbGVuYW1lOiAiIiwKICAgICAgZXJybzogW3RydWUsIGZhbHNlLCBudWxsLCAiYWxsIl0sCiAgICAgIGFjb2VzOiBbewogICAgICAgIHZhbHVlOiA3LAogICAgICAgIHRleHQ6ICJXb3JrZXIgQldQWCIKICAgICAgfSwgewogICAgICAgIHZhbHVlOiA1LAogICAgICAgIHRleHQ6ICJXb3JrZXIgSW52YWxpZFByb2plY3RzUmVwb3NpdG9yeSIKICAgICAgfSwgewogICAgICAgIHZhbHVlOiA0LAogICAgICAgIHRleHQ6ICJXb3JrZXIgU3VjY2Vzc1Byb2plY3RzUmVwb3NpdG9yeSIKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAzLAogICAgICAgIHRleHQ6ICJXb3JrZXIgUHJvbW9iIgogICAgICB9LCB7CiAgICAgICAgdmFsdWU6IDIsCiAgICAgICAgdGV4dDogIkZUUCBQcm9tb2IiCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogMSwKICAgICAgICB0ZXh0OiAiU0VSQVNBIFJFTEFUTyAtIENPTkNJTElBQ0FPIgogICAgICB9XSwKICAgICAgYXJxdWl2b3M6IHsKICAgICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgICBwZXJQYWdlOiAyMCwKICAgICAgICBmaWx0ZXI6ICIiLAogICAgICAgIGZpbHRlck9uOiBbIkFjYW8iLCAiTm9tZUFycXVpdm8iLCAiUmV0b3JubyJdLAogICAgICAgIGZpZWxkczogWyJpZCIsIHsKICAgICAgICAgIGtleTogIkFjb2VzIiwKICAgICAgICAgIGxhYmVsOiAiQcOnw7VlcyIKICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICJEYXRhTGVpdHVyYSIsCiAgICAgICAgICBsYWJlbDogIkRhdGEiCiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAiTm9tZUFycXVpdm8iLAogICAgICAgICAgbGFiZWw6ICJBcnF1aXZvIgogICAgICAgIH0sICJSZXRvcm5vIiwgewogICAgICAgICAga2V5OiAiYnV0dG9ucyIsCiAgICAgICAgICBsYWJlbDogIiIKICAgICAgICB9XSwKICAgICAgICBkYXRhOiBbXSwKICAgICAgICB4bWw6IFtdCiAgICAgIH0KICAgIH07CiAgfSwKICBhc3luYyBiZWZvcmVNb3VudCgpIHsKICAgIC8vIGNvbnN0IGlkQ29sbGVjdGlvbiA9ICdob3JsbGUnOwogICAgLy8gY29uc3QgaWREb2N1bWVudCA9IHtpZDogdGhpcy4kcm91dGUucGF0aC5zdWJzdHIoMSl9OwoKICAgIC8vIGF3YWl0IEFQSS5nZXRMb2NhbERCRG9jdW1lbnQoKQogICAgLy8gICAudGhlbigoZG9jKSA9PiB7CiAgICAvLyAgICAgaWYgKGRvYykgewogICAgLy8gICAgICAgLy8gdGhpcy5kYXRhREIgPSBkb2MuZGF0YTsKICAgIC8vICAgICB9ICAgICAgICAKICAgIC8vICAgfSkKCiAgICB0aGlzLmFycXVpdm9zR2V0KCk7CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbImd0eENvbmZpZ0RhdGV0aW1lUGlja2VyRm9ybWF0Il0pLAogICAgZGF0YURCOiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZGF0YWJhc2U6IHRoaXMuZGF0YWJhc2UsCiAgICAgICAgICBpZGFjYW86IHRoaXMuaWRhY2FvLAogICAgICAgICAgZmlsZW5hbWU6IHRoaXMuZmlsZW5hbWUsCiAgICAgICAgICBhcnF1aXZvczogewogICAgICAgICAgICBmaWx0ZXI6IHRoaXMuZmlsdGVyCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSwKICAgICAgc2V0KHZhbHVlKSB7CiAgICAgICAgdGhpcy5kYXRhYmFzZSA9IHZhbHVlLmRhdGFiYXNlOwogICAgICAgIHRoaXMuaWRhY2FvID0gdmFsdWUuaWRhY2FvOwogICAgICAgIHRoaXMuZmlsZW5hbWUgPSB2YWx1ZS5maWxlbmFtZTsKICAgICAgICB0aGlzLmFycXVpdm9zLmZpbHRlciA9IHZhbHVlLmZpbHRlcjsKICAgICAgfQogICAgfSwKICAgIHBhcmFtcygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBkYXRhYmFzZTogdGhpcy5kYXRhYmFzZSwKICAgICAgICBpZGFjYW86IHRoaXMuaWRhY2FvLAogICAgICAgIGZpbGVuYW1lOiB0aGlzLmZpbGVuYW1lCiAgICAgIH07CiAgICB9LAogICAgYXJxdWl2b3NmaWx0ZXJlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXJxdWl2b3MuZGF0YS5maWx0ZXIoZiA9PiB0aGlzLmVycm8uaW5jbHVkZXMoZi5FcnJvKSB8fCB0aGlzLmVycm8gPT0gImFsbCIpOwogICAgfSwKICAgIG5yb2RhbmdlcnMoKSB7CiAgICAgIHJldHVybiB0aGlzLmFycXVpdm9zLmRhdGEuZmlsdGVyKGYgPT4gZi5FcnJvKS5sZW5ndGgudG9TdHJpbmcoKTsKICAgIH0sCiAgICBucm9zdWNjZXNzKCkgewogICAgICByZXR1cm4gdGhpcy5hcnF1aXZvcy5kYXRhLmZpbHRlcihmID0+IGYuRXJybyAhPT0gbnVsbCAmJiAhZi5FcnJvKS5sZW5ndGgudG9TdHJpbmcoKTsKICAgIH0sCiAgICBucm93YXJuaW5ncygpIHsKICAgICAgcmV0dXJuIHRoaXMuYXJxdWl2b3MuZGF0YS5maWx0ZXIoZiA9PiBmLkVycm8gPT0gbnVsbCkubGVuZ3RoLnRvU3RyaW5nKCk7CiAgICB9LAogICAgbnJvaW5mbygpIHsKICAgICAgcmV0dXJuIHRoaXMuYXJxdWl2b3MuZGF0YS5sZW5ndGgudG9TdHJpbmcoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHJvd0NsYXNzKGl0ZW0sIHR5cGUpIHsKICAgICAgaWYgKCFpdGVtIHx8IHR5cGUgIT09ICJyb3ciKSByZXR1cm47CiAgICAgIGlmIChpdGVtLkVycm8gPT0gbnVsbCkgcmV0dXJuICJ0YWJsZS13YXJuaW5nIjsKICAgICAgcmV0dXJuIGl0ZW0uRXJybyA/ICJ0YWJsZS1kYW5nZXIiIDogInRhYmxlLXN1Y2Nlc3MiOwogICAgfSwKICAgIGRhc2hjYXJkZm9vdGVyY2xpY2soZm9vdGVyc3RhdGUsIHZhbHVlKSB7CiAgICAgIGNvbnN0IGkgPSB0aGlzLmVycm8uZmluZEluZGV4KGYgPT4gZiA9PSB2YWx1ZSk7CiAgICAgIGlmIChmb290ZXJzdGF0ZSkgewogICAgICAgIGlmIChpID09IC0xKSB7CiAgICAgICAgICB0aGlzLmVycm8ucHVzaCh2YWx1ZSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChpID4gLTEpIHsKICAgICAgICAgIHRoaXMuZXJyby5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgYXJxdWl2b3NHZXQoKSB7CiAgICAgIEFQSS5nZXQoInYyL1NlcnZpY29zL0FycXVpdm9zRGlyZWN0b3J5L0dldCIsIHRoaXMucGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhLlN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMuYXJxdWl2b3MuZGF0YSA9IHJlcy5kYXRhLkRhdGE7CiAgICAgICAgICB0aGlzLmNvbGxhcHNlZm9ybW9wZW4gPSBmYWxzZTsKICAgICAgICAgIC8vIHNhbHZhIG5vIGxvY2FsREIKICAgICAgICAgIC8vIGNvbnN0IGlkQ29sbGVjdGlvbiA9ICdob3JsbGUnOwogICAgICAgICAgY29uc3QgbG9jYWxyb3V0ZSA9IHRoaXMuJHJvdXRlLnBhdGguc3Vic3RyKDEpOwogICAgICAgICAgY29uc3QgbG9jYWxkYXRhID0gewogICAgICAgICAgICBpZDogbG9jYWxyb3V0ZSwKICAgICAgICAgICAgZGF0YTogdGhpcy5kYXRhREIKICAgICAgICAgIH07CgogICAgICAgICAgLy8gQVBJLnNldExvY2FsREJEb2N1bWVudCh0aGlzLmRhdGFEQik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYXJxdWl2b3MuZGF0YSA9IFtdOwogICAgICAgICAgdGhpcy5jb2xsYXBzZWZvcm1vcGVuID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFycXVpdm9zT3BlbihpdGVtKSB7CiAgICAgIHRoaXMuJHJvb3Quc2hvd21lc3NhZ2UoJ0NvbmZpcm1lIGEgZXhjbHVzw6NvIGRlc3RlIGhpc3TDs3JpY28/JywgJ0V4Y2x1aXIgcmVnaXN0cm8nKS50aGVuKGNob2ljZSA9PiB7CiAgICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgICAgaWRYTUxJbXBvcnQ6IGl0ZW0uaWRYTUxJbXBvcnRQcm9tb2IKICAgICAgICB9OwogICAgICAgIEFQSS5nZXQoInYyL1NlcnZpY29zL0FycXVpdm9zRGlyZWN0b3J5L0J1aWxkZXJYTUxHZXQiLCBwYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuZGF0YS5TdWNjZXNzKSB7CiAgICAgICAgICAgIHRoaXMuYXJxdWl2b3MueG1sID0gcmVzLmRhdGEuRGF0YTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuYXJxdWl2b3MueG1sID0gW107CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGhpc3RvcnlEZWwoaXRlbSkgewogICAgICBjb25zdCBib2R5ID0gewogICAgICAgIGlkSGlzdG9yeTogaXRlbS5pZEhpc3RvcnkKICAgICAgfTsKICAgICAgQVBJLnBvc3QoInYyL1NlcnZpY29zL0FycXVpdm9zRGlyZWN0b3J5L0ZpbmFsaWRhZGVzSGlzdG9yeURlbCIsIGJvZHkpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmRhdGEuU3VjY2VzcykgewogICAgICAgICAgdGhpcy4kcm9vdC50b2FzdHN1Y2Nlc3MocmVzLmRhdGEuRGF0YS5NZW5zYWdlbSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHJvb3QudG9hc3RkYW5nZXIocmVzLmRhdGEuRGF0YS5NZW5zYWdlbSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiKA;AACA;AACA;AACA;AAEA;EACAA;EAEAC;IACAC;IACAC;EACA;EAEAC;IACA;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC,QACA;QAAAC;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,EACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC,SACA,MACA;UAAAC;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA,GACA,WACA;UAAAD;UAAAC;QAAA,EACA;QACAhB;QACAiB;MACA;IACA;EACA;EAEA;IAEA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;;IAEA;EAEA;EAEAC;IACA;IACAC;MACAC;QACA;UACAlB;UACAC;UACAC;UACAK;YACAG;UACA;QACA;MACA;MACAS;QACA;QACA;QACA;QACA;MACA;IACA;IACAC;MACA;QACApB;QACAC;QACAC;MACA;IACA;IACAmB;MACA,iCACAC,sDACA;IACA;IACAC;MACA;IACA;IACAC;MACA,0BACAd,wCACAe;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;EAEAC;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;QACA;UACA;QACA;MACA;QACA;UACA;QACA;MACA;IACA;IACAC;MACAC;QACA;UACA;UACA;UACA;UACA;UACA;UACA;YAAAC;YAAAnC;UAAA;;UAEA;QAEA;UACA;UACA;QACA;MACA;IACA;IACAoC;MACA,mFACAC;QACA;UACAC;QACA;QACAJ,oEACAK;UACA;YACA;UACA;YACA;UACA;QACA,EACA;MACA;IACA;IACAC;MACA;QACAC;MACA;MACAP,2EACAK;QACA;UACA;QACA;UACA;QACA;MACA,EACA;IACA;EACA;AACA","names":["name","components","Dashcard","CardCollapsed","data","collapseformopen","database","idacao","filename","erro","acoes","value","text","arquivos","currentPage","perPage","filter","filterOn","fields","key","label","xml","computed","dataDB","get","set","params","arquivosfiltered","f","nrodangers","nrosuccess","length","nrowarnings","nroinfo","methods","rowClass","dashcardfooterclick","arquivosGet","API","id","arquivosOpen","then","idXMLImport","res","historyDel","idHistory"],"sourceRoot":"src/pages/arquivosdirectory/views","sources":["index.vue"],"sourcesContent":["<template>\r\n  <CardCollapsed ref=\"CardCollapsed\" v-model=\"collapseformopen\" title=\"Arquivos\" @evtBusca=\"arquivosGet\">\r\n    <template #collapsedform>\r\n      <div class=\"bg-light p-4\">\r\n        <b-row>\r\n          <b-col>\r\n            <label for=\"form-dataleitura\">Data de Leitura</label>\r\n            <b-form-datepicker\r\n            id=\"form-dataleitura\"\r\n            v-model=\"database\"\r\n            class=\"mb-2\"\r\n            locale=\"pt\"\r\n            :date-format-options=\"gtxConfigDatetimePickerFormat\"\r\n            ></b-form-datepicker>\r\n          </b-col>\r\n        </b-row>\r\n        <b-row>\r\n          <b-col>\r\n            <label for=\"form-idacao\">Processo</label>\r\n            <b-form-select\r\n            id=\"form-idacao\"\r\n            v-model=\"idacao\"\r\n            :options=\"acoes\"\r\n            ></b-form-select>\r\n          </b-col>\r\n        </b-row>\r\n      <b-row>\r\n        <b-col>\r\n          <label for=\"form-filename\">Nome do Arquivo</label>\r\n          <b-form-input id=\"form-filename\" v-model=\"filename\"></b-form-input>\r\n        </b-col>\r\n      </b-row>\r\n        <b-row>\r\n          <b-col class=\"mt-2 text-right\">\r\n            <b-button-group>\r\n              <b-button variant=\"primary\" @click=\"arquivosGet\">\r\n                <b-icon-search class=\"mr-1\"/>\r\n                Buscar\r\n              </b-button>\r\n            </b-button-group>\r\n          </b-col>\r\n        </b-row>\r\n      </div>\r\n  </template>\r\n\r\n  <template #collapsedbody>\r\n    <div class=\"p-2\">\r\n      <b-row>\r\n        <b-col>\r\n          <Dashcard\r\n            :value=\"nrodangers\"\r\n            details=\"Com erros\"\r\n            icon=\"bug\"\r\n            css=\"bg-danger-light\"\r\n            textlink=\"Filtrar com erros\"\r\n            @evt_footerclick=\"dashcardfooterclick($event, true)\"\r\n          />\r\n        </b-col>\r\n        <b-col>\r\n          <Dashcard\r\n            :value=\"nrosuccess\"\r\n            details=\"Processados\"\r\n            icon=\"check2\"\r\n            css=\"bg-success-light\"\r\n            textlink=\"Filtrar com sucesso\"\r\n            @evt_footerclick=\"dashcardfooterclick($event, false)\"\r\n          />\r\n        </b-col>\r\n        <b-col>\r\n          <Dashcard\r\n            :value=\"nrowarnings\"\r\n            details=\"Não processados\"\r\n            icon=\"slash-circle\"\r\n            css=\"bg-warning-light\"\r\n            textlink=\"Filtrar não processados\"\r\n            @evt_footerclick=\"dashcardfooterclick($event, null)\"\r\n          />\r\n        </b-col>\r\n        <b-col>\r\n          <Dashcard\r\n            :value=\"nroinfo\"\r\n            details=\"Todos os arquivos\"\r\n            icon=\"check2-all\"\r\n            css=\"bg-info-light\"\r\n            textlink=\"Todos\"\r\n            @evt_footerclick=\"dashcardfooterclick($event, 'all')\"\r\n          />\r\n        </b-col>\r\n      </b-row>\r\n    </div>\r\n\r\n    <div>\r\n      <div class=\"d-flex\">\r\n        <b-input-group prepend=\"Filtro\" size=\"sm\" class=\"mb-2 mr-2\">\r\n          <b-form-input\r\n            id=\"input-filtro\"\r\n            type=\"search\"\r\n            v-model=\"arquivos.filtro\"\r\n            placeholder=\"Informe o nome do arquivo\"\r\n          ></b-form-input>\r\n        </b-input-group>\r\n\r\n        <b-pagination\r\n          id=\"input-pagination\"\r\n          v-model=\"arquivos.currentPage\"\r\n          :total-rows=\"arquivos.data.length\"\r\n          :per-page=\"arquivos.perPage\"\r\n          size=\"sm\"\r\n          class=\"my-0\"\r\n        >\r\n        </b-pagination>\r\n      </div>\r\n\r\n      <b-table\r\n        small\r\n        hover\r\n        responsive\r\n        striped\r\n        bordered\r\n        head-variant=\"dark\"\r\n        :current-page=\"arquivos.currentPage\"\r\n        :per-page=\"arquivos.perPage\"\r\n        :filter=\"arquivos.filtro\"\r\n        :filter-included-fields=\"arquivos.filterOn\"\r\n        :fields=\"arquivos.fields\"\r\n        :items=\"arquivosfiltered\"\r\n        :tbody-tr-class=\"rowClass\"\r\n      >\r\n        <template #cell(DataLeitura)=\"data\">\r\n          {{ data.item.DataLeitura | datetime }}\r\n        </template>\r\n        <template #cell(id)=\"data\">\r\n          <span  v-copy>{{ data.item.id }}</span>\r\n        </template>\r\n        <template #cell(buttons)=\"data\">\r\n          <span class=\"spaced iconbutton\" @click=\"arquivosOpen(data.item)\">\r\n            <b-icon-file-earmark-text />\r\n          </span>\r\n          <span class=\"spaced iconbutton\" @click=\"historyDel(data.item)\">\r\n            <b-icon-trash />\r\n          </span>\r\n        </template>\r\n      </b-table>\r\n\r\n      <div class=\"d-flex float-right\">\r\n        <b-pagination\r\n          id=\"input-pagination\"\r\n          v-model=\"arquivos.currentPage\"\r\n          :total-rows=\"arquivos.data.length\"\r\n          :per-page=\"arquivos.perPage\"\r\n          size=\"sm\"\r\n          class=\"my-0\"\r\n        >\r\n        </b-pagination>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  </CardCollapsed>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport API from \"../../../services/api.service\";\r\nimport Dashcard from \"../../../components/Dashcard.vue\";\r\nimport CardCollapsed from \"@/components/CardCollapsed.vue\";\r\n\r\nexport default {\r\n  name: \"ArquivosDirectory\",\r\n\r\n  components: {\r\n    Dashcard,\r\n    CardCollapsed,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      collapseformopen: false,\r\n      database: new Date(),\r\n      idacao: 2, // FTP PROMOB\r\n      filename: \"\",\r\n      erro: [true, false, null, \"all\"],\r\n      acoes: [\r\n        { value: 7, text: \"Worker BWPX\" },\r\n        { value: 5, text: \"Worker InvalidProjectsRepository\" },\r\n        { value: 4, text: \"Worker SuccessProjectsRepository\" },\r\n        { value: 3, text: \"Worker Promob\" },\r\n        { value: 2, text: \"FTP Promob\" },\r\n        { value: 1, text: \"SERASA RELATO - CONCILIACAO\" },\r\n      ],\r\n      arquivos: {\r\n        currentPage: 1,\r\n        perPage: 20,\r\n        filter: \"\",\r\n        filterOn: [\"Acao\", \"NomeArquivo\", \"Retorno\"],\r\n        fields: [\r\n          \"id\",\r\n          { key: \"Acoes\", label: \"Ações\" },\r\n          { key: \"DataLeitura\", label: \"Data\" },\r\n          { key: \"NomeArquivo\", label: \"Arquivo\" },\r\n          \"Retorno\",\r\n          { key: \"buttons\", label: \"\" },\r\n        ],\r\n        data: [],\r\n        xml: [],\r\n      },\r\n    };\r\n  },\r\n\r\n  async beforeMount() {\r\n\r\n    // const idCollection = 'horlle';\r\n    // const idDocument = {id: this.$route.path.substr(1)};\r\n\r\n    // await API.getLocalDBDocument()\r\n    //   .then((doc) => {\r\n    //     if (doc) {\r\n    //       // this.dataDB = doc.data;\r\n    //     }        \r\n    //   })\r\n\r\n    this.arquivosGet();\r\n  \r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"gtxConfigDatetimePickerFormat\"]),\r\n    dataDB: {\r\n      get() {\r\n        return {\r\n          database: this.database,\r\n          idacao: this.idacao,\r\n          filename: this.filename,\r\n          arquivos: {\r\n            filter: this.filter,\r\n          }\r\n        }\r\n      },\r\n      set(value) {\r\n        this.database = value.database;\r\n        this.idacao = value.idacao;\r\n        this.filename = value.filename;\r\n        this.arquivos.filter = value.filter;\r\n      }\r\n    },\r\n    params() {\r\n      return {\r\n        database: this.database,\r\n        idacao: this.idacao,\r\n        filename: this.filename,\r\n      };\r\n    },\r\n    arquivosfiltered() {\r\n      return this.arquivos.data.filter(\r\n        (f) => this.erro.includes(f.Erro) || this.erro == \"all\"\r\n      );\r\n    },\r\n    nrodangers() {\r\n      return this.arquivos.data.filter((f) => f.Erro).length.toString();\r\n    },\r\n    nrosuccess() {\r\n      return this.arquivos.data\r\n        .filter((f) => f.Erro !== null && !f.Erro)\r\n        .length.toString();\r\n    },\r\n    nrowarnings() {\r\n      return this.arquivos.data.filter((f) => f.Erro == null).length.toString();\r\n    },\r\n    nroinfo() {\r\n      return this.arquivos.data.length.toString();\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    rowClass(item, type) {\r\n      if (!item || type !== \"row\") return;\r\n      if (item.Erro == null) return \"table-warning\";\r\n      return item.Erro ? \"table-danger\" : \"table-success\";\r\n    },\r\n    dashcardfooterclick(footerstate, value) {\r\n      const i = this.erro.findIndex((f) => f == value);\r\n      if (footerstate) {\r\n        if (i == -1) {\r\n          this.erro.push(value);\r\n        }\r\n      } else {\r\n        if (i > -1) {\r\n          this.erro.splice(i, 1);\r\n        }\r\n      }\r\n    },\r\n    arquivosGet() {\r\n      API.get(\"v2/Servicos/ArquivosDirectory/Get\", this.params).then((res) => {\r\n        if (res.data.Success) {\r\n          this.arquivos.data = res.data.Data;\r\n          this.collapseformopen = false;\r\n          // salva no localDB\r\n          // const idCollection = 'horlle';\r\n          const localroute = this.$route.path.substr(1);\r\n          const localdata = {id: localroute, data: this.dataDB};\r\n\r\n          // API.setLocalDBDocument(this.dataDB);\r\n\r\n        } else {\r\n          this.arquivos.data = [];\r\n          this.collapseformopen = true;\r\n        }\r\n      });\r\n    },\r\n    arquivosOpen(item) {\r\n      this.$root.showmessage('Confirme a exclusão deste histórico?', 'Excluir registro')\r\n        .then(choice => {\r\n          const params = {\r\n            idXMLImport: item.idXMLImportPromob,\r\n          };\r\n          API.get(\"v2/Servicos/ArquivosDirectory/BuilderXMLGet\", params).then(\r\n            (res) => {\r\n              if (res.data.Success) {\r\n                this.arquivos.xml = res.data.Data;\r\n              } else {\r\n                this.arquivos.xml = [];\r\n              }\r\n            }\r\n          );\r\n        })\r\n    },\r\n    historyDel(item) {\r\n      const body = {\r\n        idHistory: item.idHistory,\r\n      };\r\n      API.post(\"v2/Servicos/ArquivosDirectory/FinalidadesHistoryDel\", body).then(\r\n        (res) => {\r\n          if (res.data.Success) {\r\n            this.$root.toastsuccess(res.data.Data.Mensagem);\r\n          } else {\r\n            this.$root.toastdanger(res.data.Data.Mensagem);\r\n          }\r\n        }\r\n      );\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}