{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\components\\SearchApi2.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\components\\SearchApi2.vue","mtime":1670977910589},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UtYWxsLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEFwaVNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvYXBpLnNlcnZpY2UiOwppbXBvcnQgSW5wdXRTZWFyY2ggZnJvbSAiLi4vY29tcG9uZW50cy9JbnB1dFNlYXJjaCI7CmltcG9ydCBUYWJsZUVkaXRBcGkgZnJvbSAiLi4vY29tcG9uZW50cy9UYWJsZUVkaXRBcGkiOwppbXBvcnQgeyBtYXBBY3Rpb25zIH0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU2VhcmNoQXBpMiIsCiAgY29tcG9uZW50czogewogICAgSW5wdXRTZWFyY2gsCiAgICBUYWJsZUVkaXRBcGkKICB9LAogIHByb3BzOiB7CiAgICAvLyBub21lIGRvIGNhbXBvIGRhIGNoYXZlIHByaW1hcmlhIHF1ZSB2ZW0gZGEgYXBpLCBleDogaWQKICAgIHBrdmFsdWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAoKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gInZhbHVlIjsKICAgICAgfQoKICAgIH0sCiAgICAvLyBub21lIGRvIGNhbXBvIHBhcmEgc2VyIGV4aWJpZG8gcXVlIHZlbSBkYSBhcGksIGV4OiBkZXNjcmljYW8KICAgIHBrdGV4dDogewogICAgICB0eXBlOiBTdHJpbmcsCgogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiAidGV4dCI7CiAgICAgIH0KCiAgICB9LAogICAgcGtpZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAoKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gImRlZmF1bHQiOwogICAgICB9CgogICAgfSwKICAgIHJvdXRlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBwYXJhbXM6IHsKICAgICAgdHlwZTogT2JqZWN0CiAgICB9LAogICAgdGl0bGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAoKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gIlJlc3VsdGFkbyI7CiAgICAgIH0KCiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAoKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KCiAgICB9LAogICAgcnVuOiB7CiAgICAgIHR5cGU6IE51bWJlciwKCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0KCiAgICB9CiAgfSwKCiAgYmVmb3JlTW91bnQoKSB7CiAgICBpZiAodGhpcy52YWx1ZSAhPT0gIiIpIHsKICAgICAgY29uc29sZS5sb2coIlNlYXJjaEFwaS5iZWZvcmVNb3VudDoiLCB0aGlzLnZhbHVlKTsKICAgICAgdGhpcy5zZWFyY2goKTsKICAgIH0KICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VhcmNoVGV4dDogIiIsCiAgICAgIHNlYXJjaElkOiAiMCIsCiAgICAgIHNlYXJjaE9iajogewogICAgICAgIHZhbHVlOiAiIiwKICAgICAgICB0ZXh0OiB0aGlzLnZhbHVlCiAgICAgIH0sCiAgICAgIGxpc3RMb2FkOiBmYWxzZSwKICAgICAgaXRlbXNMaXN0OiBbXSwKICAgICAgZmllbGRMaXN0OiBbewogICAgICAgIGtleTogInZhbHVlIiwKICAgICAgICBsYWJlbDogIkPDs2RpZ28iLAogICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIHZpc2libGU6IHRydWUKICAgICAgfSwgewogICAgICAgIGtleTogInRleHQiLAogICAgICAgIGxhYmVsOiAiRGVzY3Jpw6fDo28iLAogICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIHZpc2libGU6IHRydWUKICAgICAgfV0KICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIHBhcmFtc0FwaSgpIHsKICAgICAgLy8gYWRpY2lvbmEgJSBhb3MgZXNwYcOnb3MgZW0gYnJhbmNvIC4uLgogICAgICAvLyByZXR1cm4geyBwZXNxdWlzYTogdGhpcy5zZWFyY2hUZXh0LnJlcGxhY2VBbGwoJyAnLCAnJScpIH0KICAgICAgcmV0dXJuIHRoaXMucGFyYW1zID8gdGhpcy5wYXJhbXMgOiB7CiAgICAgICAgcGVzcXVpc2E6IHRoaXMuc2VhcmNoT2JqLnRleHQucmVwbGFjZUFsbCgiICIsICIlIikKICAgICAgfTsKICAgIH0KCiAgfSwKICBtZXRob2RzOiB7IC4uLm1hcEFjdGlvbnMoWyJhY3RBbGVydCJdKSwKCiAgICBzZWFyY2goKSB7CiAgICAgIHRoaXMubGlzdExvYWQgPSB0cnVlOwogICAgICBBcGlTZXJ2aWNlLnBvc3QodGhpcy5yb3V0ZSwgdGhpcy5wYXJhbXNBcGkpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmxpc3RMb2FkID0gZmFsc2U7CgogICAgICAgIGlmIChyZXMuZGF0YS5TdWNjZXNzID09ICJGYWxzZSIpIHsKICAgICAgICAgIHRoaXMuYWN0QWxlcnQoewogICAgICAgICAgICB2YXJpYW50OiAiZGFuZ2VyIiwKICAgICAgICAgICAgbWVzc2FnZTogcmVzLmRhdGEuRXJyb3IKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAocmVzLmRhdGEuU3VjY2VzcyA9PSAiVHJ1ZSIpIHsKICAgICAgICAgICAgdGhpcy5pdGVtc0xpc3QgPSByZXMuZGF0YS5EYXRhLm1hcChkID0+IHsKICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgdmFsdWU6IGRbdGhpcy5wa3ZhbHVlXSwKICAgICAgICAgICAgICAgIHRleHQ6IGRbdGhpcy5wa3RleHRdCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAodGhpcy5pdGVtc0xpc3QubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgIHRoaXMuJGJ2TW9kYWwuc2hvdyhgSW5wdXRTZWFyY2hfTW9kYWwtJHt0aGlzLnBraWR9YCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5zZWFyY2hGb3VuZGVkKHRoaXMuaXRlbXNMaXN0WzBdKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgZXJyb3IgPT4gewogICAgICAgIGxldCBsZXJyb3IgPSB7CiAgICAgICAgICBzdGF0dXM6IDAsCiAgICAgICAgICBjb2RlOiAtMSwKICAgICAgICAgIG1lc3NhZ2U6ICIiLAogICAgICAgICAgZXJyb3I6IHt9LAogICAgICAgICAgcmVzcG9uc2U6IHt9CiAgICAgICAgfTsKCiAgICAgICAgaWYgKGVycm9yID09ICJFcnJvcjogTmV0d29yayBFcnJvciIpIHsKICAgICAgICAgIGxlcnJvci5zdGF0dXMgPSA1MDU7CiAgICAgICAgICBsZXJyb3IubWVzc2FnZSA9ICJFcnJvIG5hIHJlZGUiOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsZXJyb3IuZXJyb3IgPSBlcnJvcjsKCiAgICAgICAgICBpZiAoZXJyb3IuaGFzT3duUHJvcGVydHkoInJlc3BvbnNlIikpIHsKICAgICAgICAgICAgbGVycm9yLnJlc3BvbnNlID0gZXJyLnJlc3BvbnNlOwogICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuaGFzT3duUHJvcGVydHkoInN0YXR1cyIpKSBsZXJyb3Iuc3RhdHVzID0gZXJyLnJlc3BvbnNlLnN0YXR1czsKICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmhhc093blByb3BlcnR5KCJtZXNzYWdlIikpIGxlcnJvci5tZXNzYWdlID0gZXJyLnJlc3BvbnNlLm1lc3NhZ2U7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZXJyb3IuaGFzT3duUHJvcGVydHkoInN0YXR1cyIpKSBpZiAoZXJyb3Iuc3RhdHVzID09PSA0MDEpIGxlcnJvci5tZXNzYWdlID0gIkVycm8gbmEgYXV0ZW50aWNhw6fDo28sIHZlcmlmaXF1ZSB1c3XDoXJpbyBlIHNlbmhhIjsKICAgICAgICBpZiAoZXJyb3IuaGFzT3duUHJvcGVydHkoInN0YXR1cyIpKSBpZiAoZXJyb3Iuc3RhdHVzID09PSA0MDApIGVycm9yLm1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZS5kYXRhOwogICAgICAgIGNvbnNvbGUubG9nKCJTZWFyY2hBcGk6OnNlYXJjaDogIiwgZXJyb3IpOwogICAgICAgIHN0b3JlLmRpc3BhdGNoKCJhY3RTeXN0ZW1FcnJvckxvZyIsIGVycm9yKTsKICAgICAgICBjb25zb2xlLmxvZygiU2VhcmNoQXBpLnNlYXJjaC5lcnJvcjoiLCBlcnJvcik7CiAgICAgICAgdGhpcy5ldnRFcnJvcihlcnJvci5tZXNzYWdlKTsKICAgICAgfSk7CiAgICB9LAoKICAgIHNlYXJjaFgoKSB7CiAgICAgIHRoaXMuJGJ2TW9kYWwuc2hvdyhgSW5wdXRTZWFyY2hfTW9kYWwtJHt0aGlzLnBraWR9YCk7CiAgICB9LAoKICAgIHNlYXJjaEZvdW5kZWQoc2VsZWN0ZWQpIHsKICAgICAgdGhpcy5zZWFyY2hPYmogPSBzZWxlY3RlZDsKICAgICAgdGhpcy5zZWFyY2hJZCA9IHNlbGVjdGVkW3RoaXMucGt2YWx1ZV07CiAgICAgIHRoaXMuc2VhcmNoVGV4dCA9IHNlbGVjdGVkW3RoaXMucGt0ZXh0XTsKICAgICAgdGhpcy4kYnZNb2RhbC5oaWRlKGBJbnB1dFNlYXJjaF9Nb2RhbC0ke3RoaXMucGtpZH1gKTsKICAgICAgdGhpcy4kZW1pdCgiaW5wdXQiLCBzZWxlY3RlZFt0aGlzLnBrdmFsdWVdKTsKICAgIH0sCgogICAgZXZ0cGFnZShldnQpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ1NlYXJjaEFwaS5ldnRwYWdlOicsIGV2dCkKICAgICAgY29uc29sZS5sb2coIlNlYXJjaEFwaS5ldnRwYWdlOiIsIGV2dCk7CiAgICB9LAoKICAgIGV2dHNlbGVjdChldnQpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ1NlYXJjaEFwaS5ldnRzZWxlY3Q6JywgZXZ0KQogICAgICB0aGlzLnNlYXJjaEZvdW5kZWQoZXZ0WzBdKTsKICAgIH0sCgogICAgZXZ0RXJyb3IoZXJyb3JNZXNzYWdlKSB7CiAgICAgIHRoaXMuJGVtaXQoImV2dC1lcnJvciIsIGVycm9yTWVzc2FnZSk7CiAgICB9LAoKICAgIG9uSGlkZU1vZGFsKGV2dCkgey8vIGNvbnNvbGUubG9nKCdTZWFyY2hBcGkub25IaWRlTW9kYWw6JywgZXZ0KQogICAgfQoKICB9LAogIHdhdGNoOiB7CiAgICBydW4oKSB7CiAgICAgIGlmICh0aGlzLnZhbHVlLnRleHQgIT09ICIiKSB7CiAgICAgICAgdGhpcy5zZWFyY2goKTsKICAgICAgfQogICAgfSwKCiAgICBzZWFyY2hUZXh0KCkgewogICAgICBpZiAodGhpcy5zZWFyY2hUZXh0ID09ICIiKSB0aGlzLnNlYXJjaEZvdW5kZWQoewogICAgICAgIHZhbHVlOiAiIiwKICAgICAgICB0ZXh0OiAiIgogICAgICB9KTsKICAgIH0sCgogICAgc2VhcmNoT2JqOiB7CiAgICAgIGRlZXA6IHRydWUsCgogICAgICBoYW5kbGVyKCkgewogICAgICAgIGlmICh0aGlzLnNlYXJjaE9iai50ZXh0ID09ICIiICYmIHRoaXMuc2VhcmNoT2JqLnZhbHVlICE9ICIiKSB0aGlzLnNlYXJjaE9iai52YWx1ZSA9ICIiOwogICAgICB9CgogICAgfSwKCiAgICB2YWx1ZSgpIHsKICAgICAgaWYgKHRoaXMudmFsdWUgPT0gIiIpIHsKICAgICAgICB0aGlzLnNlYXJjaE9iai52YWx1ZSA9ICIiOwogICAgICAgIHRoaXMuc2VhcmNoT2JqLnRleHQgPSAiIjsKICAgICAgfQogICAgfQoKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AAEA;EACAA,kBADA;EAGAC;IACAC,WADA;IAEAC;EAFA,CAHA;EAQAC;IACA;IACAC;MACAC,YADA;;MAEAC;QACA;MACA;;IAJA,CAFA;IAQA;IACAC;MACAF,YADA;;MAEAC;QACA;MACA;;IAJA,CATA;IAeAE;MACAH,YADA;MAEAI,cAFA;;MAGAH;QACA;MACA;;IALA,CAfA;IAsBAI;MAAAL;MAAAI;IAAA,CAtBA;IAuBAE;MAAAN;IAAA,CAvBA;IAwBAO;MACAP,YADA;;MAEAC;QACA;MACA;;IAJA,CAxBA;IA8BAO;MACAR,YADA;;MAEAC;QACA;MACA;;IAJA,CA9BA;IAoCAQ;MACAT,YADA;;MAEAC;QACA;MACA;;IAJA;EApCA,CARA;;EAoDAS;IACA;MACAC;MACA;IACA;EACA,CAzDA;;EA2DAC;IACA;MACAC,cADA;MAEAC,aAFA;MAGAC;QAAAP;QAAAQ;MAAA,CAHA;MAIAC,eAJA;MAKAC,aALA;MAMAC,YACA;QAAAC;QAAAC;QAAAC;QAAAC;MAAA,CADA,EAEA;QAAAH;QAAAC;QAAAC;QAAAC;MAAA,CAFA;IANA;EAWA,CAvEA;;EAyEAC;IACAC;MACA;MACA;MACA,qBACA,WADA,GAEA;QAAAC;MAAA,CAFA;IAGA;;EAPA,CAzEA;EAmFAC,WACA,2BADA;;IAGAC;MACA;MAEAC,iDACAC;QACA;;QACA;UACA;YAAAC;YAAAC;UAAA;QACA,CAFA,MAEA;UACA;YACA;cACA;gBAAAxB;gBAAAQ;cAAA;YACA,CAFA;;YAGA;cACA;YACA,CAFA,MAEA;cACA;YACA;UACA;QACA;MACA,CAjBA,EAmBAiB;QACA;UACAC,SADA;UAEAC,QAFA;UAGAH,WAHA;UAIAC,SAJA;UAKAG;QALA;;QAQA;UACAC;UACAA;QACA,CAHA,MAGA;UACAA;;UACA;YACAA;YACA,6CACAA;YACA,8CACAA;UACA;QACA;;QAEA,oCACA,0BACAA,iBACA,iDADA;QAGA,oCACA;QAEA1B;QAEA2B;QAEA3B;QAEA;MACA,CAzDA;IA2DA,CAjEA;;IAmEA4B;MACA;IACA,CArEA;;IAuEAC;MACA;MACA;MACA;MACA;MAEA;IACA,CA9EA;;IAgFAC;MACA;MACA9B;IACA,CAnFA;;IAqFA+B;MACA;MACA;IACA,CAxFA;;IA0FAC;MACA;IACA,CA5FA;;IA8FAC,kBACA;IACA;;EAhGA,CAnFA;EAsLAC;IACApC;MACA;QACA;MACA;IACA,CALA;;IAOAI;MACA;QAAAL;QAAAQ;MAAA;IACA,CATA;;IAWAD;MACA+B,UADA;;MAEAC;QACA,6DACA;MACA;;IALA,CAXA;;IAkBAvC;MACA;QACA;QACA;MACA;IACA;;EAvBA;AAtLA","names":["name","components","InputSearch","TableEditApi","props","pkvalue","type","default","pktext","pkid","required","route","params","title","value","run","beforeMount","console","data","searchText","searchId","searchObj","text","listLoad","itemsList","fieldList","key","label","sortable","visible","computed","paramsApi","pesquisa","methods","search","ApiService","res","variant","message","error","status","code","response","lerror","store","searchX","searchFounded","evtpage","evtselect","evtError","onHideModal","watch","deep","handler"],"sourceRoot":"src/components","sources":["SearchApi2.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <b-overlay :show=\"listLoad\" rounded=\"sm\">\r\n      <InputSearch\r\n        :id=\"`InputSearch_Input-${pkid}`\"\r\n        :pk=\"searchObj.value\"\r\n        v-bind=\"$attrs\"\r\n        v-model=\"searchObj.text\"\r\n        @key_enter=\"search\"\r\n      />\r\n    </b-overlay>\r\n\r\n    <b-modal\r\n      :id=\"`InputSearch_Modal-${pkid}`\"\r\n      okOnly\r\n      size=\"xl\"\r\n      scrollable\r\n      no-close-on-backdrop\r\n      :title=\"title\"\r\n      @hide=\"onHideModal\"\r\n    >\r\n      <TableEditApi\r\n        :fields=\"fieldList\"\r\n        :items=\"itemsList\"\r\n        :page=\"1\"\r\n        :perPage=\"10\"\r\n        :buttons=\"[]\"\r\n        @evt-page=\"evtpage\"\r\n        @evt-select=\"evtselect\"\r\n      />\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ApiService from \"../services/api.service\";\r\nimport InputSearch from \"../components/InputSearch\";\r\nimport TableEditApi from \"../components/TableEditApi\";\r\nimport { mapActions } from \"vuex\";\r\n\r\nexport default {\r\n  name: \"SearchApi2\",\r\n\r\n  components: {\r\n    InputSearch,\r\n    TableEditApi,\r\n  },\r\n\r\n  props: {\r\n    // nome do campo da chave primaria que vem da api, ex: id\r\n    pkvalue: {\r\n      type: String,\r\n      default() {\r\n        return \"value\";\r\n      },\r\n    },\r\n    // nome do campo para ser exibido que vem da api, ex: descricao\r\n    pktext: {\r\n      type: String,\r\n      default() {\r\n        return \"text\";\r\n      },\r\n    },\r\n    pkid: {\r\n      type: String,\r\n      required: true,\r\n      default() {\r\n        return \"default\";\r\n      },\r\n    },\r\n    route: { type: String, required: true },\r\n    params: { type: Object },\r\n    title: {\r\n      type: String,\r\n      default() {\r\n        return \"Resultado\";\r\n      },\r\n    },\r\n    value: {\r\n      type: String,\r\n      default() {\r\n        return \"\";\r\n      },\r\n    },\r\n    run: {\r\n      type: Number,\r\n      default() {\r\n        return 0;\r\n      },\r\n    },\r\n  },\r\n\r\n  beforeMount() {\r\n    if (this.value !== \"\") {\r\n      console.log(\"SearchApi.beforeMount:\", this.value);\r\n      this.search();\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      searchText: \"\",\r\n      searchId: \"0\",\r\n      searchObj: { value: \"\", text: this.value },\r\n      listLoad: false,\r\n      itemsList: [],\r\n      fieldList: [\r\n        { key: \"value\", label: \"Código\", sortable: true, visible: true },\r\n        { key: \"text\", label: \"Descrição\", sortable: true, visible: true },\r\n      ],\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    paramsApi() {\r\n      // adiciona % aos espaços em branco ...\r\n      // return { pesquisa: this.searchText.replaceAll(' ', '%') }\r\n      return this.params\r\n        ? this.params\r\n        : { pesquisa: this.searchObj.text.replaceAll(\" \", \"%\") };\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"actAlert\"]),\r\n\r\n    search() {\r\n      this.listLoad = true;\r\n\r\n      ApiService.post(this.route, this.paramsApi).then(\r\n        (res) => {\r\n          this.listLoad = false;\r\n          if (res.data.Success == \"False\") {\r\n            this.actAlert({ variant: \"danger\", message: res.data.Error });\r\n          } else {\r\n            if (res.data.Success == \"True\") {\r\n              this.itemsList = res.data.Data.map((d) => {\r\n                return { value: d[this.pkvalue], text: d[this.pktext] };\r\n              });\r\n              if (this.itemsList.length > 1) {\r\n                this.$bvModal.show(`InputSearch_Modal-${this.pkid}`);\r\n              } else {\r\n                this.searchFounded(this.itemsList[0]);\r\n              }\r\n            }\r\n          }\r\n        },\r\n\r\n        (error) => {\r\n          let lerror = {\r\n            status: 0,\r\n            code: -1,\r\n            message: \"\",\r\n            error: {},\r\n            response: {},\r\n          };\r\n\r\n          if (error == \"Error: Network Error\") {\r\n            lerror.status = 505;\r\n            lerror.message = \"Erro na rede\";\r\n          } else {\r\n            lerror.error = error;\r\n            if (error.hasOwnProperty(\"response\")) {\r\n              lerror.response = err.response;\r\n              if (error.response.hasOwnProperty(\"status\"))\r\n                lerror.status = err.response.status;\r\n              if (error.response.hasOwnProperty(\"message\"))\r\n                lerror.message = err.response.message;\r\n            }\r\n          }\r\n\r\n          if (error.hasOwnProperty(\"status\"))\r\n            if (error.status === 401)\r\n              lerror.message =\r\n                \"Erro na autenticação, verifique usuário e senha\";\r\n\r\n          if (error.hasOwnProperty(\"status\"))\r\n            if (error.status === 400) error.message = error.response.data;\r\n\r\n          console.log(\"SearchApi::search: \", error);\r\n\r\n          store.dispatch(\"actSystemErrorLog\", error);\r\n\r\n          console.log(\"SearchApi.search.error:\", error);\r\n\r\n          this.evtError(error.message);\r\n        }\r\n      );\r\n    },\r\n\r\n    searchX() {\r\n      this.$bvModal.show(`InputSearch_Modal-${this.pkid}`);\r\n    },\r\n\r\n    searchFounded(selected) {\r\n      this.searchObj = selected;\r\n      this.searchId = selected[this.pkvalue];\r\n      this.searchText = selected[this.pktext];\r\n      this.$bvModal.hide(`InputSearch_Modal-${this.pkid}`);\r\n\r\n      this.$emit(\"input\", selected[this.pkvalue]);\r\n    },\r\n\r\n    evtpage(evt) {\r\n      // console.log('SearchApi.evtpage:', evt)\r\n      console.log(\"SearchApi.evtpage:\", evt);\r\n    },\r\n\r\n    evtselect(evt) {\r\n      // console.log('SearchApi.evtselect:', evt)\r\n      this.searchFounded(evt[0]);\r\n    },\r\n\r\n    evtError(errorMessage) {\r\n      this.$emit(\"evt-error\", errorMessage);\r\n    },\r\n\r\n    onHideModal(evt) {\r\n      // console.log('SearchApi.onHideModal:', evt)\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    run() {\r\n      if (this.value.text !== \"\") {\r\n        this.search();\r\n      }\r\n    },\r\n\r\n    searchText() {\r\n      if (this.searchText == \"\") this.searchFounded({ value: \"\", text: \"\" });\r\n    },\r\n\r\n    searchObj: {\r\n      deep: true,\r\n      handler() {\r\n        if (this.searchObj.text == \"\" && this.searchObj.value != \"\")\r\n          this.searchObj.value = \"\";\r\n      },\r\n    },\r\n    value() {\r\n      if (this.value == \"\") {\r\n        this.searchObj.value = \"\";\r\n        this.searchObj.text = \"\";\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}