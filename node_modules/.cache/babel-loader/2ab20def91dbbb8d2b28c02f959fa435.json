{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\chat\\views\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\chat\\views\\index.vue","mtime":1670977910606},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwQWN0aW9ucywgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgTWVzc2FnZXMgZnJvbSAiLi4vY29tcG9uZW50cy9NZXNzYWdlcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ2hhdCIsCiAgY29tcG9uZW50czogewogICAgTWVzc2FnZXMKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcm9vbTogbnVsbCwKICAgICAgY2hhdGxpc3RlbjogbnVsbCwKICAgICAgbWVzc2FnZXM6IFtdLAogICAgICB1c2VybGlzdDogW3sKICAgICAgICB1c2VyOiB0aGlzLmd0eEF1dGhQcm9maWxlVXNlck5hbWUKICAgICAgfSwgewogICAgICAgIHVzZXI6ICJzcHJfcHJlbWl1bSIKICAgICAgfSwgewogICAgICAgIHVzZXI6ICJzcHJfaWRlbGxpIgogICAgICB9XSwKICAgICAgdG86ICIiLAogICAgICBmcm9tOiB0aGlzLmd0eEF1dGhQcm9maWxlVXNlck5hbWUsCiAgICAgIG1lc3NhZ2U6ICIiCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7IC4uLm1hcEdldHRlcnMoWyJndHhBdXRoUHJvZmlsZVVzZXJOYW1lIiwgImd0eEF1dGhVc2VyIiwgImd0eHVzZXJzIiwgImd0eHVzZXIiLCAiZ3R4dXNlcnNsaXN0IiwgImd0eGNoYXQiLCAiZ3R4Y2hhdERhdGEiLCAiZ3R4ZmlyZWJhc2VSZWYiLCAiZ3R4Y2hhdFF1ZXJ5IiwgImd0eHJvb21zRGF0YSIsICJndHhyb29tc0RhdGFMaXN0IiwgImd0eGNoYXRNZXNzYWdlcyIsICJndHhjaGF0VXNlcnNEYXRhIl0pLAoKICAgIGNoYXR0aXRsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMucm9vbSA/IHRoaXMucm9vbS50ZXh0IDogIlNlbGVjaW9uZSBvIGNoYXQiOwogICAgfSwKCiAgICBhc3luYyBnZXRjaGF0dXNlcihrZXkpIHsKICAgICAgbGV0IHJlcyA9IFtdOwogICAgICBhd2FpdCB0aGlzLmd0eGZpcmViYXNlUmVmKCJjaGF0IikuZ2V0KGtleSkudGhlbihzbmFwc2hvdCA9PiB7CiAgICAgICAgc25hcHNob3QuZm9yRWFjaChkb2MgPT4gewogICAgICAgICAgcmVzLnB1c2goewogICAgICAgICAgICBpZDogZG9jLmlkLAogICAgICAgICAgICBkYXRhOiBkb2MuZGF0YSgpCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHJldHVybiByZXM7CiAgICB9LAoKICAgIGNoYXR1c2VycygpIHsKICAgICAgcmV0dXJuIGd0eGNoYXRVc2Vyc0RhdGEuZmlsdGVyKGYgPT4gZi5ub21lLmluY2x1ZGVzKHRoaXMudG8pKTsKICAgIH0KCiAgfSwKCiAgYmVmb3JlTW91bnQoKSB7CiAgICB0aGlzLm9uRmlyZURhdGEoInVzZXJzIik7CiAgICB0aGlzLmFjdENoYXRJbml0KHRoaXMuZ3R4QXV0aFByb2ZpbGVVc2VyTmFtZSk7CiAgICB0aGlzLmFjdENoYXRVc2VycygpOwogIH0sCgogIGRlc3Ryb3llZCgpIHsKICAgIHRoaXMub25GaXJlRGF0YSgidXNlcnMiKTsKICB9LAoKICBtZXRob2RzOiB7IC4uLm1hcEFjdGlvbnMoWyJhY3RDaGF0SW5pdCIsICJpbml0RG9jIiwgInJlYWREb2MiLCAicXVlcnlEb2MiLCAib25GaXJlRGF0YSIsICJhY3R1c2VyYWRkIiwgImFjdGNoYXRzZW5kIiwgImFjdGNoYXRzZWxlY3RlZCIsICJhY3RDaGF0TGlzdGVuIiwgImFjdENoYXRVc2VycyJdKSwKCiAgICBzZWxlY3Ryb29tKHJvb20pIHsKICAgICAgdGhpcy5yb29tID0gcm9vbTsKICAgIH0sCgogICAgc2VsZWN0Y2hhdChyb29tKSB7CiAgICAgIHRoaXMuZ3R4ZmlyZWJhc2VSZWYoImNoYXQiKS5kb2Mocm9vbS52YWx1ZSkuY29sbGVjdGlvbigibWVzc2FnZXMiKS5vcmRlckJ5KCJ0aW1lIikub25TbmFwc2hvdChzbmFwc2hvdCA9PiB7CiAgICAgICAgdGhpcy5tZXNzYWdlcyA9IFtdOwogICAgICAgIHNuYXBzaG90LmZvckVhY2goZG9jID0+IHsKICAgICAgICAgIHRoaXMubWVzc2FnZXMucHVzaChkb2MuZGF0YSgpKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAoKICAgIHN0b3BsaXN0ZW5jaGF0KCkge30sCgogICAgYWRkTWVzc2FnZSgpIHsKICAgICAgdGhpcy5ndHhmaXJlYmFzZVJlZigiY2hhdCIpLmRvYyh0aGlzLnJvb20udmFsdWUpLmNvbGxlY3Rpb24oIm1lc3NhZ2VzIikuZG9jKCkuc2V0KHsKICAgICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsCiAgICAgICAgc2VuZGVyOiB0aGlzLmd0eEF1dGhQcm9maWxlVXNlck5hbWUsCiAgICAgICAgdGltZTogbmV3IERhdGUoKQogICAgICB9KTsKICAgICAgdGhpcy5tZXNzYWdlID0gIiI7CiAgICB9CgogIH0sCiAgd2F0Y2g6IHsKICAgIHJvb20oKSB7CiAgICAgIHRoaXMuc2VsZWN0Y2hhdCh0aGlzLnJvb20pOwogICAgfQoKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiLA;AACA;AACA;EACAA,YADA;EAGAC;IACAC;EADA,CAHA;;EAOAC;IACA;MACAC,UADA;MAEAC,gBAFA;MAGAC,YAHA;MAKAC,WACA;QAAAC;MAAA,CADA,EAEA;QAAAA;MAAA,CAFA,EAGA;QAAAA;MAAA,CAHA,CALA;MAUAC,MAVA;MAWAC,iCAXA;MAYAC;IAZA;EAcA,CAtBA;;EAwBAC,YACA,eACA,wBADA,EAEA,aAFA,EAGA,UAHA,EAIA,SAJA,EAKA,cALA,EAMA,SANA,EAOA,aAPA,EAQA,gBARA,EASA,cATA,EAUA,cAVA,EAWA,kBAXA,EAYA,iBAZA,EAaA,kBAbA,EADA;;IAiBAC;MACA;IACA,CAnBA;;IAqBA;MACA;MACA,kCACAC,GADA,CACAC,GADA,EAEAC,IAFA,CAEAC;QACAA;UACAC;YAAAC;YAAAhB;UAAA;QACA,CAFA;MAGA,CANA;MAQA;IACA,CAhCA;;IAkCAiB;MACA;IACA;;EApCA,CAxBA;;EA+DAC;IACA;IACA;IAEA;EACA,CApEA;;EAsEAC;IACA;EACA,CAxEA;;EA0EAC,WACA,eACA,aADA,EAEA,SAFA,EAGA,SAHA,EAIA,UAJA,EAKA,YALA,EAMA,YANA,EAOA,aAPA,EAQA,iBARA,EASA,eATA,EAUA,cAVA,EADA;;IAcAC;MACA;IACA,CAhBA;;IAkBAC;MACA,4BACAC,GADA,CACAtB,UADA,EAEAuB,UAFA,CAEA,UAFA,EAGAC,OAHA,CAGA,MAHA,EAIAC,UAJA,CAIAZ;QACA;QACAA;UACA;QACA,CAFA;MAGA,CATA;IAUA,CA7BA;;IA+BAa,mBA/BA;;IAiCAC;MACA,4BACAL,GADA,CACA,eADA,EAEAC,UAFA,CAEA,UAFA,EAGAD,GAHA,GAIAM,GAJA,CAIA;QACArB,qBADA;QAEAsB,mCAFA;QAGAC;MAHA,CAJA;MAUA;IACA;;EA7CA,CA1EA;EA0HAC;IACA/B;MACA;IACA;;EAHA;AA1HA","names":["name","components","Messages","data","room","chatlisten","messages","userlist","user","to","from","message","computed","chattitle","get","key","then","snapshot","res","id","chatusers","beforeMount","destroyed","methods","selectroom","selectchat","doc","collection","orderBy","onSnapshot","stoplistenchat","addMessage","set","sender","time","watch"],"sourceRoot":"src/pages/chat/views","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div class=\"m-2\">\r\n    <b-sidebar id=\"sidebar-1\" title=\"Usuários\" backdrop shadow>\r\n      <div class=\"px-3 py-2\">\r\n        <b-col class=\"mb-3\">\r\n          <b-input-group>\r\n            <b-form-input\r\n              v-model=\"to\"\r\n              placeholder=\"Pesquisar usuários\"\r\n            ></b-form-input>\r\n\r\n            <b-input-group-append>\r\n              <b-button variant=\"outline-success\" @click=\"actuseradd(to)\"\r\n                ><b-icon-person-plus\r\n              /></b-button>\r\n            </b-input-group-append>\r\n          </b-input-group>\r\n        </b-col>\r\n\r\n        <b-overlay :show=\"gtxchatUsersData.length == 0\" rounded=\"sm\">\r\n          <b-list-group>\r\n            <b-list-group-item\r\n              href=\"#\"\r\n              v-for=\"(u, i) of gtxchatUsersData\"\r\n              :key=\"i\"\r\n              @click.prevent=\"selectroom(u)\"\r\n              bg-color=\"secondary\"\r\n              class=\"d-flex justify-content-between align-items-center\"\r\n            >\r\n              <div>\r\n                <b-icon-person />\r\n                <strong class=\"ml-3\">{{ u.nome }}</strong>\r\n              </div>\r\n              <b-badge v-if=\"u.usuario == 'Idélli'\" variant=\"warning\"\r\n                >1</b-badge\r\n              >\r\n            </b-list-group-item>\r\n          </b-list-group>\r\n        </b-overlay>\r\n\r\n        gtxchatUsersData:\r\n        <pre>{{ gtxchatUsersData }}</pre>\r\n\r\n        <!--\r\n            <b-overlay :show=\"gtxchatUsersData.length==0\" rounded=\"sm\">\r\n                <b-list-group>\r\n                    <b-list-group-item\r\n                        href=\"#\" \r\n                        v-for=\"(u,i) of gtxchatUsersData\" :key=\"i\" @click.prevent=\"selectroom(u)\"\r\n                        bg-color=\"secondary\">\r\n                        <div>\r\n                            <b-icon-person/>\r\n                            <strong class=\"ml-3\">{{ u.usuario }}</strong>\r\n                        </div>\r\n                        <div>\r\n                            <span class=\"d-flex float-right\" style=\"font-size: 10px\">{{ u.setor }}</span>\r\n                        </div>\r\n                        <b-badge v-if=\"u.text == 'Idélli'\" variant=\"warning\">1</b-badge>\r\n                    </b-list-group-item>\r\n                </b-list-group>\r\n            </b-overlay>\r\n            -->\r\n      </div>\r\n    </b-sidebar>\r\n\r\n    <b-card class=\"container\">\r\n      <b-card-title class=\"bg-info text-white p-2\">\r\n        <b-button v-b-toggle.sidebar-1 variant=\"light\">\r\n          <b-icon icon=\"menu-app\" />\r\n        </b-button>\r\n        {{ chattitle }}\r\n      </b-card-title>\r\n\r\n      <b-card-text class=\"overflow-auto\">\r\n        <Messages\r\n          v-for=\"(m, i) of messages\"\r\n          :key=\"i\"\r\n          :message=\"m.message\"\r\n          :incomming=\"m.sender !== gtxAuthProfileUserName\"\r\n          :time=\"m.time.seconds\"\r\n          :sender=\"m.sender\"\r\n        />\r\n      </b-card-text>\r\n\r\n      <b-card-text class=\"mt-2\">\r\n        <b-input-group>\r\n          <b-form-input v-model=\"message\"></b-form-input>\r\n          <b-input-group-append>\r\n            <b-button variant=\"primary\" disabled><b-icon-paperclip /></b-button>\r\n            <b-button\r\n              variant=\"success\"\r\n              :disabled=\"message == ''\"\r\n              @click=\"addMessage\"\r\n              ><b-icon-cursor\r\n            /></b-button>\r\n          </b-input-group-append>\r\n        </b-input-group>\r\n      </b-card-text>\r\n    </b-card>\r\n\r\n    <!--\r\n        gtxchatUsersData: {{gtxchatUsersData}}\r\n    \r\n        <div class=\"accordion\" role=\"tablist\">\r\n            <b-card no-body class=\"mb-1\">\r\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                    <b-button block v-b-toggle.accordion-1 variant=\"info\">messages</b-button>\r\n                </b-card-header>\r\n                <b-collapse id=\"accordion-1\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                    <b-card-body>\r\n                        <b-card-text><pre>{{ messages }} </pre></b-card-text>\r\n                    </b-card-body>\r\n                </b-collapse>\r\n            </b-card>\r\n\r\n            <b-card no-body class=\"mb-1\">\r\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                    <b-button block v-b-toggle.accordion-2 variant=\"info\">gtxchatbyuser</b-button>\r\n                </b-card-header>\r\n                <b-collapse id=\"accordion-2\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                    <b-card-body>\r\n                        <b-card-text><pre>{{ gtxchatbyuser(gtxAuthUser) }} </pre></b-card-text>\r\n                    </b-card-body>\r\n                </b-collapse>\r\n            </b-card>\r\n\r\n            <b-card no-body class=\"mb-1\">\r\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                    <b-button block v-b-toggle.accordion-3 variant=\"info\">gtxchatData</b-button>\r\n                </b-card-header>\r\n                <b-collapse id=\"accordion-3\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                    <b-card-body>\r\n                        <b-card-text><pre>{{ gtxchatData }} </pre></b-card-text>\r\n                    </b-card-body>\r\n                </b-collapse>\r\n            </b-card>\r\n\r\n            <b-card no-body class=\"mb-1\">\r\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                    <b-button block v-b-toggle.accordion-4 variant=\"info\">gtxroomsData</b-button>\r\n                </b-card-header>\r\n                <b-collapse id=\"accordion-4\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                    <b-card-body>\r\n                        <b-card-text><pre>{{ gtxroomsData }} </pre></b-card-text>\r\n                    </b-card-body>\r\n                </b-collapse>\r\n            </b-card>\r\n\r\n        </div>\r\n\r\n        <b-card no-body class=\"mb-1\">\r\n            <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                <b-button block v-b-toggle.accordion-5 variant=\"info\">gtxroomsDataList</b-button>\r\n            </b-card-header>\r\n            <b-collapse id=\"accordion-5\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                <b-card-body>\r\n                    <b-card-text><pre>{{ gtxroomsDataList(gtxAuthUser) }} </pre></b-card-text>\r\n                </b-card-body>\r\n            </b-collapse>\r\n        </b-card>\r\n\r\n        <b-card no-body class=\"mb-1\">\r\n            <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                <b-button block v-b-toggle.accordion-6 variant=\"info\">gtxchatMessages</b-button>\r\n            </b-card-header>\r\n            <b-collapse id=\"accordion-6\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                <b-card-body>\r\n                    <b-card-text><pre>{{ gtxchatMessages }}</pre></b-card-text>\r\n                </b-card-body>\r\n            </b-collapse>\r\n        </b-card>\r\n\r\n-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nimport Messages from \"../components/Messages\";\r\nexport default {\r\n  name: \"Chat\",\r\n\r\n  components: {\r\n    Messages,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      room: null,\r\n      chatlisten: null,\r\n      messages: [],\r\n\r\n      userlist: [\r\n        { user: this.gtxAuthProfileUserName },\r\n        { user: \"spr_premium\" },\r\n        { user: \"spr_idelli\" },\r\n      ],\r\n      to: \"\",\r\n      from: this.gtxAuthProfileUserName,\r\n      message: \"\",\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\r\n      \"gtxAuthProfileUserName\",\r\n      \"gtxAuthUser\",\r\n      \"gtxusers\",\r\n      \"gtxuser\",\r\n      \"gtxuserslist\",\r\n      \"gtxchat\",\r\n      \"gtxchatData\",\r\n      \"gtxfirebaseRef\",\r\n      \"gtxchatQuery\",\r\n      \"gtxroomsData\",\r\n      \"gtxroomsDataList\",\r\n      \"gtxchatMessages\",\r\n      \"gtxchatUsersData\",\r\n    ]),\r\n\r\n    chattitle() {\r\n      return this.room ? this.room.text : \"Selecione o chat\";\r\n    },\r\n\r\n    async getchatuser(key) {\r\n      let res = [];\r\n      await this.gtxfirebaseRef(\"chat\")\r\n        .get(key)\r\n        .then((snapshot) => {\r\n          snapshot.forEach((doc) => {\r\n            res.push({ id: doc.id, data: doc.data() });\r\n          });\r\n        });\r\n\r\n      return res;\r\n    },\r\n\r\n    chatusers() {\r\n      return gtxchatUsersData.filter((f) => f.nome.includes(this.to));\r\n    },\r\n  },\r\n\r\n  beforeMount() {\r\n    this.onFireData(\"users\");\r\n    this.actChatInit(this.gtxAuthProfileUserName);\r\n\r\n    this.actChatUsers();\r\n  },\r\n\r\n  destroyed() {\r\n    this.onFireData(\"users\");\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\r\n      \"actChatInit\",\r\n      \"initDoc\",\r\n      \"readDoc\",\r\n      \"queryDoc\",\r\n      \"onFireData\",\r\n      \"actuseradd\",\r\n      \"actchatsend\",\r\n      \"actchatselected\",\r\n      \"actChatListen\",\r\n      \"actChatUsers\",\r\n    ]),\r\n\r\n    selectroom(room) {\r\n      this.room = room;\r\n    },\r\n\r\n    selectchat(room) {\r\n      this.gtxfirebaseRef(\"chat\")\r\n        .doc(room.value)\r\n        .collection(\"messages\")\r\n        .orderBy(\"time\")\r\n        .onSnapshot((snapshot) => {\r\n          this.messages = [];\r\n          snapshot.forEach((doc) => {\r\n            this.messages.push(doc.data());\r\n          });\r\n        });\r\n    },\r\n\r\n    stoplistenchat() {},\r\n\r\n    addMessage() {\r\n      this.gtxfirebaseRef(\"chat\")\r\n        .doc(this.room.value)\r\n        .collection(\"messages\")\r\n        .doc()\r\n        .set({\r\n          message: this.message,\r\n          sender: this.gtxAuthProfileUserName,\r\n          time: new Date(),\r\n        });\r\n\r\n      this.message = \"\";\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    room() {\r\n      this.selectchat(this.room);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n"]}]}