{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\src\\router\\guard.js","dependencies":[{"path":"C:\\k1-services\\src\\router\\guard.js","mtime":1670977910673},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGNvb2tpZXMgZnJvbSAiLi4vc2VydmljZXMvY29va2llIjsKaW1wb3J0IHN0b3JlIGZyb20gIi4uL3N0b3JlIjsKZXhwb3J0IGZ1bmN0aW9uIHJvdXRlR3VhcmQodG8sIGZyb20sIG5leHQpIHsKICBzdG9yZS5kaXNwYXRjaCgiYWN0TGFzdFJvdXRlIiwgdG8uZnVsbFBhdGgucmVwbGFjZSgiLyIsICIiKSk7CgogIGlmIChjb29raWVzLmdldGNvb2tpZSgidG9rZW4iKSAhPT0gIiIpIHsKICAgIG5leHQoKTsKICB9IGVsc2UgewogICAgbmV4dCh7CiAgICAgIG5hbWU6ICJMb2dpbiIsCiAgICAgIHF1ZXJ5OiB7CiAgICAgICAgcmVkaXI6IHRvLmZ1bGxQYXRoLnJlcGxhY2UoIi8iLCAiIikKICAgICAgfQogICAgfSk7CiAgfQp9CmV4cG9ydCBmdW5jdGlvbiByb3V0ZUFkbWluR3VhcmQodG8sIGZyb20sIG5leHQpIHsKICBpZiAoY29va2llcy5nZXRjb29raWUoInRva2VuIikgIT09ICIiKSB7CiAgICBpZiAoc3RvcmUuZ2V0dGVyc1siZ3R4QXV0aFByb2ZpbGVBZG1pbiJdKSB7CiAgICAgIG5leHQoKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnNvbGUubG9nKCJsb2dpbiB1bmF1dGhvcml6ZWQgZm9yIHJvdXRlOiIsIHRvLmZ1bGxQYXRoKTsKICAgICAgbmV4dChmYWxzZSk7CiAgICB9CiAgfSBlbHNlIHsKICAgIG5leHQoewogICAgICBuYW1lOiAiTG9naW4iLAogICAgICBxdWVyeTogewogICAgICAgIHJlZGlyOiB0by5mdWxsUGF0aC5yZXBsYWNlKCIvIiwgIiIpCiAgICAgIH0KICAgIH0pOwogIH0KfQ=="},{"version":3,"names":["cookies","store","routeGuard","to","from","next","dispatch","fullPath","replace","getcookie","name","query","redir","routeAdminGuard","getters","console","log"],"sources":["C:/k1-services/src/router/guard.js"],"sourcesContent":["import cookies from \"../services/cookie\";\r\nimport store from \"../store\";\r\n\r\nexport function routeGuard(to, from, next) {\r\n  store.dispatch(\"actLastRoute\", to.fullPath.replace(\"/\", \"\"));\r\n  if (cookies.getcookie(\"token\") !== \"\") {\r\n    next();\r\n  } else {\r\n    next({ name: \"Login\", query: { redir: to.fullPath.replace(\"/\", \"\") } });\r\n  }\r\n}\r\n\r\nexport function routeAdminGuard(to, from, next) {\r\n  if (cookies.getcookie(\"token\") !== \"\") {\r\n    if (store.getters[\"gtxAuthProfileAdmin\"]) {\r\n      next();\r\n    } else {\r\n      console.log(\"login unauthorized for route:\", to.fullPath);\r\n      next(false);\r\n    }\r\n  } else {\r\n    next({ name: \"Login\", query: { redir: to.fullPath.replace(\"/\", \"\") } });\r\n  }\r\n}\r\n"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,oBAApB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AAEA,OAAO,SAASC,UAAT,CAAoBC,EAApB,EAAwBC,IAAxB,EAA8BC,IAA9B,EAAoC;EACzCJ,KAAK,CAACK,QAAN,CAAe,cAAf,EAA+BH,EAAE,CAACI,QAAH,CAAYC,OAAZ,CAAoB,GAApB,EAAyB,EAAzB,CAA/B;;EACA,IAAIR,OAAO,CAACS,SAAR,CAAkB,OAAlB,MAA+B,EAAnC,EAAuC;IACrCJ,IAAI;EACL,CAFD,MAEO;IACLA,IAAI,CAAC;MAAEK,IAAI,EAAE,OAAR;MAAiBC,KAAK,EAAE;QAAEC,KAAK,EAAET,EAAE,CAACI,QAAH,CAAYC,OAAZ,CAAoB,GAApB,EAAyB,EAAzB;MAAT;IAAxB,CAAD,CAAJ;EACD;AACF;AAED,OAAO,SAASK,eAAT,CAAyBV,EAAzB,EAA6BC,IAA7B,EAAmCC,IAAnC,EAAyC;EAC9C,IAAIL,OAAO,CAACS,SAAR,CAAkB,OAAlB,MAA+B,EAAnC,EAAuC;IACrC,IAAIR,KAAK,CAACa,OAAN,CAAc,qBAAd,CAAJ,EAA0C;MACxCT,IAAI;IACL,CAFD,MAEO;MACLU,OAAO,CAACC,GAAR,CAAY,+BAAZ,EAA6Cb,EAAE,CAACI,QAAhD;MACAF,IAAI,CAAC,KAAD,CAAJ;IACD;EACF,CAPD,MAOO;IACLA,IAAI,CAAC;MAAEK,IAAI,EAAE,OAAR;MAAiBC,KAAK,EAAE;QAAEC,KAAK,EAAET,EAAE,CAACI,QAAH,CAAYC,OAAZ,CAAoB,GAApB,EAAyB,EAAzB;MAAT;IAAxB,CAAD,CAAJ;EACD;AACF"}]}