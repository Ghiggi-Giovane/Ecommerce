{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\components\\TableEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\components\\TableEdit.vue","mtime":1670977910590},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJUYWJsZUVkaXQiLAogIHByb3BzOiB7CiAgICB0YWJsZUlkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuICd0YWJsZS0xJzsKICAgICAgfQoKICAgIH0sCiAgICBoZWFkZXI6IHsKICAgICAgdHlwZTogU3RyaW5nLAoKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KCiAgICB9LAogICAgZmllbGRzOiB7CiAgICAgIHR5cGU6IEFycmF5LAoKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KCiAgICB9LAogICAgaXRlbXM6IHsKICAgICAgdHlwZTogQXJyYXksCgogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQoKICAgIH0sCiAgICBidXR0b25zOiB7CiAgICAgIHR5cGU6IEFycmF5LAoKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gWydlZGl0JywgJ2RlbGV0ZScsICdpbnNlcnQnLCAnaW5mbyddOwogICAgICB9CgogICAgfSwKICAgIHJvd3M6IHsKICAgICAgdHlwZTogTnVtYmVyLAoKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfQoKICAgIH0sCiAgICBwZXJQYWdlOiB7CiAgICAgIHR5cGU6IE51bWJlciwKCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIDEwOwogICAgICB9CgogICAgfQogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWxlY3RlZDogbnVsbCwKICAgICAgc29ydEJ5OiAnJywKICAgICAgc29ydERlc2M6IGZhbHNlLAogICAgICBjdXJyZW50UGFnZTogMQogICAgfTsKICB9LAoKICBtb3VudGVkKCkgewogICAgaWYgKHRoaXMuJHJlZnNbInRhYmxlU2VhcmNoIl0pIHsvLyBUT0RPOiBkYXIgbyBmb2NvIG5vIHByaW1laXJvIHJlZ2lzdHJvIGRhIHRhYmVsYSBwYXJhIHBvZGVyIG5hdmVnYXIgY29tIG8gdGVjbGFkbyAuLi4KICAgICAgLy8gdGhpcy4kcmVmc1sidGFibGVTZWFyY2giXS5mb2N1cygpCiAgICB9CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGNvbHVtbnMoKSB7CiAgICAgIGxldCBjb2xzID0gdGhpcy5maWVsZHMgfHwgT2JqZWN0LmtleXModGhpcy5pdGVtcykubWFwKGsgPT4gewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBrZXk6IGssCiAgICAgICAgICBsYWJlbDogaywKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIHJldHVybiBjb2xzLm1hcChjID0+IHsKICAgICAgICByZXR1cm4geyAuLi5jLAogICAgICAgICAgLi4uewogICAgICAgICAgICBhY3Rpb25zOiAnLi4uJwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0pOwogICAgfSwKCiAgICB0b3RhbFJvd3MoKSB7CiAgICAgIHJldHVybiB0aGlzLnJvd3MgPiAwID8gdGhpcy5yb3dzIDogdGhpcy5pdGVtcy5sZW5ndGggfHwgMDsKICAgIH0KCiAgfSwKICB3YXRjaDogewogICAgY3VycmVudFBhZ2UocGFnZSkgewogICAgICB0aGlzLiRlbWl0KCdldnQtcGFnZScsIHBhZ2UpOwogICAgfQoKICB9LAogIG1ldGhvZHM6IHsKICAgIE5ldygpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ0VkaXRvdSBubyBpdGVtOicsIGV2dC5pdGVtLnZhbHVlLCBldnQpCiAgICAgIHRoaXMuJGVtaXQoJ2V2dC1uZXcnKTsKICAgIH0sCgogICAgcm93U2VsZWN0KGV2dCkgewogICAgICAvLyBjb25zb2xlLmxvZygnU2VsZWNpb25vdSBvIGl0ZW06JywgZXZ0KQogICAgICB0aGlzLiRlbWl0KCdldnQtc2VsZWN0JywgZXZ0KTsKICAgIH0sCgogICAgcm93RWRpdChldnQpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ0VkaXRvdSBubyBpdGVtOicsIGV2dC5pdGVtLnZhbHVlLCBldnQpCiAgICAgIHRoaXMuJGVtaXQoJ2V2dC1lZGl0JywgZXZ0KTsKICAgIH0sCgogICAgcm93RGVsZXRlKGV2dCkgewogICAgICAvLyBjb25zb2xlLmxvZygnRXhjbHVpdSBubyBpdGVtOicsIGV2dC5pdGVtLnZhbHVlLCBldnQpCiAgICAgIHRoaXMuJGVtaXQoJ2V2dC1kZWxldGUnLCBldnQpOwogICAgfSwKCiAgICByb3dJbnNlcnQoZXZ0KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdpbnNlcml1IG8gaXRlbTonLCBldnQuaXRlbS52YWx1ZSwgZXZ0KQogICAgICB0aGlzLiRlbWl0KCdldnQtaW5zZXJ0JywgZXZ0KTsKICAgIH0sCgogICAgcm93SW5mb3JtKGV2dCkgewogICAgICAvLyBjb25zb2xlLmxvZygnRXhjbHVpdSBubyBpdGVtOicsIGV2dC5pdGVtLnZhbHVlLCBldnQpCiAgICAgIHRoaXMuJGVtaXQoJ2V2dC1pbmZvcm0nLCBldnQpOwogICAgfQoKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;EAEAA,iBAFA;EAIAC;IACAC;MAAAC;;MAAAC;QAAA;MAAA;;IAAA,CADA;IAEAC;MAAAF;;MAAAC;QAAA;MAAA;;IAAA,CAFA;IAGAE;MAAAH;;MAAAC;QAAA;MAAA;;IAAA,CAHA;IAIAG;MAAAJ;;MAAAC;QAAA;MAAA;;IAAA,CAJA;IAKAI;MAAAL;;MAAAC;QAAA;MAAA;;IAAA,CALA;IAMAK;MAAAN;;MAAAC;QAAA;MAAA;;IAAA,CANA;IAOAM;MAAAP;;MAAAC;QAAA;MAAA;;IAAA;EAPA,CAJA;;EAcAO;IACA;MACAC,cADA;MAEAC,UAFA;MAGAC,eAHA;MAIAC;IAJA;EAMA,CArBA;;EAuBAC;IAEA,gCACA;MACA;IACA;EACA,CA7BA;;EA+BAC;IAEAC;MACA;QAAA;UAAAC;UAAAC;UAAAC;QAAA;MAAA;MACA;QAAA;UAAA;YAAAC;UAAA;QAAA;MAAA;IACA,CALA;;IAOAC;MACA;IACA;;EATA,CA/BA;EA4CAC;IACAT;MACA;IACA;;EAHA,CA5CA;EAkDAU;IAEAC;MACA;MACA;IACA,CALA;;IAMAC;MACA;MACA;IACA,CATA;;IAUAC;MACA;MACA;IACA,CAbA;;IAcAC;MACA;MACA;IACA,CAjBA;;IAkBAC;MACA;MACA;IACA,CArBA;;IAsBAC;MACA;MACA;IACA;;EAzBA;AAlDA","names":["name","props","tableId","type","default","header","fields","items","buttons","rows","perPage","data","selected","sortBy","sortDesc","currentPage","mounted","computed","columns","key","label","sortable","actions","totalRows","watch","methods","New","rowSelect","rowEdit","rowDelete","rowInsert","rowInform"],"sourceRoot":"src/components","sources":["TableEdit.vue"],"sourcesContent":["<template>\r\n    <div>\r\n\r\n        <b-pagination\r\n            v-if=\"rows>perPage\"\r\n            v-model=\"currentPage\"\r\n            :total-rows=\"totalRows\"\r\n            :per-page=\"perPage\"\r\n            aria-controls=\"tableSearch\"\r\n            size=\"sm\">\r\n        </b-pagination>\r\n\r\n        <b-table \r\n            striped\r\n            hover\r\n            small\r\n            selectable\r\n            select-mode=\"single\"\r\n            sort-icon-left\r\n            responsive=\"sm\"\r\n            id=\"tableSearch\"\r\n            ref=\"tableSearch\"\r\n            :total-rows=\"rows\"\r\n            :per-page=\"perPage\"\r\n            :fields=\"columns\"\r\n            :items=\"items\"\r\n            :sort-by.sync=\"sortBy\"\r\n            :sort-desc.sync=\"sortDesc\"\r\n            @row-selected=\"rowSelect\">\r\n\r\n            <template #thead-top>\r\n                <b-tr v-if=\"header.length>0\">\r\n                    <b-th :colspan=\"fields.length-1\">{{ header }}</b-th>\r\n                    <b-th>\r\n                        <b-button v-if=\"buttons.indexOf('new')>-1\"  variant=\"outline-primary\" size=\"sm\" v-b-tooltip.hover.topleft=\"'Novo registro'\" @click=\"New\">\r\n                            <b-icon-plus-circle class=\"mr-2\"/>\r\n                            Incluir\r\n                        </b-button>\r\n                    </b-th>\r\n                </b-tr>\r\n            </template>\r\n\r\n            <template #cell()=\"data\">\r\n                <div v-if=\"data.field.type == 'Date'\">\r\n                    {{ data.value | datetime}}\r\n                </div>\r\n                <div v-else>\r\n                    {{ data.value }}\r\n                </div>\r\n            </template>\r\n\r\n            <template #cell(actions)=\"row\">\r\n                <b-button size=\"sm\" v-if=\"buttons.indexOf('edit')>-1\"   variant=\"outline-success\" v-b-tooltip.hover.topleft=\"'Editar'\"      @click=\"rowEdit(row)\"   class=\"ml-1\"><b-icon-pencil/></b-button>\r\n                <b-button size=\"sm\" v-if=\"buttons.indexOf('delete')>-1\" variant=\"outline-danger\"  v-b-tooltip.hover.topleft=\"'Deletar'\"     @click=\"rowDelete(row)\" class=\"ml-1\"><b-icon-trash/></b-button>\r\n                <b-button size=\"sm\" v-if=\"buttons.indexOf('insert')>-1\" variant=\"outline-primary\" v-b-tooltip.hover.topleft=\"'Incluir'\"     @click=\"rowInsert(row)\" class=\"ml-1\"><b-icon-plus/></b-button>\r\n                <b-button size=\"sm\" v-if=\"buttons.indexOf('info')>-1\"   variant=\"outline-info\"    v-b-tooltip.hover.topleft=\"'Informações'\" @click=\"rowInform(row)\" class=\"ml-1\"><b-icon-info-circle/></b-button>\r\n            </template>        \r\n\r\n        </b-table>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    \r\n    name: \"TableEdit\",\r\n\r\n    props: {\r\n        tableId: { type: String, default() { return 'table-1' } },\r\n        header:  { type: String, default() { return '' } },\r\n        fields:  { type: Array,  default() { return [] } },\r\n        items:   { type: Array,  default() { return [] } },\r\n        buttons: { type: Array,  default() { return ['edit','delete','insert','info'] } },\r\n        rows:    { type: Number, default() { return 0 } },\r\n        perPage: { type: Number, default() { return 10 } }\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            selected: null,\r\n            sortBy: '',\r\n            sortDesc: false,\r\n            currentPage: 1\r\n        }\r\n    },\r\n\r\n    mounted() {\r\n\r\n        if (this.$refs[\"tableSearch\"]) {\r\n            // TODO: dar o foco no primeiro registro da tabela para poder navegar com o teclado ...\r\n            // this.$refs[\"tableSearch\"].focus()\r\n        }\r\n    },\r\n\r\n    computed: {\r\n\r\n        columns() {\r\n            let cols = this.fields || Object.keys(this.items).map(k => {return {key: k, label: k, sortable: true}})\r\n            return cols.map(c => {return {...c, ...{actions: '...'}}})\r\n        },\r\n\r\n        totalRows() {\r\n            return this.rows > 0 ? this.rows : this.items.length || 0\r\n        }\r\n\r\n    },\r\n\r\n    watch: {\r\n        currentPage(page) {\r\n            this.$emit('evt-page', page)\r\n        }\r\n    },\r\n\r\n    methods: {\r\n\r\n        New() {\r\n            // console.log('Editou no item:', evt.item.value, evt)\r\n            this.$emit('evt-new')\r\n        },\r\n        rowSelect(evt) {\r\n            // console.log('Selecionou o item:', evt)\r\n            this.$emit('evt-select', evt)\r\n        },\r\n        rowEdit(evt) {\r\n            // console.log('Editou no item:', evt.item.value, evt)\r\n            this.$emit('evt-edit', evt)\r\n        },\r\n        rowDelete(evt) {\r\n            // console.log('Excluiu no item:', evt.item.value, evt)\r\n            this.$emit('evt-delete', evt)\r\n        },\r\n        rowInsert(evt) {\r\n            // console.log('inseriu o item:', evt.item.value, evt)\r\n            this.$emit('evt-insert', evt)\r\n        },\r\n        rowInform(evt) {\r\n            // console.log('Excluiu no item:', evt.item.value, evt)\r\n            this.$emit('evt-inform', evt)\r\n        }\r\n    }\r\n\r\n}\r\n</script>\r\n"]}]}