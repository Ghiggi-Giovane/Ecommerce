{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\funcionarios\\views\\Historico.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\funcionarios\\views\\Historico.vue","mtime":1701906516488},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBUEkgZnJvbSAiLi4vLi4vLi4vc2VydmljZXMvYXBpLnNlcnZpY2UiOwppbXBvcnQgQ2FyZENvbGxhcHNlZCBmcm9tICIuLi8uLi8uLi9jb21wb25lbnRzL0NhcmRDb2xsYXBzZWQudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJIaXN0b3JpY28iLAogIGNvbXBvbmVudHM6IHsKICAgIENhcmRDb2xsYXBzZWQKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb2xsYXBzZWZvcm1vcGVuOiBmYWxzZSwKICAgICAgaGlzdG9yaWNvOiB7CiAgICAgICAgZmllbGRzOiBbewogICAgICAgICAga2V5OiAiTm9tZUVtcHJlc2EiLAogICAgICAgICAgbGFiZWw6ICJFbXByZXNhIgogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogIkNvZGlnb19GdW5jIiwKICAgICAgICAgIGxhYmVsOiAiQ8OzZGlnbyIKICAgICAgICB9LCAiRGF0YUluaWNpYWwiLCAiRGF0YUZpbmFsIiwgewogICAgICAgICAga2V5OiAiRGVzY3JpY2FvIiwKICAgICAgICAgIGxhYmVsOiAiRGVzY3Jpw6fDo28iCiAgICAgICAgfSwgIlRlbXBvIl0sCiAgICAgICAgZGF0YTogW10KICAgICAgfSwKICAgICAgdGlwbzogIkNBIiwKICAgICAgdGlwb3M6IFt7CiAgICAgICAgdmFsdWU6ICJDQSIsCiAgICAgICAgdGV4dDogIkNhcmdvcyIKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAiU0UiLAogICAgICAgIHRleHQ6ICJTZXRvcmVzIgogICAgICB9LCB7CiAgICAgICAgdmFsdWU6ICJUVSIsCiAgICAgICAgdGV4dDogIlR1cm5vcyIKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAiRlUiLAogICAgICAgIHRleHQ6ICJGdW7Dp8O1ZXMiCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogIlNBIiwKICAgICAgICB0ZXh0OiAiU2Fsw6FyaW9zIgogICAgICB9XQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBkYXRhc2F2ZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB0aXBvOiB0aGlzLnRpcG8KICAgICAgfTsKICAgIH0sCiAgICBwYXJhbXMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdGlwbzogdGhpcy50aXBvCiAgICAgIH07CiAgICB9LAogICAgY2FyZHRpdGxlKCkgewogICAgICByZXR1cm4gYEhpc3TDs3JpY29zIGRlICR7dGhpcy50aXBvcy5maW5kKGYgPT4gZi52YWx1ZSA9PSB0aGlzLnRpcG8pLnRleHR9YDsKICAgIH0sCiAgICB0YWJsZXRpdGxlKCkgewogICAgICByZXR1cm4gIkZ1bsOnw7VlcyI7CiAgICB9LAogICAgdGJsX2hpc3RvcmljbygpIHsKICAgICAgcmV0dXJuIHRoaXMuaGlzdG9yaWNvLmRhdGE7CiAgICB9CiAgfSwKICBhc3luYyBiZWZvcmVNb3VudCgpIHsKICAgIGF3YWl0IEFQSS5nZXRMb2NhbERCRG9jdW1lbnQoImhpc3RvcmljbyIpLnRoZW4oZG9jID0+IHsKICAgICAgaWYgKGRvYykgewogICAgICAgIHRoaXMudGlwbyA9IGRvYy50aXBvIHx8ICJDQSI7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5idXNjYWhpc3RvcmljbygpOwogIH0sCiAgbWV0aG9kczogewogICAgYnVzY2FoaXN0b3JpY28oKSB7CiAgICAgIEFQSS5wb3N0KCJ2Mi9TZXJ2aWNvcy9GdW5jaW9uYXJpb3NIaXN0b3JpY28vR2V0IiwgdGhpcy5wYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZygiYnVzY2FoaXN0b3JpY28iLCByZXMuZGF0YSk7CiAgICAgICAgaWYgKHJlcy5kYXRhLlN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMuaGlzdG9yaWNvLmRhdGEgPSByZXMuZGF0YS5EYXRhOwogICAgICAgICAgdGhpcy5jb2xsYXBzZWZvcm1vcGVuID0gZmFsc2U7CiAgICAgICAgICBBUEkuc2V0TG9jYWxEQkRvY3VtZW50KHsKICAgICAgICAgICAgZGF0YTogdGhpcy5kYXRhc2F2ZQogICAgICAgICAgfSwgImhpc3RvcmljbyIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmhpc3Rvcmljby5kYXRhID0gW107CiAgICAgICAgICB0aGlzLmNvbGxhcHNlZm9ybW9wZW4gPSB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AAEA;EACAA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;QACAC,SACA;UAAAC;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA,GACA,eACA,aACA;UAAAD;UAAAC;QAAA,GACA,QACA;QACAL;MACA;MACAM;MACAC,QACA;QAAAC;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA;IAEA;EACA;EACAC;IACAC;MACA;QAAAL;MAAA;IACA;IACAM;MACA;QAAAN;MAAA;IACA;IACAO;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;EACA;IACA;MACA;QACA;MACA;IACA;IACA;EACA;EACAC;IACAC;MACAC;QACA;QACA;UACA;UACA;UACAA;YAAAlB;UAAA;QACA;UACA;UACA;QACA;MACA;IACA;EACA;AACA","names":["name","components","CardCollapsed","data","collapseformopen","historico","fields","key","label","tipo","tipos","value","text","computed","datasave","params","cardtitle","tabletitle","tbl_historico","methods","buscahistorico","API"],"sourceRoot":"src/pages/funcionarios/views","sources":["Historico.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <CardCollapsed ref=\"CardCollapsed\" v-model=\"collapseformopen\" :title=\"cardtitle\" @evtBusca=\"buscahistorico\">\r\n      <template #collapsedform>\r\n        <div class=\"bg-light p-4\">\r\n        <b-row>\r\n          <b-col cols=\"12\" md=\"4\">\r\n            <b-form-group label=\"Tipo\" label-for=\"tipo\">\r\n              <b-form-select\r\n                id=\"tipo\"\r\n                v-model=\"tipo\"\r\n                :options=\"tipos\"\r\n              ></b-form-select>\r\n            </b-form-group>\r\n          </b-col>\r\n        </b-row>\r\n        <b-row>\r\n          <b-col class=\"text-right\">\r\n            <b-button variant=\"primary\" @click=\"buscahistorico\">Buscar</b-button>\r\n          </b-col>\r\n        </b-row>\r\n        </div>\r\n      </template>\r\n\r\n      <template #collapsedbody>\r\n      <div>\r\n        <b-table\r\n          small\r\n          hover\r\n          striped\r\n          responsive\r\n          head-variant=\"dark\"\r\n          :headerTitle=\"tabletitle\"\r\n          :items=\"tbl_historico\"\r\n          :fields=\"historico.fields\"\r\n        >\r\n          <template #cell(DataInicial)=\"data\">\r\n            <span>{{ data.item.DataInicial | dateBR }}</span>\r\n          </template>\r\n  \r\n          <template #cell(DataFinal)=\"data\">\r\n            <span>{{ data.item.DataFinal | dateBR }}</span>\r\n          </template>\r\n        </b-table>\r\n      </div>\r\n      </template>\r\n    </CardCollapsed>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport API from \"../../../services/api.service\";\r\nimport CardCollapsed from \"../../../components/CardCollapsed.vue\";\r\n\r\nexport default {\r\n  name: \"Historico\",\r\n  components: {\r\n    CardCollapsed,\r\n  },\r\n  data() {\r\n    return {\r\n      collapseformopen: false,\r\n      historico: {\r\n        fields: [\r\n          { key: \"NomeEmpresa\", label: \"Empresa\" },\r\n          { key: \"Codigo_Func\", label: \"Código\" },\r\n          \"DataInicial\",\r\n          \"DataFinal\",\r\n          { key: \"Descricao\", label: \"Descrição\" },\r\n          \"Tempo\",\r\n        ],\r\n        data: []\r\n      },\r\n      tipo: \"CA\",\r\n      tipos: [\r\n        { value: \"CA\", text: \"Cargos\" },\r\n        { value: \"SE\", text: \"Setores\" },\r\n        { value: \"TU\", text: \"Turnos\" },\r\n        { value: \"FU\", text: \"Funções\" },\r\n        { value: \"SA\", text: \"Salários\" },\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    datasave() {\r\n      return {tipo: this.tipo}\r\n    },\r\n    params() {\r\n      return { tipo: this.tipo };\r\n    },\r\n    cardtitle() {\r\n      return `Históricos de ${this.tipos.find(f=>f.value == this.tipo).text}`;\r\n    },\r\n    tabletitle() {\r\n      return \"Funções\";\r\n    },\r\n    tbl_historico() {\r\n      return this.historico.data;\r\n    }\r\n  },\r\n  async beforeMount() {\r\n    await API.getLocalDBDocument(\"historico\").then((doc) => {\r\n      if (doc) {\r\n        this.tipo = doc.tipo || \"CA\";\r\n      }\r\n    });\r\n    this.buscahistorico();\r\n  },\r\n  methods: {\r\n    buscahistorico() {\r\n      API.post(\"v2/Servicos/FuncionariosHistorico/Get\", this.params).then((res) => {\r\n        // console.log(\"buscahistorico\", res.data);\r\n        if (res.data.Success) {\r\n          this.historico.data = res.data.Data;\r\n          this.collapseformopen = false;\r\n          API.setLocalDBDocument({ data: this.datasave }, \"historico\");\r\n        } else {\r\n          this.historico.data = [];\r\n          this.collapseformopen = true;\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>"]}]}