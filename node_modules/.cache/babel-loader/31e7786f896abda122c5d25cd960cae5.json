{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\admin\\views\\Menus.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\admin\\views\\Menus.vue","mtime":1701906516422},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UtYWxsLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNZW51cyIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1lbnVzOiB7CiAgICAgICAgc2VsZWN0ZWQ6IHt9LAogICAgICAgIGZpbHRlcjogIiIsCiAgICAgICAgZmllbGRzOiBbewogICAgICAgICAga2V5OiAibWVudSIsCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICAgIH0sICJhY3Rpb25zIl0sCiAgICAgICAgdG90YWxSb3dzOiAwLAogICAgICAgIGRhdGE6IFtdCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbImd0eGFkbWlubWVudXMiXSksCiAgICBtZW51c3BhaSgpIHsKICAgICAgY29uc3QgbWVudXMgPSBbewogICAgICAgIHZhbHVlOiBudWxsLAogICAgICAgIHRleHQ6ICJNZW51IFBhaSIKICAgICAgfV07CiAgICAgIHRoaXMubWVudXMuZGF0YS5tYXAobSA9PiB7CiAgICAgICAgaWYgKCFtLmhhc093blByb3BlcnR5KCJpZE1lbnVQYWkiKSkgewogICAgICAgICAgbWVudXMucHVzaCh7CiAgICAgICAgICAgIHZhbHVlOiBtLmlkTWVudSwKICAgICAgICAgICAgdGV4dDogbS5jYXB0aW9uICsgIiAtICMiICsgbS5pZE1lbnUKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBtZW51czsKICAgIH0sCiAgICBsYWJlbHN1Z2VzdGFvKCkgewogICAgICByZXR1cm4gdGhpcy5tZW51cy5zZWxlY3RlZC5pZE1lbnVQYWkgKyAiLSIgKyB0aGlzLmdldG1lbnVuYW1lKHRoaXMubWVudXMuc2VsZWN0ZWQuY2FwdGlvbik7CiAgICB9LAogICAgbGFiZWxpZE1lbnUoKSB7CiAgICAgIHJldHVybiB0aGlzLmxhYmVsc3VnZXN0YW8gIT09IHRoaXMubWVudXMuc2VsZWN0ZWQuaWRNZW51ID8gImlkTWVudSAtIFN1Z2VzdMOjbyAjIiArIHRoaXMubGFiZWxzdWdlc3RhbyA6ICJpZE1lbnUiOwogICAgfQogIH0sCiAgYmVmb3JlTW91bnQoKSB7CiAgICB0aGlzLmFjdEFkbWluVXN1YXJpb3NNZW51c0dldCgieCIpOwogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucyhbImFjdEFkbWluVXN1YXJpb3NNZW51c0dldCIsICJhY3RBZG1pbk1lbnVzVXBkYXRlIl0pLAogICAgZ2V0bWVudW5hbWUobm9tZSkgewogICAgICByZXR1cm4gKG5vbWUgfHwgIiIpLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgiICIsICJfIikubm9ybWFsaXplKCJORkQiKS5yZXBsYWNlKC9bXHUwMzAwLVx1MDM2Zl0vZywgIiIpOwogICAgfSwKICAgIG9uTWVudXNGaWx0ZXJlZChmaWx0ZXJlZEl0ZW1zKSB7CiAgICAgIC8vIFRyaWdnZXIgcGFnaW5hdGlvbiB0byB1cGRhdGUgdGhlIG51bWJlciBvZiBidXR0b25zL3BhZ2VzIGR1ZSB0byBmaWx0ZXJpbmcKICAgICAgdGhpcy5tZW51cy50b3RhbFJvd3MgPSBmaWx0ZXJlZEl0ZW1zLmxlbmd0aDsKICAgIH0sCiAgICBvbk1lbnVOb3ZvKCkgewogICAgICB0aGlzLm1lbnVzLnNlbGVjdGVkID0gewogICAgICAgIGlkOiBudWxsLAogICAgICAgIE9yZGVtOiAiIiwKICAgICAgICBpZE1lbnU6ICJtZW51LT8iLAogICAgICAgIHRvOiAiLyIsCiAgICAgICAgYXV0aDogIjAiLAogICAgICAgIGNhcHRpb246ICIiLAogICAgICAgIGljb246ICIiLAogICAgICAgIG1lbnU6ICIiLAogICAgICAgIGNoZWNrOiAiMCIsCiAgICAgICAgaW50cmFuZXQ6ICIwIiwKICAgICAgICBLMWVycDogIjAiCiAgICAgIH07CiAgICAgIHRoaXMuJGJ2TW9kYWwuc2hvdygibW9kYWwtbWVudXMiKTsKICAgIH0sCiAgICBvbk1lbnVVcGRhdGUoKSB7CiAgICAgIHRoaXMuYWN0QWRtaW5NZW51c1VwZGF0ZSh0aGlzLm1lbnVzLnNlbGVjdGVkKTsKICAgICAgdGhpcy5hY3RBZG1pblVzdWFyaW9zTWVudXNHZXQoIngiKTsKICAgIH0sCiAgICBvbk1lbnVFZGl0KG1lbnUpIHsKICAgICAgdGhpcy5tZW51cy5zZWxlY3RlZCA9IG1lbnU7CiAgICAgIHRoaXMuJGJ2TW9kYWwuc2hvdygibW9kYWwtbWVudXMiKTsKICAgIH0sCiAgICBvbk1lbnVEZWxldGUobWVudSkgewogICAgICB0aGlzLiRyb290LnNob3dtZXNzYWdlKCJEZXNlamEgcmVhbG1lbnRlIGV4Y2x1aXIgZXN0ZSBtZW51ID8iLCAiSW50cmFuZXQiKS50aGVuKGNob2ljZSA9PiB7CiAgICAgICAgaWYgKGNob2ljZSkgY29uc29sZS5sb2coIm9uTWVudURlbGV0ZSIpOwogICAgICB9KTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBndHhhZG1pbm1lbnVzKG1lbnVzKSB7CiAgICAgIHRoaXMubWVudXMuZGF0YSA9IG1lbnVzOwogICAgICB0aGlzLm1lbnVzLnRvdGFsUm93cyA9IG1lbnVzLmxlbmd0aDsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqMA;AACA;EACAA;EAEAC;IACA;MACAC;QACAC;QACAC;QACAC;UAAAC;UAAAC;QAAA;QACAC;QACAP;MACA;IACA;EACA;EAEAQ;IACA;IACAC;MACA;QAAAC;QAAAC;MAAA;MACA;QACA;UACAV;YACAS;YACAC;UACA;QACA;MACA;MACA;IACA;IACAC;MACA,OACA,gCACA,MACA;IAEA;IACAC;MACA,2DACA,6CACA;IACA;EACA;EAEAC;IACA;EACA;EAEAC;IACA;IAEAC;MACA,oBACAC,oBACAC,qBACAC,iBACAC;IACA;IAEAC;MACA;MACA;IACA;IACAC;MACA;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA,WACAC,gEACAC;QACA;MACA;IACA;EACA;EAEAC;IACAC;MACA;MACA;IACA;EACA;AACA","names":["name","data","menus","selected","filter","fields","key","sortable","totalRows","computed","menuspai","value","text","labelsugestao","labelidMenu","beforeMount","methods","getmenuname","toLocaleLowerCase","replaceAll","normalize","replace","onMenusFiltered","onMenuNovo","id","Ordem","idMenu","to","auth","caption","icon","menu","check","intranet","K1erp","onMenuUpdate","onMenuEdit","onMenuDelete","showmessage","then","watch","gtxadminmenus"],"sourceRoot":"src/pages/admin/views","sources":["Menus.vue"],"sourcesContent":["<template>\r\n  <div class=\"m-2\">\r\n    <b-card>\r\n      <b-card-title>Menus</b-card-title>\r\n      <b-card-body>\r\n        <b-row>\r\n          <b-col cols=\"12\" lg=\"9\" md=\"7\" class=\"mb-2\">\r\n            <b-input-group prepend=\"Filtro\" size=\"sm\" class=\"mb-2\">\r\n              <b-form-input\r\n                id=\"input-menu-filtro\"\r\n                type=\"search\"\r\n                v-model=\"menus.filter\"\r\n              >\r\n              </b-form-input>\r\n            </b-input-group>\r\n          </b-col>\r\n          <b-col cols=\"12\" lg=\"3\" md=\"5\" class=\"mb-2\">\r\n            <b-button class=\"float-right\" variant=\"primary\" @click=\"onMenuNovo\">\r\n              <b-icon-plus />\r\n              <span>Novo menu</span>\r\n            </b-button>\r\n          </b-col>\r\n        </b-row>\r\n        <b-table\r\n          small\r\n          striped\r\n          hover\r\n          :items=\"menus.data\"\r\n          :fields=\"menus.fields\"\r\n          :filter=\"menus.filter\"\r\n          @filtered=\"onMenusFiltered\"\r\n        >\r\n          <template #cell(menu)=\"data\" class=\"font-weight-bolder\">\r\n            <span :class=\"data.item.idMenuPai ? 'ml-2' : 'font-weight-bolder'\">\r\n              <b-icon class=\"mx-2\" :icon=\"data.item.icon\"> </b-icon>\r\n            </span>\r\n            <span\r\n              class=\"ml-2\"\r\n              :class=\"data.item.idMenuPai ? '' : 'font-weight-bolder'\"\r\n              >{{ data.item.menu }}\r\n              <b-badge class=\"ml-2\" variant=\"light\"\r\n                ><b-icon-lock v-if=\"data.item.auth == 1\"\r\n              /></b-badge>\r\n            </span>\r\n          </template>\r\n\r\n          <template #cell(actions)=\"data\">\r\n            <span class=\"iconbutton\" @click=\"onMenuEdit(data.item)\">\r\n              <b-icon-pencil variant=\"success\" />\r\n            </span>\r\n            <span class=\"iconbutton\" @click=\"onMenuDelete(data.item)\">\r\n              <b-icon-trash variant=\"danger\" />\r\n            </span>\r\n          </template>\r\n        </b-table>\r\n        <hr />\r\n        <span class=\"mr-4 font-weight-bolder\">\r\n          Total: {{ menus.totalRows }}\r\n        </span>\r\n      </b-card-body>\r\n    </b-card>\r\n\r\n    <b-modal\r\n      scrollable\r\n      id=\"modal-menus\"\r\n      title=\"Editar\"\r\n      ok-title=\"Salvar\"\r\n      ok-variant=\"success\"\r\n      cancel-title=\"Cancelar\"\r\n      @ok=\"onMenuUpdate\"\r\n    >\r\n      <b-form-group id=\"input-idMenu\" :label=\"labelidMenu\" label-for=\"idMenu\">\r\n        <b-form-input\r\n          id=\"idMenu\"\r\n          v-model=\"menus.selected.idMenu\"\r\n          type=\"text\"\r\n          placeholder=\"idMenu\"\r\n          required\r\n        ></b-form-input>\r\n      </b-form-group>\r\n      <b-form-group\r\n        id=\"input-idMenuPai\"\r\n        label=\"idMenuPai\"\r\n        label-for=\"idMenuPai\"\r\n      >\r\n        <b-form-select\r\n          id=\"idMenuPai\"\r\n          v-model=\"menus.selected.idMenuPai\"\r\n          :options=\"menuspai\"\r\n        ></b-form-select>\r\n      </b-form-group>\r\n      <b-form-group id=\"input-caption\" label=\"Caption\" label-for=\"caption\">\r\n        <b-form-input\r\n          id=\"caption\"\r\n          v-model=\"menus.selected.caption\"\r\n          type=\"text\"\r\n          placeholder=\"Caption\"\r\n          required\r\n        ></b-form-input>\r\n      </b-form-group>\r\n      <label>Ícone</label>\r\n      <b-input-group>\r\n        <b-input-group-prepend>\r\n          <b-button\r\n            variant=\"outline-secondary\"\r\n            href=\"https://bootstrap-vue.org/docs/icons#icons\"\r\n            target=\"_blank\"\r\n          >\r\n            <b-icon :icon=\"menus.selected.icon\" />\r\n          </b-button>\r\n        </b-input-group-prepend>\r\n        <b-form-input\r\n          id=\"icon\"\r\n          v-model=\"menus.selected.icon\"\r\n          type=\"text\"\r\n          placeholder=\"Ícone\"\r\n          required\r\n        ></b-form-input>\r\n      </b-input-group>\r\n      <b-form-group id=\"input-to\" label=\"Rota\" label-for=\"to\">\r\n        <b-form-input\r\n          id=\"to\"\r\n          v-model=\"menus.selected.to\"\r\n          type=\"text\"\r\n          placeholder=\"Rota\"\r\n          required\r\n        ></b-form-input>\r\n      </b-form-group>\r\n      <b-form-group id=\"input-toParam\" label=\"Parâmetros\" label-for=\"toParam\">\r\n        <b-form-input\r\n          id=\"toParam\"\r\n          v-model=\"menus.selected.toparam\"\r\n          type=\"text\"\r\n          placeholder=\"Parametros\"\r\n          required\r\n        ></b-form-input>\r\n      </b-form-group>\r\n      <b-row>\r\n        <b-col cols=\"12\" sm=\"12\" class=\"auth\">\r\n          <b-form-group id=\"input-auth\">\r\n            <b-form-checkbox\r\n              id=\"auth\"\r\n              switch\r\n              v-model=\"menus.selected.auth\"\r\n              name=\"checkbox-1\"\r\n              value=\"1\"\r\n              unchecked-value=\"0\"\r\n            >\r\n              Necessário autenticação\r\n            </b-form-checkbox>\r\n          </b-form-group>\r\n        </b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col cols=\"12\" sm=\"6\" class=\"intranet\">\r\n          <b-form-group id=\"input-intranet\">\r\n            <b-form-checkbox\r\n              id=\"intranet\"\r\n              switch\r\n              v-model=\"menus.selected.Intranet\"\r\n              name=\"checkbox-1\"\r\n              value=\"1\"\r\n              unchecked-value=\"0\"\r\n            >\r\n              Intranet\r\n            </b-form-checkbox>\r\n          </b-form-group>\r\n        </b-col>\r\n        <b-col cols=\"12\" sm=\"6\">\r\n          <b-form-group id=\"input-erp\">\r\n            <b-form-checkbox\r\n              id=\"erp\"\r\n              switch\r\n              v-model=\"menus.selected.K1Erp\"\r\n              name=\"checkbox-1\"\r\n              value=\"1\"\r\n              unchecked-value=\"0\"\r\n            >\r\n              K1 ERP\r\n            </b-form-checkbox>\r\n          </b-form-group>\r\n        </b-col>\r\n      </b-row>\r\n    </b-modal>\r\n\r\n    <!--\r\n    menus.selected: {{ menus.selected }}\r\n\r\n    menuspai:\r\n    <pre>{{ menuspai }}</pre>\r\n\r\n    menus:\r\n    <pre>{{ menus }}</pre>\r\n    -->\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nexport default {\r\n  name: \"Menus\",\r\n\r\n  data() {\r\n    return {\r\n      menus: {\r\n        selected: {},\r\n        filter: \"\",\r\n        fields: [{ key: \"menu\", sortable: true }, \"actions\"],\r\n        totalRows: 0,\r\n        data: [],\r\n      },\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"gtxadminmenus\"]),\r\n    menuspai() {\r\n      const menus = [{ value: null, text: \"Menu Pai\" }];\r\n      this.menus.data.map((m) => {\r\n        if (!m.hasOwnProperty(\"idMenuPai\")) {\r\n          menus.push({\r\n            value: m.idMenu,\r\n            text: m.caption + \" - #\" + m.idMenu,\r\n          });\r\n        }\r\n      });\r\n      return menus;\r\n    },\r\n    labelsugestao() {\r\n      return (\r\n        this.menus.selected.idMenuPai +\r\n        \"-\" +\r\n        this.getmenuname(this.menus.selected.caption)\r\n      );\r\n    },\r\n    labelidMenu() {\r\n      return this.labelsugestao !== this.menus.selected.idMenu\r\n        ? \"idMenu - Sugestão #\" + this.labelsugestao\r\n        : \"idMenu\";\r\n    },\r\n  },\r\n\r\n  beforeMount() {\r\n    this.actAdminUsuariosMenusGet(\"x\");\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"actAdminUsuariosMenusGet\", \"actAdminMenusUpdate\"]),\r\n\r\n    getmenuname(nome) {\r\n      return (nome || \"\")\r\n        .toLocaleLowerCase()\r\n        .replaceAll(\" \", \"_\")\r\n        .normalize(\"NFD\")\r\n        .replace(/[\\u0300-\\u036f]/g, \"\");\r\n    },\r\n\r\n    onMenusFiltered(filteredItems) {\r\n      // Trigger pagination to update the number of buttons/pages due to filtering\r\n      this.menus.totalRows = filteredItems.length;\r\n    },\r\n    onMenuNovo() {\r\n      this.menus.selected = {\r\n        id: null,\r\n        Ordem: \"\",\r\n        idMenu: \"menu-?\",\r\n        to: \"/\",\r\n        auth: \"0\",\r\n        caption: \"\",\r\n        icon: \"\",\r\n        menu: \"\",\r\n        check: \"0\",\r\n        intranet: \"0\",\r\n        K1erp: \"0\",\r\n      };\r\n      this.$bvModal.show(\"modal-menus\");\r\n    },\r\n    onMenuUpdate() {\r\n      this.actAdminMenusUpdate(this.menus.selected);\r\n      this.actAdminUsuariosMenusGet(\"x\");\r\n    },\r\n    onMenuEdit(menu) {\r\n      this.menus.selected = menu;\r\n      this.$bvModal.show(\"modal-menus\");\r\n    },\r\n    onMenuDelete(menu) {\r\n      this.$root\r\n        .showmessage(\"Deseja realmente excluir este menu ?\", \"Intranet\")\r\n        .then((choice) => {\r\n          if (choice) console.log(\"onMenuDelete\");\r\n        });\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    gtxadminmenus(menus) {\r\n      this.menus.data = menus;\r\n      this.menus.totalRows = menus.length;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.auth {\r\n  margin-left: -13px;\r\n}\r\n.intranet {\r\n  margin-left: -13px;\r\n}\r\n</style>\r\n"]}]}