{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\producaoidelli\\views\\partlist.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\producaoidelli\\views\\partlist.vue","mtime":1701906516518},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBsb2NhbHN0b3JlIGZyb20gJy4uLy4uLy4uL3NlcnZpY2VzL2xvY2Fsc3RvcmUnOwppbXBvcnQgeyBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUGFydExpc3QnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2hpbmc6IGZhbHNlLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgYXBpcmVzcG9uc2U6IG51bGwsCiAgICAgIHBhcnRsaXN0OiB7CiAgICAgICAgYmFyY29kZTogJycsCiAgICAgICAgU3RhdHVzS2FwcGVzOiAxIC8vIHBlZ2FyIGRvIGxvY2Fsc3RvcmUKICAgICAgfSwKCiAgICAgIGxhc3R1cGRhdGU6IHsKICAgICAgICBTdGF0dXNLYXBwZXM6IDEgLy8gcGVnYXIgZG8gbG9jYWxzdG9yZQogICAgICB9CiAgICB9OwogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmFjdHBhcnRsaXN0U3RhdHVzS2FwcGVzKCk7CiAgICB0aGlzLmZvY3VzYmFyY29kZSgpOwogICAgbGV0IGxvY2Fsc3RhdHVzID0gbG9jYWxzdG9yZS5nZXRVc2VyU3RvcmVQYWdlQnlOYW1lKCdwYXJ0bGlzdCcpOwoKICAgIC8vIGNvbnNvbGUubG9nKCdwYXJ0bGlzdC5tb3VudGVkLmxvY2Fsc3RhdHVzOicsIGxvY2Fsc3RhdHVzKQoKICAgIGlmICghbG9jYWxzdGF0dXMpIHsKICAgICAgbG9jYWxzdGF0dXMuZGF0YSA9IHsKICAgICAgICBTdGF0dXNLYXBwZXM6IDEKICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgIGlmICghbG9jYWxzdGF0dXMuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSkgbG9jYWxzdGF0dXMuZGF0YSA9IHsKICAgICAgICBTdGF0dXNLYXBwZXM6IDEKICAgICAgfTsKICAgIH0KICAgIHRoaXMucGFydGxpc3QuU3RhdHVzS2FwcGVzID0gbG9jYWxzdGF0dXMuZGF0YS5TdGF0dXNLYXBwZXMgfHwgMTsKICAgIHRoaXMubGFzdHVwZGF0ZS5TdGF0dXNLYXBwZXMgPSB0aGlzLnBhcnRsaXN0LlN0YXR1c0thcHBlczsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsnZ3R4cGFydGxpc3RTdGF0dXNLYXBwZXMnLCAnZ3R4cGFydGxpc3RyZXNwb25zZScsICdndHhwYXJ0bGlzdGRhdGEnLCAnZ3R4cGFydGxpc3QnLCAnZ3R4cGFydGxpc3R1cGRhdGUnLCAnZ3R4cGFydGxpc3Rsb2FkaW5nJ10pLAogICAgLy8gY29udMOpbSBvcyBkYWRvcyBkZSBjb25maWd1cmHDp8OjbyBkYSBww6FnaW5hIC4uLgogICAgc3RvcmVwYWdlKCkgewogICAgICByZXR1cm4gewogICAgICAgIFN0YXR1c0thcHBlczogdGhpcy5wYXJ0bGlzdC5TdGF0dXNLYXBwZXMKICAgICAgfTsKICAgIH0sCiAgICBiYXJjb2RlcygpIHsKICAgICAgY29uc3QgYmFycyA9IHRoaXMuYXBpZGF0YS5TZXF1ZW5jaWFQcm9kdWNhbzsKICAgICAgcmV0dXJuIGJhcnMgPyBiYXJzLm1hcChiID0+IGIuYmFyY29kZSkgOiBbXTsKICAgIH0sCiAgICBiYXJjb2RlKCkgewogICAgICByZXR1cm4gdGhpcy5wYXJ0bGlzdC5iYXJjb2RlOwogICAgfSwKICAgIGNhbnVwZGF0ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXBpdXBkYXRlLmJhcmNvZGUgIT09ICcnICYmIHRoaXMuYXBpdXBkYXRlLlN0YXR1c0thcHBlcyA+IDAgPyB0cnVlIDogZmFsc2U7CiAgICB9LAogICAgYnRuU2F2ZVZhcmlhbnQoKSB7CiAgICAgIGxldCBzdGF0ZSA9IHRoaXMuYXBpZGF0YS5TdGF0dXNLYXBwZXMgPyB0aGlzLmFwaWRhdGEuU3RhdHVzS2FwcGVzID09IGxhc3R1cGRhdGUuU3RhdHVzS2FwcGVzIDogZmFsc2U7CiAgICAgIHJldHVybiBzdGF0ZSA/ICdwcmltYXJ5JyA6ICdkYW5nZXInOwogICAgfSwKICAgIFN0YXR1c0thcHBlc1NlbGVjdGVkKCkgewogICAgICBjb25zdCBwYXJsaXN0c2VsZWN0ZWQgPSB0aGlzLmd0eHBhcnRsaXN0U3RhdHVzS2FwcGVzLmZpbmQoZiA9PiBmLnZhbHVlID09IHRoaXMucGFydGxpc3QuU3RhdHVzS2FwcGVzKTsKICAgICAgcmV0dXJuIHBhcmxpc3RzZWxlY3RlZCA/IHBhcmxpc3RzZWxlY3RlZC50ZXh0IDogJyc7CiAgICB9LAogICAgYXBpdXBkYXRlKCkgewogICAgICByZXR1cm4gewogICAgICAgIGJhcmNvZGU6IHRoaXMuYXBpZGF0YS5iYXJjb2RlIHx8ICcnLAogICAgICAgIFN0YXR1c0thcHBlczogcGFyc2VJbnQodGhpcy5wYXJ0bGlzdC5TdGF0dXNLYXBwZXMpIHx8IDEKICAgICAgfTsKICAgIH0sCiAgICBhcGlwZXNxdWlzYSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHBlc3F1aXNhOiB0aGlzLnBhcnRsaXN0LmJhcmNvZGUgfHwgJycsCiAgICAgICAgICBTdGF0dXNLYXBwZXM6IHBhcnNlSW50KHRoaXMucGFydGxpc3QuU3RhdHVzS2FwcGVzKSB8fCAxCiAgICAgICAgfQogICAgICB9OwogICAgfSwKICAgIGFwaWRhdGEoKSB7CiAgICAgIGxldCBkYXRhID0gewogICAgICAgIEZpY2hhOiAnJywKICAgICAgICBiYXJjb2RlOiAnJywKICAgICAgICBTdGF0dXNLYXBwZXM6IC0xLAogICAgICAgIHJlZmVyZW5jaWE6ICcnLAogICAgICAgIENvbXByaW1lbnRvOiAwLAogICAgICAgIExhcmd1cmE6IDAsCiAgICAgICAgRXNwZXNzdXJhOiAwLAogICAgICAgIFF1YW50aWRhZGU6IDAKICAgICAgfTsKICAgICAgaWYgKHRoaXMuZ3R4cGFydGxpc3RyZXNwb25zZSkgaWYgKHRoaXMuZ3R4cGFydGxpc3RyZXNwb25zZS5TdWNjZXNzID09ICdUcnVlJykgZGF0YSA9IHRoaXMuZ3R4cGFydGxpc3RyZXNwb25zZS5EYXRhWzBdOwogICAgICBsZXQgc3RhdHVzID0gdGhpcy5ndHhwYXJ0bGlzdFN0YXR1c0thcHBlcy5maW5kKGYgPT4gZi52YWx1ZSA9PSBkYXRhLlN0YXR1c0thcHBlcyk7CiAgICAgIGRhdGEuU3RhdHVzS2FwcGVzVGV4dCA9IHN0YXR1cyA/IHN0YXR1cy50ZXh0IDogJ07Do28gZGVmaW5pZG8nOwogICAgICBkYXRhLmJ0blZhcmlhbnQgPSBzdGF0dXMgPyBzdGF0dXMudmFsdWUgPT0gdGhpcy5wYXJ0bGlzdC5TdGF0dXNLYXBwZXMgPyAncHJpbWFyeScgOiAnZGFuZ2VyJyA6ICdwcmltYXJ5JzsKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsnYWN0QWxlcnQnLCAnYWN0cGFydGxpc3RTdGF0dXNLYXBwZXMnLCAnYWN0cGFydGxpc3QnLCAnYWN0cGFydGxpc3R1cGRhdGUnXSksCiAgICBmb2N1c2JhcmNvZGUoKSB7CiAgICAgIHRoaXMuJHJlZnMuYmFyY29kZS5mb2N1cygpOwogICAgfSwKICAgIG9uU2F2ZSgpIHsKICAgICAgY29uc3QgYmFyY29kZSA9IHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHBlc3F1aXNhOiB0aGlzLmFwaWRhdGEuYmFyY29kZQogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8vIGNvbnNvbGUubG9nKCdvblNhdmU6JywgYmFyY29kZSkKCiAgICAgIHRoaXMuYWN0cGFydGxpc3R1cGRhdGUodGhpcy5hcGl1cGRhdGUpOwoKICAgICAgLy8gc2FsdmEgYSBjb25maWd1cmHDp8OjbyBkYSBww6FnaW5hIG5vIGxvY2FsU3RvcmFnZQogICAgICBsb2NhbHN0b3JlLnNldFVzZXJTdG9yZVBhZ2VEYXRhKCdwYXJ0bGlzdCcsIHRoaXMuc3RvcmVwYWdlKTsKICAgICAgdGhpcy5sYXN0dXBkYXRlLlN0YXR1c0thcHBlcyA9IHRoaXMucGFydGxpc3QuU3RhdHVzS2FwcGVzOwogICAgICB0aGlzLmFjdHBhcnRsaXN0KGJhcmNvZGUpOwogICAgICB0aGlzLmZvY3VzYmFyY29kZSgpOwogICAgfSwKICAgIG9uU2VhcmNoKHBhcmFtcykgewogICAgICB0aGlzLnNlYXJjaGluZyA9IHRydWU7CgogICAgICAvLyBjb25zb2xlLmxvZygnb25TZWFyY2g6JywgcGFyYW1zKQoKICAgICAgaWYgKHBhcmFtcykgewogICAgICAgIHRoaXMuYWN0cGFydGxpc3QocGFyYW1zKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFjdHBhcnRsaXN0KHRoaXMuYXBpcGVzcXVpc2EpOwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgY3VycmVudFBhZ2UocGFnZSkgewogICAgICB0aGlzLnBhcnRsaXN0LmJhcmNvZGUgPSB0aGlzLmJhcmNvZGVzW3BhZ2UgLSAxXTsKICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgIHBhcmFtczogewogICAgICAgICAgcGVzcXVpc2E6IHRoaXMucGFydGxpc3QuYmFyY29kZQogICAgICAgIH0KICAgICAgfTsKICAgICAgdGhpcy5vblNlYXJjaChwYXJhbXMpOwogICAgfSwKICAgIGd0eHBhcnRsaXN0cmVzcG9uc2UoZGF0YSkgewogICAgICAvLyBjb25zb2xlLmxvZygnZ3R4cGFydGxpc3RyZXNwb25zZTonLCBkYXRhKQoKICAgICAgaWYgKGRhdGEuU3VjY2VzcyA9PSAnRmFsc2UnKSB7CiAgICAgICAgdGhpcy5hY3RBbGVydCh7CiAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywKICAgICAgICAgIG1lc3NhZ2U6IGRhdGEuRXJyb3IgfHwgJ09jb3JldSB1bSBlcnJvIG5hIGV4ZWN1w6fDo28hJwogICAgICAgIH0pOwogICAgICAgIHRoaXMucGFydGxpc3QuYmFyY29kZSA9ICcnOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHNlIG7Do28gdGVtIHN0YXR1cyBzYWx2bywgc2FsdmEgbmEgcHJpbWVpcmEgY29uc3VsdGEKICAgICAgICAvLyBjb25zb2xlLmxvZygnZ3R4cGFydGxpc3RkYXRhOicsIHRoaXMuZ3R4cGFydGxpc3RkYXRhKQogICAgICAgIGlmICh0aGlzLmd0eHBhcnRsaXN0ZGF0YS5TdGF0dXNLYXBwZXMgPT0gLTEpIHRoaXMub25TYXZlKCk7CiAgICAgICAgdGhpcy5wYXJ0bGlzdC5iYXJjb2RlID0gJyc7CiAgICAgIH0KICAgICAgdGhpcy5zZWFyY2hpbmcgPSBmYWxzZTsKICAgIH0sCiAgICBndHhwYXJ0bGlzdHVwZGF0ZSh1cGRhdGUpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ3BhcnRsaXN0LndhdGNoLmd0eHBhcnRsaXN0dXBkYXRlOicsIHVwZGF0ZSkKCiAgICAgIGlmICh1cGRhdGUuU3VjY2VzcyA9PSAnVHJ1ZScpIHsKICAgICAgICB0aGlzLmFjdEFsZXJ0KHsKICAgICAgICAgIHZhcmlhbnQ6ICdzdWNjZXNzJywKICAgICAgICAgIG1lc3NhZ2U6IHVwZGF0ZS5EYXRhWzBdLk1lbnNhZ2VtCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB0aGlzLmFjdEFsZXJ0KHsKICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywKICAgICAgICBtZXNzYWdlOiB1cGRhdGUuRGF0YVswXS5FcnJvcgogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;AACA;AACA;EAEAA;EAEAC;IAEA;MAEAC;MACAC;MACAC;MAEAC;QACAC;QACAC;MACA;;MAEAC;QACAD;MACA;IAEA;EAEA;;EAEAE;IAEA;IAEA;IAEA;;IAEA;;IAEA;MACAC;QAAAH;MAAA;IACA;MACA,yCACAG;QAAAH;MAAA;IACA;IAEA;IACA;EAEA;EAEAI;IAEA,eACA,2BACA,uBACA,mBACA,eACA,qBACA,qBACA;IAEA;IACAC;MAEA;QACAL;MACA;IAEA;IAEAM;MAEA;MAEA;IAEA;IAEAP;MAEA;IACA;IAEAQ;MAEA;IAEA;IAEAC;MACA;MACA;IACA;IAEAC;MACA;MACA;IACA;IAEAC;MAEA;QAAAX;QAAAC;MAAA;IAEA;IAEAW;MAEA;QAAAC;UAAAC;UAAAb;QAAA;MAAA;IAEA;IAEAc;MAEA;QACAC;QACAhB;QACAC;QACAgB;QACAC;QACAC;QACAC;QACAC;MACA;MAEA,8BACA,gDACA1B;MAEA;MACAA;MACAA;MAEA;IAEA;EAEA;EAEA2B;IAEA;IAEAC;MAEA;IAEA;IAEAC;MAEA;QACAX;UACAC;QACA;MACA;;MAEA;;MAEA;;MAEA;MACAW;MAEA;MAEA;MAEA;IACA;IAEAC;MAEA;;MAEA;;MAEA;QACA;MACA;QACA;MACA;IAEA;EAEA;EAEAC;IAEA9B;MAEA;MAEA;QACAgB;UACAC;QACA;MACA;MAEA;IAEA;IAEAc;MAEA;;MAEA;QACA;UAAAC;UAAAC;QAAA;QACA;MACA;QACA;QACA;QACA;QACA;MACA;MAEA;IAEA;IAEAC;MAEA;;MAEA;QACA;UAAAF;UAAAC;QAAA;MACA,OACA;QAAAD;QAAAC;MAAA;IACA;EAEA;AAEA","names":["name","data","searching","currentPage","apiresponse","partlist","barcode","StatusKappes","lastupdate","mounted","localstatus","computed","storepage","barcodes","canupdate","btnSaveVariant","StatusKappesSelected","apiupdate","apipesquisa","params","pesquisa","apidata","Ficha","referencia","Comprimento","Largura","Espessura","Quantidade","methods","focusbarcode","onSave","localstore","onSearch","watch","gtxpartlistresponse","variant","message","gtxpartlistupdate"],"sourceRoot":"src/pages/producaoidelli/views","sources":["partlist.vue"],"sourcesContent":["<template>\r\n    <div class=\"m-2\">\r\n\r\n        <b-card>\r\n\r\n        <b-form-group\r\n            label=\"Código de barra da peça\"\r\n            label-for=\"barcode\">\r\n            <b-input-group>\r\n                <b-form-input\r\n                    id=\"barcode\"\r\n                    ref=\"barcode\"\r\n                    type=\"number\"\r\n                    placeholder=\"Informe o código de barras da peça - PartList\"\r\n                    v-model=\"partlist.barcode\"\r\n                    min=\"000000000000000\"\r\n                    max=\"999999999999999\"\r\n                    @keydown.enter=\"onSearch()\">\r\n                </b-form-input>\r\n                <b-input-group-append>\r\n                    <b-button variant=\"primary\" @click=\"onSearch()\" :disabled=\"partlist.barcode==''\">Buscar</b-button>\r\n                </b-input-group-append>\r\n            </b-input-group>\r\n\r\n        </b-form-group>\r\n\r\n        <b-overlay :show=\"gtxpartlistloading\" rounded=\"sm\">\r\n        <div class=\"bg-dark text-warning rounded p-2 mb-2\">\r\n            <div>\r\n                <strong>Barcode:</strong>\r\n                <span class=\"ml-2\">{{apidata.barcode}}</span>\r\n            </div>\r\n            <div>\r\n                <strong>Produto:</strong>\r\n                <span class=\"ml-2\">{{apidata.Ficha}} - {{apidata.referencia}}</span>\r\n            </div>\r\n            <div>\r\n                <strong>Medidas:</strong>\r\n                <span class=\"ml-2\">({{apidata.Comprimento}} x {{apidata.Largura}} x {{apidata.Espessura}})</span>\r\n            </div>\r\n            <div>\r\n                <strong>Status:</strong>\r\n                <span class=\"ml-2\">{{apidata.StatusKappesText}}</span>\r\n            </div>\r\n<!--\r\n            <div class=\"mt-2\">\r\n                <b-pagination\r\n                    v-if=\"barcodes.length>-1\"\r\n                    size=\"sm\"\r\n                    v-model=\"currentPage\"\r\n                    :total-rows=\"barcodes.length\"\r\n                    :per-page=\"1\"\r\n                    first-number\r\n                    last-number/>\r\n            </div>\r\n-->            \r\n        </div>\r\n        </b-overlay>\r\n\r\n        <b-form-group\r\n            label=\"Status da peça\"\r\n            label-for=\"statuskappes\">\r\n            <b-form-select id=\"statuskappes\" v-model=\"partlist.StatusKappes\" :options=\"gtxpartlistStatusKappes\"></b-form-select>\r\n        </b-form-group>\r\n        \r\n        <b-form-group\r\n            label-for=\"btnsalvar\" class=\"mt-4\">\r\n            <b-button block id=\"btnsalvar\" @click=\"onSave\" :variant=\"apidata.btnVariant\" :disabled=\"!canupdate\">Salvar como {{ StatusKappesSelected }}</b-button>\r\n        </b-form-group>\r\n\r\n<!--\r\n        <div class=\"accordion\" role=\"tablist\">\r\n            <b-card no-body class=\"mb-1\">\r\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                    <b-button block v-b-toggle.apidata variant=\"info\">apidata</b-button>\r\n                </b-card-header>\r\n                <b-collapse id=\"apidata\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                    <b-card-body>\r\n                    <pre>\r\n                        {{ apidata }}\r\n                    </pre>\r\n                    </b-card-body>\r\n                </b-collapse>\r\n            </b-card>\r\n            <b-card no-body class=\"mb-1\">\r\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                    <b-button block v-b-toggle.barcodes variant=\"info\">barcodes</b-button>\r\n                </b-card-header>\r\n                <b-collapse id=\"barcodes\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                    <b-card-body>\r\n                    <pre>\r\n                        {{ barcodes }}\r\n                    </pre>\r\n                    </b-card-body>\r\n                </b-collapse>\r\n            </b-card>\r\n        </div>\r\n-->        \r\n        </b-card>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport localstore from '../../../services/localstore'\r\nimport { mapActions, mapGetters } from 'vuex'\r\nexport default {\r\n    \r\n    name: 'PartList',\r\n\r\n    data() {\r\n\r\n        return {\r\n\r\n            searching: false,\r\n            currentPage: 1,\r\n            apiresponse: null,\r\n\r\n            partlist: {\r\n                barcode: '',\r\n                StatusKappes: 1 // pegar do localstore\r\n            },\r\n\r\n            lastupdate: {\r\n                StatusKappes: 1 // pegar do localstore\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n\r\n    mounted() {\r\n\r\n        this.actpartlistStatusKappes()\r\n\r\n        this.focusbarcode()\r\n\r\n        let localstatus = localstore.getUserStorePageByName('partlist')\r\n\r\n        // console.log('partlist.mounted.localstatus:', localstatus)\r\n\r\n        if (!localstatus) {\r\n            localstatus.data = {StatusKappes: 1}\r\n        } else {\r\n            if (!localstatus.hasOwnProperty('data'))\r\n                localstatus.data = {StatusKappes: 1}\r\n        }\r\n\r\n        this.partlist.StatusKappes = localstatus.data.StatusKappes || 1\r\n        this.lastupdate.StatusKappes = this.partlist.StatusKappes\r\n\r\n    },\r\n\r\n    computed: {\r\n        \r\n        ...mapGetters([\r\n            'gtxpartlistStatusKappes',\r\n            'gtxpartlistresponse',\r\n            'gtxpartlistdata',\r\n            'gtxpartlist',\r\n            'gtxpartlistupdate',\r\n            'gtxpartlistloading'\r\n        ]),\r\n\r\n        // contém os dados de configuração da página ...\r\n        storepage() {\r\n\r\n            return {\r\n                StatusKappes: this.partlist.StatusKappes\r\n            }\r\n\r\n        },\r\n\r\n        barcodes() {\r\n\r\n            const bars = this.apidata.SequenciaProducao\r\n\r\n            return (bars) ? bars.map(b => b.barcode) : []\r\n\r\n        },\r\n\r\n        barcode() {\r\n\r\n            return this.partlist.barcode\r\n        },\r\n\r\n        canupdate() {\r\n\r\n            return (this.apiupdate.barcode !=='' && this.apiupdate.StatusKappes > 0) ? true : false\r\n\r\n        },\r\n\r\n        btnSaveVariant() {\r\n            let state = (this.apidata.StatusKappes) ? this.apidata.StatusKappes == lastupdate.StatusKappes  : false\r\n            return (state) ? 'primary' : 'danger'\r\n        },\r\n\r\n        StatusKappesSelected() {\r\n            const parlistselected = this.gtxpartlistStatusKappes.find(f => f.value == this.partlist.StatusKappes)\r\n            return parlistselected ? parlistselected.text : ''\r\n        },\r\n\r\n        apiupdate() {\r\n\r\n            return {barcode: this.apidata.barcode || '', StatusKappes: parseInt(this.partlist.StatusKappes) || 1}\r\n\r\n        },\r\n\r\n        apipesquisa() {\r\n\r\n            return { params: {pesquisa: this.partlist.barcode || '', StatusKappes: parseInt(this.partlist.StatusKappes) || 1}}\r\n\r\n        },\r\n\r\n        apidata() {\r\n\r\n            let data = {\r\n                Ficha: '',\r\n                barcode: '',\r\n                StatusKappes: -1,\r\n                referencia: '',\r\n                Comprimento: 0,\r\n                Largura: 0,\r\n                Espessura: 0,\r\n                Quantidade: 0\r\n            }\r\n\r\n            if (this.gtxpartlistresponse)\r\n            if (this.gtxpartlistresponse.Success == 'True')\r\n                data = this.gtxpartlistresponse.Data[0]\r\n\r\n            let status = this.gtxpartlistStatusKappes.find(f => f.value == data.StatusKappes)\r\n            data.StatusKappesText = (status) ? status.text : 'Não definido'\r\n            data.btnVariant = (status) ? (status.value == this.partlist.StatusKappes) ? 'primary' : 'danger' : 'primary'\r\n\r\n            return data\r\n\r\n        }\r\n\r\n    },\r\n\r\n    methods: {\r\n\r\n        ...mapActions(['actAlert', 'actpartlistStatusKappes', 'actpartlist', 'actpartlistupdate']),\r\n\r\n        focusbarcode() {\r\n\r\n            this.$refs.barcode.focus()\r\n\r\n        },\r\n\r\n        onSave() {\r\n\r\n            const barcode = {\r\n                params: {\r\n                        pesquisa: this.apidata.barcode\r\n                    }\r\n                }\r\n\r\n            // console.log('onSave:', barcode)\r\n\r\n            this.actpartlistupdate(this.apiupdate)\r\n\r\n            // salva a configuração da página no localStorage\r\n            localstore.setUserStorePageData('partlist', this.storepage)\r\n            \r\n            this.lastupdate.StatusKappes = this.partlist.StatusKappes\r\n\r\n            this.actpartlist(barcode)\r\n\r\n            this.focusbarcode()\r\n        },\r\n\r\n        onSearch(params) {\r\n\r\n            this.searching = true\r\n\r\n            // console.log('onSearch:', params)\r\n\r\n            if (params) {\r\n                this.actpartlist(params)\r\n            } else {\r\n                this.actpartlist(this.apipesquisa)\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n\r\n    watch: {\r\n\r\n        currentPage(page) {\r\n\r\n            this.partlist.barcode = this.barcodes[page-1]\r\n\r\n            const params = {\r\n                params: {\r\n                    pesquisa: this.partlist.barcode\r\n                }\r\n            }\r\n\r\n            this.onSearch(params)\r\n\r\n        },\r\n\r\n        gtxpartlistresponse(data) {\r\n\r\n            // console.log('gtxpartlistresponse:', data)\r\n\r\n            if (data.Success == 'False') {\r\n                this.actAlert({variant: 'danger', message: data.Error || 'Ocoreu um erro na execução!'})\r\n                this.partlist.barcode = ''\r\n            } else {\r\n                // se não tem status salvo, salva na primeira consulta\r\n                // console.log('gtxpartlistdata:', this.gtxpartlistdata)\r\n                if (this.gtxpartlistdata.StatusKappes==-1) this.onSave()\r\n                this.partlist.barcode = ''\r\n            }\r\n\r\n            this.searching = false\r\n\r\n        },\r\n\r\n        gtxpartlistupdate(update) {\r\n\r\n            // console.log('partlist.watch.gtxpartlistupdate:', update)\r\n\r\n            if (update.Success == 'True') {\r\n                this.actAlert({variant: 'success', message: update.Data[0].Mensagem})\r\n            } else\r\n                this.actAlert({variant: 'danger', message: update.Data[0].Error})\r\n        }\r\n\r\n    }\r\n\r\n}\r\n</script>\r\n<style>\r\n    \r\n</style>"]}]}