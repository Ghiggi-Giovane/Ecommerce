{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\components\\ExportFile.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\components\\ExportFile.vue","mtime":1670977910584},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UtYWxsLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJFeHBvcnRGaWxlIiwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRlbXBsYXRlczogW10sCiAgICAgIHRlbXBsYXRlbmFtZTogIiIsCiAgICAgIHRlbXBsYXRlc2VsZWN0ZWQ6IG51bGwsCiAgICAgIGFkZGZsZDogIiIsCiAgICAgIHNlcDogdGhpcy52YWx1ZS5zZXAsCiAgICAgIGZsZDogdGhpcy52YWx1ZS5mbGQsCiAgICAgIHF1b3RlZDogdGhpcy52YWx1ZS5xdW90ZWQsCiAgICAgIHdoZWFkOiB0aGlzLnZhbHVlLndoZWFkLAogICAgICBjc3ZzdHJlYW06IHRoaXMudmFsdWUuY3N2c3RyZWFtLAogICAgICBmaWxlbmFtZTogdGhpcy52YWx1ZS5maWxlbmFtZSwKICAgICAgZGF0YTogdGhpcy52YWx1ZS5kYXRhCiAgICB9OwogIH0sCgogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IHsKICAgICAgICBzZXA6ICI7IiwKICAgICAgICBmbGQ6IG51bGwsCiAgICAgICAgcXVvdGVkOiAiIiwKICAgICAgICB3aGVhZDogZmFsc2UsCiAgICAgICAgZmlsZW5hbWU6ICJkYXRhLmRhdCIsCiAgICAgICAgY3N2c3RyZWFtOiAiIiwKICAgICAgICBkYXRhOiBbXQogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgbGNhYmVjYWxobygpIHsKICAgICAgcmV0dXJuIHRoaXMud2hlYWQgPyAiVmlzw612ZWwiIDogIk9jdWx0byI7CiAgICB9LAoKICAgIGZpZWxkcygpIHsKICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuZGF0YVswXSkuZmlsdGVyKGYgPT4gdGhpcy5mbGQuaW5kZXhPZihmKSA9PT0gLTEpOwogICAgfSwKCiAgICBhdmFpbGFibGVPcHRpb25zKCkgewogICAgICByZXR1cm4gdGhpcy5maWVsZHMuZmlsdGVyKG9wdCA9PiB0aGlzLmZsZC5pbmRleE9mKG9wdCkgPT09IC0xKTsKICAgIH0sCgogICAgc2VwYXJhdG9ycygpIHsKICAgICAgcmV0dXJuIFsiIiwgIiwiLCAiOyIsICJ8Il07CiAgICB9LAoKICAgIGVtaXRtb2RhbCgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBzZXA6IHRoaXMuc2VwLAogICAgICAgIGZsZDogdGhpcy5mbGQsCiAgICAgICAgcXVvdGVkOiB0aGlzLnF1b3RlZCwKICAgICAgICB3aGVhZDogdGhpcy53aGVhZCwKICAgICAgICBmaWxlbmFtZTogdGhpcy5maWxlbmFtZSwKICAgICAgICBkYXRhOiB0aGlzLmRhdGEKICAgICAgfTsKICAgIH0sCgogICAgdGVtcGxhdGVtb2RlbCgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBzZXA6IHRoaXMuc2VwLAogICAgICAgIGZsZDogdGhpcy5mbGQsCiAgICAgICAgcXVvdGVkOiB0aGlzLnF1b3RlZCwKICAgICAgICB3aGVhZDogdGhpcy53aGVhZAogICAgICB9OwogICAgfSwKCiAgICB0ZW1wbGF0ZXNvcHRpb25zKCkgewogICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMudGVtcGxhdGVzLmxlbmd0aCA+IDAgPyB0aGlzLnRlbXBsYXRlcy5tYXAobSA9PiAoewogICAgICAgIHZhbHVlOiBtLm5vbWUsCiAgICAgICAgdGV4dDogbS5ub21lCiAgICAgIH0pKSA6IFtdOwogICAgICB0ZW1wbGF0ZS51bnNoaWZ0KHsKICAgICAgICB2YWx1ZTogIm5ldyB0ZW1wbGF0ZSIsCiAgICAgICAgdGV4dDogIk5vdm8gTW9kZWxvIgogICAgICB9KTsKICAgICAgcmV0dXJuIHRlbXBsYXRlOwogICAgfSwKCiAgICBjc3ZzYW1wbGUoKSB7CiAgICAgIHJldHVybiB0aGlzLmRhdGEubGVuZ3RoID4gMCA/IHRoaXMuanNvbjJjc3YodGhpcy5kYXRhLmZpbHRlcigoZiwgaSkgPT4gaSA8IDUpLCB0aGlzLmZsZCwgdGhpcy5zZXAsIHRoaXMucXVvdGVkLCB0aGlzLndoZWFkKSA6ICIiOwogICAgfQoKICB9LAogIHdhdGNoOiB7CiAgICBlbWl0bW9kYWw6IHsKICAgICAgZGVlcDogdHJ1ZSwKCiAgICAgIGhhbmRsZXIoZGF0YSkgewogICAgICAgIHRoaXMuZXhwb3J0YShkYXRhKTsKICAgICAgfQoKICAgIH0sCgogICAgdGVtcGxhdGVzZWxlY3RlZChub21lKSB7CiAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy50ZW1wbGF0ZXMuZmluZChmID0+IGYubm9tZSA9PSBub21lKTsKCiAgICAgIGlmICh0ZW1wbGF0ZSkgewogICAgICAgIHRoaXMuZmxkID0gdGVtcGxhdGUuZmxkOwogICAgICAgIHRoaXMuc2VwID0gdGVtcGxhdGUuc2VwOwogICAgICAgIHRoaXMucXVvdGVkID0gdGVtcGxhdGUucXVvdGVkOwogICAgICAgIHRoaXMud2hlYWQgPSB0ZW1wbGF0ZS53aGVhZDsKICAgICAgICB0aGlzLnRlbXBsYXRlbmFtZSA9IG5vbWU7CiAgICAgIH0KICAgIH0KCiAgfSwKCiAgYmVmb3JlTW91bnQoKSB7CiAgICBsZXQgdGVtcGxhdGVzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRlbXBsYXRlc2V4cG9ydCIpOwoKICAgIGlmICh0ZW1wbGF0ZXMgJiYgdGVtcGxhdGVzICE9PSAiIikgewogICAgICB0aGlzLnRlbXBsYXRlcyA9IEpTT04ucGFyc2UodGVtcGxhdGVzKS5maWx0ZXIoZiA9PiBmKTsKICAgIH0KCiAgICB0aGlzLnVwZGF0ZWNzdigpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZWNzdigpIHsKICAgICAgdGhpcy5jc3ZzdHJlYW0gPSB0aGlzLmpzb24yY3N2KHRoaXMuZGF0YSwgdGhpcy5mbGQsIHRoaXMuc2VwLCB0aGlzLnF1b3RlZCwgdGhpcy53aGVhZCk7CiAgICB9LAoKICAgIGV4cG9ydGEoZGF0YSkgewogICAgICB0aGlzLnVwZGF0ZWNzdigpOwogICAgICBjb25zdCBlbWl0ZGF0YSA9IHsgLi4uZGF0YSwKICAgICAgICAuLi57CiAgICAgICAgICBjc3ZzdHJlYW06IHRoaXMuY3N2c3RyZWFtCiAgICAgICAgfQogICAgICB9OwogICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIGVtaXRkYXRhKTsKICAgIH0sCgogICAgZG93bmxvYWQoKSB7CiAgICAgIHRoaXMuZG93bmxvYWRTdHJpbmcodGhpcy5jc3ZzdHJlYW0sIHRoaXMuZmlsZW5hbWUpOwogICAgfSwKCiAgICBqc29uMmNzdihvYmosIGZsZCA9IG51bGwsIHNlcCA9ICI7IiwgcXVvdGVkID0gIiIsIHdoZWFkID0gdHJ1ZSkgewogICAgICBjb25zdCByZXBsYWNlciA9IChrZXksIHZhbHVlKSA9PiB2YWx1ZSA9PT0gbnVsbCA/ICIiIDogdmFsdWU7IC8vIHNwZWNpZnkgaG93IHlvdSB3YW50IHRvIGhhbmRsZSBudWxsIHZhbHVlcyBoZXJlCgoKICAgICAgbGV0IGhlYWRlciA9IE9iamVjdC5rZXlzKG9ialswXSk7CgogICAgICBpZiAoQXJyYXkuaXNBcnJheShmbGQpICYmIGZsZC5sZW5ndGggPiAwKSB7CiAgICAgICAgaGVhZGVyID0gZmxkOwogICAgICB9CgogICAgICBsZXQgY3N2ID0gWy4uLm9iai5tYXAocm93ID0+IGhlYWRlci5tYXAoZmllbGROYW1lID0+IHF1b3RlZCArIEpTT04uc3RyaW5naWZ5KHJvd1tmaWVsZE5hbWVdLCByZXBsYWNlcikucmVwbGFjZUFsbCgnIicsICIiKSArIHF1b3RlZCkuam9pbihzZXApICsgc2VwKV0uam9pbigiXHJcbiIpOwogICAgICBpZiAod2hlYWQpIGNzdiA9IGhlYWRlci5qb2luKHNlcCkgKyBzZXAgKyAiXHJcbiIgKyBjc3Y7IC8vIGNvbnNvbGUubG9nKCJqc29uMmNzdi5vYmo6Iiwgb2JqKTsKICAgICAgLy8gY29uc29sZS5sb2coImpzb24yY3N2LmZsZDoiLCBmbGQpOwogICAgICAvLyBjb25zb2xlLmxvZygianNvbjJjc3Yuc2VwOiIsIHNlcCk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJqc29uMmNzdi5xdW90ZWQ6IiwgcXVvdGVkKTsKICAgICAgLy8gY29uc29sZS5sb2coImpzb24yY3N2LndoZWFkOiIsIHdoZWFkKTsKICAgICAgLy8gY29uc29sZS5sb2coImpzb24yY3N2LmNzdjoiLCBjc3Yuc3Vic3RyaW5nKDAsIDEwMCkpOwoKICAgICAgcmV0dXJuIGNzdjsKICAgIH0sCgogICAgZG93bmxvYWRTdHJpbmcoc3RyQ29udGVudCwgZmlsZU5hbWUpIHsKICAgICAgaWYgKCFmaWxlTmFtZSkgZmlsZU5hbWUgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zcGxpdCgiLiIpWzFdICsgIi5kYXQiOyAvLyB2YXIgZW5jb2RlZFVyaSA9IGVuY29kZVVSSShzdHJDb250ZW50KTsKCiAgICAgIHZhciBlbmNvZGVkVXJpID0gZW5jb2RlVVJJQ29tcG9uZW50KHN0ckNvbnRlbnQpOwogICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgbGluay5zZXRBdHRyaWJ1dGUoImhyZWYiLCAiZGF0YTp0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgsIiArIGVuY29kZWRVcmkpOwogICAgICBsaW5rLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCBmaWxlTmFtZSk7CiAgICAgIGxpbmsuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsgLy8gUmVxdWlyZWQgZm9yIEZGCgogICAgICBsaW5rLmNsaWNrKCk7IC8vIFRoaXMgd2lsbCBkb3dubG9hZCB0aGUgZGF0YSBmaWxlIG5hbWVkICJteV9kYXRhLmNzdiIuCgogICAgICB0aGlzLiRyb290LnRvYXN0c3VjY2VzcygiQXJxdWl2byBnZXJhZG8gY29tIHN1Y2Vzc28gISIpOwogICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOwogICAgfSwKCiAgICBzYWx2YXIoKSB7CiAgICAgIGlmICh0aGlzLnRlbXBsYXRlc2VsZWN0ZWQgPT0gIm5ldyB0ZW1wbGF0ZSIpIHsKICAgICAgICB0aGlzLnRlbXBsYXRlbmFtZSA9ICIiOwogICAgICAgIHRoaXMuJHJlZnNbIm1vZGFsLXRlbXBsYXRlIl0uc2hvdygpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLnRlbXBsYXRlbmFtZSAhPT0gIiIpIHsKICAgICAgICAgIHRoaXMuc2F2ZXRlbXBsYXRlKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIHNhdmV0ZW1wbGF0ZSgpIHsKICAgICAgY29uc3QgdGVtcGxhdGUgPSB7CiAgICAgICAgbm9tZTogdGhpcy50ZW1wbGF0ZW5hbWUsCiAgICAgICAgLi4udGhpcy50ZW1wbGF0ZW1vZGVsCiAgICAgIH07CiAgICAgIGNvbnN0IGZvdW5kZWQgPSB0aGlzLnRlbXBsYXRlcy5maW5kKGYgPT4gZi5ub21lID09IHRlbXBsYXRlLm5vbWUpOwoKICAgICAgaWYgKCFmb3VuZGVkKSB7CiAgICAgICAgdGhpcy50ZW1wbGF0ZXMucHVzaCh0ZW1wbGF0ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm91bmRlZC53aGVhZCA9IHRoaXMud2hlYWQ7CiAgICAgICAgZm91bmRlZC5mbGQgPSB0aGlzLmZsZDsKICAgICAgICBmb3VuZGVkLnNlcCA9IHRoaXMuc2VwOwogICAgICAgIGZvdW5kZWQucXVvdGVkID0gdGhpcy5xdW90ZWQ7CiAgICAgICAgZm91bmRlZC53aGVhZCA9IHRoaXMud2hlYWQ7CiAgICAgIH0KCiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0ZW1wbGF0ZXNleHBvcnQiLCBKU09OLnN0cmluZ2lmeSh0aGlzLnRlbXBsYXRlcykpOwogICAgICB0aGlzLnRlbXBsYXRlc2VsZWN0ZWQgPSB0aGlzLnRlbXBsYXRlbmFtZTsKICAgICAgdGhpcy4kcm9vdC50b2FzdHN1Y2Nlc3MoIk1vZGVsbyBzYWx2byBjb20gc3VjZXNzbyAhIik7CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8KA;EACAA,kBADA;;EAGAC;IACA;MACAC,aADA;MAEAC,gBAFA;MAGAC,sBAHA;MAIAC,UAJA;MAKAC,mBALA;MAMAC,mBANA;MAOAC,yBAPA;MAQAC,uBARA;MASAC,+BATA;MAUAC,6BAVA;MAWAV;IAXA;EAaA,CAjBA;;EAmBAW;IACAC;MACAC,YADA;MAEAC;QACAT,QADA;QAEAC,SAFA;QAGAC,UAHA;QAIAC,YAJA;QAKAE,oBALA;QAMAD,aANA;QAOAT;MAPA;IAFA;EADA,CAnBA;EAkCAe;IACAC;MACA;IACA,CAHA;;IAIAC;MACA,wCACAC,+BADA;IAGA,CARA;;IASAC;MACA;IACA,CAXA;;IAYAC;MACA;IACA,CAdA;;IAeAC;MACA;QACAhB,aADA;QAEAC,aAFA;QAGAC,mBAHA;QAIAC,iBAJA;QAKAE,uBALA;QAMAV;MANA;IAQA,CAxBA;;IAyBAsB;MACA;QACAjB,aADA;QAEAC,aAFA;QAGAC,mBAHA;QAIAC;MAJA;IAMA,CAhCA;;IAiCAe;MACA,iBACA,4BACA;QAAAX;QAAAY;MAAA,GADA,GAEA,EAHA;MAIAC;QAAAb;QAAAY;MAAA;MACA;IACA,CAxCA;;IAyCAE;MACA,8BACA,cACA,iCADA,EAEA,QAFA,EAGA,QAHA,EAIA,WAJA,EAKA,UALA,CADA,GAQA,EARA;IASA;;EAnDA,CAlCA;EAwFAC;IACAN;MACAO,UADA;;MAEAC;QACA;MACA;;IAJA,CADA;;IAOA1B;MACA;;MACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;;EAhBA,CAxFA;;EA2GA2B;IACA;;IACA;MACA;IACA;;IAEA;EACA,CAlHA;;EAoHAC;IACAC;MACA,+BACA,SADA,EAEA,QAFA,EAGA,QAHA,EAIA,WAJA,EAKA,UALA;IAOA,CATA;;IAUAC;MACA;MACA;QAAA;UAAAxB;QAAA;MAAA;MACA;IACA,CAdA;;IAeAyB;MACA;IACA,CAjBA;;IAkBAC;MACA,6DADA,CACA;;;MACA;;MACA;QACAC;MACA;;MACA,WACA,WACAC,OACAD,OACAE,GADA,CAEAC,aACAhC,SACAiC,4DADA,GAEAjC,MALA,EAOAkC,IAPA,CAOApC,GAPA,IAOAA,GATA,CADA,EAYAoC,IAZA,CAYA,MAZA;MAcA,uDApBA,CAsBA;MACA;MACA;MACA;MACA;MACA;;MAEA;IACA,CAhDA;;IAiDAC;MACA,eACAC,WACAC,cACAC,QADA,CACA,EADA,EAEAC,KAFA,CAEA,GAFA,EAEA,CAFA,IAEA,MAHA,CAFA,CAMA;;MACA;MACA;MACAC;MACAA;MACAA;MACAC,gCAZA,CAYA;;MAEAD,aAdA,CAcA;;MAEA;MAEAC;IACA,CApEA;;IAqEAC;MACA;QACA;QACA;MACA,CAHA,MAGA;QACA;UACA;QACA;MACA;IACA,CA9EA;;IA+EAC;MACA;QACAC,uBADA;QAEA;MAFA;MAIA;;MAEA;QACA;MACA,CAFA,MAEA;QACAC;QACAA;QACAA;QACAA;QACAA;MACA;;MAEAC;MAEA;MAEA;IACA;;EArGA;AApHA","names":["name","data","templates","templatename","templateselected","addfld","sep","fld","quoted","whead","csvstream","filename","props","value","type","default","computed","lcabecalho","fields","f","availableOptions","separators","emitmodal","templatemodel","templatesoptions","text","template","csvsample","watch","deep","handler","beforeMount","methods","updatecsv","exporta","download","json2csv","header","row","map","fieldName","JSON","join","downloadString","fileName","Math","toString","split","link","document","salvar","savetemplate","nome","founded","localStorage"],"sourceRoot":"src/components","sources":["ExportFile.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <b-form-group\r\n      id=\"input-group-templates\"\r\n      label-for=\"input-Templateses\"\r\n      label=\"Modelos\"\r\n    >\r\n      <b-input-group>\r\n        <b-form-select v-model=\"templateselected\" :options=\"templatesoptions\">\r\n        </b-form-select>\r\n        <b-input-group-append>\r\n          <b-button\r\n            variant=\"info\"\r\n            :disabled=\"!templateselected || templateselected == ''\"\r\n            @click=\"salvar\"\r\n          >\r\n            <b-icon-file-earmark-check />\r\n            Salvar\r\n          </b-button>\r\n        </b-input-group-append>\r\n      </b-input-group>\r\n    </b-form-group>\r\n    <b-form-group\r\n      id=\"input-group-fields\"\r\n      label-for=\"input-fields\"\r\n      label=\"Colunas\"\r\n    >\r\n      <b-form-tags\r\n        id=\"input-fields\"\r\n        add-button-text=\"Incluir\"\r\n        add-button-variant=\"outline-primary\"\r\n        placeholder=\"Adicione as colunas\"\r\n        add-on-change\r\n        no-outer-focus\r\n        v-model=\"fld\"\r\n      >\r\n        <template\r\n          v-slot=\"{ tags, inputAttrs, inputHandlers, disabled, removeTag }\"\r\n        >\r\n          <ul v-if=\"tags.length > 0\" class=\"list-inline d-inline-block mb-2\">\r\n            <li v-for=\"tag in tags\" :key=\"tag\" class=\"list-inline-item\">\r\n              <b-form-tag\r\n                @remove=\"removeTag(tag)\"\r\n                :title=\"tag\"\r\n                :disabled=\"disabled\"\r\n                variant=\"info\"\r\n                >{{ tag }}</b-form-tag\r\n              >\r\n            </li>\r\n          </ul>\r\n          <b-form-select\r\n            v-bind=\"inputAttrs\"\r\n            v-on=\"inputHandlers\"\r\n            :disabled=\"disabled || availableOptions.length === 0\"\r\n            :options=\"fields\"\r\n          >\r\n            <template #first>\r\n              <!-- This is required to prevent bugs with Safari -->\r\n              <option disabled value=\"\"\r\n                >Selecione as colunas a serem exportadas</option\r\n              >\r\n            </template>\r\n          </b-form-select>\r\n        </template>\r\n      </b-form-tags>\r\n    </b-form-group>\r\n\r\n    <b-row>\r\n      <b-col>\r\n        <b-form-group\r\n          id=\"input-group-filename\"\r\n          label-for=\"input-filename\"\r\n          label=\"Nome Arquivo\"\r\n        >\r\n          <b-form-input id=\"input-filename\" v-model=\"filename\"> </b-form-input>\r\n        </b-form-group>\r\n      </b-col>\r\n      <b-col cols=\"2\">\r\n        <b-form-group\r\n          id=\"input-group-separador\"\r\n          label-for=\"input-separador\"\r\n          label=\"Separador\"\r\n        >\r\n          <b-form-select\r\n            id=\"input-separador\"\r\n            :options=\"separators\"\r\n            v-model=\"sep\"\r\n          >\r\n          </b-form-select>\r\n        </b-form-group>\r\n      </b-col>\r\n      <b-col cols=\"2\">\r\n        <b-form-group\r\n          id=\"input-group-quoted\"\r\n          label-for=\"input-quoted\"\r\n          label=\"Formatador\"\r\n        >\r\n          <b-form-input id=\"input-quoted\" v-model=\"quoted\"> </b-form-input>\r\n        </b-form-group>\r\n      </b-col>\r\n      <b-col cols=\"2\">\r\n        <b-form-group\r\n          id=\"input-group-head\"\r\n          label-for=\"input-head\"\r\n          label=\"Cabeçalho\"\r\n        >\r\n          <b-form-checkbox id=\"input-head\" v-model=\"whead\">{{\r\n            lcabecalho\r\n          }}</b-form-checkbox>\r\n        </b-form-group>\r\n      </b-col>\r\n    </b-row>\r\n    <b-form-group\r\n      id=\"input-group-csvstream\"\r\n      label-for=\"input-csvstream\"\r\n      label=\"Exemplo\"\r\n    >\r\n      <b-form-textarea\r\n        id=\"input-csvstream\"\r\n        :value=\"csvsample\"\r\n        disabled\r\n        debounce=\"1000\"\r\n        wrap=\"off\"\r\n        rows=\"5\"\r\n        style=\"font-family: revert;font-size:10px;font-weight:bold;\"\r\n      ></b-form-textarea>\r\n    </b-form-group>\r\n    <hr />\r\n    <span class=\"spaced\">\r\n      <b-button\r\n        :disabled=\"csvstream == ''\"\r\n        variant=\"primary\"\r\n        class=\"float-right\"\r\n        @click=\"download\"\r\n      >\r\n        <b-icon-download />\r\n        Baixar\r\n      </b-button>\r\n    </span>\r\n    <!-- MODALS -->\r\n    <b-modal\r\n      id=\"modal-template\"\r\n      ref=\"modal-template\"\r\n      title=\"Salvar modelo\"\r\n      ok-only\r\n      ok-title=\"Salvar\"\r\n      :ok-disabled=\"templatename == ''\"\r\n      @ok=\"savetemplate\"\r\n    >\r\n      <b-form-group\r\n        id=\"input-group-nome\"\r\n        label-for=\"input-nome\"\r\n        label=\"Nome do modelo\"\r\n      >\r\n        <b-form-input id=\"input-nome\" v-model=\"templatename\"> </b-form-input>\r\n      </b-form-group>\r\n    </b-modal>\r\n    <!-- <pre>\r\n      templatesoptions:\r\n      {{ templatesoptions }}\r\n    </pre>\r\n    <pre>\r\n      templates:\r\n      {{ templates }}\r\n    </pre>\r\n    <pre>\r\n      templateselected:\r\n      {{ templateselected }}\r\n    </pre>\r\n    -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ExportFile\",\r\n\r\n  data() {\r\n    return {\r\n      templates: [],\r\n      templatename: \"\",\r\n      templateselected: null,\r\n      addfld: \"\",\r\n      sep: this.value.sep,\r\n      fld: this.value.fld,\r\n      quoted: this.value.quoted,\r\n      whead: this.value.whead,\r\n      csvstream: this.value.csvstream,\r\n      filename: this.value.filename,\r\n      data: this.value.data,\r\n    };\r\n  },\r\n\r\n  props: {\r\n    value: {\r\n      type: Object,\r\n      default: {\r\n        sep: \";\",\r\n        fld: null,\r\n        quoted: \"\",\r\n        whead: false,\r\n        filename: \"data.dat\",\r\n        csvstream: \"\",\r\n        data: [],\r\n      },\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    lcabecalho() {\r\n      return this.whead ? \"Visível\" : \"Oculto\";\r\n    },\r\n    fields() {\r\n      return Object.keys(this.data[0]).filter(\r\n        (f) => this.fld.indexOf(f) === -1\r\n      );\r\n    },\r\n    availableOptions() {\r\n      return this.fields.filter((opt) => this.fld.indexOf(opt) === -1);\r\n    },\r\n    separators() {\r\n      return [\"\", \",\", \";\", \"|\"];\r\n    },\r\n    emitmodal() {\r\n      return {\r\n        sep: this.sep,\r\n        fld: this.fld,\r\n        quoted: this.quoted,\r\n        whead: this.whead,\r\n        filename: this.filename,\r\n        data: this.data,\r\n      };\r\n    },\r\n    templatemodel() {\r\n      return {\r\n        sep: this.sep,\r\n        fld: this.fld,\r\n        quoted: this.quoted,\r\n        whead: this.whead,\r\n      };\r\n    },\r\n    templatesoptions() {\r\n      const template =\r\n        this.templates.length > 0\r\n          ? this.templates.map((m) => ({ value: m.nome, text: m.nome }))\r\n          : [];\r\n      template.unshift({ value: \"new template\", text: \"Novo Modelo\" });\r\n      return template;\r\n    },\r\n    csvsample() {\r\n      return this.data.length > 0\r\n        ? this.json2csv(\r\n            this.data.filter((f, i) => i < 5),\r\n            this.fld,\r\n            this.sep,\r\n            this.quoted,\r\n            this.whead\r\n          )\r\n        : \"\";\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    emitmodal: {\r\n      deep: true,\r\n      handler(data) {\r\n        this.exporta(data);\r\n      },\r\n    },\r\n    templateselected(nome) {\r\n      const template = this.templates.find((f) => f.nome == nome);\r\n      if (template) {\r\n        this.fld = template.fld;\r\n        this.sep = template.sep;\r\n        this.quoted = template.quoted;\r\n        this.whead = template.whead;\r\n        this.templatename = nome;\r\n      }\r\n    },\r\n  },\r\n\r\n  beforeMount() {\r\n    let templates = localStorage.getItem(\"templatesexport\");\r\n    if (templates && templates !== \"\") {\r\n      this.templates = JSON.parse(templates).filter((f) => f);\r\n    }\r\n\r\n    this.updatecsv();\r\n  },\r\n\r\n  methods: {\r\n    updatecsv() {\r\n      this.csvstream = this.json2csv(\r\n        this.data,\r\n        this.fld,\r\n        this.sep,\r\n        this.quoted,\r\n        this.whead\r\n      );\r\n    },\r\n    exporta(data) {\r\n      this.updatecsv();\r\n      const emitdata = { ...data, ...{ csvstream: this.csvstream } };\r\n      this.$emit(\"input\", emitdata);\r\n    },\r\n    download() {\r\n      this.downloadString(this.csvstream, this.filename);\r\n    },\r\n    json2csv(obj, fld = null, sep = \";\", quoted = \"\", whead = true) {\r\n      const replacer = (key, value) => (value === null ? \"\" : value); // specify how you want to handle null values here\r\n      let header = Object.keys(obj[0]);\r\n      if (Array.isArray(fld) && fld.length > 0) {\r\n        header = fld;\r\n      }\r\n      let csv = [\r\n        ...obj.map(\r\n          (row) =>\r\n            header\r\n              .map(\r\n                (fieldName) =>\r\n                  quoted +\r\n                  JSON.stringify(row[fieldName], replacer).replaceAll('\"', \"\") +\r\n                  quoted\r\n              )\r\n              .join(sep) + sep\r\n        ),\r\n      ].join(\"\\r\\n\");\r\n\r\n      if (whead) csv = header.join(sep) + sep + \"\\r\\n\" + csv;\r\n\r\n      // console.log(\"json2csv.obj:\", obj);\r\n      // console.log(\"json2csv.fld:\", fld);\r\n      // console.log(\"json2csv.sep:\", sep);\r\n      // console.log(\"json2csv.quoted:\", quoted);\r\n      // console.log(\"json2csv.whead:\", whead);\r\n      // console.log(\"json2csv.csv:\", csv.substring(0, 100));\r\n\r\n      return csv;\r\n    },\r\n    downloadString(strContent, fileName) {\r\n      if (!fileName)\r\n        fileName =\r\n          Math.random()\r\n            .toString(36)\r\n            .split(\".\")[1] + \".dat\";\r\n      // var encodedUri = encodeURI(strContent);\r\n      var encodedUri = encodeURIComponent(strContent);\r\n      var link = document.createElement(\"a\");\r\n      link.setAttribute(\"href\", \"data:text/plain;charset=utf-8,\" + encodedUri);\r\n      link.setAttribute(\"download\", fileName);\r\n      link.style.display = \"none\";\r\n      document.body.appendChild(link); // Required for FF\r\n\r\n      link.click(); // This will download the data file named \"my_data.csv\".\r\n\r\n      this.$root.toastsuccess(\"Arquivo gerado com sucesso !\");\r\n\r\n      document.body.removeChild(link);\r\n    },\r\n    salvar() {\r\n      if (this.templateselected == \"new template\") {\r\n        this.templatename = \"\";\r\n        this.$refs[\"modal-template\"].show();\r\n      } else {\r\n        if (this.templatename !== \"\") {\r\n          this.savetemplate();\r\n        }\r\n      }\r\n    },\r\n    savetemplate() {\r\n      const template = {\r\n        nome: this.templatename,\r\n        ...this.templatemodel,\r\n      };\r\n      const founded = this.templates.find((f) => f.nome == template.nome);\r\n\r\n      if (!founded) {\r\n        this.templates.push(template);\r\n      } else {\r\n        founded.whead = this.whead;\r\n        founded.fld = this.fld;\r\n        founded.sep = this.sep;\r\n        founded.quoted = this.quoted;\r\n        founded.whead = this.whead;\r\n      }\r\n\r\n      localStorage.setItem(\"templatesexport\", JSON.stringify(this.templates));\r\n\r\n      this.templateselected = this.templatename;\r\n\r\n      this.$root.toastsuccess(\"Modelo salvo com sucesso !\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}