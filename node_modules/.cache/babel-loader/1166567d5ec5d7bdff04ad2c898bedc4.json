{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\ecommerce\\views\\PedVinculado.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\ecommerce\\views\\PedVinculado.vue","mtime":1701906516479},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBcGlTZXJ2aWNlIGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2FwaS5zZXJ2aWNlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQZWRpZG9zIFZpbmN1bGFkb3MiLAogIGNvbXBvbmVudHM6IHt9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBub3ZvUGVkaWRvQ3JpYWRvOiAiIiwKICAgICAgcGVkaWRvT3JpZ2luYWw6ICIiLAogICAgICBJdGVuc1BlZGlkbzogW10sCiAgICAgIHNlbGVjdGVkVGlwb1BlZGlkbzogIsOKIiwKICAgICAgdGlwb1BlZGlkbzogW3sKICAgICAgICB2YWx1ZTogIkIiLAogICAgICAgIHRleHQ6ICJCT05JRklDQUNBTyIKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAiw4oiLAogICAgICAgIHRleHQ6ICJWRU5EQSBFLUNPTU1FUkNFIEIyQyIKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAiUiIsCiAgICAgICAgdGV4dDogIlRST0NBIgogICAgICB9LCB7CiAgICAgICAgdmFsdWU6ICJBIiwKICAgICAgICB0ZXh0OiAiQVNTSVNURU5DSUFTIgogICAgICB9XSwKICAgICAgb2JzZXJ2YWNhbzogIiIsCiAgICAgIGl0ZW5zRmllbGRzOiBbewogICAgICAgIGtleTogIkl0ZW0iLAogICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIHZpc2libGU6IHRydWUKICAgICAgfSwgewogICAgICAgIGtleTogIlF0ZGUiLAogICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIGxhYmVsOiAiUXVhbnRpZGFkZSIsCiAgICAgICAgdmlzaWJsZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAga2V5OiAiTW90aXZvQXNzaXN0IiwKICAgICAgICB2aXNpYmxlOiBmYWxzZQogICAgICB9XQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjYW5TYXZlTmV3UGVkaWRvKCkgewogICAgICBpZiAodGhpcy5zZWxlY3RlZFRpcG9QZWRpZG8gPT0gIiIgfHwgdGhpcy5JdGVuc1BlZGlkby5sZW5ndGggPT0gMCB8fCB0aGlzLm9ic2VydmFjYW8gPT0gIiIpIHJldHVybiB0cnVlOwogICAgICByZXR1cm4gZmFsc2U7IC8vIHByYSBkZWl4YXIgc2FsdmFyCiAgICAgIC8vcmV0dXJuIHRydWU7IC8vcHJhIGJsb3F1ZWFyCiAgICB9LAoKICAgIG5ld0ZpZWxkcygpIHsKICAgICAgLy8gaWYgKHRoaXMuc2VsZWN0ZWRUaXBvUGVkaWRvID09ICJBIikgewogICAgICAvLyAgIHJldHVybiB0aGlzLml0ZW5zRmllbGRzOwogICAgICAvLyB9CiAgICAgIHJldHVybiB0aGlzLml0ZW5zRmllbGRzLmZpbHRlcihmID0+IGYudmlzaWJsZSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBidXNjYXJJdGVucyhudW1lcm8pIHsKICAgICAgYXdhaXQgQXBpU2VydmljZS5wb3N0KCJ2Mi9JbnRyYW5ldEVjb21tZXJjZUIyQy9JdGVuc1BlZGlkby9HZXQiLCB7CiAgICAgICAgbnVtZXJvCiAgICAgIH0pLnRoZW4ocmVzdWx0ID0+IHsKICAgICAgICBpZiAocmVzdWx0LmRhdGEuU3VjY2VzcyA9PSB0cnVlKSB7CiAgICAgICAgICB0aGlzLkl0ZW5zUGVkaWRvID0gcmVzdWx0LmRhdGEuRGF0YTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgY3JpYXJOb3ZvUGVkaWRvVmluY3VsYWRvKCkgewogICAgICBjb25zb2xlLmxvZyh7CiAgICAgICAgcGVkaWRvT3JpZ2luYWw6IHRoaXMucGVkaWRvT3JpZ2luYWwsCiAgICAgICAgaXRlbnM6IHRoaXMuSXRlbnNQZWRpZG8sCiAgICAgICAgdGlwb1BlZGlkbzogdGhpcy5zZWxlY3RlZFRpcG9QZWRpZG8sCiAgICAgICAgb2JzOiB0aGlzLm9ic2VydmFjYW8KICAgICAgfSk7CiAgICAgIGF3YWl0IEFwaVNlcnZpY2UucG9zdCgidjIvSW50cmFuZXRFY29tbWVyY2VCMkMvUGVkaWRvVmluY3VsYWRvL1NhdmUiLCB7CiAgICAgICAgcGVkaWRvT3JpZ2luYWw6IHRoaXMucGVkaWRvT3JpZ2luYWwsCiAgICAgICAgaXRlbnM6IHRoaXMuSXRlbnNQZWRpZG8sCiAgICAgICAgdGlwb1BlZGlkbzogdGhpcy5zZWxlY3RlZFRpcG9QZWRpZG8sCiAgICAgICAgb2JzOiB0aGlzLm9ic2VydmFjYW8KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuZGF0YS5TdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLm5vdm9QZWRpZG9DcmlhZG8gPSByZXMuZGF0YS5EYXRhWydOdW1lcm8nXTsKICAgICAgICAgIHRoaXMuJHJvb3QudG9hc3RzdWNjZXNzKCJTYWx2byBjb20gU3VjZXNzbyEiKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIHRoaXMuJHJvb3QudG9hc3RkYW5nZXIoIkVycm8hICIgKyBlKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;AAEA;EACAA;EACAC;EACAC;IACA;MACAC;MAEAC;MACAC;MACAC;MACAC,aACA;QAAAC;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,EACA;MACAC;MACAC,cACA;QAAAC;QAAAC;QAAAC;MAAA,GACA;QACAF;QACAC;QACAE;QACAD;MACA,GACA;QACAF;QACAE;MACA;IAEA;EACA;EAEAE;IACAC;MACA,IACA,iCACA,gCACA,uBAEA;MAEA;MACA;IACA;;IAEAC;MACA;MACA;MACA;MACA;IACA;EACA;EAEAC;IACA;MACA;QACAC;MACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IAEA;MACAC;QACAjB;QACAkB;QACAf;QACAgB;MACA;MAEA;QACAnB;QACAkB;QACAf;QACAgB;MACA,GACAC;QACA;UACA;UACA;QACA;MACA,GACAC;QACA;MACA;IACA;EACA;AACA","names":["name","components","data","novoPedidoCriado","pedidoOriginal","ItensPedido","selectedTipoPedido","tipoPedido","value","text","observacao","itensFields","key","sortable","visible","label","computed","canSaveNewPedido","newFields","methods","numero","console","itens","obs","then","catch"],"sourceRoot":"src/pages/ecommerce/views","sources":["PedVinculado.vue"],"sourcesContent":["<template lang=\"\">\r\n  <div>\r\n    <b-card class=\"ml-4 mr-4 mt-4\">\r\n      <div class=\"doc\">\r\n        <b-row class=\"ml-1\">\r\n          <h3 v-if=\"novoPedidoCriado == ''\">Criar novo pedido Vinculado</h3>\r\n          <h3 v-if=\"novoPedidoCriado != ''\">\r\n            <strong> Novo pedido criado: {{ novoPedidoCriado }} </strong>\r\n          </h3>\r\n        </b-row>\r\n\r\n        <div>\r\n          <b-row style=\"align-items: baseline\">\r\n            <b-button\r\n              class=\"mr-3\"\r\n              variant=\"success\"\r\n              @click=\"criarNovoPedidoVinculado()\"\r\n              :disabled=\"canSaveNewPedido\"\r\n              >Salvar</b-button\r\n            >\r\n          </b-row>\r\n        </div>\r\n      </div>\r\n      <div class=\"doc\">\r\n        <b-row style=\"align-items: baseline\" class=\"mb-2\">\r\n          <span class=\"ml-3\"> Número do pedido original: </span>\r\n\r\n          <b-input-group class=\"ml-2\" style=\"width: 400px\">\r\n            <b-form-input\r\n              style=\"width: 200px\"\r\n              v-model=\"pedidoOriginal\"\r\n            ></b-form-input>\r\n            <b-input-group-append>\r\n              <b-button @click=\"buscarItens(pedidoOriginal)\">Buscar</b-button>\r\n            </b-input-group-append>\r\n          </b-input-group>\r\n        </b-row>\r\n      </div>\r\n      <div class=\"doc\">\r\n        <b-row style=\"align-items: baseline\" class=\"mb-2\">\r\n          <span class=\"ml-3\">Observação do Pedido: </span>\r\n\r\n          <b-input-group class=\"ml-2\" style=\"width: 400px\">\r\n            <b-form-input\r\n              style=\"width: 200px\"\r\n              v-model=\"observacao\"\r\n            ></b-form-input>\r\n          </b-input-group>\r\n\r\n          <span class=\"ml-3\">Tipo de Pedido: </span>\r\n          <b-form-select\r\n            class=\"ml-2\"\r\n            style=\"width: 400px\"\r\n            v-model=\"selectedTipoPedido\"\r\n            :options=\"tipoPedido\"\r\n          ></b-form-select>\r\n          \r\n        </b-row>\r\n      </div>\r\n\r\n      <b-table\r\n        no-footer-sorting\r\n        id=\"table-depositos-itens\"\r\n        head-variant=\"dark\"\r\n        sort-desc\r\n        selectable\r\n        striped\r\n        bordered\r\n        hovers\r\n        responsive\r\n        small\r\n        select-mode=\"single\"\r\n        :items=\"ItensPedido\"\r\n        :fields=\"newFields\"\r\n      >\r\n        <template #cell(Qtde)=\"row\">\r\n          <div>\r\n            <b-form-input\r\n              id=\"descricao-input\"\r\n              v-model=\"row.item.Qtde\"\r\n              required\r\n            ></b-form-input>\r\n          </div>\r\n        </template>\r\n        <template #cell(MotivoAssist)=\"row\">\r\n          <div>\r\n            <b-form-input\r\n              id=\"motivoAssist-input\"\r\n              v-model=\"row.item.MotivoAssist\"\r\n            ></b-form-input>\r\n          </div>\r\n        </template>\r\n      </b-table>\r\n    </b-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ApiService from \"../../../services/api.service\";\r\n\r\nexport default {\r\n  name: \"Pedidos Vinculados\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      novoPedidoCriado: \"\",\r\n\r\n      pedidoOriginal: \"\",\r\n      ItensPedido: [],\r\n      selectedTipoPedido: \"Ê\",\r\n      tipoPedido: [\r\n        { value: \"B\", text: \"BONIFICACAO\" },\r\n        { value: \"Ê\", text: \"VENDA E-COMMERCE B2C\" },\r\n        { value: \"R\", text: \"TROCA\" },\r\n        { value: \"A\", text: \"ASSISTENCIAS\" },\r\n      ],\r\n      observacao: \"\",\r\n      itensFields: [\r\n        { key: \"Item\", sortable: true, visible: true },\r\n        {\r\n          key: \"Qtde\",\r\n          sortable: true,\r\n          label: \"Quantidade\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"MotivoAssist\",\r\n          visible: false,\r\n        },\r\n      ],\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    canSaveNewPedido() {\r\n      if (\r\n        this.selectedTipoPedido == \"\" ||\r\n        this.ItensPedido.length == 0 ||\r\n        this.observacao == \"\"\r\n      )\r\n        return true;\r\n\r\n      return false; // pra deixar salvar\r\n      //return true; //pra bloquear\r\n    },\r\n\r\n    newFields() {\r\n      // if (this.selectedTipoPedido == \"A\") {\r\n      //   return this.itensFields;\r\n      // }\r\n      return this.itensFields.filter((f) => f.visible);\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    async buscarItens(numero) {\r\n      await ApiService.post(\"v2/IntranetEcommerceB2C/ItensPedido/Get\", {\r\n        numero,\r\n      }).then((result) => {\r\n        if (result.data.Success == true) {\r\n          this.ItensPedido = result.data.Data;\r\n        } else {\r\n          return;\r\n        }\r\n      });\r\n    },\r\n\r\n    async criarNovoPedidoVinculado() {\r\n      console.log({\r\n        pedidoOriginal: this.pedidoOriginal,\r\n        itens: this.ItensPedido,\r\n        tipoPedido: this.selectedTipoPedido,\r\n        obs: this.observacao,\r\n      });\r\n\r\n      await ApiService.post(\"v2/IntranetEcommerceB2C/PedidoVinculado/Save\", {\r\n        pedidoOriginal: this.pedidoOriginal,\r\n        itens: this.ItensPedido,\r\n        tipoPedido: this.selectedTipoPedido,\r\n        obs: this.observacao,\r\n      })\r\n        .then((res) => {\r\n          if (res.data.Success) {\r\n            this.novoPedidoCriado = res.data.Data['Numero'];\r\n            this.$root.toastsuccess(\"Salvo com Sucesso!\");\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          this.$root.toastdanger(\"Erro! \" + e);\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.doc {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap: nowrap;\r\n  justify-content: space-between;\r\n}\r\n\r\n.gallerypanel {\r\n  min-width: 250px;\r\n  min-height: 220px;\r\n  margin-left: 0 !important;\r\n}\r\n.lock {\r\n  position: relative;\r\n  top: -28px;\r\n  float: right;\r\n}\r\n.hand {\r\n  cursor: pointer;\r\n}\r\n.counter {\r\n  /* background-color: darkred; */\r\n  -webkit-transition: -webkit-transform 0.5s ease-in-out;\r\n  -ms-transition: -ms-transform 0.5s ease-in-out;\r\n  transition: background-color 0.5s ease-in-out;\r\n  /* color: whitesmoke; */\r\n  padding: 20px 0;\r\n  border-radius: 5px;\r\n  opacity: 0.85;\r\n  /* border: 2px solid firebrick; */\r\n}\r\n</style>\r\n"]}]}