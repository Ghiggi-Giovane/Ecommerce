{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\chat\\views\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\chat\\views\\index.vue","mtime":1701906516445},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IE1lc3NhZ2VzIGZyb20gIi4uL2NvbXBvbmVudHMvTWVzc2FnZXMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNoYXQiLAogIGNvbXBvbmVudHM6IHsKICAgIE1lc3NhZ2VzCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcm9vbTogbnVsbCwKICAgICAgY2hhdGxpc3RlbjogbnVsbCwKICAgICAgbWVzc2FnZXM6IFtdLAogICAgICB1c2VybGlzdDogW3sKICAgICAgICB1c2VyOiB0aGlzLmd0eEF1dGhQcm9maWxlVXNlck5hbWUKICAgICAgfSwgewogICAgICAgIHVzZXI6ICJzcHJfcHJlbWl1bSIKICAgICAgfSwgewogICAgICAgIHVzZXI6ICJzcHJfaWRlbGxpIgogICAgICB9XSwKICAgICAgdG86ICIiLAogICAgICBmcm9tOiB0aGlzLmd0eEF1dGhQcm9maWxlVXNlck5hbWUsCiAgICAgIG1lc3NhZ2U6ICIiCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWyJndHhBdXRoUHJvZmlsZVVzZXJOYW1lIiwgImd0eEF1dGhVc2VyIiwgImd0eHVzZXJzIiwgImd0eHVzZXIiLCAiZ3R4dXNlcnNsaXN0IiwgImd0eGNoYXQiLCAiZ3R4Y2hhdERhdGEiLCAiZ3R4ZmlyZWJhc2VSZWYiLCAiZ3R4Y2hhdFF1ZXJ5IiwgImd0eHJvb21zRGF0YSIsICJndHhyb29tc0RhdGFMaXN0IiwgImd0eGNoYXRNZXNzYWdlcyIsICJndHhjaGF0VXNlcnNEYXRhIl0pLAogICAgY2hhdHRpdGxlKCkgewogICAgICByZXR1cm4gdGhpcy5yb29tID8gdGhpcy5yb29tLnRleHQgOiAiU2VsZWNpb25lIG8gY2hhdCI7CiAgICB9LAogICAgYXN5bmMgZ2V0Y2hhdHVzZXIoa2V5KSB7CiAgICAgIGxldCByZXMgPSBbXTsKICAgICAgYXdhaXQgdGhpcy5ndHhmaXJlYmFzZVJlZigiY2hhdCIpLmdldChrZXkpLnRoZW4oc25hcHNob3QgPT4gewogICAgICAgIHNuYXBzaG90LmZvckVhY2goZG9jID0+IHsKICAgICAgICAgIHJlcy5wdXNoKHsKICAgICAgICAgICAgaWQ6IGRvYy5pZCwKICAgICAgICAgICAgZGF0YTogZG9jLmRhdGEoKQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICByZXR1cm4gcmVzOwogICAgfSwKICAgIGNoYXR1c2VycygpIHsKICAgICAgcmV0dXJuIGd0eGNoYXRVc2Vyc0RhdGEuZmlsdGVyKGYgPT4gZi5ub21lLmluY2x1ZGVzKHRoaXMudG8pKTsKICAgIH0KICB9LAogIGJlZm9yZU1vdW50KCkgewogICAgdGhpcy5vbkZpcmVEYXRhKCJ1c2VycyIpOwogICAgdGhpcy5hY3RDaGF0SW5pdCh0aGlzLmd0eEF1dGhQcm9maWxlVXNlck5hbWUpOwogICAgdGhpcy5hY3RDaGF0VXNlcnMoKTsKICB9LAogIGRlc3Ryb3llZCgpIHsKICAgIHRoaXMub25GaXJlRGF0YSgidXNlcnMiKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWyJhY3RDaGF0SW5pdCIsICJpbml0RG9jIiwgInJlYWREb2MiLCAicXVlcnlEb2MiLCAib25GaXJlRGF0YSIsICJhY3R1c2VyYWRkIiwgImFjdGNoYXRzZW5kIiwgImFjdGNoYXRzZWxlY3RlZCIsICJhY3RDaGF0TGlzdGVuIiwgImFjdENoYXRVc2VycyJdKSwKICAgIHNlbGVjdHJvb20ocm9vbSkgewogICAgICB0aGlzLnJvb20gPSByb29tOwogICAgfSwKICAgIHNlbGVjdGNoYXQocm9vbSkgewogICAgICB0aGlzLmd0eGZpcmViYXNlUmVmKCJjaGF0IikuZG9jKHJvb20udmFsdWUpLmNvbGxlY3Rpb24oIm1lc3NhZ2VzIikub3JkZXJCeSgidGltZSIpLm9uU25hcHNob3Qoc25hcHNob3QgPT4gewogICAgICAgIHRoaXMubWVzc2FnZXMgPSBbXTsKICAgICAgICBzbmFwc2hvdC5mb3JFYWNoKGRvYyA9PiB7CiAgICAgICAgICB0aGlzLm1lc3NhZ2VzLnB1c2goZG9jLmRhdGEoKSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHN0b3BsaXN0ZW5jaGF0KCkge30sCiAgICBhZGRNZXNzYWdlKCkgewogICAgICB0aGlzLmd0eGZpcmViYXNlUmVmKCJjaGF0IikuZG9jKHRoaXMucm9vbS52YWx1ZSkuY29sbGVjdGlvbigibWVzc2FnZXMiKS5kb2MoKS5zZXQoewogICAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZSwKICAgICAgICBzZW5kZXI6IHRoaXMuZ3R4QXV0aFByb2ZpbGVVc2VyTmFtZSwKICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpCiAgICAgIH0pOwogICAgICB0aGlzLm1lc3NhZ2UgPSAiIjsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICByb29tKCkgewogICAgICB0aGlzLnNlbGVjdGNoYXQodGhpcy5yb29tKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiLA;AACA;AACA;EACAA;EAEAC;IACAC;EACA;EAEAC;IACA;MACAC;MACAC;MACAC;MAEAC,WACA;QAAAC;MAAA,GACA;QAAAA;MAAA,GACA;QAAAA;MAAA,EACA;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACA,eACA,0BACA,eACA,YACA,WACA,gBACA,WACA,eACA,kBACA,gBACA,gBACA,oBACA,mBACA,mBACA;IAEAC;MACA;IACA;IAEA;MACA;MACA,kCACAC,SACAC;QACAC;UACAC;YAAAC;YAAAf;UAAA;QACA;MACA;MAEA;IACA;IAEAgB;MACA;IACA;EACA;EAEAC;IACA;IACA;IAEA;EACA;EAEAC;IACA;EACA;EAEAC;IACA,eACA,eACA,WACA,WACA,YACA,cACA,cACA,eACA,mBACA,iBACA,eACA;IAEAC;MACA;IACA;IAEAC;MACA,4BACAC,gBACAC,uBACAC,gBACAC;QACA;QACAZ;UACA;QACA;MACA;IACA;IAEAa;IAEAC;MACA,4BACAL,qBACAC,uBACAD,MACAM;QACApB;QACAqB;QACAC;MACA;MAEA;IACA;EACA;EAEAC;IACA9B;MACA;IACA;EACA;AACA","names":["name","components","Messages","data","room","chatlisten","messages","userlist","user","to","from","message","computed","chattitle","get","then","snapshot","res","id","chatusers","beforeMount","destroyed","methods","selectroom","selectchat","doc","collection","orderBy","onSnapshot","stoplistenchat","addMessage","set","sender","time","watch"],"sourceRoot":"src/pages/chat/views","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div class=\"m-2\">\r\n    <b-sidebar id=\"sidebar-1\" title=\"Usuários\" backdrop shadow>\r\n      <div class=\"px-3 py-2\">\r\n        <b-col class=\"mb-3\">\r\n          <b-input-group>\r\n            <b-form-input\r\n              v-model=\"to\"\r\n              placeholder=\"Pesquisar usuários\"\r\n            ></b-form-input>\r\n\r\n            <b-input-group-append>\r\n              <b-button variant=\"outline-success\" @click=\"actuseradd(to)\"\r\n                ><b-icon-person-plus\r\n              /></b-button>\r\n            </b-input-group-append>\r\n          </b-input-group>\r\n        </b-col>\r\n\r\n        <b-overlay :show=\"gtxchatUsersData.length == 0\" rounded=\"sm\">\r\n          <b-list-group>\r\n            <b-list-group-item\r\n              href=\"#\"\r\n              v-for=\"(u, i) of gtxchatUsersData\"\r\n              :key=\"i\"\r\n              @click.prevent=\"selectroom(u)\"\r\n              bg-color=\"secondary\"\r\n              class=\"d-flex justify-content-between align-items-center\"\r\n            >\r\n              <div>\r\n                <b-icon-person />\r\n                <strong class=\"ml-3\">{{ u.nome }}</strong>\r\n              </div>\r\n              <b-badge v-if=\"u.usuario == 'Idélli'\" variant=\"warning\"\r\n                >1</b-badge\r\n              >\r\n            </b-list-group-item>\r\n          </b-list-group>\r\n        </b-overlay>\r\n\r\n        gtxchatUsersData:\r\n        <pre>{{ gtxchatUsersData }}</pre>\r\n\r\n        <!--\r\n            <b-overlay :show=\"gtxchatUsersData.length==0\" rounded=\"sm\">\r\n                <b-list-group>\r\n                    <b-list-group-item\r\n                        href=\"#\" \r\n                        v-for=\"(u,i) of gtxchatUsersData\" :key=\"i\" @click.prevent=\"selectroom(u)\"\r\n                        bg-color=\"secondary\">\r\n                        <div>\r\n                            <b-icon-person/>\r\n                            <strong class=\"ml-3\">{{ u.usuario }}</strong>\r\n                        </div>\r\n                        <div>\r\n                            <span class=\"d-flex float-right\" style=\"font-size: 10px\">{{ u.setor }}</span>\r\n                        </div>\r\n                        <b-badge v-if=\"u.text == 'Idélli'\" variant=\"warning\">1</b-badge>\r\n                    </b-list-group-item>\r\n                </b-list-group>\r\n            </b-overlay>\r\n            -->\r\n      </div>\r\n    </b-sidebar>\r\n\r\n    <b-card class=\"container\">\r\n      <b-card-title class=\"bg-info text-white p-2\">\r\n        <b-button v-b-toggle.sidebar-1 variant=\"light\">\r\n          <b-icon icon=\"menu-app\" />\r\n        </b-button>\r\n        {{ chattitle }}\r\n      </b-card-title>\r\n\r\n      <b-card-text class=\"overflow-auto\">\r\n        <Messages\r\n          v-for=\"(m, i) of messages\"\r\n          :key=\"i\"\r\n          :message=\"m.message\"\r\n          :incomming=\"m.sender !== gtxAuthProfileUserName\"\r\n          :time=\"m.time.seconds\"\r\n          :sender=\"m.sender\"\r\n        />\r\n      </b-card-text>\r\n\r\n      <b-card-text class=\"mt-2\">\r\n        <b-input-group>\r\n          <b-form-input v-model=\"message\"></b-form-input>\r\n          <b-input-group-append>\r\n            <b-button variant=\"primary\" disabled><b-icon-paperclip /></b-button>\r\n            <b-button\r\n              variant=\"success\"\r\n              :disabled=\"message == ''\"\r\n              @click=\"addMessage\"\r\n              ><b-icon-cursor\r\n            /></b-button>\r\n          </b-input-group-append>\r\n        </b-input-group>\r\n      </b-card-text>\r\n    </b-card>\r\n\r\n    <!--\r\n        gtxchatUsersData: {{gtxchatUsersData}}\r\n    \r\n        <div class=\"accordion\" role=\"tablist\">\r\n            <b-card no-body class=\"mb-1\">\r\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                    <b-button block v-b-toggle.accordion-1 variant=\"info\">messages</b-button>\r\n                </b-card-header>\r\n                <b-collapse id=\"accordion-1\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                    <b-card-body>\r\n                        <b-card-text><pre>{{ messages }} </pre></b-card-text>\r\n                    </b-card-body>\r\n                </b-collapse>\r\n            </b-card>\r\n\r\n            <b-card no-body class=\"mb-1\">\r\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                    <b-button block v-b-toggle.accordion-2 variant=\"info\">gtxchatbyuser</b-button>\r\n                </b-card-header>\r\n                <b-collapse id=\"accordion-2\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                    <b-card-body>\r\n                        <b-card-text><pre>{{ gtxchatbyuser(gtxAuthUser) }} </pre></b-card-text>\r\n                    </b-card-body>\r\n                </b-collapse>\r\n            </b-card>\r\n\r\n            <b-card no-body class=\"mb-1\">\r\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                    <b-button block v-b-toggle.accordion-3 variant=\"info\">gtxchatData</b-button>\r\n                </b-card-header>\r\n                <b-collapse id=\"accordion-3\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                    <b-card-body>\r\n                        <b-card-text><pre>{{ gtxchatData }} </pre></b-card-text>\r\n                    </b-card-body>\r\n                </b-collapse>\r\n            </b-card>\r\n\r\n            <b-card no-body class=\"mb-1\">\r\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                    <b-button block v-b-toggle.accordion-4 variant=\"info\">gtxroomsData</b-button>\r\n                </b-card-header>\r\n                <b-collapse id=\"accordion-4\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                    <b-card-body>\r\n                        <b-card-text><pre>{{ gtxroomsData }} </pre></b-card-text>\r\n                    </b-card-body>\r\n                </b-collapse>\r\n            </b-card>\r\n\r\n        </div>\r\n\r\n        <b-card no-body class=\"mb-1\">\r\n            <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                <b-button block v-b-toggle.accordion-5 variant=\"info\">gtxroomsDataList</b-button>\r\n            </b-card-header>\r\n            <b-collapse id=\"accordion-5\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                <b-card-body>\r\n                    <b-card-text><pre>{{ gtxroomsDataList(gtxAuthUser) }} </pre></b-card-text>\r\n                </b-card-body>\r\n            </b-collapse>\r\n        </b-card>\r\n\r\n        <b-card no-body class=\"mb-1\">\r\n            <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                <b-button block v-b-toggle.accordion-6 variant=\"info\">gtxchatMessages</b-button>\r\n            </b-card-header>\r\n            <b-collapse id=\"accordion-6\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                <b-card-body>\r\n                    <b-card-text><pre>{{ gtxchatMessages }}</pre></b-card-text>\r\n                </b-card-body>\r\n            </b-collapse>\r\n        </b-card>\r\n\r\n-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nimport Messages from \"../components/Messages\";\r\nexport default {\r\n  name: \"Chat\",\r\n\r\n  components: {\r\n    Messages,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      room: null,\r\n      chatlisten: null,\r\n      messages: [],\r\n\r\n      userlist: [\r\n        { user: this.gtxAuthProfileUserName },\r\n        { user: \"spr_premium\" },\r\n        { user: \"spr_idelli\" },\r\n      ],\r\n      to: \"\",\r\n      from: this.gtxAuthProfileUserName,\r\n      message: \"\",\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\r\n      \"gtxAuthProfileUserName\",\r\n      \"gtxAuthUser\",\r\n      \"gtxusers\",\r\n      \"gtxuser\",\r\n      \"gtxuserslist\",\r\n      \"gtxchat\",\r\n      \"gtxchatData\",\r\n      \"gtxfirebaseRef\",\r\n      \"gtxchatQuery\",\r\n      \"gtxroomsData\",\r\n      \"gtxroomsDataList\",\r\n      \"gtxchatMessages\",\r\n      \"gtxchatUsersData\",\r\n    ]),\r\n\r\n    chattitle() {\r\n      return this.room ? this.room.text : \"Selecione o chat\";\r\n    },\r\n\r\n    async getchatuser(key) {\r\n      let res = [];\r\n      await this.gtxfirebaseRef(\"chat\")\r\n        .get(key)\r\n        .then((snapshot) => {\r\n          snapshot.forEach((doc) => {\r\n            res.push({ id: doc.id, data: doc.data() });\r\n          });\r\n        });\r\n\r\n      return res;\r\n    },\r\n\r\n    chatusers() {\r\n      return gtxchatUsersData.filter((f) => f.nome.includes(this.to));\r\n    },\r\n  },\r\n\r\n  beforeMount() {\r\n    this.onFireData(\"users\");\r\n    this.actChatInit(this.gtxAuthProfileUserName);\r\n\r\n    this.actChatUsers();\r\n  },\r\n\r\n  destroyed() {\r\n    this.onFireData(\"users\");\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\r\n      \"actChatInit\",\r\n      \"initDoc\",\r\n      \"readDoc\",\r\n      \"queryDoc\",\r\n      \"onFireData\",\r\n      \"actuseradd\",\r\n      \"actchatsend\",\r\n      \"actchatselected\",\r\n      \"actChatListen\",\r\n      \"actChatUsers\",\r\n    ]),\r\n\r\n    selectroom(room) {\r\n      this.room = room;\r\n    },\r\n\r\n    selectchat(room) {\r\n      this.gtxfirebaseRef(\"chat\")\r\n        .doc(room.value)\r\n        .collection(\"messages\")\r\n        .orderBy(\"time\")\r\n        .onSnapshot((snapshot) => {\r\n          this.messages = [];\r\n          snapshot.forEach((doc) => {\r\n            this.messages.push(doc.data());\r\n          });\r\n        });\r\n    },\r\n\r\n    stoplistenchat() {},\r\n\r\n    addMessage() {\r\n      this.gtxfirebaseRef(\"chat\")\r\n        .doc(this.room.value)\r\n        .collection(\"messages\")\r\n        .doc()\r\n        .set({\r\n          message: this.message,\r\n          sender: this.gtxAuthProfileUserName,\r\n          time: new Date(),\r\n        });\r\n\r\n      this.message = \"\";\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    room() {\r\n      this.selectchat(this.room);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n"]}]}