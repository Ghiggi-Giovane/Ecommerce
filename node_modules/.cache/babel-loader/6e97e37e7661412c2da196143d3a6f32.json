{"remainingRequest":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js!C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\profiler\\components\\Profiler.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\profiler\\components\\Profiler.vue","mtime":1670977910661},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlByb2ZpbGUiLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZWRpdDogZmFsc2UsCiAgICAgIG11ZGFzZW5oYTogZmFsc2UsCiAgICAgIHByb2ZpbGU6IHt9LAogICAgICBwYXNzd29yZHM6IHsKICAgICAgICBzZW5oYTogJycsCiAgICAgICAgbm92YXNlbmhhOiAnJywKICAgICAgICBzZW5oYWNvbmY6ICcnCiAgICAgIH0sCiAgICAgIHNlbGVjdGVkUGljOiBudWxsCiAgICB9OwogIH0sCgogIGJlZm9yZU1vdW50KCkgewogICAgdGhpcy5zZXRwcm9maWxlKCk7CiAgfSwKCiAgY29tcHV0ZWQ6IHsgLi4ubWFwR2V0dGVycyhbImd0eEF1dGhQcm9maWxlIiwgImd0eEF1dGhQcm9maWxlRGF0YSJdKSwKCiAgICB2ZW1haWwoKSB7CiAgICAgIHJldHVybiAvXlx3KyhbXC4tXT9cdyspKkBcdysoW1wuLV0/XHcrKSooXC5cd3syLDN9KSskLy50ZXN0KHRoaXMucHJvZmlsZS5lbWFpbCk7CiAgICB9LAoKICAgIHZwYXNzd29yZCgpIHsKICAgICAgbGV0IGFjY2VwdCA9IG51bGw7CgogICAgICBpZiAodGhpcy5wYXNzd29yZHMubm92YXNlbmhhICE9PSAnJyB8fCB0aGlzLnBhc3N3b3Jkcy5zZW5oYWNvbmYgIT09ICcnKSB7CiAgICAgICAgYWNjZXB0ID0gdGhpcy5wYXNzd29yZHMubm92YXNlbmhhID09IHRoaXMucGFzc3dvcmRzLnNlbmhhY29uZjsKICAgICAgfQoKICAgICAgcmV0dXJuIGFjY2VwdDsKICAgIH0KCiAgfSwKICBtZXRob2RzOiB7IC4uLm1hcEFjdGlvbnMoWyJhY3RBdXRoUHJvZmlsZVVwZGF0ZSIsICJhY3RNdWRhU2VuaGEiXSksCgogICAgb25GaWxlU2VsZWN0KGV2ZW50KSB7CiAgICAgIGNvbnNvbGUubG9nKCJvbkZpbGVTZWxlY3Q6IiwgZXZlbnQpOwogICAgICB0aGlzLnNlbGVjdGVkUGljID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdOwogICAgICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmZC5hcHBlbmQoImltYWdlIiwgdGhpcy5zZWxlY3RlZFBpYywgdGhpcy5zZWxlY3RlZFBpYy5uYW1lKTsKICAgICAgYXhpb3MucG9zdCgiIiwgZmQsIHsKICAgICAgICBvblVwbG9hZFByb2dyZXNzOiB1cGxvYWRFdmVudCA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZygidXBsb2FkOiIsIE1hdGgucm91bmQodXBsb2FkRXZlbnQubG9hZGVkIC8gdXBsb2FkRXZlbnQudG90YWwgKiAxMDApICsgIiUiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBzZXRwcm9maWxlKCkgewogICAgICBjb25zdCBwcm9maWxlID0gSlNPTi5zdHJpbmdpZnkodGhpcy5ndHhBdXRoUHJvZmlsZURhdGFbMF0pOwogICAgICB0aGlzLnByb2ZpbGUgPSBKU09OLnBhcnNlKHByb2ZpbGUpOwogICAgfSwKCiAgICBzYWx2YXIoKSB7CiAgICAgIHRoaXMuYWN0QXV0aFByb2ZpbGVVcGRhdGUodGhpcy5wcm9maWxlKTsKICAgICAgdGhpcy5lZGl0ID0gZmFsc2U7CiAgICAgIHRoaXMuc2V0cHJvZmlsZSgpOwogICAgfSwKCiAgICBhbHRlcmFzZW5oYSgpIHsKICAgICAgdGhpcy5hY3RNdWRhU2VuaGEodGhpcy5wYXNzd29yZHMpLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zb2xlLmxvZygnYWx0ZXJhc2VuaGEucmVzOicsIHJlcyk7CgogICAgICAgIGlmIChyZXMuU3VjY2VzcyA9PSAiVHJ1ZSIpIHsKICAgICAgICAgIHRoaXMuZWRpdCA9IGZhbHNlOwogICAgICAgICAgdGhpcy5tdWRhc2VuaGEgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBjYW5jZWxhcigpIHsKICAgICAgdGhpcy5lZGl0ID0gZmFsc2U7CiAgICAgIHRoaXMubXVkYXNlbmhhID0gZmFsc2U7CiAgICAgIHRoaXMuc2V0cHJvZmlsZSgpOwogICAgICB0aGlzLmNsZWFycGFzc3dvcmQoKTsKICAgIH0sCgogICAgY2xlYXJwYXNzd29yZCgpIHsKICAgICAgdGhpcy5wYXNzd29yZHMuc2VuaGEgPSAiIjsKICAgICAgdGhpcy5wYXNzd29yZHMubm92YXNlbmhhID0gIiI7CiAgICAgIHRoaXMucGFzc3dvcmRzLnNlbmhhY29uZiA9ICIiOwogICAgfQoKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;EACAA,eADA;;EAGAC;IACA;MACAC,WADA;MAEAC,gBAFA;MAGAC,WAHA;MAIAC;QACAC,SADA;QAEAC,aAFA;QAGAC;MAHA,CAJA;MASAC;IATA;EAWA,CAfA;;EAiBAC;IACA;EACA,CAnBA;;EAqBAC,YACA,uDADA;;IAEAC;MACA,4DACA,kBADA;IAGA,CANA;;IAOAC;MACA;;MACA;QACAC;MACA;;MACA;IACA;;EAbA,CArBA;EAqCAC,WACA,uDADA;;IAEAC;MACAC;MACA;MACA;MACAC;MACAC;QACAC;UACAH,YACA,SADA,EAEAI,8DAFA;QAIA;MANA;IAQA,CAfA;;IAgBAC;MACA;MACA;IACA,CAnBA;;IAoBAC;MACA;MACA;MACA;IACA,CAxBA;;IAyBAC;MACA;QACAP;;QACA;UACA;UACA;QACA;MACA,CANA;IAOA,CAjCA;;IAkCAQ;MACA;MACA;MACA;MACA;IACA,CAvCA;;IAwCAC;MACA;MACA;MACA;IACA;;EA5CA;AArCA","names":["name","data","edit","mudasenha","profile","passwords","senha","novasenha","senhaconf","selectedPic","beforeMount","computed","vemail","vpassword","accept","methods","onFileSelect","console","fd","axios","onUploadProgress","Math","setprofile","salvar","alterasenha","cancelar","clearpassword"],"sourceRoot":"src/pages/profiler/components","sources":["Profiler.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div v-if=\"!edit && !mudasenha\">\r\n      <div class=\"d-flex flex-column text-center\">\r\n        <div>\r\n          <b-avatar :src=\"profile.facePic\" size=\"6rem\"></b-avatar>\r\n        </div>\r\n        <h3 class=\"mb-1\">{{ profile.displayName }}</h3>\r\n        <span class=\"mb-1\">\r\n          (<i>{{ profile.UserName }}</i\r\n          >)\r\n        </span>\r\n        <div>\r\n          <small>{{ profile.email }}</small>\r\n        </div>\r\n        <div>\r\n          <hr />\r\n          <b-button variant=\"primary\" class=\"mx-1 my-1\" @click=\"edit = !edit\">\r\n            <b-icon-pencil />\r\n            Editar\r\n          </b-button>\r\n          <b-button variant=\"warning\" class=\"mx-1 my-1\" @click=\"mudasenha = !mudasenha\">\r\n            <b-icon-key />\r\n            Alterar Senha\r\n          </b-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"mb-2\" v-if=\"edit && !mudasenha\">\r\n      <div class=\"text-center\">\r\n        <input\r\n          v-show=\"false\"\r\n          accept=\"image/*\"\r\n          type=\"file\"\r\n          @change=\"onFileSelect\"\r\n          ref=\"filepic\"\r\n        ></input>\r\n        <b-avatar\r\n          size=\"150px\"\r\n          button\r\n          :src=\"profile.facePic\"\r\n          @click=\"$refs.filepic.click()\"\r\n        ></b-avatar>\r\n      </div>\r\n      <b-form-group id=\"input-displayName\" label=\"Nome\" label-for=\"displayName\">\r\n        <b-form-input\r\n          id=\"displayName\"\r\n          v-model=\"profile.displayName\"\r\n          type=\"text\"\r\n          placeholder=\"Nome\"\r\n          :state=\"profile.displayName !== ''\"\r\n          required\r\n        ></b-form-input>\r\n      </b-form-group>\r\n      <b-form-group id=\"input-email\" label=\"e-Mail\" label-for=\"email\">\r\n        <b-form-input\r\n          id=\"email\"\r\n          v-model=\"profile.email\"\r\n          type=\"email\"\r\n          placeholder=\"e-mail\"\r\n          :state=\"vemail\"\r\n          required\r\n        ></b-form-input>\r\n      </b-form-group>\r\n      <hr />\r\n      <div class=\"d-flex justify-content-center\">\r\n        <b-button variant=\"danger\" size=\"sm\" class=\"mr-2\" @click=\"cancelar\">\r\n          <b-icon-x-circle />\r\n          Cancelar</b-button\r\n        >\r\n        <b-button variant=\"success\" size=\"sm\" class=\"mr-2\" @click=\"salvar\">\r\n          <b-icon-check-circle />\r\n          Salvar</b-button\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"mudasenha\">\r\n      <!-- tem que ter um form quando houver passwords se não o chrome reclama -->\r\n      <b-form>\r\n        <!-- tem que ter um username hidden se não o chrome reclama -->\r\n        <input\r\n          hidden\r\n          id=\"username\"\r\n          type=\"text\"\r\n          name=\"username\"\r\n          autocomplete=\"username\"\r\n        ></input>\r\n\r\n        <b-form-group id=\"input-senha\" label=\"Senha Atual\" label-for=\"senha\">\r\n          <b-form-input\r\n            id=\"senha\"\r\n            type=\"password\"\r\n            v-model=\"passwords.senha\"\r\n            autocomplete=\"current-password\"\r\n            required\r\n          ></b-form-input>\r\n        </b-form-group>\r\n        <b-form-group id=\"input-novasenha\" label=\"Nova Senha\" label-for=\"novasenha\">\r\n          <b-form-input\r\n            id=\"novasenha\"\r\n            type=\"password\"\r\n            v-model=\"passwords.novasenha\"\r\n            autocomplete=\"new-password\"\r\n            required\r\n          ></b-form-input>\r\n        </b-form-group>\r\n        <b-form-group id=\"input-senhaconf\" label=\"Confirma Nova Senha\" label-for=\"senhaconf\">\r\n          <b-form-input\r\n            id=\"senhaconf\"\r\n            type=\"password\"\r\n            v-model=\"passwords.senhaconf\"\r\n            autocomplete=\"new-password\"\r\n            :state=\"vpassword\"\r\n            required\r\n          ></b-form-input>\r\n        </b-form-group>\r\n      </b-form>\r\n      <hr />\r\n      <div class=\"d-flex justify-content-center\">\r\n        <b-button variant=\"danger\" size=\"sm\" class=\"mr-2\" @click=\"cancelar\">\r\n          <b-icon-x-circle />\r\n          Cancelar</b-button\r\n        >\r\n        <b-button variant=\"success\" size=\"sm\" class=\"mr-2\" @click=\"alterasenha\">\r\n          <b-icon-check-circle />\r\n          Salvar</b-button\r\n        >\r\n      </div>\r\n    </div>\r\n    <!--\r\n    profile:\r\n    <pre>{{ profile }}</pre>\r\n    gtxAuthProfileData:\r\n    <pre>{{ gtxAuthProfileData }}</pre>\r\n    gtxAuthProfile:\r\n    <pre>{{ gtxAuthProfile }}</pre>\r\n-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"Profile\",\r\n\r\n  data() {\r\n    return {\r\n      edit: false,\r\n      mudasenha: false,\r\n      profile: {},\r\n      passwords: {\r\n        senha: '',\r\n        novasenha: '',\r\n        senhaconf: ''\r\n      },\r\n      selectedPic: null,\r\n    };\r\n  },\r\n\r\n  beforeMount() {\r\n    this.setprofile();\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"gtxAuthProfile\", \"gtxAuthProfileData\"]),\r\n    vemail() {\r\n      return /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(\r\n        this.profile.email\r\n      );\r\n    },\r\n    vpassword() {\r\n      let accept = null;\r\n      if ((this.passwords.novasenha !== '') || (this.passwords.senhaconf !== '')) {\r\n        accept = this.passwords.novasenha == this.passwords.senhaconf\r\n      }\r\n      return accept;\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"actAuthProfileUpdate\", \"actMudaSenha\"]),\r\n    onFileSelect(event) {\r\n      console.log(\"onFileSelect:\", event);\r\n      this.selectedPic = event.target.files[0];\r\n      const fd = new FormData();\r\n      fd.append(\"image\", this.selectedPic, this.selectedPic.name);\r\n      axios.post(\"\", fd, {\r\n        onUploadProgress: (uploadEvent) => {\r\n          console.log(\r\n            \"upload:\",\r\n            Math.round((uploadEvent.loaded / uploadEvent.total) * 100) + \"%\"\r\n          );\r\n        },\r\n      });\r\n    },\r\n    setprofile() {\r\n      const profile = JSON.stringify(this.gtxAuthProfileData[0]);\r\n      this.profile = JSON.parse(profile);\r\n    },\r\n    salvar() {\r\n      this.actAuthProfileUpdate(this.profile);\r\n      this.edit = false;\r\n      this.setprofile();\r\n    },\r\n    alterasenha() {\r\n      this.actMudaSenha(this.passwords).then((res) => {\r\n        console.log('alterasenha.res:', res);\r\n        if (res.Success == \"True\") {\r\n          this.edit = false;\r\n          this.mudasenha = false;\r\n        }\r\n      })\r\n    },\r\n    cancelar() {\r\n      this.edit = false;\r\n      this.mudasenha = false;\r\n      this.setprofile();\r\n      this.clearpassword();\r\n    },\r\n    clearpassword() {\r\n      this.passwords.senha = \"\";\r\n      this.passwords.novasenha = \"\";\r\n      this.passwords.senhaconf = \"\";\r\n    }\r\n  },\r\n};\r\n</script>\r\n"]}]}