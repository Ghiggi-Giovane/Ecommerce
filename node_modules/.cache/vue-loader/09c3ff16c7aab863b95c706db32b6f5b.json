{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\almoxarifado\\views\\lotes2.vue?vue&type=style&index=0&id=c2f4c348&scoped=true&lang=css&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\almoxarifado\\views\\lotes2.vue","mtime":1670977910601},{"path":"C:\\k1-services\\node_modules\\css-loader\\dist\\cjs.js","mtime":1670977934642},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1670977935796},{"path":"C:\\k1-services\\node_modules\\postcss-loader\\src\\index.js","mtime":1670977935130},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCkBtZWRpYSAobWF4LXdpZHRoOiA2MDBweCkgew0KICAuaGlkZWNvbHVtbiB7DQogICAgZGlzcGxheTogbm9uZTsNCiAgfQ0KfQ0K"},{"version":3,"sources":["lotes2.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwoBA;AACA;AACA;AACA;AACA","file":"lotes2.vue","sourceRoot":"src/pages/almoxarifado/views","sourcesContent":["<template>\r\n  <div>\r\n    <b-card class=\"m-2\">\r\n      <b-row>\r\n        <b-col cols=\"12\" sm=\"4\">\r\n          <b-form-group label=\"Empresa\" label-for=\"select-empresa\">\r\n            <b-form-select\r\n              id=\"select-empresa\"\r\n              v-model=\"empresa\"\r\n              :options=\"gtxParempData\"\r\n            >\r\n            </b-form-select>\r\n          </b-form-group>\r\n        </b-col>\r\n\r\n        <b-col cols=\"12\" sm=\"4\">\r\n          <b-form-group label=\"Depósito\" label-for=\"select-deposito\">\r\n            <b-form-select\r\n              id=\"select-deposito\"\r\n              v-model=\"deposito\"\r\n              :options=\"depositosList\"\r\n            >\r\n            </b-form-select>\r\n          </b-form-group>\r\n        </b-col>\r\n\r\n        <b-col cols=\"12\" sm=\"4\">\r\n          <b-form-group label=\"Tipo Separação\" label-for=\"select-separacao\">\r\n            <b-form-select\r\n              id=\"select-separacao\"\r\n              v-model=\"tiposeparacaoalmox\"\r\n              :options=\"separacaoList\"\r\n            >\r\n            </b-form-select>\r\n          </b-form-group>\r\n        </b-col>\r\n      </b-row>\r\n\r\n      <b-form-group label=\"Lotes\" label-for=\"input-lotes\">\r\n        <b-input-group>\r\n          <b-form-tags\r\n            id=\"input-lotes\"\r\n            separator=\" ,;\"\r\n            placeholder=\"Informe os lotes\"\r\n            input-id=\"tags-basic\"\r\n            add-button-text=\"Adicionar\"\r\n            v-model=\"lotes\"\r\n          >\r\n          </b-form-tags>\r\n          <template #append>\r\n            <b-button v-b-modal.modal-lotes variant=\"success\">\r\n              <b-icon-search />\r\n            </b-button>\r\n          </template>\r\n        </b-input-group>\r\n      </b-form-group>\r\n\r\n      <div>\r\n        <b-button\r\n          variant=\"primary\"\r\n          class=\"mx-1 my-1\"\r\n          :disabled=\"vMateriaisParam\"\r\n          @click=\"buscaMateriais\"\r\n        >\r\n          Pesquisar\r\n        </b-button>\r\n      </div>\r\n\r\n      <!--\r\n      <hr />\r\n\r\n      <b-card no-body class=\"mt-2\">\r\n        <b-tabs content-class=\"mt-3\" v-model=\"tabIndex\" justified card>\r\n          <b-tab title=\"Busca Materiais Estoque\">\r\n            <b-table\r\n              small\r\n              striped\r\n              hover\r\n              foot-clone\r\n              no-footer-sorting\r\n              :fields=\"materiaisBusca.fields\"\r\n              :items=\"materiaisBusca.data\"\r\n            >\r\n              <template #cell(Lotes)=\"data\">\r\n                <span v-if=\"data.item.Lotes.length == 1\">\r\n                  {{ data.item.Lotes[0].lote }}\r\n                </span>\r\n                <span class=\"iconbutton\" v-else @click=\"data.toggleDetails\"\r\n                  >{{ data.item.Lotes.length }} Lotes\r\n                </span>\r\n              </template>\r\n\r\n              <template #cell(actions)=\"data\" class=\"float-right\">\r\n                <span\r\n                  title=\"Movimentação de estoque\"\r\n                  class=\"iconbutton\"\r\n                  @click=\"onMateriaisClick(data.item)\"\r\n                >\r\n                  <b-icon-cart-plus variant=\"primary\" />\r\n                </span>\r\n                <span\r\n                  title=\"Extrato de estoque\"\r\n                  class=\"iconbutton\"\r\n                  @click=\"onStockClick(data.item)\"\r\n                >\r\n                  <b-icon-archive variant=\"success\" />\r\n                </span>\r\n                <span\r\n                  title=\"Dados\"\r\n                  class=\"iconbutton\"\r\n                  @click=\"carregaDados(data.item)\"\r\n                >\r\n                  <b-icon-card-checklist variant=\"info\" />\r\n                </span>\r\n              </template>\r\n\r\n              <template #foot()=\"data\">\r\n                <span></span>\r\n              </template>\r\n              <template #foot(item)=\"data\">\r\n                <span>{{ materiais.data.length }} Registro(s)</span>\r\n              </template>\r\n            </b-table>\r\n          </b-tab>\r\n          <b-tab title=\"Separação de Materiais\">\r\n            <div class=\"text-right\">\r\n              <b-button\r\n                variant=\"success\"\r\n                class=\"mx-1 my-1 mb-3\"\r\n                :disabled=\"vMateriaisEnvio\"\r\n                @click=\"enviaMateriais\"\r\n              >\r\n                Salvar\r\n              </b-button>\r\n            </div>\r\n-->\r\n      <b-table\r\n        small\r\n        striped\r\n        hover\r\n        foot-clone\r\n        no-footer-sorting\r\n        :fields=\"materiais.fields\"\r\n        :items=\"materiais.data\"\r\n      >\r\n        <template #cell(actions)=\"data\" class=\"float-right\">\r\n          <!--\r\n                <span\r\n                  title=\"Adicionar quantidade\"\r\n                  class=\"iconbutton\"\r\n                  @click=\"onMateriaisAddClick(data.item.Lotes)\"\r\n                >\r\n                  <b-icon-plus variant=\"success\" />\r\n                </span>\r\n              -->\r\n          <span\r\n            title=\"Ver lotes\"\r\n            v-if=\"data.item.Lotes.length > 1\"\r\n            class=\"iconbutton\"\r\n            @click=\"data.toggleDetails\"\r\n          >\r\n            <b-icon-caret-up variant=\"danger\" v-if=\"data.detailsShowing\" />\r\n            <b-icon-caret-down variant=\"danger\" v-else />\r\n          </span>\r\n          <!--\r\n                <span\r\n                  v-if=\"sysdevmode\"\r\n                  title=\"Movimentação de estoque\"\r\n                  class=\"iconbutton\"\r\n                  @click=\"onMateriaisClick(data.item)\"\r\n                >\r\n                  <b-icon-cart-plus variant=\"primary\" />\r\n                </span>\r\n                -->\r\n          <span\r\n            v-if=\"data.item.Lotes.length == 1\"\r\n            title=\"Movimentar estoque\"\r\n            class=\"iconbutton\"\r\n            @click=\"onStockClick(data.item)\"\r\n          >\r\n            <b-icon-archive variant=\"success\" />\r\n          </span>\r\n          <!--\r\n                <span\r\n                  v-if=\"sysdevmode\"\r\n                  title=\"Dados\"\r\n                  class=\"iconbutton\"\r\n                  @click=\"carregaDados(data.item)\"\r\n                >\r\n                  <b-icon-card-checklist variant=\"info\" />\r\n                </span>\r\n                -->\r\n        </template>\r\n        <template #cell(Lotes)=\"data\">\r\n          <span v-if=\"data.item.Lotes.length == 1\">\r\n            {{ data.item.Lotes[0].lote }}\r\n          </span>\r\n          <span class=\"iconbutton\" v-else @click=\"data.toggleDetails\"\r\n            >{{ data.item.Lotes.length }} Lotes\r\n          </span>\r\n        </template>\r\n\r\n        <template #cell(QtdeSeparada)=\"data\">\r\n          <b-form-input\r\n            type=\"number\"\r\n            v-model=\"data.item.Lotes[0].QtdeSeparada\"\r\n            style=\"width: 10rem\"\r\n            v-if=\"data.item.Lotes.length == 1\"\r\n          />\r\n          <span v-else>\r\n            {{\r\n              data.item.Lotes.reduce(\r\n                (a, b) => parseFloat(a) + parseFloat(b.QtdeSeparada),\r\n                0\r\n              ) | decimals(6)\r\n            }}\r\n          </span>\r\n        </template>\r\n\r\n        <template #row-details=\"row\">\r\n          <b-card class=\"bg-light\">\r\n            <b-table :fields=\"materiais.lotes\" :items=\"row.item.Lotes\">\r\n              <template #cell(QtdeSeparada)=\"data\">\r\n                <b-form-input\r\n                  type=\"number\"\r\n                  v-model=\"data.item.QtdeSeparada\"\r\n                  style=\"width: 10rem\"\r\n                />\r\n              </template>\r\n              <template #cell(actions)=\"data\" class=\"text-center\">\r\n                <!--\r\n                      <span\r\n                        class=\"iconbutton\"\r\n                        @click=\"onMateriaisAddClick(data.item)\"\r\n                      >\r\n                        <b-icon-plus variant=\"success\" />\r\n                      </span>\r\n                      <span\r\n                        class=\"iconbutton\"\r\n                        @click=\"onMateriaisClick(data.item)\"\r\n                      >\r\n                        <b-icon-cart-plus variant=\"primary\" />\r\n                      </span>\r\n                      -->\r\n                <span\r\n                  title=\"Movimentar estoque\"\r\n                  class=\"iconbutton\"\r\n                  @click=\"onStockClick(data.item)\"\r\n                >\r\n                  <b-icon-archive variant=\"success\" />\r\n                </span>\r\n                <!--\r\n                      <span class=\"iconbutton\" @click=\"carregaDados(data.item)\">\r\n                        <b-icon-card-checklist variant=\"info\" />\r\n                      </span>\r\n                      -->\r\n              </template>\r\n            </b-table>\r\n          </b-card>\r\n        </template>\r\n        <template #foot()=\"data\">\r\n          <span></span>\r\n        </template>\r\n        <template #foot(item)=\"data\">\r\n          <span>{{ materiais.data.length }} Registro(s)</span>\r\n        </template>\r\n      </b-table>\r\n      <!--\r\n          </b-tab>\r\n        </b-tabs>\r\n      </b-card>\r\n-->\r\n    </b-card>\r\n\r\n    <div>\r\n      <json-viewer\r\n        :value=\"itensalmox\"\r\n        :expand-depth=\"5\"\r\n        v-if=\"sysdevmode\"\r\n        copyable\r\n        boxed\r\n        sort\r\n      >\r\n      </json-viewer>\r\n    </div>\r\n\r\n    <!-- MODAIS -->\r\n    <b-modal\r\n      ok-only\r\n      id=\"modal-lotes\"\r\n      ref=\"modal-lotes\"\r\n      size=\"md\"\r\n      scrollable\r\n      title=\"Busca Lotes\"\r\n      ok-title=\"Adicionar\"\r\n      @ok=\"addlotebusca\"\r\n    >\r\n      <LotesProducao />\r\n    </b-modal>\r\n\r\n    <b-modal\r\n      id=\"modal-materiaisStock\"\r\n      ref=\"modal-materiaisStock\"\r\n      title=\"Movimentação de estoque\"\r\n      variant=\"dark\"\r\n      size=\"xl\"\r\n      hide-footer\r\n      centered\r\n      @shown=\"AlmoxarifadoMovimentacoesshown\"\r\n      @hidden=\"AlmoxarifadoMovimentacoeshidden\"\r\n    >\r\n      <!-- <GaiolasItensBusca :value=\"itembusca\" /> -->\r\n      <!--:value=\"itembusca\"-->\r\n      <!--@etv-gaiolasitensupdate=\"evtGaiolasItensUpdate\"/>-->\r\n      <AlmoxarifadoMovimentacoes ref=\"AlmoxarifadoMovimentacoes\" />\r\n    </b-modal>\r\n\r\n    <b-modal\r\n      id=\"modal-array\"\r\n      ref=\"modal-array\"\r\n      title=\"Dados\"\r\n      size=\"xl\"\r\n      variant=\"dark\"\r\n      hide-footer\r\n      centered\r\n    >\r\n      dados:\r\n      <pre>{{ dados }}</pre>\r\n    </b-modal>\r\n\r\n    <div v-if=\"sysdevmode\">\r\n      envioMateriais:\r\n      <pre>{{ envioMateriais }}</pre>\r\n      <br />\r\n      itembusca:\r\n      <pre>{{ itembusca }}</pre>\r\n      <br />\r\n      materiais.data: {{ materiais.data }} <br />\r\n      <!--\r\n      :ok-disabled=\"itembusca == ''\"\r\n    <br />\r\n    paramMateriais: {{ paramMateriais }} <br />\r\n    empresa: {{ empresa }} <br />\r\n    deposito: {{ deposito }} <br />\r\n    <div>\r\n      lotes:\r\n      <pre>\r\n        {{ lotes }}\r\n      </pre>\r\n      materiais:\r\n      <pre>\r\n        {{ materiais }}\r\n      </pre>\r\n    --></div>\r\n    <!--<div v-if=\"sysdevmode\">-->\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nimport LotesProducao from \"../components/LotesProducao\";\r\nimport GaiolasItensBusca from \"../components/GaiolasItensBusca\";\r\nimport AlmoxarifadoMovimentacoes from \"../../almoxarifado/views/AlmoxarifadoMovimentacoes\";\r\nimport viewstore from \"../../../services/viewstore.js\";\r\nimport API from \"../../../services/api.service.js\";\r\n\r\nexport default {\r\n  name: \"Lotes2\",\r\n\r\n  components: {\r\n    LotesProducao,\r\n    GaiolasItensBusca,\r\n    AlmoxarifadoMovimentacoes,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      tabIndex: 1,\r\n      dados: [],\r\n      tiposeparacaoalmox: 0,\r\n      empresa: 8,\r\n      deposito: 37,\r\n      lotes: [],\r\n      itembusca: {\r\n        codigo: 0,\r\n        endereco: 0,\r\n        emp: parseInt(this.empresa),\r\n        dep: parseInt(this.deposito),\r\n        item: [],\r\n        quant: 0,\r\n        deleta: 0,\r\n        nivel: 1,\r\n      },\r\n      itensalmox: {},\r\n      materiais: {\r\n        busy: false,\r\n        run: 0,\r\n        fields: [\r\n          { key: \"Item\", label: \"Item\", sortable: true, visible: true },\r\n          {\r\n            key: \"Descricao\",\r\n            label: \"Descrição\",\r\n            sortable: true,\r\n            visible: true,\r\n          },\r\n          { key: \"UN\", label: \"UN\", sortable: true, visible: true },\r\n          { key: \"Lotes\", label: \"Lotes\", sortable: true, visible: true },\r\n          { key: \"QtdeItem\", label: \"Qtde\", sortable: true, visible: true },\r\n          {\r\n            key: \"QtdeSeparada\",\r\n            label: \"Qtde Separada\",\r\n            sortable: true,\r\n            visible: true,\r\n          },\r\n          { key: \"Actions\", label: \"Actions\", sortable: false, visible: true },\r\n        ],\r\n        lotes: [\r\n          { key: \"Item\", label: \"Item\", sortable: true, visible: true },\r\n          { key: \"lote\", label: \"Lote\", sortable: true, visible: true },\r\n          { key: \"QtdeItem\", label: \"Qtde\", sortable: true, visible: true },\r\n          {\r\n            key: \"QtdeSeparada\",\r\n            label: \"Qtde Separada\",\r\n            sortable: true,\r\n            visible: true,\r\n          },\r\n          { key: \"Actions\", label: \"Actions\", sortable: false, visible: true },\r\n        ],\r\n        buttons: [\r\n          {\r\n            key: \"ende\",\r\n            icon: \"signpost-split\",\r\n            variant: \"warning\",\r\n            size: \"sm\",\r\n            tooltip: \"Endereços\",\r\n          },\r\n        ],\r\n        route: \"Producao/LoteSetores/Materiais\",\r\n        params: {\r\n          empresa: \"8\",\r\n          deposito: \"37\",\r\n          lotes: this.lotesplit,\r\n          Refs: \"\",\r\n          idTipoSeparacaoAlmox: null,\r\n        },\r\n        data: [],\r\n        selected: {},\r\n        rowselected: [],\r\n      },\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\r\n      \"sysdevmode\",\r\n      \"gtxParempData\",\r\n      \"gtxParempDataAlmoxarifados\",\r\n      \"gtxTiposeparacaoalmoxDataByEmpresaDeposito\",\r\n      \"gtxParempDataAlmoxarifadosTiposseparacao\",\r\n    ]),\r\n    depositosList() {\r\n      return this.gtxParempDataAlmoxarifados(this.empresa);\r\n    },\r\n    separacaoList() {\r\n      return this.gtxParempDataAlmoxarifadosTiposseparacao(\r\n        this.empresa,\r\n        this.deposito\r\n      ).sort();\r\n    },\r\n    paramMateriais() {\r\n      return {\r\n        Empresa: this.empresa,\r\n        Deposito: this.deposito,\r\n        Lotes: this.lotes.join(\";\"),\r\n        idTipoSeparacaoAlmox: this.tiposeparacaoalmox,\r\n      };\r\n    },\r\n    envioMateriais() {\r\n      if (this.materiais.data.length > 0) {\r\n        return this.materiais.data\r\n          .filter((l) =>\r\n            l.Lotes.find((f) => f.QtdeSeparada !== f.QtdeSeparadaOriginal)\r\n              ? true\r\n              : false\r\n          )\r\n          .map((d) => {\r\n            return {\r\n              Item: d.Item,\r\n              Descricao: d.Descricao,\r\n              QtdeItem: d.QtdeItem,\r\n              idTipoSeparacaoAlmox: d.idTipoSeparacaoAlmox,\r\n              idTipoSeparacao: d.idTipoSeparacao,\r\n              QtdeSeparada: d.QtdeSeparada,\r\n              Lotes: d.Lotes.filter(\r\n                (l) => l.QtdeSeparada !== l.QtdeSeparadaOriginal\r\n              ),\r\n            };\r\n          });\r\n      } else {\r\n        return { items: \"\" };\r\n      }\r\n    },\r\n    envioMateriaisXML() {\r\n      return (\r\n        \"<root>\" + this.$root.getXML({ items: this.envioMateriais }) + \"</root>\"\r\n      );\r\n    },\r\n\r\n    materiaisBusca() {\r\n      return {\r\n        fields: [\r\n          \"Item\",\r\n          \"Descricao\",\r\n          \"UN\",\r\n          { key: \"QtdeItem\", label: \"Qtde\" },\r\n          { key: \"QtdeSeparada\", label: \"Separação\" },\r\n          { key: \"SaldoItem\", label: \"Saldo\" },\r\n          \"Lotes\",\r\n          \"actions\",\r\n        ],\r\n        data: this.materiais.data.map((m) => {\r\n          return {\r\n            Empresa: m.Empresa,\r\n            Deposito: m.Deposito,\r\n            Item: m.Item,\r\n            Descricao: m.Descricao,\r\n            QtdeItem: m.QtdeItem,\r\n            QtdeSeparada: m.QtdeSeparada,\r\n            SaldoItem: m.QtdeItem - m.QtdeSeparada,\r\n            Lotes: m.Lotes,\r\n          };\r\n        }),\r\n      };\r\n    },\r\n\r\n    // validações ...\r\n    vMateriaisParam() {\r\n      return (\r\n        this.paramMateriais.Empresa == 0 ||\r\n        this.paramMateriais.Deposito == 0 ||\r\n        this.paramMateriais.Lotes == \"\" ||\r\n        this.paramMateriais.idTipoSeparacaoAlmox == null\r\n      );\r\n    },\r\n    vMateriaisEnvio() {\r\n      return this.envioMateriais.length == 0;\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"actParemp\"]),\r\n    addlotebusca(lotes) {\r\n      console.log(\"addlotebusca:\", lotes);\r\n    },\r\n    buscaMateriais() {\r\n      API.get(\"Producao/LoteSetores/Materiais\", this.paramMateriais).then(\r\n        (apidata) => {\r\n          // console.log(\"buscaMateriais.apidata:\", apidata);\r\n          if (apidata.data.Success == \"True\") {\r\n            const res = API.prepareData(apidata.data);\r\n            console.log(\"buscaMateriais.res:\", res);\r\n            if (res) {\r\n              this.materiais.data = res.apiresponse.Data;\r\n              this.salvaData();\r\n            } else {\r\n              this.materiais.data = [];\r\n            }\r\n          }\r\n        }\r\n      );\r\n    },\r\n    onMateriaisAddClick(item) {\r\n      if (Array.isArray(item)) {\r\n        item.map((item) => (item.QtdeSeparada = item.QtdeItem));\r\n      } else {\r\n        item.QtdeSeparada = item.QtdeItem;\r\n      }\r\n    },\r\n    enviaMateriais() {\r\n      // console.log(\"envioMateriais.json:\", this.envioMateriais);\r\n      // console.log(\"envioMateriais.xml:\", this.envioMateriaisXML);\r\n\r\n      API.post(\"Producao/LoteSetores/MateriaisUpdate\", {\r\n        items: this.envioMateriaisXML,\r\n      })\r\n        .then((apidata) => {\r\n          const res = API.prepareData(apidata.data);\r\n          if (res) {\r\n            console.log(\"enviaMateriais.Mensagem:\", res);\r\n            if (res.data.Mensagem.substring(0, 1) == \"0\") {\r\n              this.$root.toastwarning(res.data.Mensagem);\r\n            } else {\r\n              this.$root.toastsuccess(res.data.Mensagem);\r\n            }\r\n            // atualiza as quantidades\r\n            this.materiais.data.map((m) =>\r\n              m.Lotes.map((l) => (l.QtdeSeparadaOriginal = l.QtdeSeparada))\r\n            );\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.log(\"enviaMateriais.Erro:\", e);\r\n        });\r\n    },\r\n    salvaData() {\r\n      viewstore.setData(this.$data);\r\n    },\r\n    onStockClick(item) {\r\n      this.itensalmox = item;\r\n\r\n      this.$refs[\"modal-materiaisStock\"].show();\r\n    },\r\n    carregaDados(data) {\r\n      this.dados = data;\r\n      this.$bvModal.show(\"modal-array\");\r\n    },\r\n    AlmoxarifadoMovimentacoesshown() {\r\n      console.log(\"AlmoxarifadoMovimentacoesshown\", this.itensalmox);\r\n      this.$refs.AlmoxarifadoMovimentacoes.empresa = this.itensalmox.Empresa;\r\n      this.$refs.AlmoxarifadoMovimentacoes.deposito = this.itensalmox.Deposito;\r\n      this.$refs.AlmoxarifadoMovimentacoes.box = 0;\r\n      this.$refs.AlmoxarifadoMovimentacoes.nivel = 0;\r\n      // this.$refs.AlmoxarifadoMovimentacoes.itens = this.itembusca.item;\r\n      this.$refs.AlmoxarifadoMovimentacoes.itens = [this.itensalmox.Item];\r\n      this.$refs.AlmoxarifadoMovimentacoes.itensreq = [\r\n        {\r\n          item: this.itensalmox.Item,\r\n          qtde: this.itensalmox.QtdeItem,\r\n          lote: this.itensalmox.Lote,\r\n        },\r\n      ];\r\n\r\n      this.$refs.AlmoxarifadoMovimentacoes.busca();\r\n    },\r\n    AlmoxarifadoMovimentacoeshidden() {\r\n      this.buscaMateriais();\r\n    },\r\n  },\r\n\r\n  beforeMount() {\r\n    this.actParemp();\r\n    viewstore.syncData(this.$data);\r\n    // console.log(\"beforeMount.viewstore:\", Object.keys(viewstore));\r\n    // console.log(\"beforeMount.viewstore.username:\", viewstore.username);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@media (max-width: 600px) {\r\n  .hidecolumn {\r\n    display: none;\r\n  }\r\n}\r\n</style>\r\n"]}]}