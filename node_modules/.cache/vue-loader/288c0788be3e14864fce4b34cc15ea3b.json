{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\ecommerce\\views\\PedAssistencias.vue?vue&type=style&index=0&id=40f3f816&scoped=true&lang=css&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\ecommerce\\views\\PedAssistencias.vue","mtime":1670977910623},{"path":"C:\\k1-services\\node_modules\\css-loader\\dist\\cjs.js","mtime":1670977934642},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1670977935796},{"path":"C:\\k1-services\\node_modules\\postcss-loader\\src\\index.js","mtime":1670977935130},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KI2RpdlByaW5jaXBhbCB7DQogIGZvbnQtc2l6ZTogMTJweDsNCn0NCg=="},{"version":3,"sources":["PedAssistencias.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgyBA;AACA;AACA","file":"PedAssistencias.vue","sourceRoot":"src/pages/ecommerce/views","sourcesContent":["<template>\r\n  <div id=\"divPrincipal\" class=\"text-center\">\r\n    <b-card>\r\n      <div>\r\n        <b-row>\r\n          <b-col class=\"col-1\">\r\n            <b-button>\r\n              <strong>{{ pedidosTotaisCount }}</strong>\r\n            </b-button>\r\n          </b-col>\r\n          <b-col class=\"col-2\">\r\n            <b-input-group prepend=\"Filtro\" size=\"sm\">\r\n              <b-form-input\r\n                id=\"input-filtro\"\r\n                type=\"search\"\r\n                v-model=\"filtro\"\r\n                :debounce=\"1000\"\r\n              ></b-form-input>\r\n            </b-input-group> </b-col\r\n          ><b-col>\r\n            <b-row>\r\n              <b-input-group style=\"width: 250px\">\r\n                <b-form-datepicker\r\n                  size=\"sm\"\r\n                  v-model=\"dataInicial\"\r\n                  placeholder=\"Data Inicial\"\r\n                  locale=\"pt-br\"\r\n                  :date-format-options=\"{\r\n                    year: 'numeric',\r\n                    month: 'numeric',\r\n                    day: 'numeric',\r\n                  }\"\r\n                ></b-form-datepicker>\r\n\r\n                <b-input-group-append>\r\n                  <b-button variant=\"danger\" @click=\"clearInicialDate\">\r\n                    <b-icon-trash></b-icon-trash>\r\n                  </b-button>\r\n                </b-input-group-append>\r\n              </b-input-group>\r\n              <b-input-group class=\"ml-4\" style=\"width: 250px\">\r\n                <b-form-datepicker\r\n                  size=\"sm\"\r\n                  v-model=\"dataFinal\"\r\n                  placeholder=\"Data Final\"\r\n                  locale=\"pt-br\"\r\n                  :date-format-options=\"{\r\n                    year: 'numeric',\r\n                    month: 'numeric',\r\n                    day: 'numeric',\r\n                  }\"\r\n                ></b-form-datepicker>\r\n\r\n                <b-input-group-append>\r\n                  <b-button variant=\"danger\" @click=\"clearFinalDate\">\r\n                    <b-icon-trash></b-icon-trash>\r\n                  </b-button>\r\n                </b-input-group-append>\r\n              </b-input-group>\r\n            </b-row>\r\n          </b-col>\r\n\r\n          <b-col class=\"col-1\">\r\n            <b-dropdown class=\"mr-2\" right size=\"sm\" text=\"Marketplaces\">\r\n              <b-form-checkbox\r\n                style=\"width: 200px\"\r\n                class=\"mb-1 ml-1\"\r\n                v-for=\"market in marketPlacesList\"\r\n                :key=\"market.value\"\r\n                size=\"sm\"\r\n                :value=\"market.value\"\r\n                v-model=\"marketPlacesListSelected\"\r\n                name=\"check-button\"\r\n                switch\r\n                >{{ market.text }}</b-form-checkbox\r\n              >\r\n            </b-dropdown>\r\n          </b-col>\r\n          <b-col class=\"col-1\">\r\n            <b-dropdown class=\"mr-2\" right size=\"sm\" text=\"Colunas Visiveis\">\r\n              <b-form-checkbox\r\n                style=\"width: 200px\"\r\n                class=\"mb-1 ml-1\"\r\n                v-for=\"market in fields\"\r\n                :key=\"market.key\"\r\n                size=\"sm\"\r\n                v-model=\"market.visible\"\r\n                name=\"check-button\"\r\n                switch\r\n              >\r\n                {{ market.label || market.key }}\r\n              </b-form-checkbox>\r\n            </b-dropdown>\r\n          </b-col>\r\n          <b-col class=\"col-1\">\r\n            <b-dropdown class=\"mr-2\" right size=\"sm\" text=\"Status\">\r\n              <b-form-checkbox\r\n                style=\"width: 300px\"\r\n                class=\"mb-1 ml-1\"\r\n                v-for=\"stats in status\"\r\n                :key=\"stats.Status\"\r\n                size=\"sm\"\r\n                v-model=\"filtroStatus\"\r\n                name=\"check-button\"\r\n                :value=\"stats.Status\"\r\n                switch\r\n                >{{ stats.Status }}</b-form-checkbox\r\n              >\r\n            </b-dropdown>\r\n          </b-col>\r\n\r\n          <b-col class=\"col-1\">\r\n            <b-button variant=\"danger\" class=\"mr-2\" @click=\"buscarPedidos\">\r\n              <b-spinner small v-if=\"this.loading\"></b-spinner>\r\n\r\n              <span v-else>Buscar</span>\r\n            </b-button>\r\n          </b-col>\r\n        </b-row>\r\n      </div>\r\n      <br />\r\n      <b-table\r\n        foot-clone\r\n        no-footer-sorting\r\n        id=\"my-table\"\r\n        :current-page=\"paginaAtiva\"\r\n        :per-page=\"porPagina\"\r\n        head-variant=\"dark\"\r\n        sort-by=\"EmissaoPedido\"\r\n        sort-desc\r\n        selectable\r\n        striped\r\n        bordered\r\n        hovers\r\n        responsive\r\n        small\r\n        select-mode=\"single\"\r\n        :filter=\"filtro\"\r\n        :tbody-tr-class=\"rowClass\"\r\n        :filter-included-fields=\"filterOn\"\r\n        :items=\"pedidoslistStatus\"\r\n        :fields=\"tableFields\"\r\n        @filtered=\"(filtro) => (pedidoslistStatus = filtro)\"\r\n      >\r\n        <template #head()=\"data\">\r\n          <div\r\n            :id=\"data.field.key\"\r\n            draggable=\"true\"\r\n            @dragstart=\"dragStart\"\r\n            @dragenter=\"dragEnter\"\r\n            @dragover=\"dragOver\"\r\n            @dragleave=\"dragLeave\"\r\n            @drop=\"drop\"\r\n          >\r\n            {{ data.label }}\r\n          </div>\r\n        </template>\r\n\r\n        <template #cell(EmissaoPedido)=\"row\">\r\n          {{ row.item.EmissaoPedido | dateBR }}\r\n        </template>\r\n        <template #cell(EmissaoNFS)=\"row\">\r\n          {{ row.item.EmissaoNFS | dateBR }}\r\n        </template>\r\n        <template #cell(ClientePaga)=\"row\">\r\n          {{ row.item.ClientePaga == true ? \"Sim\" : \"NÃ£o\" }}\r\n        </template>\r\n        <template #cell(Itens)=\"row\">\r\n          <div @click=\"detalhes(row)\">\r\n            {{ row.detailsShowing ? \"-\" : \"+\" }}\r\n          </div>\r\n        </template>\r\n        <template #cell(Observacao)=\"row\">\r\n          <b-icon-pencil\r\n            scale=\"1.5\"\r\n            @click=\"getAcompanhamentoRelacionamentos(row.item)\"\r\n          ></b-icon-pencil>\r\n        </template>\r\n        <template #cell(Transportadora)=\"row\">{{\r\n          row.item.Transportadora.substr(0, 20)\r\n        }}</template>\r\n        <template #cell(Redespacho)=\"row\">{{\r\n          row.item.Redespacho ? row.item.Redespacho.substr(0, 20) : \"\"\r\n        }}</template>\r\n        <template #cell(Valor)=\"row\">\r\n          {{ row.item.Valor | R$ }}\r\n        </template>\r\n\r\n        <template #cell(DataPrevisaoEntrega)=\"row\">\r\n          {{ row.item.DataPrevisaoEntrega | dateBR }}\r\n        </template>\r\n        <template #cell(Data_Programacao)=\"row\">\r\n          {{ row.item.Data_Programacao | dateBR }}\r\n        </template>\r\n        <template #cell(Rastreio)=\"row\">\r\n          <b-icon-truck\r\n            v-if=\"row.item.NFS != null && row.item.UrlRastreio != null\"\r\n            scale=\"1.5\"\r\n            @click=\"openRastreioModal(row.item.id)\"\r\n          ></b-icon-truck>\r\n        </template>\r\n\r\n        <template #row-details=\"row\">\r\n          <b-card>\r\n            <div>\r\n              <b-row>\r\n                <table border=\"1\">\r\n                  <tr>\r\n                    <th>Item</th>\r\n                    <th>Quantidade</th>\r\n                    <th>Motivo AssistÃªncia</th>\r\n                  </tr>\r\n                  <tr v-for=\"item in row.item.itens\" :key=\"item\">\r\n                    <td>{{ item.Item }}</td>\r\n                    <td>{{ item.Qtde }}</td>\r\n                    <td>{{ item.MotivoAssistencia }}</td>\r\n                  </tr>\r\n                </table>\r\n              </b-row>\r\n            </div>\r\n          </b-card>\r\n        </template>\r\n\r\n        <template #foot()>\r\n          <div></div>\r\n        </template>\r\n\r\n        <template #foot(Valor)>\r\n          <div>{{ valor | R$ }}</div>\r\n        </template>\r\n      </b-table>\r\n      <div>\r\n        <b-row id=\"pagination\" class=\"m-2\">\r\n          <div>\r\n            <b-input style=\"width:50px\" v-model=\"porPagina\"></b-input>\r\n          </div>\r\n\r\n          <b-pagination\r\n            id=\"pagination\"\r\n            :total-rows=\"pedidosTotaisCount\"\r\n            :per-page=\"porPagina\"\r\n            aria-controls=\"my-table\"\r\n            v-model=\"paginaAtiva\"\r\n          ></b-pagination>\r\n        </b-row>\r\n      </div>\r\n    </b-card>\r\n\r\n    <!-- MODAL -->\r\n\r\n    <b-modal\r\n      size=\"lg\"\r\n      ref=\"AcompanhamentosModal\"\r\n      id=\"AcompanhamentosModal\"\r\n      centered\r\n      hide-footer\r\n      hide-header\r\n    >\r\n      <AcompanhamentosVue :headerId=\"this.acompanhamentoID\" />\r\n    </b-modal>\r\n\r\n    <b-modal\r\n      size=\"lg\"\r\n      ref=\"RastreioModal\"\r\n      id=\"RastreioModal\"\r\n      centered\r\n      hide-footer\r\n      hide-header\r\n    >\r\n      <b-card header-tag=\"header\">\r\n        <template #header>\r\n          <span>Rastreio: </span>\r\n          <a :href=\"rastreio.UrlRastreio\" class=\"mb-0\">{{\r\n            rastreio.UrlRastreio\r\n          }}</a>\r\n        </template>\r\n        <b-card-text>\r\n          <b-table\r\n            id=\"PedidosRastreiosEventos\"\r\n            head-variant=\"dark\"\r\n            sort-desc\r\n            striped\r\n            bordered\r\n            hovers\r\n            responsive\r\n            small\r\n            :fields=\"fieldsPedidosRastreiosEventos\"\r\n            :items=\"rastreio.Eventos\"\r\n          >\r\n            <template #cell(Data)=\"row\">\r\n              {{ row.item.Data | dateBR }}\r\n            </template>\r\n          </b-table>\r\n        </b-card-text>\r\n      </b-card>\r\n    </b-modal>\r\n\r\n    <!-- MODAL -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nimport ApiService from \"../../../services/api.service\";\r\nimport AcompanhamentosVue from \"../../../components/Acompanhamentos.vue\";\r\n\r\nexport default {\r\n  name: \"EcommercePedidosAssistencias\",\r\n  components: {\r\n    AcompanhamentosVue,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      pedidosList: [],\r\n      acompanhamentoID: 0,\r\n      statusList: [],\r\n\r\n      rastreio: [],\r\n\r\n      tooltipTitle: \"Legenda de cores:\",\r\n\r\n      filtroStatus: [\"Em ProduÃ§Ã£o\", \"Em Romaneio\", \"Faturado\"],\r\n      filtro: \"\",\r\n      filterOn: [\r\n        \"PedidoVenda\",\r\n        \"PedidoAssist\",\r\n        \"Razao_Social\",\r\n        \"PrazoProducao\",\r\n        \"Transportadora\",\r\n        \"Redespacho\",\r\n        \"NFS\",\r\n        \"EmissaoNFS\",\r\n      ],\r\n      porPagina: 20,\r\n      paginaAtiva: 1,\r\n      loading: false,\r\n      dataInicial: new Date(1609549200000),\r\n      dataFinal: \"\",\r\n      marketPlacesList: [],\r\n      marketPlacesListSelected: [],\r\n\r\n      fields: [\r\n        {\r\n          key: \"id\",\r\n          sortable: true,\r\n          label: \"Id\",\r\n          visible: false,\r\n        },\r\n        {\r\n          key: \"Empresa\",\r\n          sortable: true,\r\n          label: \"Empresa\",\r\n          visible: false,\r\n        },\r\n        {\r\n          key: \"PedidoVenda\",\r\n          sortable: true,\r\n          label: \"PedidoVenda\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"PedidoAssist\",\r\n          sortable: true,\r\n          label: \"PedidoAssist\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Marca\",\r\n          sortable: true,\r\n          label: \"Marca Pedido\",\r\n          visible: false,\r\n        },\r\n        {\r\n          key: \"EmissaoPedido\",\r\n          sortable: true,\r\n          label: \"Emissao Pedido\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Cliente\",\r\n          sortable: true,\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Razao_Social\",\r\n          sortable: true,\r\n          visible: true,\r\n          label: \"Nome\",\r\n        },\r\n        {\r\n          key: \"ClientePaga\",\r\n          sortable: true,\r\n          label: \"Cliente Paga\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"NFS\",\r\n          sortable: true,\r\n          label: \"NFS\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"EmissaoNFS\",\r\n          sortable: true,\r\n          label: \"Emissao NFS\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Itens\",\r\n          sortable: true,\r\n          visible: true,\r\n          _showDetails: false,\r\n        },\r\n        {\r\n          key: \"Observacao\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"OBS\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Marketplace\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Marketplace\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"PrazoProducao\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"PrazoProducao\",\r\n          sortable: true,\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Transportadora\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Transportadora\",\r\n          sortable: true,\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Redespacho\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Redespacho\",\r\n          sortable: true,\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"PedidoStatus\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"PedidoStatus\",\r\n          sortable: true,\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"DiasEntregaTransp\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"DiasEntregaTransp\",\r\n          sortable: true,\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"DataPrevisaoEntrega\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"DataPrevisaoEntrega\",\r\n          sortable: true,\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"DiasAtraso\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"DiasAtraso\",\r\n          sortable: true,\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Valor\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Valor\",\r\n          sortable: true,\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Estado\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Estado\",\r\n          sortable: true,\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Cidade\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Cidade\",\r\n          sortable: true,\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Data_Programacao\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Programacao\",\r\n          sortable: true,\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Divisao\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Divisao\",\r\n          sortable: true,\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Rastreio\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Rastreio\",\r\n          sortable: false,\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"UrlRastreio\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"UrlRastreio\",\r\n          sortable: false,\r\n          visible: false,\r\n        },\r\n      ],\r\n\r\n      fieldsPedidosRastreiosEventos: [\r\n        {\r\n          key: \"Codigo\",\r\n          sortable: true,\r\n          label: \"Codigo\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Evento\",\r\n          sortable: true,\r\n          label: \"Evento\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Data\",\r\n          sortable: true,\r\n          label: \"Data\",\r\n          visible: true,\r\n        },\r\n      ],\r\n      dragfieldstart: \"\",\r\n    };\r\n  },\r\n\r\n  created() {\r\n    this.getMarketPlaces();\r\n    this.acthome(\"/ecommerce\");\r\n    this.buscarUltimaPesquisa();\r\n    this.pedidosList = [];\r\n    // this.buscarPedidos();\r\n  },\r\n\r\n  computed: {\r\n    tableFields() {\r\n      return this.fields.filter((f) => f.visible);\r\n    },\r\n\r\n    pedidoslistStatus() {\r\n      return this.pedidosAssist.filter((res) =>\r\n        this.filtroStatus.find((e) => e == res.PedidoStatus)\r\n      );\r\n    },\r\n\r\n    status() {\r\n      return this.pedidosAssist.reduce((a, b) => {\r\n        if (!a.find((f) => f.Status == b.PedidoStatus)) {\r\n          a.push({ Status: b.PedidoStatus });\r\n        }\r\n        return a;\r\n      }, []);\r\n    },\r\n\r\n    pedidosTotaisCount() {\r\n      return this.pedidoslistStatus.length;\r\n    },\r\n\r\n    pedidosAssist() {\r\n      return this.pedidosList;\r\n    },\r\n\r\n    valor() {\r\n      var sum = this.pedidosAssist.reduce(\r\n        (acumulador, valorAtual) => acumulador + valorAtual.Valor,\r\n        0\r\n      );\r\n      return Math.round(sum * 100) / 100;\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions([\"acthome\"]),\r\n\r\n    rowClass(item, type) {\r\n      if (!item || type !== \"row\") return;\r\n      if (item.PrazoProducao <= 0 && item.NFS == null) return \"table-danger\";\r\n    },\r\n\r\n    getMarketPlaces() {\r\n      ApiService.get(\"v2/IntranetEcommerceB2C/Marketplaces/Combo\").then(\r\n        (result) => {\r\n          this.marketPlacesList = result.data.Data;\r\n        }\r\n      );\r\n    },\r\n\r\n    async buscarPedidos() {\r\n      this.salvarPesquisas();\r\n      this.loading = true;\r\n      ApiService.post(\"v2/IntranetEcommerceB2C/PedidosAssistencias/Get\", {\r\n        dataInicial: this.dataInicial,\r\n        dataFinal: this.dataFinal,\r\n        marketplaces: this.marketPlacesListSelected,\r\n      }).then((result) => {\r\n        console.log(\"result\", result.data);\r\n        if (result.data.Success) {\r\n          this.pedidosList = result.data.Data;\r\n        }\r\n        this.loading = false;\r\n      });\r\n    },\r\n\r\n    async salvarPesquisas() {\r\n      const ultimaPesquisaAssist = {\r\n        dataInicial: this.dataInicial,\r\n        dataFinal: this.dataFinal,\r\n        marketplaces: this.marketPlacesListSelected,\r\n        fields: this.fields,\r\n        filtroStatus: this.filtroStatus,\r\n      };\r\n      await localStorage.setItem(\r\n        \"ultimaPesquisaAssist\",\r\n        JSON.stringify(ultimaPesquisaAssist)\r\n      );\r\n    },\r\n\r\n    async buscarUltimaPesquisa() {\r\n      const pesquisa = await localStorage.getItem(\"ultimaPesquisaAssist\");\r\n      this.dataInicial = JSON.parse(pesquisa).dataInicial\r\n        ? JSON.parse(pesquisa).dataInicial\r\n        : this.dataInicial;\r\n      this.dataFinal = JSON.parse(pesquisa).dataFinal\r\n        ? JSON.parse(pesquisa).dataFinal\r\n        : this.dataFinal;\r\n      this.marketPlacesListSelected = JSON.parse(pesquisa).marketplaces\r\n        ? JSON.parse(pesquisa).marketplaces\r\n        : this.marketplaces;\r\n      this.fields = JSON.parse(pesquisa).fields\r\n        ? JSON.parse(pesquisa).fields\r\n        : this.fields;\r\n      this.filtroStatus = JSON.parse(pesquisa).filtroStatus\r\n        ? JSON.parse(pesquisa).filtroStatus\r\n        : this.filtroStatus;\r\n      this.buscarPedidos();\r\n    },\r\n\r\n    clearInicialDate() {\r\n      this.dataInicial = \"\";\r\n    },\r\n\r\n    clearFinalDate() {\r\n      this.dataFinal = \"\";\r\n    },\r\n\r\n    detalhes(row) {\r\n      if (\r\n        row.item._showDetails == undefined ||\r\n        row.item._showDetails == false\r\n      ) {\r\n        row.item._showDetails = true;\r\n      } else {\r\n        row.item._showDetails = false;\r\n      }\r\n    },\r\n\r\n    async openRastreioModal(id) {\r\n      this.rastreio = [];\r\n      var res = await ApiService.post(\r\n        \"v2/IntranetEcommerceB2C/PedidosRastreios/Get\",\r\n        { pedidoId: id }\r\n      );\r\n\r\n      console.log(\"RESPOSTA:\", res.data);\r\n\r\n      if (res.data.Success /* true */) {\r\n        this.rastreio = res.data.Data;\r\n        this.$refs[\"RastreioModal\"].show();\r\n      } else {\r\n        return;\r\n      }\r\n    },\r\n\r\n    async getAcompanhamentoRelacionamentos(item) {\r\n      var res = await ApiService.post(\r\n        \"v2/Acompanhamentos/Relacionamentos/Get\",\r\n        {\r\n          Chave: item.id,\r\n          Tabela: \"PedidosAssist\",\r\n        }\r\n      );\r\n\r\n      if (res.data.Success /* true */) {\r\n        this.acompanhamentoID = res.data.Data[0].AcompanhamentoId;\r\n        this.$refs[\"AcompanhamentosModal\"].show();\r\n      } else {\r\n        /* false */\r\n        var res1 = await ApiService.post(\r\n          \"v2/Acompanhamentos/Relacionamentos/Save\",\r\n          {\r\n            Chave: item.id,\r\n            Tabela: \"PedidosAssist\",\r\n            AcompanhamentoId: null,\r\n            AcompanhamentoDescricao:\r\n              \"Acompanhamentos Pedido \" + item.PedidoAssist,\r\n          }\r\n        );\r\n        this.acompanhamentoID = res1.data.Data[0].AcompanhamentoId;\r\n        this.$refs[\"AcompanhamentosModal\"].show();\r\n      }\r\n    },\r\n\r\n    // calculaAtraso(data1, data2) {\r\n    //   //  console.error(\"data1\", data1);\r\n    //   //  console.error(\"data2\", data2);\r\n\r\n    //   var previsao = new Date(data1);\r\n    //   var hoje = new Date();\r\n    //   var entrega = new Date(data2);\r\n    //   if (data1 == null) {\r\n    //     return \"\";\r\n    //   } else {\r\n    //     if (data2 != \"\") {\r\n    //       var diffEntrega = Math.abs(entrega - previsao);\r\n    //       var diasDiff = diffEntrega / (1000 * 3600 * 24);\r\n    //       if (previsao > entrega) {\r\n    //         return \"-\" + Math.round(diasDiff);\r\n    //       } else {\r\n    //         return Math.round(diasDiff);\r\n    //       }\r\n    //     } else {\r\n    //       var diff = Math.abs(hoje - previsao);\r\n    //       var days = diff / (1000 * 3600 * 24);\r\n    //       if (previsao >= hoje) {\r\n    //         return \"-\" + Math.round(days);\r\n    //       } else {\r\n    //         return Math.round(days);\r\n    //       }\r\n    //     }\r\n    //   }\r\n    // },\r\n\r\n    /* DRAG COLUMNS */\r\n    dragStart(e) {\r\n      console.log(\"dragStart in :\", e.target.id);\r\n      this.dragfieldstart = e.target.id;\r\n    },\r\n    dragEnter(e) {\r\n      e.preventDefault();\r\n      e.target.classList.add(\"drag-over\");\r\n    },\r\n\r\n    dragOver(e) {\r\n      e.preventDefault();\r\n      e.target.classList.add(\"drag-over\");\r\n    },\r\n\r\n    dragLeave(e) {\r\n      e.target.classList.remove(\"drag-over\");\r\n    },\r\n\r\n    drop(e) {\r\n      console.log(\"drop in :\", e.target.id);\r\n      e.target.classList.remove(\"drag-over\");\r\n      // move o from para o to\r\n      this.changecolumns(this.dragfieldstart, e.target.id);\r\n    },\r\n    changecolumns(ColumnA, ColumnB) {\r\n      const start = this.fields.findIndex((f) => (f.key || f) == ColumnA);\r\n      let from = start;\r\n      let to = this.fields.findIndex((f) => (f.key || f) == ColumnB);\r\n      // move a colunaA para o indice da coluna B\r\n      this.move(from, to);\r\n\r\n      // move a colunaA para o indice da coluna B\r\n      //from = this.fields.findIndex((f) => (f.key || f) == ColumnB);\r\n      //to = start;\r\n      //this.move(from, to);\r\n    },\r\n    move(from, to) {\r\n      this.fields.splice(to, 0, this.fields.splice(from, 1)[0]);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#divPrincipal {\r\n  font-size: 12px;\r\n}\r\n</style>\r\n"]}]}