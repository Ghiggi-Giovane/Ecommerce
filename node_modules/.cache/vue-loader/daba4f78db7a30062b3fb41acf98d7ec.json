{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\almoxarifado\\components\\GaiolasItensBusca.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\almoxarifado\\components\\GaiolasItensBusca.vue","mtime":1670977910598},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7DQovLyBpbXBvcnQgSW5wdXRTZWFyY2gyIGZyb20gIi4uLy4uLy4uL2NvbXBvbmVudHMvSW5wdXRTZWFyY2gyIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkdhaW9sYXNJdGVuc0J1c2NhIiwNCg0KICAvLyAgY29tcG9uZW50czogew0KICAvLyAgICBJbnB1dFNlYXJjaDIsDQogIC8vICB9LA0KDQogIHByb3BzOiB7DQogICAgdmFsdWU6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgY29kaWdvOiAiMCIsDQogICAgICAgICAgZW5kZXJlY286ICIwIiwNCiAgICAgICAgICBlbXA6ICIwIiwNCiAgICAgICAgICBkZXA6ICIwIiwNCiAgICAgICAgICBpdGVtOiBbXSwNCiAgICAgICAgICBxdWFudDogIjAiLA0KICAgICAgICAgIGRlbGV0YTogIjAiLA0KICAgICAgICAgIG5pdmVsOiAiMSIsDQogICAgICAgIH07DQogICAgICB9LA0KICAgIH0sDQogICAgcGFyYW1zOiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgIGl0ZW5zOiBbXSwNCiAgICAgICAgICBnYWlvbGE6IDAsDQogICAgICAgICAgZW5kZXJlY286IDAsDQogICAgICAgICAgZW1wcmVzYTogIjAiLA0KICAgICAgICAgIGRlcG9zaXRvOiAiMCIsDQogICAgICAgIH07DQogICAgICB9LA0KICAgIH0sDQogICAgbWF0ZXJpYWlzOiB7DQogICAgICB0eXBlOiBBcnJheSwNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiBbXTsNCiAgICAgIH0sDQogICAgfSwNCg0KICAgIHJ1bjogew0KICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuIDA7DQogICAgICB9LA0KICAgIH0sDQoNCiAgICBhdXRvcGVzcXVpc2E6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9LA0KICAgIH0sDQogIH0sDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZmllbGRzOiBbDQogICAgICAgIHsga2V5OiAiaXRlbSIsIGxhYmVsOiAiSXRlbSIsIHNvcnRhYmxlOiB0cnVlIH0sDQogICAgICAgIHsga2V5OiAiZGVzY3JpY2FvIiwgbGFiZWw6ICJEZXNjcmnDp8OjbyIsIHNvcnRhYmxlOiB0cnVlIH0sDQogICAgICAgIHsga2V5OiAicXRkZSIsIGxhYmVsOiAiUS4gU29sLiIsIHNvcnRhYmxlOiB0cnVlIH0sDQogICAgICAgIHsga2V5OiAiZ2Fpb2xhcyIsIGxhYmVsOiAiR2Fpb2xhcyIsIHNvcnRhYmxlOiB0cnVlIH0sDQogICAgICAgIHsga2V5OiAicXVhbnRzIiwgbGFiZWw6ICJRdGRlcyIsIHNvcnRhYmxlOiB0cnVlIH0sDQogICAgICAgICJhY3Rpb25zIiwNCiAgICAgIF0sDQogICAgICBmaWVsZHNkZXRhaWxzOiBbDQogICAgICAgIHsga2V5OiAiY29kaWdvIiwgbGFiZWw6ICJHYWlvbGEiLCBzb3J0YWJsZTogdHJ1ZSB9LA0KICAgICAgICB7IGtleTogInF1YW50IiwgbGFiZWw6ICJRdGRlIiwgc29ydGFibGU6IHRydWUgfSwNCiAgICAgICAgImFjdGlvbnMiLA0KICAgICAgXSwNCiAgICAgIGl0ZW1wZXNxdWlzYTogIiIsDQogICAgICBpdGVtYnVzY2E6IHRoaXMudmFsdWUsDQogICAgICBpdGVuczogdGhpcy52YWx1ZS5pdGVtLm1hcCgoaSkgPT4gaS5pdGVtKSB8fCBbXSwNCiAgICAgIGdhaW9sYTogdGhpcy52YWx1ZS5jb2RpZ28sDQogICAgICBlbmRlcmVjbzogdGhpcy52YWx1ZS5lbmRlcmVjbywNCiAgICAgIGVtcHJlc2E6IHBhcnNlSW50KHRoaXMudmFsdWUuZW1wKSwNCiAgICAgIGRlcG9zaXRvOiBwYXJzZUludCh0aGlzLnZhbHVlLmRlcCksDQogICAgICBlbXByZXNhYnVzY2E6IHsNCiAgICAgICAgdmFsdWU6ICIwIiwNCiAgICAgICAgdGV4dDogIiIsDQogICAgICB9LA0KICAgICAgZGVwb3NpdG9idXNjYTogew0KICAgICAgICB2YWx1ZTogIjAiLA0KICAgICAgICB0ZXh0OiAiIiwNCiAgICAgIH0sDQogICAgICBydW5pdDogdGhpcy5ydW4sDQogICAgfTsNCiAgfSwNCg0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEdldHRlcnMoWw0KICAgICAgImd0eEdhaW9sYXNJdGVuc0RhdGFMaXN0IiwNCiAgICAgICJndHhHYWlvbGFzSXRlbnNSZXNwb25zZSIsDQogICAgICAiZ3R4R2Fpb2xhc0l0ZW5zQnVzeSIsDQogICAgICAiZ3R4R2Fpb2xhc0l0ZW5zUmVzcG9uc2UiLA0KICAgICAgImd0eEdhaW9sYXNJdGVuc1N1Y2Nlc3MiLA0KICAgICAgImd0eEdhaW9sYXNJdGVuc0Vycm9yIiwNCiAgICAgICJndHhHYWlvbGFzSXRlbnNEYXRhIiwNCiAgICAgICJndHhBbG1veEVtcHJlc2FEZXBvc2l0byIsDQogICAgXSksDQoNCiAgICBwYXJhbXNCdXNjYSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIHBhcmFtczogew0KICAgICAgICAgIGdhaW9sYTogcGFyc2VJbnQodGhpcy5nYWlvbGEpLA0KICAgICAgICAgIGVuZGVyZWNvOiBwYXJzZUludCh0aGlzLmVuZGVyZWNvKSwNCiAgICAgICAgICAvLyBwYXJhIHBhc3NhciBwYXJhIEFQSSB0ZW0gcXVlIHRyYXRhciBjb21vIHN0cmluZw0KICAgICAgICAgIGl0ZW5zOiB0aGlzLml0ZW5zLmpvaW4oIjsiKSB8fCAiIiwNCiAgICAgICAgICBlbXByZXNhOiBwYXJzZUludCh0aGlzLml0ZW1idXNjYS5lbXByZXNhKSwNCiAgICAgICAgICBkZXBvc2l0bzogcGFyc2VJbnQodGhpcy5ndHhBbG1veEVtcHJlc2FEZXBvc2l0by5kZXBvc2l0byksDQogICAgICAgICAgUGFnZU51bWJlcjogMSwNCiAgICAgICAgICBQYWdlU2l6ZTogMTAwLA0KICAgICAgICB9LA0KICAgICAgfTsNCiAgICB9LA0KDQogICAgdlBvZGVQZXNxdWlzYXIoKSB7DQogICAgICByZXR1cm4gKA0KICAgICAgICAoKHRoaXMuaXRlbWJ1c2NhLml0ZW5zIHx8IFtdKS5qb2luKCI7IikgIT09ICIiIHx8DQogICAgICAgICAgdGhpcy5pdGVtYnVzY2EuZ2Fpb2xhICE9PSAiIiB8fA0KICAgICAgICAgIHRoaXMuaXRlbWJ1c2NhLmVuZGVyZWNvICE9PSAiIikgJiYNCiAgICAgICAgcGFyc2VJbnQodGhpcy5pdGVtYnVzY2EuZW1wKSA+IDAgJiYNCiAgICAgICAgcGFyc2VJbnQodGhpcy5pdGVtYnVzY2EuZGVwKSA+IDANCiAgICAgICk7DQogICAgfSwNCg0KICAgIGhhdmVndHhHYWlvbGFzSXRlbnNEYXRhTGlzdCgpIHsNCiAgICAgIHJldHVybiB0aGlzLmd0eEdhaW9sYXNJdGVuc0RhdGFMaXN0Lmxlbmd0aCA+IDA7DQogICAgfSwNCg0KICAgIGl0ZW5zbGlzdCgpIHsNCiAgICAgIGxldCBtYXRlcmlhbDsNCiAgICAgIHJldHVybiB0aGlzLmd0eEdhaW9sYXNJdGVuc0RhdGFMaXN0Lm1hcCgoaSkgPT4gew0KICAgICAgICBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWlzLmZpbmQoKGYpID0+IGYuaXRlbSA9PSBpLml0ZW0pOw0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgIC4uLmksDQogICAgICAgICAgLi4ueyBxdGRlOiAobWF0ZXJpYWwgPyBtYXRlcmlhbC5xdGRlIDogeyBxdGRlOiAwIH0pLnF0ZGUgfSwNCiAgICAgICAgfTsNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICB2YWx1ZWl0ZW5zKCkgew0KICAgICAgcmV0dXJuICh0aGlzLml0ZW5zIHx8IFtdKS5tYXAoKGkpID0+IHsNCiAgICAgICAgcmV0dXJuIHsgaXRlbTogaS5pdGVtIHx8IGksIHF0ZGU6IGkucXRkZSB8fCAwIH07DQogICAgICB9KTsNCiAgICB9LA0KICB9LA0KDQogIGJlZm9yZU1vdW50KCkgew0KICAgIGlmICh0aGlzLm1hdGVyaWFpcy5sZW5ndGggPiAwKSB7DQogICAgICB0aGlzLml0ZW5zID0gdGhpcy5tYXRlcmlhaXMubWFwKChtKSA9PiBtLml0ZW0pOw0KICAgICAgdGhpcy5HYWlvbGFzSXRlbnNCdXNjYVBlc3F1aXNhcigpOw0KICAgIH0NCiAgICBpZiAodGhpcy5hdXRvcGVzcXVpc2EpIHsNCiAgICAgIHRoaXMuR2Fpb2xhc0l0ZW5zQnVzY2FQZXNxdWlzYXIoKTsNCiAgICB9DQogIH0sDQoNCiAgbWV0aG9kczogew0KICAgIC4uLm1hcEFjdGlvbnMoWyJhY3RHYWlvbGFJdGVucyIsICJhY3RHYWlvbGFJdGVuc0NsZWFyIl0pLA0KDQogICAgcm93Q2xpY2soaXRlbSkgew0KICAgICAgY29uc29sZS5sb2coInJvd0NsaWNrOiIsIGl0ZW0pOw0KDQogICAgICBpdGVtLnF1YW50ID0gcGFyc2VGbG9hdChpdGVtLnF1YW50KTsNCiAgICAgIC8vIGl0ZW0ucXRkZSA9IHBhcnNlRmxvYXQoaXRlbS5xdWFudCkNCg0KICAgICAgdGhpcy4kZW1pdCgiaW5wdXQiLCBpdGVtKTsNCiAgICAgIHRoaXMuJGVtaXQoImV2dC1nYWlvbGFpdGVuc3Jvd2NsaWNrIiwgaXRlbSk7DQogICAgfSwNCg0KICAgIG5ld1NlYXJjaCgpIHsNCiAgICAgIHRoaXMuaXRlbnMgPSBbXTsNCiAgICAgIHRoaXMuZ2Fpb2xhID0gMDsNCiAgICAgIHRoaXMuZW5kZXJlY28gPSAwOw0KICAgICAgdGhpcy5hY3RHYWlvbGFJdGVuc0NsZWFyKCk7DQogICAgfSwNCg0KICAgIEdhaW9sYXNJdGVuc0J1c2NhUGVzcXVpc2FyKCkgew0KICAgICAgLy8gdGhpcy4kZW1pdCgnaW5wdXQnLCB0aGlzLnBhcmFtc0J1c2NhKQ0KICAgICAgLy90aGlzLmFjdEdhaW9sYUl0ZW5zKHRoaXMucGFyYW1zQnVzY2EpOw0KICAgICAgdGhpcy5hY3RHYWlvbGFJdGVucyh0aGlzLml0ZW1idXNjYSk7DQogICAgfSwNCg0KICAgIC8qDQogICAgaXRlbWJ1c2NhRW1pdCgpIHsNCiAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgdGhpcy52YWx1ZSk7DQogICAgfSwNCg0KICAgIGFkZGl0ZW1idXNjYSgpIHsNCiAgICAgIGlmICghdGhpcy5pdGVucy5maW5kKChmKSA9PiBmID09PSB0aGlzLml0ZW1idXNjYSkpIHsNCiAgICAgICAgdGhpcy5pdGVucy5wdXNoKHRoaXMuaXRlbWJ1c2NhKTsNCiAgICAgIH0NCiAgICAgIHRoaXMuaXRlbWJ1c2NhID0gIiI7DQogICAgfSwNCiAgICAqLw0KICB9LA0KDQogIHdhdGNoOiB7DQogICAgdmFsdWU6IHsNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBoYW5kbGVyKCkgew0KICAgICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIHRoaXMudmFsdWUpOw0KICAgICAgfSwNCiAgICB9LA0KICAgIHJ1bih2YWx1ZSkgew0KICAgICAgY29uc29sZS5sb2coIndhdGNoLnJ1bjoiLCB2YWx1ZSk7DQogICAgICB0aGlzLkdhaW9sYXNJdGVuc0J1c2NhUGVzcXVpc2FyKCk7DQogICAgfSwNCiAgICAvKg0KICAgIGl0ZW5zKCkgew0KICAgICAgdGhpcy52YWx1ZS5pdGVtID0gdGhpcy52YWx1ZWl0ZW5zOw0KICAgIH0sDQoNCiAgICBnYWlvbGEoKSB7DQogICAgICB0aGlzLnZhbHVlLmNvZGlnbyA9IHRoaXMuZ2Fpb2xhOw0KICAgIH0sDQoNCiAgICBlbmRlcmVjbygpIHsNCiAgICAgIHRoaXMudmFsdWUuZW5kZXJlY28gPSB0aGlzLmVuZGVyZWNvOw0KICAgIH0sDQogICAgKi8NCiAgICBtYXRlcmlhaXMoKSB7DQogICAgICB0aGlzLml0ZW5zID0gdGhpcy5tYXRlcmlhaXMubWFwKChpKSA9PiBpLml0ZW0pOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["GaiolasItensBusca.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8KA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GaiolasItensBusca.vue","sourceRoot":"src/pages/almoxarifado/components","sourcesContent":["<template>\r\n  <div class=\"m-2\">\r\n    <b-card\r\n      header=\"Pesquisa estoque\"\r\n      header-bg-variant=\"dark\"\r\n      header-text-variant=\"white\"\r\n    >\r\n      <b-row>\r\n        <b-col cols=\"12\" sm=\"6\">\r\n          <b-form-group label=\"Box\" label-for=\"input-gaiolaitensendereco\">\r\n            <b-form-input\r\n              id=\"input-gaiolaitensendereco\"\r\n              type=\"number\"\r\n              class=\"text-right\"\r\n              v-model=\"itembusca.endereco\"\r\n            >\r\n            </b-form-input>\r\n          </b-form-group>\r\n        </b-col>\r\n        <b-col cols=\"12\" sm=\"6\">\r\n          <b-form-group label=\"Gaiola\" label-for=\"input-gaiolaitensgaiola\">\r\n            <b-form-input\r\n              id=\"input-gaiolaitensgaiola\"\r\n              type=\"number\"\r\n              class=\"text-right\"\r\n              v-model=\"itembusca.gaiola\"\r\n            >\r\n            </b-form-input>\r\n          </b-form-group>\r\n        </b-col>\r\n      </b-row>\r\n\r\n      <b-form-group label=\"Item\" label-for=\"input-gaiolaitensitem\">\r\n        <b-input-group>\r\n          <b-form-tags\r\n            separator=\" ,;\"\r\n            placeholder=\"Código do item\"\r\n            input-id=\"tags-basic\"\r\n            add-button-text=\"Adicionar\"\r\n            v-model=\"itembusca.item\"\r\n          >\r\n          </b-form-tags>\r\n          <template #append>\r\n            <b-button v-b-modal.modal-produtos variant=\"success\">\r\n              <b-icon-search />\r\n            </b-button>\r\n          </template>\r\n        </b-input-group>\r\n      </b-form-group>\r\n\r\n      <hr />\r\n\r\n      <b-form-group class=\"float-right\">\r\n        <b-button\r\n          variant=\"primary\"\r\n          @click=\"GaiolasItensBuscaPesquisar\"\r\n          :disabled=\"!vPodePesquisar\"\r\n        >\r\n          <b-icon-archive />\r\n          Busca estoque\r\n        </b-button>\r\n      </b-form-group>\r\n\r\n      <b-table\r\n        striped\r\n        hover\r\n        size=\"sm\"\r\n        :items=\"itenslist\"\r\n        :fields=\"fields\"\r\n        class=\"mt-3\"\r\n      >\r\n        <template #cell(qtde)=\"data\">\r\n          <b-form-input\r\n            type=\"number\"\r\n            v-model=\"data.item.qtde\"\r\n            size=\"sm\"\r\n            style=\"width: 100px\"\r\n          >\r\n          </b-form-input>\r\n        </template>\r\n        <template #cell(actions)=\"data\">\r\n          <b-button-group>\r\n            <b-button\r\n              v-if=\"data.item.Estoque.length > 1\"\r\n              size=\"sm\"\r\n              variant=\"outline-primary\"\r\n              v-model=\"data.detailsShowing\"\r\n              @click=\"data.toggleDetails\"\r\n            >\r\n              <b-icon-caret-up v-if=\"data.detailsShowing\" />\r\n              <b-icon-caret-down v-else />\r\n            </b-button>\r\n            <b-button\r\n              v-else\r\n              size=\"sm\"\r\n              variant=\"outline-primary\"\r\n              @click=\"rowClick(data.item.Estoque[0])\"\r\n            >\r\n              <b-icon-cart-plus />\r\n            </b-button>\r\n          </b-button-group>\r\n        </template>\r\n        <template #row-details=\"row\">\r\n          <b-card>\r\n            <b-table card :items=\"row.item.Estoque\" :fields=\"fieldsdetails\">\r\n              <template #cell(actions)=\"gaiola\">\r\n                <b-button-group>\r\n                  <b-button\r\n                    size=\"sm\"\r\n                    variant=\"outline-primary\"\r\n                    @click=\"rowClick(gaiola.item)\"\r\n                  >\r\n                    <b-icon-cart-plus />\r\n                  </b-button>\r\n                </b-button-group>\r\n              </template>\r\n            </b-table>\r\n          </b-card>\r\n        </template>\r\n      </b-table>\r\n      value: {{ value }}<br />\r\n      itembusca: {{ itembusca }}<br />\r\n      <!--\r\n      materiais: {{ materiais }}<br />\r\n      paramsBusca: {{ paramsBusca }}<br />\r\n      itens: {{ itens }}<br>\r\n      gtxGaiolasItensDataList: {{ gtxGaiolasItensDataList }}<br>\r\n      valueitens: {{ valueitens }}<br>\r\n      itenslist: {{ itenslist }}<br>\r\n      <b-input type=\"number\" v-model=\"runit\" />\r\n      runit: {{ runit }}<br />\r\n      -->\r\n      <hr />\r\n      <div class=\"d-flex justify-content-between mt-2\">\r\n        <div>\r\n          <strong>Total de itens:</strong>\r\n          <span class=\"ml-2\">{{ itenslist.length }}</span>\r\n        </div>\r\n        <div>\r\n          <b-button\r\n            variant=\"danger\"\r\n            @click=\"newSearch\"\r\n            :disabled=\"!havegtxGaiolasItensDataList\"\r\n          >\r\n            <b-icon-x-square />\r\n            Cancelar\r\n          </b-button>\r\n        </div>\r\n      </div>\r\n    </b-card>\r\n\r\n    <b-modal\r\n      ok-only\r\n      id=\"modal-produtos\"\r\n      ref=\"modal-produtos\"\r\n      size=\"md\"\r\n      scrollable\r\n      title=\"Busca produtos\"\r\n      ok-title=\"Adicionar\"\r\n      :ok-disabled=\"itempesquisa == ''\"\r\n    >\r\n      <!--@ok=\"additembusca\"-->\r\n      <k-inputsearch\r\n        id=\"input-itens\"\r\n        ref=\"itemRef\"\r\n        routeapi=\"Servicos/Itens/MateriaPrima\"\r\n        v-model=\"itempesquisa\"\r\n        :pk=\"itembusca || '-'\"\r\n      />\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from \"vuex\";\r\n// import InputSearch2 from \"../../../components/InputSearch2\";\r\nexport default {\r\n  name: \"GaiolasItensBusca\",\r\n\r\n  //  components: {\r\n  //    InputSearch2,\r\n  //  },\r\n\r\n  props: {\r\n    value: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          codigo: \"0\",\r\n          endereco: \"0\",\r\n          emp: \"0\",\r\n          dep: \"0\",\r\n          item: [],\r\n          quant: \"0\",\r\n          deleta: \"0\",\r\n          nivel: \"1\",\r\n        };\r\n      },\r\n    },\r\n    params: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          itens: [],\r\n          gaiola: 0,\r\n          endereco: 0,\r\n          empresa: \"0\",\r\n          deposito: \"0\",\r\n        };\r\n      },\r\n    },\r\n    materiais: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n\r\n    run: {\r\n      type: Number,\r\n      default() {\r\n        return 0;\r\n      },\r\n    },\r\n\r\n    autopesquisa: {\r\n      type: Boolean,\r\n      default() {\r\n        return false;\r\n      },\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      fields: [\r\n        { key: \"item\", label: \"Item\", sortable: true },\r\n        { key: \"descricao\", label: \"Descrição\", sortable: true },\r\n        { key: \"qtde\", label: \"Q. Sol.\", sortable: true },\r\n        { key: \"gaiolas\", label: \"Gaiolas\", sortable: true },\r\n        { key: \"quants\", label: \"Qtdes\", sortable: true },\r\n        \"actions\",\r\n      ],\r\n      fieldsdetails: [\r\n        { key: \"codigo\", label: \"Gaiola\", sortable: true },\r\n        { key: \"quant\", label: \"Qtde\", sortable: true },\r\n        \"actions\",\r\n      ],\r\n      itempesquisa: \"\",\r\n      itembusca: this.value,\r\n      itens: this.value.item.map((i) => i.item) || [],\r\n      gaiola: this.value.codigo,\r\n      endereco: this.value.endereco,\r\n      empresa: parseInt(this.value.emp),\r\n      deposito: parseInt(this.value.dep),\r\n      empresabusca: {\r\n        value: \"0\",\r\n        text: \"\",\r\n      },\r\n      depositobusca: {\r\n        value: \"0\",\r\n        text: \"\",\r\n      },\r\n      runit: this.run,\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\r\n      \"gtxGaiolasItensDataList\",\r\n      \"gtxGaiolasItensResponse\",\r\n      \"gtxGaiolasItensBusy\",\r\n      \"gtxGaiolasItensResponse\",\r\n      \"gtxGaiolasItensSuccess\",\r\n      \"gtxGaiolasItensError\",\r\n      \"gtxGaiolasItensData\",\r\n      \"gtxAlmoxEmpresaDeposito\",\r\n    ]),\r\n\r\n    paramsBusca() {\r\n      return {\r\n        params: {\r\n          gaiola: parseInt(this.gaiola),\r\n          endereco: parseInt(this.endereco),\r\n          // para passar para API tem que tratar como string\r\n          itens: this.itens.join(\";\") || \"\",\r\n          empresa: parseInt(this.itembusca.empresa),\r\n          deposito: parseInt(this.gtxAlmoxEmpresaDeposito.deposito),\r\n          PageNumber: 1,\r\n          PageSize: 100,\r\n        },\r\n      };\r\n    },\r\n\r\n    vPodePesquisar() {\r\n      return (\r\n        ((this.itembusca.itens || []).join(\";\") !== \"\" ||\r\n          this.itembusca.gaiola !== \"\" ||\r\n          this.itembusca.endereco !== \"\") &&\r\n        parseInt(this.itembusca.emp) > 0 &&\r\n        parseInt(this.itembusca.dep) > 0\r\n      );\r\n    },\r\n\r\n    havegtxGaiolasItensDataList() {\r\n      return this.gtxGaiolasItensDataList.length > 0;\r\n    },\r\n\r\n    itenslist() {\r\n      let material;\r\n      return this.gtxGaiolasItensDataList.map((i) => {\r\n        material = this.materiais.find((f) => f.item == i.item);\r\n        return {\r\n          ...i,\r\n          ...{ qtde: (material ? material.qtde : { qtde: 0 }).qtde },\r\n        };\r\n      });\r\n    },\r\n\r\n    valueitens() {\r\n      return (this.itens || []).map((i) => {\r\n        return { item: i.item || i, qtde: i.qtde || 0 };\r\n      });\r\n    },\r\n  },\r\n\r\n  beforeMount() {\r\n    if (this.materiais.length > 0) {\r\n      this.itens = this.materiais.map((m) => m.item);\r\n      this.GaiolasItensBuscaPesquisar();\r\n    }\r\n    if (this.autopesquisa) {\r\n      this.GaiolasItensBuscaPesquisar();\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"actGaiolaItens\", \"actGaiolaItensClear\"]),\r\n\r\n    rowClick(item) {\r\n      console.log(\"rowClick:\", item);\r\n\r\n      item.quant = parseFloat(item.quant);\r\n      // item.qtde = parseFloat(item.quant)\r\n\r\n      this.$emit(\"input\", item);\r\n      this.$emit(\"evt-gaiolaitensrowclick\", item);\r\n    },\r\n\r\n    newSearch() {\r\n      this.itens = [];\r\n      this.gaiola = 0;\r\n      this.endereco = 0;\r\n      this.actGaiolaItensClear();\r\n    },\r\n\r\n    GaiolasItensBuscaPesquisar() {\r\n      // this.$emit('input', this.paramsBusca)\r\n      //this.actGaiolaItens(this.paramsBusca);\r\n      this.actGaiolaItens(this.itembusca);\r\n    },\r\n\r\n    /*\r\n    itembuscaEmit() {\r\n      this.$emit(\"input\", this.value);\r\n    },\r\n\r\n    additembusca() {\r\n      if (!this.itens.find((f) => f === this.itembusca)) {\r\n        this.itens.push(this.itembusca);\r\n      }\r\n      this.itembusca = \"\";\r\n    },\r\n    */\r\n  },\r\n\r\n  watch: {\r\n    value: {\r\n      deep: true,\r\n      handler() {\r\n        this.$emit(\"input\", this.value);\r\n      },\r\n    },\r\n    run(value) {\r\n      console.log(\"watch.run:\", value);\r\n      this.GaiolasItensBuscaPesquisar();\r\n    },\r\n    /*\r\n    itens() {\r\n      this.value.item = this.valueitens;\r\n    },\r\n\r\n    gaiola() {\r\n      this.value.codigo = this.gaiola;\r\n    },\r\n\r\n    endereco() {\r\n      this.value.endereco = this.endereco;\r\n    },\r\n    */\r\n    materiais() {\r\n      this.itens = this.materiais.map((i) => i.item);\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}