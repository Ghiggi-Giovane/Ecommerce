{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\consulta\\components\\ParamConsulta.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\consulta\\components\\ParamConsulta.vue","mtime":1701906516455},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQXBpU2VydmljZSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9hcGkuc2VydmljZScNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICANCiAgICBuYW1lOiAnUGFyYW1Db25zdWx0YScsDQoNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgbG9hZGluZzogMCwNCiAgICAgICAgICAgIHBhcmFtc2xpc3Q6IHRoaXMucGFyYW1zIHx8ICBbXSAvLyBjb21vIHByb3BzIG7Do28gcG9kZW0gc2VyIGFsdGVyYWRhcywgcHJlY2lzbyBwYXNzYXIgYXF1aSBwYXJhIGFkaWNpb25hciBvcyBkYWRvcyBzZSB2aWVyZW0gZGUgdW1hIGFwaQ0KICAgICAgICB9DQogICAgfSwNCg0KICAgIHByb3BzOiB7DQoNCiAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgICB0eXBlOiBBcnJheQ0KICAgICAgICB9DQoNCiAgICB9LA0KDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgY29tcHV0ZWRwYXJhbXMoKSB7IHJldHVybiB0aGlzLnBhcmFtc2xpc3QgfSwNCiAgICAgICAgc2VsZWN0ZWRwYXJhbXMoKSB7IHJldHVybiB0aGlzLnBhcmFtc2xpc3QubWFwKHAgPT4ge3JldHVybiB7W3Aubm9tZV06IHAudmFsdWV9fSkgfQ0KICAgIH0sDQoNCiAgICBtZXRob2RzOiB7DQoNCiAgICAgICAgbG9hZHBhcmFtcygpIHsNCiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IDANCiAgICAgICAgICAgIC8vdGhpcy5zZWxlY3RlZCA9IGl0ZW0gLy8gZXNzZSBuw6NvIGZ1bmNpb25hIHBxIMOpIGJhc2VhZG8gbnVuIGZpbHRybyAuLi4NCiAgICAgICAgICAgIHRoaXMucGFyYW1zbGlzdC5tYXAocGFyID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocGFyLmFwaSkgew0KICAgICAgICAgICAgICAgICAgICAvLyBzZSBvIHBhcmFtZXRybyBuw6NvIHRlbSBvIGNhbXBvIGRhdGEgdmF6aW8gZWxlIHByZWNpc2EgZXNwZXJhciBvIHJldG9ybm8gZGEgYXBpIHBhcmEgY3JpYXIgZSByZW5kZXJpemFyIG5hIHRlbGENCiAgICAgICAgICAgICAgICAgICAgLy8gZW50w6NvIMOpIHVzYWRvIGVzc2UgY29udGFkb3IgcGFyYSBzw7MgYWJyaXIgYSBhYmEgZG9zIHBhcmFtZXRyb3MgZGVwb2lzIGRlIHRlciBvIGNhbXBvIGRhdGEgcGFyYSBwb2RlciBjYXJyZWdhciBuYSB0ZWxhDQogICAgICAgICAgICAgICAgICAgIGlmICghcGFyLmRhdGEgfHwgcGFyLmRhdGEubGVuZ3RoPT0wKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcrKw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcGlHZXQocGFyKS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sb2FkaW5nPjApIHRoaXMubG9hZGluZy0tDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZGluZz09MCkgdGhpcy50YWJJbmRleCA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KDQogICAgICAgIH0sDQoNCiAgICAgICAgYXN5bmMgYXBpR2V0KHBhcikgew0KDQogICAgICAgIEFwaVNlcnZpY2Uuc2V0QXV0aEhlYWRlcigpDQogICAgICAgIA0KICAgICAgICBhd2FpdCBBcGlTZXJ2aWNlLmdldChwYXIuYXBpKQ0KICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtc2xpc3QuZmluZChmID0+IGYubm9tZSA9PSBwYXIubm9tZSkuZGF0YSA9IHJlcy5kYXRhLkRhdGENCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2ggKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yLm1lc3NhZ2UpDQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBbQXBpU2VydmljZS5hcGlHZXRdICR7ZXJyb3J9YCkNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0NCg0KICAgIH0sDQoNCiAgICB3YXRjaDogew0KDQogICAgICAgIHBhcmFtcyhwYXJhbXMpIHsNCiAgICAgICAgICAgIHRoaXMucGFyYW1zbGlzdCA9IHBhcmFtcyB8fCAgW10gDQogICAgICAgICAgICB0aGlzLmxvYWRwYXJhbXMoKQ0KICAgICAgICB9LA0KDQogICAgICAgIHNlbGVjdGVkcGFyYW1zKHBhcmFtKSB7DQogICAgICAgICAgICB0aGlzLiRlbWl0KCdldnRfcGFyYW1zZWxlY3RlZCcsIHBhcmFtKQ0KICAgICAgICB9DQoNCiAgICB9DQp9DQo="},{"version":3,"sources":["ParamConsulta.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA","file":"ParamConsulta.vue","sourceRoot":"src/pages/consulta/components","sourcesContent":["<template>\r\n    <div>\r\n        <b-row>\r\n            <b-col cols=\"12\" md=\"4\" sm=\"6\" v-for=\"(par, i) of computedparams\" :key=\"i\">\r\n                <b-form-group :label=\"par.caption\">\r\n                    <b-form-input :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='number'\" type=\"number\" :min=\"par.min || 0\" :max=\"par.max || 0\">{{ par.tipo }}</b-form-input>\r\n                    <b-form-input :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='string'\" type=\"text\">{{ par.tipo }}</b-form-input>\r\n                    <b-form-select :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='select' && !par.api\" :options=\"par.data\"></b-form-select>\r\n                    <b-form-select :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='select' && par.api\" :options=\"par.data\"></b-form-select>\r\n                    <b-form-select :id=\"`par${i}`\" v-model=\"par.value\" v-if=\"par.tipo=='multiple' && par.api\" :options=\"par.data\"></b-form-select>\r\n                </b-form-group>\r\n            </b-col>\r\n        </b-row>\r\n\r\n        <!-- paramslist: {{paramslist}}\r\n        selectedparams: {{selectedparams}} -->\r\n    </div>\r\n</template>\r\n<script>\r\nimport ApiService from '../../../services/api.service'\r\nexport default {\r\n    \r\n    name: 'ParamConsulta',\r\n\r\n    data() {\r\n        return {\r\n            loading: 0,\r\n            paramslist: this.params ||  [] // como props não podem ser alteradas, preciso passar aqui para adicionar os dados se vierem de uma api\r\n        }\r\n    },\r\n\r\n    props: {\r\n\r\n        params: {\r\n            type: Array\r\n        }\r\n\r\n    },\r\n\r\n    computed: {\r\n        computedparams() { return this.paramslist },\r\n        selectedparams() { return this.paramslist.map(p => {return {[p.nome]: p.value}}) }\r\n    },\r\n\r\n    methods: {\r\n\r\n        loadparams() {\r\n            this.loading = 0\r\n            //this.selected = item // esse não funciona pq é baseado nun filtro ...\r\n            this.paramslist.map(par => {\r\n                if (par.api) {\r\n                    // se o parametro não tem o campo data vazio ele precisa esperar o retorno da api para criar e renderizar na tela\r\n                    // então é usado esse contador para só abrir a aba dos parametros depois de ter o campo data para poder carregar na tela\r\n                    if (!par.data || par.data.length==0) {\r\n                        this.loading++\r\n                        this.apiGet(par).then(() => {\r\n                            if (this.loading>0) this.loading--\r\n                            if (this.loading==0) this.tabIndex = 1\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n\r\n        },\r\n\r\n        async apiGet(par) {\r\n\r\n        ApiService.setAuthHeader()\r\n        \r\n        await ApiService.get(par.api)\r\n            .then(res => {\r\n                this.paramslist.find(f => f.nome == par.nome).data = res.data.Data\r\n            })\r\n            .catch (error => {\r\n                console.error(error.message)\r\n                throw new Error(`[ApiService.apiGet] ${error}`)\r\n            })\r\n        }\r\n\r\n    },\r\n\r\n    watch: {\r\n\r\n        params(params) {\r\n            this.paramslist = params ||  [] \r\n            this.loadparams()\r\n        },\r\n\r\n        selectedparams(param) {\r\n            this.$emit('evt_paramselected', param)\r\n        }\r\n\r\n    }\r\n}\r\n</script>"]}]}