{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\vendaB2B\\views\\index.vue?vue&type=style&index=0&id=38e2581c&lang=css&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\vendaB2B\\views\\index.vue","mtime":1701906516543},{"path":"C:\\k1-services\\node_modules\\css-loader\\dist\\cjs.js","mtime":1670977934642},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1674603024162},{"path":"C:\\k1-services\\node_modules\\postcss-loader\\src\\index.js","mtime":1670977935130},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQojZGl2UHJpbmNpcGFsdmVuZGFiMmIgew0KICBmb250LXNpemU6IDExcHg7DQp9DQoNCiNjZW50ZXIgew0KICBkaXNwbGF5OiBibG9jazsNCn0NCg0KI3JvdyB7DQogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgbWFyZ2luOiAxcHgsIDFweCwgMXB4LCAxcHg7DQp9DQoNCiNsaW5rVGFiZWxhIHsNCiAgY29sb3I6IGJsdWU7DQp9DQoNCiNib3RvZXMgew0KICB3aWR0aDogbWluLWNvbnRlbnQ7DQogIHdoaXRlLXNwYWNlOiBub3dyYXA7DQogIG1hcmdpbjogMnB4Ow0KfQ0KDQojaW5wdXREYXRlIHsNCiAgd2lkdGg6IDM1MHB4Ow0KfQ0KDQojcGFnaW5hdGlvbiB7DQogIGRpc3BsYXk6IGZsZXg7DQogIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7DQp9DQoNCi5kcmFnLW92ZXIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiBzaWx2ZXI7DQogIGJvcmRlci1yaWdodDogNXB4IHNvbGlkIGxpZ2h0Z3JlZW47DQogIGJvcmRlci1sZWZ0OiA1cHggc29saWQgbGlnaHRncmVlbjsNCn0NCi50YWJsZS1kYXJrIHRoLA0KLnRhYmxlLWRhcmsgdGQsDQoudGFibGUtZGFyayB0aGVhZCB0aCB7DQogIGJhY2tncm91bmQtY29sb3I6IGxpZ2h0Z3JheTsNCiAgY29sb3I6IGJsYWNrOw0KfQ0KLmNhcmQtYm9keSB7DQogIG1pbi1oZWlnaHQ6IDEwN3B4Ow0KfQ0KLmJvcmRlci1yaWdodCB7DQogIGJvcmRlci1yaWdodDogMnB4IHNvbGlkIGJsYWNrICFpbXBvcnRhbnQ7DQogIGhlaWdodDogMTAwJTsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICB0b3A6IDA7DQogIHJpZ2h0OiAwOw0KfQ0KaDIgew0KICBmb250LXdlaWdodDogYm9sZDsNCn0NCmg2IHsNCiAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogIGZvbnQtc2l6ZTogMTZweDsNCn0NCi50ZXN0ZSB7DQogIG1hcmdpbjogYXV0bzsNCiAgbWFyZ2luLXRvcDogMTBweDsNCiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCn0NCkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDYwMHB4KSB7DQogIC5ib3JkZXItcmlnaHQgew0KICAgIGRpc3BsYXk6IG5vbmU7DQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAi2BA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/vendaB2B/views","sourcesContent":["<template>\r\n  <div id=\"divPrincipalvendab2b\" class=\"text-center\">\r\n    <b-card class=\"m-2\">\r\n      <div>\r\n        <b-row class=\"mb-3\">\r\n          <b-col cols=\"12\" sm=\"2\">\r\n            <b-input-group>\r\n              <b-form-datepicker\r\n                size=\"sm\"\r\n                v-model=\"dataInicial\"\r\n                placeholder=\"Data Inicial\"\r\n                locale=\"pt-br\"\r\n                :date-format-options=\"{\r\n                  year: 'numeric',\r\n                  month: 'numeric',\r\n                  day: 'numeric',\r\n                }\"\r\n              ></b-form-datepicker>\r\n\r\n              <b-input-group-append>\r\n                <b-button variant=\"danger\" @click=\"clearInicialDate\">\r\n                  <b-icon-trash></b-icon-trash>\r\n                </b-button>\r\n              </b-input-group-append>\r\n            </b-input-group>\r\n          </b-col>\r\n\r\n          <b-col cols=\"12\" sm=\"2\">\r\n            <b-input-group>\r\n              <b-form-datepicker\r\n                size=\"sm\"\r\n                v-model=\"dataFinal\"\r\n                placeholder=\"Data Final\"\r\n                locale=\"pt-br\"\r\n                :date-format-options=\"{\r\n                  year: 'numeric',\r\n                  month: 'numeric',\r\n                  day: 'numeric',\r\n                }\"\r\n              ></b-form-datepicker>\r\n\r\n              <b-input-group-append>\r\n                <b-button variant=\"danger\" @click=\"clearFinalDate\">\r\n                  <b-icon-trash></b-icon-trash>\r\n                </b-button>\r\n              </b-input-group-append>\r\n            </b-input-group>\r\n          </b-col>\r\n\r\n          <b-col cols=\"12\" sm=\"3\">\r\n            <b-input-group prepend=\"Filtro\" size=\"sm\">\r\n              <b-form-input\r\n                id=\"input-filtro\"\r\n                type=\"search\"\r\n                v-model=\"filtro\"\r\n                :debounce=\"1000\"\r\n              ></b-form-input>\r\n            </b-input-group>\r\n          </b-col>\r\n\r\n          <b-dropdown class=\"mr-2\" right text=\"Marca\" size=\"sm\">\r\n            <b-form-checkbox\r\n              class=\"mb-1 ml-1\"\r\n              v-for=\"marca in marcaslist\"\r\n              :key=\"marca.value\"\r\n              size=\"sm\"\r\n              :value=\"marca.value\"\r\n              v-model=\"marcaslistselect\"\r\n              name=\"check-button2\"\r\n              switch\r\n              >{{ marca.text }}</b-form-checkbox\r\n            >\r\n          </b-dropdown>\r\n\r\n          <b-dropdown class=\"mr-2\" right size=\"sm\" text=\"Empresa\">\r\n            <b-form-checkbox\r\n              class=\"mb-1 ml-1\"\r\n              v-for=\"empresa in empresalist\"\r\n              :key=\"empresa.value\"\r\n              size=\"sm\"\r\n              v-model=\"empresalistselect\"\r\n              name=\"check-button\"\r\n              :value=\"empresa.value\"\r\n              switch\r\n              >{{ empresa.text }}</b-form-checkbox\r\n            >\r\n          </b-dropdown>\r\n\r\n          <b-dropdown class=\"mr-2\" right text=\"StatusB2B\" size=\"sm\">\r\n            <b-form-checkbox\r\n              style=\"width: 200px\"\r\n              class=\"mb-1 ml-1\"\r\n              v-for=\"statusB2B in statusList\"\r\n              :key=\"statusB2B.value\"\r\n              size=\"sm\"\r\n              :value=\"statusB2B.value\"\r\n              v-model=\"statusListSelected\"\r\n              name=\"checkboxstatus\"\r\n              switch\r\n              >{{ statusB2B.text }}</b-form-checkbox\r\n            >\r\n          </b-dropdown>\r\n          <b-dropdown class=\"mr-2\" right size=\"sm\" text=\"Colunas Visiveis\">\r\n            <b-form-checkbox\r\n              style=\"width: 200px\"\r\n              class=\"mb-1 ml-1\"\r\n              v-for=\"marketB2B in fields\"\r\n              :key=\"marketB2B.key\"\r\n              size=\"sm\"\r\n              v-model=\"marketB2B.visible\"\r\n              name=\"checkB2B\"\r\n              switch\r\n            >\r\n              {{ marketB2B.label || marketB2B.key }}\r\n            </b-form-checkbox>\r\n          </b-dropdown>\r\n          <div>\r\n            <b-button variant=\"danger\" class=\"mr-2\" @click=\"FiltroPedidos\">\r\n              <b-spinner small v-if=\"this.loading\"></b-spinner>\r\n\r\n              <span v-else>Filtrar</span>\r\n            </b-button>\r\n          </div>\r\n          <div>\r\n            <b-button variant=\"primary\" @click=\"enviarPedidosSelecionados\">\r\n              Enviar Pedidos Selecionados\r\n            </b-button>\r\n          </div>\r\n        </b-row>\r\n      </div>\r\n      <b-table\r\n        foot-clone\r\n        no-footer-sorting\r\n        id=\"my-table\"\r\n        :current-page=\"paginaAtiva\"\r\n        :per-page=\"porPagina\"\r\n        head-variant=\"dark\"\r\n        sort-by=\"DataCompra\"\r\n        sort-desc\r\n        selectable\r\n        striped\r\n        bordered\r\n        hovers\r\n        responsive\r\n        small\r\n        select-mode=\"multiple\"\r\n        :filter=\"filtro\"\r\n        :filter-included-fields=\"filterOn\"\r\n        :fields=\"pedidosFields\"\r\n        :items=\"pedidosList\"\r\n        @row-selected=\"onRowSelected\"\r\n        @filtered=\"(filtro) => (pedidosListEmpresa = filtro)\"\r\n      >\r\n        <template #head()=\"data\">\r\n          <div\r\n            :id=\"data.field.key\"\r\n            draggable=\"true\"\r\n            @dragstart=\"dragStart\"\r\n            @dragenter=\"dragEnter\"\r\n            @dragover=\"dragOver\"\r\n            @dragleave=\"dragLeave\"\r\n            @drop=\"drop\"\r\n          >\r\n            {{ data.label }}\r\n          </div>\r\n        </template>\r\n\r\n        <template #cell(actions)=\"row\">\r\n          <a\r\n            target=\"_blank\"\r\n            id=\"linkTabela\"\r\n            v-if=\"row.item.UrlRastreio != null\"\r\n            :href=\"row.item.UrlRastreio\"\r\n          >\r\n            <b-icon-truck font-scale=\"1.5\"></b-icon-truck>\r\n          </a>\r\n          &nbsp; &nbsp;\r\n          <a\r\n            target=\"_blank\"\r\n            id=\"linkTabela\"\r\n            v-if=\"row.item.urlImpressao != null\"\r\n            :href=\"row.item.urlImpressao\"\r\n          >\r\n            <b-icon-printer font-scale=\"1.5\"></b-icon-printer>\r\n          </a>\r\n        </template>\r\n\r\n        <template #cell(Numero)=\"row\">\r\n          <span> {{ row.item.Numero }} </span>\r\n          <span @click=\"detalhes(row, 'oc')\">\r\n            {{ row.detailsShowing ? \"-\" : \"+\" }}\r\n          </span>\r\n        </template>\r\n\r\n        <template #cell(Status)=\"row\">\r\n          <span @click=\"detalhes(row, 'status')\">\r\n            {{ row.item.Rastreio[row.item.Rastreio.length - 1][\"Evento\"] }}\r\n            &nbsp; &nbsp; &nbsp;\r\n            {{ row.detailsShowing ? \"-\" : \"+\" }}\r\n          </span>\r\n        </template>\r\n\r\n        <template #cell(DataStatus)=\"row\">{{\r\n          row.item.Rastreio[row.item.Rastreio.length - 1][\"DataEvento\"]\r\n            | dateBRHora\r\n        }}</template>\r\n\r\n        <template #cell(Percentual)=\"row\">{{ row.item.Percentual }}%</template>\r\n\r\n        <template #cell(DataPrevisaoEntrega)=\"row\">{{\r\n          row.item.DataPrevisaoEntrega | dateBR\r\n        }}</template>\r\n\r\n        <template #cell(PedidoHubURL)=\"row\">\r\n          <a target=\"_blank\" :href=\"row.item.PedidoHubURL\" id=\"linkTabela\">{{\r\n            row.item.OrdemCompra\r\n          }}</a>\r\n        </template>\r\n\r\n        <template #cell(DataCompra)=\"row\">{{\r\n          new Date(row.item.DataCompra).toLocaleDateString()\r\n        }}</template>\r\n\r\n        <template #cell(ValorComFrete)=\"row\">{{\r\n          row.item.ValorComFrete | R$\r\n        }}</template>\r\n\r\n        <template #cell(ValorFrete)=\"row\">\r\n          <span>{{ row.item.ValorFrete | R$ }}</span>\r\n        </template>\r\n\r\n        <template #cell(ValorFreteDestacado)=\"row\">\r\n          <span style=\"color: red\">{{\r\n            row.item.ValorFreteDestacado | R$\r\n          }}</span>\r\n        </template>\r\n\r\n        <template #cell(Transportadora)=\"row\">{{\r\n          row.item.Transportadora.substr(0, 15)\r\n        }}</template>\r\n\r\n        <!-- <template #cell(Redespacho)=\"row\">{{\r\n          row.item.Redespacho != null ? row.item.Redespacho.substr(0, 15) : \"\"\r\n        }}</template> -->\r\n\r\n        <template #row-details=\"row\">\r\n          <b-card v-show=\"oc\">\r\n            <div>\r\n              <b-row>\r\n                <table border=\"1\">\r\n                  <tr>\r\n                    <th>Item</th>\r\n\r\n                    <th>Descrição</th>\r\n\r\n                    <th>Qtde_Faturada</th>\r\n\r\n                    <th>Qtde_Solicitada</th>\r\n\r\n                    <th>TotalComIPI</th>\r\n\r\n                    <th>TotalLiquido</th>\r\n\r\n                    <th>Valor_Unitario</th>\r\n\r\n                    <th>Valor_Unitario_Bruto</th>\r\n                  </tr>\r\n\r\n                  <tr v-for=\"item in itensPedidoGet\" :key=\"item.numero\">\r\n                    <td>{{ item.Item }}</td>\r\n\r\n                    <td style=\"text-align: center\">\r\n                      {{ item.Descricao }}\r\n                    </td>\r\n\r\n                    <td>{{ item.Qtde_Faturada }}</td>\r\n\r\n                    <td>{{ item.Qtde_Solicitada }}</td>\r\n\r\n                    <td>R$ {{ item.TotalComIPI }}</td>\r\n\r\n                    <td>R$ {{ item.TotalLiquido }}</td>\r\n\r\n                    <td>R$ {{ item.Valor_Unitario }}</td>\r\n\r\n                    <td>R$ {{ item.Valor_Unitario_Bruto }}</td>\r\n                  </tr>\r\n                </table>\r\n              </b-row>\r\n            </div>\r\n          </b-card>\r\n          <b-card class=\"m-0\" v-show=\"status\">\r\n            <div>\r\n              <table border=\"1\">\r\n                <tr>\r\n                  <th>Status</th>\r\n\r\n                  <th>Data</th>\r\n                </tr>\r\n\r\n                <tr v-for=\"item in row.item.Rastreio\" :key=\"item.Id\">\r\n                  <td>{{ item.Evento }}</td>\r\n                  <td>{{ new Date(item.DataEvento).toLocaleString() }}</td>\r\n                </tr>\r\n              </table>\r\n\r\n              <br />\r\n            </div>\r\n          </b-card>\r\n        </template>\r\n\r\n        <!--\r\n          Footer personalizado para somar as colunas de valores\r\n        deixar o primeiro template em branco e preencher os outros com\r\n        as colunas que quero mostrar\r\n        -->\r\n        <template #foot()>\r\n          <div></div>\r\n        </template>\r\n\r\n        <template #foot(ValorComFrete)>\r\n          <div>{{ valor | R$ }}</div>\r\n        </template>\r\n\r\n        <template #foot(ValorFrete)>\r\n          <div>{{ valorFrete | R$ }}</div>\r\n        </template>\r\n      </b-table>\r\n\r\n      <b-row id=\"pagination\" class=\"m-2\">\r\n        <div>\r\n          <b-input style=\"width: 50px\" v-model=\"porPagina\"></b-input>\r\n        </div>\r\n\r\n        <b-pagination\r\n          id=\"pagination\"\r\n          :total-rows=\"pedidosTotaisCount\"\r\n          :per-page=\"porPagina\"\r\n          aria-controls=\"my-table\"\r\n          v-model=\"paginaAtiva\"\r\n        ></b-pagination>\r\n      </b-row>\r\n    </b-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nimport API from \"../../../services/api.service\";\r\nimport loading from \"../../../store/loading\";\r\n\r\nexport default {\r\n  name: \"pedidosb2bb2c\",\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      filtro: \"\",\r\n      marca: false,\r\n      numero: \"\",\r\n      utilizouFiltro: \"\",\r\n      status: false,\r\n      oc: false,\r\n\r\n      filterOn: [\r\n        \"Itens\",\r\n        \"EntregaEmAtraso\",\r\n        \"Fantasia\",\r\n        \"Numero\",\r\n        \"PedidoHubURL\",\r\n        \"OCKappes\",\r\n        \"Cidade\",\r\n        \"Cliente\",\r\n        \"Estado\",\r\n        \"Numero_Nota\",\r\n        \"OrdemCompra\",\r\n        \"Transportadora\",\r\n        \"Romaneio\",\r\n        \"OcId\",\r\n      ],\r\n      dataInicial: new Date(1609549200000),\r\n      dataFinal: \"\",\r\n\r\n      pedidosList: [],\r\n      filtrado: [],\r\n      marcaslistselect: [],\r\n      marcaslist: [],\r\n      itensPedidoGet: [],\r\n      empresalistselect: [],\r\n      empresalist: [],\r\n      statusList: [],\r\n      statusListSelected: [],\r\n      selectedPedidos: [],\r\n\r\n      porPagina: 20,\r\n      paginaAtiva: 1,\r\n\r\n      fields: [\r\n        {\r\n          key: \"Empresa\",\r\n          sortable: true,\r\n          label: \"Empresa\",\r\n          visible: true,\r\n        },\r\n\r\n        {\r\n          key: \"OCKappes\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"OC Kappes\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Numero\",\r\n          sortable: true,\r\n          label: \"Pedido\",\r\n          visible: true,\r\n          _showDetails: false,\r\n        },\r\n        {\r\n          key: \"DataCompra\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Data\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Percentual\",\r\n          sortable: false,\r\n          label: \"Perc Coleta\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"PedidoHubURL\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"OC Parceiro\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Transportadora\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Fantasia\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Cliente\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Telefone\",\r\n          sortable: true,\r\n          visible: true,\r\n          label: \"Fone\",\r\n        },\r\n        {\r\n          key: \"Cidade\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Estado\",\r\n          sortable: true,\r\n          label: \"UF\",\r\n          tdClass: \"text-nowrap\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Status\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          visible: true,\r\n          _showDetails: false,\r\n        },\r\n        {\r\n          key: \"DataStatus\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"ValorComFrete\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Valor\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"ValorFrete\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"ValorFreteDestacado\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          visible: true,\r\n          label: \"Destacado\",\r\n        },\r\n        {\r\n          key: \"Romaneio\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Numero_Nota\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Nota\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"DiasEntregaTransp\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"DiasEntregaTransp\",\r\n          sortable: true,\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"PrazoEntrega\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Previsao Entrega\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Actions\",\r\n          sortable: false,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Ações\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Redespacho\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Redespacho\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"DiasAtraso\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Dias Atraso\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"DataRealEntrega\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Data Entrega\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Observacao\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"OBS\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"cotacaoid\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"CotaçãoId\",\r\n          visible: true,\r\n        },\r\n\r\n        {\r\n          key: \"Rastreio\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Rastreio\",\r\n          visible: false,\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  created() {\r\n    this.acthome(\"/vendaB2B\");\r\n    this.buscarUltimaPesquisaB2B().then(() => {\r\n      this.pedidosList = [];\r\n      this.buscarMarca();\r\n      this.buscarEmpresa();\r\n      this.buscarStatus();\r\n    });\r\n  },\r\n  beforeMount() {\r\n    this.buscarMarca();\r\n    this.buscarEmpresa();\r\n    this.buscarStatus();\r\n  },\r\n\r\n  computed: {\r\n    pedidosTotaisCount() {\r\n      return this.pedidosList.length;\r\n    },\r\n    pedidosFields() {\r\n      return this.fields.filter((f) => f.visible);\r\n      //filter((f) => f.visible);\r\n    },\r\n\r\n    pedidosListEmpresa() {\r\n      return this.filtrado.filter((res) =>\r\n        this.filtroEmpresas.find(\r\n          (e) => e == res.Empresa && res.Devolucao == this.Devolucao\r\n        )\r\n      );\r\n    },\r\n    params() {\r\n      return {\r\n        numero: this.row.numero,\r\n      };\r\n    },\r\n    valor() {\r\n      var sum = this.pedidosList.reduce(\r\n        (acumulador, valorAtual) => acumulador + valorAtual.ValorComFrete,\r\n        0\r\n      );\r\n      return Math.round(sum * 100) / 100;\r\n    },\r\n    valorFrete() {\r\n      var sum = this.pedidosList.reduce(\r\n        (acumulador, valorAtual) => acumulador + valorAtual.ValorFrete,\r\n        0\r\n      );\r\n      return Math.round(sum * 100) / 100;\r\n    },\r\n  },\r\n  methods: {\r\n    criarObjetoPedidoSelecionado(numero, empresa, cep) {\r\n      return {\r\n        numero: numero,\r\n        empresa: empresa,\r\n        cep: cep,\r\n      };\r\n    },\r\n\r\n    enviarPedidosSelecionados() {\r\n      const pedidosParaEnviar = this.selectedPedidos.map((pedido) => {\r\n        const numero = pedido.Numero;\r\n        const empresa = pedido.Empresa;\r\n        const cep = pedido.CEP;\r\n\r\n        return this.criarObjetoPedidoSelecionado(numero, empresa, cep);\r\n      });\r\n\r\n      API.post(\"v2/Servicos/PedidosInsereTempPedidosCotacao/Post\", {\r\n        pedidos: pedidosParaEnviar,\r\n      })\r\n        .then((response) => {\r\n          this.$root.toastsuccess(\"Pedido Enviado com Sucesso!\");\r\n          this.selectedPedidos = [];\r\n        })\r\n        .catch((error) => {\r\n          this.$root.toastdanger(api.data.Error);\r\n        });\r\n    },\r\n    ...mapActions([\"acthome\"]),\r\n    onRowSelected(items) {\r\n      const selectedItems = items.map((item) => ({\r\n        Numero: item.Numero,\r\n        Empresa: item.Empresa,\r\n        CEP: item.CEP,\r\n      }));\r\n\r\n      this.selectedPedidos = selectedItems;\r\n    },\r\n    detalhes(row, text) {\r\n      if (\r\n        row.item._showDetails == undefined ||\r\n        row.item._showDetails == false\r\n      ) {\r\n        if (text == \"status\") {\r\n          this.status = true;\r\n        } else if (text == \"oc\") {\r\n          this.oc = true;\r\n          this.bucaItensPedido(row.item.Numero);\r\n        }\r\n        row.item._showDetails = true;\r\n      } else {\r\n        row.item._showDetails = false;\r\n        this.status = false;\r\n        this.oc = false;\r\n      }\r\n    },\r\n\r\n    async FiltroPedidos() {\r\n      if (this.dataFinal == null || this.dataFinal == \"\") {\r\n        this.dataFinal = new Date();\r\n      }\r\n\r\n      const diffMeses = Math.abs(\r\n        new Date(this.dataFinal).getMonth() -\r\n          new Date(this.dataInicial).getMonth() +\r\n          12 *\r\n            (new Date(this.dataFinal).getFullYear() -\r\n              new Date(this.dataInicial).getFullYear())\r\n      );\r\n      //Verificando se a diferença é maior que 3 meses\r\n\r\n      await this.salvarPesquisasB2B();\r\n      this.loading = true;\r\n      API.post(\"v2/Servicos/B2BPedidos/Get\", {\r\n        dataInicial: this.dataInicial,\r\n        dataFinal: this.dataFinal,\r\n        empresa: this.empresalistselect,\r\n        marca: this.marcaslistselect,\r\n        status: this.statusListSelected,\r\n        fields: this.fields,\r\n      }).then((result) => {\r\n        console.log(\"result\", result.data);\r\n        if (result.data.Success) {\r\n          this.pedidosList = result.data.Data;\r\n          this.filtrado = result.data.Data;\r\n          this.utilizouFiltro = new Date();\r\n        }\r\n        this.loading = false;\r\n      });\r\n    },\r\n\r\n    async salvarPesquisasB2B() {\r\n      const ultimaPesquisaB2B = {\r\n        status: this.statusListSelected,\r\n        dataInicial: this.dataInicial,\r\n        dataFinal: this.dataFinal,\r\n        porPagina: this.porPagina,\r\n        fields: this.fields,\r\n        filtroEmpresas: this.filtroEmpresas,\r\n        empresa: this.empresalistselect,\r\n        marca: this.marcaslistselect,\r\n      };\r\n      await localStorage.setItem(\r\n        \"ultimaPesquisaB2B\",\r\n        JSON.stringify(ultimaPesquisaB2B)\r\n      );\r\n    },\r\n\r\n    async buscarUltimaPesquisaB2B() {\r\n      const pesquisaB2B = await localStorage.getItem(\"ultimaPesquisaB2B\");\r\n      if (pesquisaB2B) {\r\n        this.statusListSelected = JSON.parse(pesquisaB2B).status\r\n          ? JSON.parse(pesquisaB2B).status\r\n          : this.status;\r\n        this.dataInicial = JSON.parse(pesquisaB2B).dataInicial\r\n          ? JSON.parse(pesquisaB2B).dataInicial\r\n          : this.dataInicial;\r\n        this.dataFinal = JSON.parse(pesquisaB2B).dataFinal\r\n          ? JSON.parse(pesquisaB2B).dataFinal\r\n          : this.dataFinal;\r\n        this.porPagina = JSON.parse(pesquisaB2B).porPagina\r\n          ? JSON.parse(pesquisaB2B).porPagina\r\n          : this.porPagina;\r\n        // adicionar as fields para as colunas\r\n        const fields = JSON.parse(pesquisaB2B).fields\r\n          ? JSON.parse(pesquisaB2B).fields\r\n          : this.fields;\r\n        this.fields.map((f) => {\r\n          f.visible = fields.find((x) => x.key == f.key).visible || true;\r\n        });\r\n        this.filtroEmpresas = JSON.parse(pesquisaB2B).filtroEmpresas\r\n          ? JSON.parse(pesquisaB2B).filtroEmpresas\r\n          : this.filtroEmpresas;\r\n        this.empresalistselect = JSON.parse(pesquisaB2B).empresa\r\n          ? JSON.parse(pesquisaB2B).empresa\r\n          : this.empresa;\r\n        this.marcaslistselect = JSON.parse(pesquisaB2B).marca\r\n          ? JSON.parse(pesquisaB2B).marca\r\n          : this.marca;\r\n        this.FiltroPedidos();\r\n      }\r\n    },\r\n\r\n    clearInicialDate() {\r\n      this.dataInicial = \"\";\r\n    },\r\n\r\n    clearFinalDate() {\r\n      this.dataFinal = \"\";\r\n    },\r\n\r\n    bucaItensPedido(numero) {\r\n      API.get(\"v2/Servicos/EcommerceB2BItensPed/Get\", { numero }).then(\r\n        (api) => {\r\n          if (api.data.Success == \"True\" || api.data.Success) {\r\n            this.itensPedidoGet = api.data.Data;\r\n          } else {\r\n            this.itensPedidoGet = [];\r\n          }\r\n        }\r\n      );\r\n    },\r\n    buscarStatus() {\r\n      API.get(\"v2/Servicos/VendasB2BStatus/Get\").then((api) => {\r\n        if (api.data.Success == \"True\" || api.data.Success) {\r\n          this.statusList = api.data.Data;\r\n        } else {\r\n          this.statusList = [];\r\n        }\r\n      });\r\n    },\r\n    buscarMarca() {\r\n      API.get(\"v2/Servicos/IntranetEcommerceB2BMarcas/Get\").then((api) => {\r\n        if (api.data.Success == \"True\" || api.data.Success) {\r\n          this.marcaslist = api.data.Data;\r\n        } else {\r\n          this.marcaslist = [];\r\n        }\r\n      });\r\n    },\r\n    buscarEmpresa() {\r\n      API.get(\"v2/Servicos/IntranetEcommerceB2BEmpresas/Get\").then((api) => {\r\n        if (api.data.Success == \"True\" || api.data.Success) {\r\n          this.empresalist = api.data.Data;\r\n        } else {\r\n          this.empresalist = [];\r\n        }\r\n      });\r\n    },\r\n    /* DRAG COLUMNS */\r\n    dragStart(e) {\r\n      console.log(\"dragStart in :\", e.target.id);\r\n      this.dragfieldstart = e.target.id;\r\n    },\r\n    dragEnter(e) {\r\n      e.preventDefault();\r\n      e.target.classList.add(\"drag-over\");\r\n    },\r\n\r\n    dragOver(e) {\r\n      e.preventDefault();\r\n      e.target.classList.add(\"drag-over\");\r\n    },\r\n\r\n    dragLeave(e) {\r\n      e.target.classList.remove(\"drag-over\");\r\n    },\r\n\r\n    drop(e) {\r\n      console.log(\"drop in :\", e.target.id);\r\n      e.target.classList.remove(\"drag-over\");\r\n      // move o from para o to\r\n      this.changecolumns(this.dragfieldstart, e.target.id);\r\n    },\r\n    changecolumns(ColumnA, ColumnB) {\r\n      const start = this.fields.findIndex((f) => (f.key || f) == ColumnA);\r\n      let from = start;\r\n      let to = this.fields.findIndex((f) => (f.key || f) == ColumnB);\r\n      // move a colunaA para o indice da coluna B\r\n      this.move(from, to);\r\n      // move a colunaA para o indice da coluna B\r\n      //from = this.fields.findIndex((f) => (f.key || f) == ColumnB);\r\n      //to = start;\r\n      //this.move(from, to);\r\n    },\r\n    move(from, to) {\r\n      this.fields.splice(to, 0, this.fields.splice(from, 1)[0]);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n#divPrincipalvendab2b {\r\n  font-size: 11px;\r\n}\r\n\r\n#center {\r\n  display: block;\r\n}\r\n\r\n#row {\r\n  justify-content: space-between;\r\n  margin: 1px, 1px, 1px, 1px;\r\n}\r\n\r\n#linkTabela {\r\n  color: blue;\r\n}\r\n\r\n#botoes {\r\n  width: min-content;\r\n  white-space: nowrap;\r\n  margin: 2px;\r\n}\r\n\r\n#inputDate {\r\n  width: 350px;\r\n}\r\n\r\n#pagination {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.drag-over {\r\n  background-color: silver;\r\n  border-right: 5px solid lightgreen;\r\n  border-left: 5px solid lightgreen;\r\n}\r\n.table-dark th,\r\n.table-dark td,\r\n.table-dark thead th {\r\n  background-color: lightgray;\r\n  color: black;\r\n}\r\n.card-body {\r\n  min-height: 107px;\r\n}\r\n.border-right {\r\n  border-right: 2px solid black !important;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n}\r\nh2 {\r\n  font-weight: bold;\r\n}\r\nh6 {\r\n  font-weight: bold;\r\n  font-size: 16px;\r\n}\r\n.teste {\r\n  margin: auto;\r\n  margin-top: 10px;\r\n  white-space: nowrap;\r\n}\r\n@media screen and (max-width: 600px) {\r\n  .border-right {\r\n    display: none;\r\n  }\r\n}\r\n</style>\r\n"]}]}