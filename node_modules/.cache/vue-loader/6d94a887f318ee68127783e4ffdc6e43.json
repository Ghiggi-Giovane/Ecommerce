{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\ramais\\views\\historico.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\ramais\\views\\historico.vue","mtime":1670977910663},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJIaXN0b3JpY29DYWxscyIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGZpbHRybzogIiIsDQogICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgIHBlclBhZ2U6IDEwLA0KICAgICAgdG90YWxSb3dzOiAxLA0KICAgICAgY2FsbHM6IHsNCiAgICAgICAgZGF0YWJhc2U6IHRoaXMuZGF0YWJhc2UsDQogICAgICAgIGlkcmFtYWw6IHRoaXMuaWRyYW1hbCwNCiAgICAgICAgcmFtYWw6IHRoaXMucmFtYWwsDQogICAgICB9LA0KICAgICAgYWN0aW9uczogWw0KICAgICAgICB7DQogICAgICAgICAgaWQ6IDEsDQogICAgICAgICAgdGV4dDogIkVkaXRhciIsDQogICAgICAgICAgdmFsdWU6ICJidEVkaXRhciIsDQogICAgICAgICAgaWNvbjogInBlbmNpbCIsDQogICAgICAgICAgdmFyaWFudDogInN1Y2Nlc3MiLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgaWQ6IDIsDQogICAgICAgICAgdGV4dDogIkV4Y2x1aXIiLA0KICAgICAgICAgIHZhbHVlOiAiYnRFeGNsdWlyIiwNCiAgICAgICAgICBpY29uOiAidHJhc2giLA0KICAgICAgICAgIHZhcmlhbnQ6ICJkYW5nZXIiLA0KICAgICAgICB9LA0KICAgICAgXSwNCiAgICB9Ow0KICB9LA0KDQogIHByb3BzOiB7DQogICAgZGF0YWJhc2U6IHsNCiAgICAgIHR5cGU6IERhdGUsDQogICAgfSwNCiAgICBpZHJhbWFsOiB7DQogICAgICB0eXBlOiBOdW1iZXIsDQogICAgfSwNCiAgICByYW1hbDogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgIH0sDQogIH0sDQoNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBHZXR0ZXJzKFsiZ3R4Q2FsbHNEYXRhIiwgImd0eENvbmZpZ0RhdGV0aW1lUGlja2VyRm9ybWF0Il0pLA0KDQogICAgcGFyYW1zY2FsbHMoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBkYXRhYmFzZToNCiAgICAgICAgICB0aGlzLmNhbGxzLmRhdGFiYXNlIHx8DQogICAgICAgICAgbmV3IERhdGUobmV3IERhdGUoKS5zZXREYXRlKG5ldyBEYXRlKCkuZ2V0RGF0ZSgpIC0gMSkpLA0KICAgICAgICBpZHJhbWFsOiB0aGlzLmNhbGxzLmlkcmFtYWwgfHwgbnVsbCwNCiAgICAgICAgcmFtYWw6IHRoaXMuY2FsbHMucmFtYWwgfHwgIiIsDQogICAgICB9Ow0KICAgIH0sDQoNCiAgICB0YmxjYWxscygpIHsNCiAgICAgIHJldHVybiB0aGlzLmd0eENhbGxzRGF0YS5jYWxsczsNCiAgICB9LA0KDQogICAgZmllbGRzKCkgew0KICAgICAgcmV0dXJuIFsNCiAgICAgICAgeyBrZXk6ICJEYXRhQ2FsbCIsIGxhYmVsOiAiRGF0YSIgfSwNCiAgICAgICAgeyBrZXk6ICJBbm90YWNhbyIsIGxhYmVsOiAiQW5vdGHDp8OjbyIgfSwNCiAgICAgICAgImFjdGlvbnMiLA0KICAgICAgXTsNCiAgICB9LA0KDQogICAgZmlsdGVyT24oKSB7DQogICAgICByZXR1cm4gWyJEYXRhQ2FsbCIsICJBbm90YWNhbyJdOw0KICAgIH0sDQogIH0sDQoNCiAgYmVmb3JlTW91bnQoKSB7DQogICAgdGhpcy5nZXRDYWxscygpOw0KICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICAuLi5tYXBBY3Rpb25zKFsiYWN0UmFtYWlzQ2FsbHMiXSksDQoNCiAgICBnZXRDYWxscygpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKCJnZXRDYWxsczoiLCB0aGlzLnBhcmFtc2NhbGxzKTsNCiAgICAgIHRoaXMuYWN0UmFtYWlzQ2FsbHModGhpcy5wYXJhbXNjYWxscyk7DQogICAgfSwNCg0KICAgIG9uRmlsdGVyZWQoZmlsdGVyZWRJdGVtcykgew0KICAgICAgLy8gVHJpZ2dlciBwYWdpbmF0aW9uIHRvIHVwZGF0ZSB0aGUgbnVtYmVyIG9mIGJ1dHRvbnMvcGFnZXMgZHVlIHRvIGZpbHRlcmluZw0KICAgICAgdGhpcy50b3RhbFJvd3MgPSBmaWx0ZXJlZEl0ZW1zLmxlbmd0aDsNCiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAxOw0KICAgIH0sDQoNCiAgICBldnRBY3Rpb25zKGJ1dHRvbiwgZGF0YSkgew0KICAgICAgY29uc3QgZW1pdCA9IHsgLi4ueyBidXR0b246IGJ1dHRvbiB9LCAuLi57IGRhdGE6IGRhdGEgfSB9Ow0KICAgICAgdGhpcy4kZW1pdCgiZXZ0LWFjdGlvbnMiLCBlbWl0KTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["historico.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"historico.vue","sourceRoot":"src/pages/ramais/views","sourcesContent":["<template>\r\n  <div>\r\n    <b-row>\r\n      <b-col>\r\n        <label for=\"form-database\">Data Ligação</label>\r\n        <b-form-datepicker\r\n          id=\"form-database\"\r\n          v-model=\"calls.database\"\r\n          class=\"mb-2\"\r\n          locale=\"pt\"\r\n          size=\"sm\"\r\n          :date-format-options=\"gtxConfigDatetimePickerFormat\"\r\n        ></b-form-datepicker>\r\n      </b-col>\r\n    </b-row>\r\n    <b-row>\r\n      <b-col class=\"text-right\">\r\n        <b-button variant=\"primary\" size=\"sm\" @click=\"getCalls()\">\r\n          Pesquisar\r\n        </b-button>\r\n      </b-col>\r\n    </b-row>\r\n    <b-row>\r\n      <b-col>\r\n        <b-input-group prepend=\"Filtro\" size=\"sm\" class=\"mb-2\">\r\n          <b-form-input\r\n            id=\"input-filtro\"\r\n            type=\"search\"\r\n            v-model=\"filtro\"\r\n            placeholder=\"Informe o ramal ou nome\"\r\n          ></b-form-input>\r\n        </b-input-group>\r\n      </b-col>\r\n      <b-col cols=\"4\" class=\"float-right\">\r\n        <b-pagination\r\n          id=\"input-pagination\"\r\n          v-model=\"currentPage\"\r\n          :total-rows=\"totalRows\"\r\n          :per-page=\"perPage\"\r\n          size=\"sm\"\r\n          class=\"my-0\"\r\n        >\r\n        </b-pagination>\r\n      </b-col>\r\n    </b-row>\r\n    <b-table\r\n      small\r\n      striped\r\n      sort-icon-left\r\n      :items=\"tblcalls\"\r\n      :fields=\"fields\"\r\n      :filter=\"filtro\"\r\n      :current-page=\"currentPage\"\r\n      :per-page=\"perPage\"\r\n      :filter-included-fields=\"filterOn\"\r\n      @filtered=\"onFiltered\"\r\n    >\r\n      <template #cell(DataCall)=\"data\">\r\n        <span>{{ data.item.DataCall | datetime }}</span>\r\n      </template>\r\n      <template #cell(actions)=\"data\">\r\n        <span class=\"iconbutton\" :title=\"b.text\" v-for=\"(b, i) of actions\">\r\n          <b-icon\r\n            :icon=\"b.icon\"\r\n            :variant=\"b.variant\"\r\n            @click=\"evtActions(b, data.item)\"\r\n          />\r\n        </span>\r\n      </template>\r\n    </b-table>\r\n    <!--\r\n    <json-viewer :value=\"paramscalls\" :expand-depth=\"5\" copyable boxed sort>\r\n    </json-viewer>\r\n    <json-viewer :value=\"gtxCallsData\" :expand-depth=\"5\" copyable boxed sort>\r\n    </json-viewer>\r\n    -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nexport default {\r\n  name: \"HistoricoCalls\",\r\n  data() {\r\n    return {\r\n      filtro: \"\",\r\n      currentPage: 1,\r\n      perPage: 10,\r\n      totalRows: 1,\r\n      calls: {\r\n        database: this.database,\r\n        idramal: this.idramal,\r\n        ramal: this.ramal,\r\n      },\r\n      actions: [\r\n        {\r\n          id: 1,\r\n          text: \"Editar\",\r\n          value: \"btEditar\",\r\n          icon: \"pencil\",\r\n          variant: \"success\",\r\n        },\r\n        {\r\n          id: 2,\r\n          text: \"Excluir\",\r\n          value: \"btExcluir\",\r\n          icon: \"trash\",\r\n          variant: \"danger\",\r\n        },\r\n      ],\r\n    };\r\n  },\r\n\r\n  props: {\r\n    database: {\r\n      type: Date,\r\n    },\r\n    idramal: {\r\n      type: Number,\r\n    },\r\n    ramal: {\r\n      type: String,\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"gtxCallsData\", \"gtxConfigDatetimePickerFormat\"]),\r\n\r\n    paramscalls() {\r\n      return {\r\n        database:\r\n          this.calls.database ||\r\n          new Date(new Date().setDate(new Date().getDate() - 1)),\r\n        idramal: this.calls.idramal || null,\r\n        ramal: this.calls.ramal || \"\",\r\n      };\r\n    },\r\n\r\n    tblcalls() {\r\n      return this.gtxCallsData.calls;\r\n    },\r\n\r\n    fields() {\r\n      return [\r\n        { key: \"DataCall\", label: \"Data\" },\r\n        { key: \"Anotacao\", label: \"Anotação\" },\r\n        \"actions\",\r\n      ];\r\n    },\r\n\r\n    filterOn() {\r\n      return [\"DataCall\", \"Anotacao\"];\r\n    },\r\n  },\r\n\r\n  beforeMount() {\r\n    this.getCalls();\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"actRamaisCalls\"]),\r\n\r\n    getCalls() {\r\n      // console.log(\"getCalls:\", this.paramscalls);\r\n      this.actRamaisCalls(this.paramscalls);\r\n    },\r\n\r\n    onFiltered(filteredItems) {\r\n      // Trigger pagination to update the number of buttons/pages due to filtering\r\n      this.totalRows = filteredItems.length;\r\n      this.currentPage = 1;\r\n    },\r\n\r\n    evtActions(button, data) {\r\n      const emit = { ...{ button: button }, ...{ data: data } };\r\n      this.$emit(\"evt-actions\", emit);\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}