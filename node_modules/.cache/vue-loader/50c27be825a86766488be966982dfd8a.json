{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\ecommerce\\views\\Pedidos.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\ecommerce\\views\\Pedidos.vue","mtime":1670977910623},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7DQppbXBvcnQgQXBpU2VydmljZSBmcm9tICIuLi8uLi8uLi9zZXJ2aWNlcy9hcGkuc2VydmljZSI7DQppbXBvcnQgQWNvbXBhbmhhbWVudG9zVnVlIGZyb20gIi4uLy4uLy4uL2NvbXBvbmVudHMvQWNvbXBhbmhhbWVudG9zLnZ1ZSI7DQppbXBvcnQgbG9hZGluZyBmcm9tICIuLi8uLi8uLi9zdG9yZS9sb2FkaW5nIjsNCmltcG9ydCB7IHRpbWVvdXQgfSBmcm9tICJxIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiRWNvbW1lcmNlUGVkaWRvcyIsDQogIGNvbXBvbmVudHM6IHsNCiAgICBBY29tcGFuaGFtZW50b3NWdWUsDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGFjb21wYW5oYW1lbnRvSUQ6IDAsDQogICAgICBtb3Rpdm86ICIiLA0KICAgICAgbW90aXZvU3RhdGU6IG51bGwsDQogICAgICB2aXNpdmVsOiAiIiwNCiAgICAgIGZpbHRybzogIiIsDQogICAgICBmaWx0ZXJPbjogWw0KICAgICAgICAiSXRlbnMiLA0KICAgICAgICAiRW50cmVnYUVtQXRyYXNvIiwNCiAgICAgICAgIkZhbnRhc2lhIiwNCiAgICAgICAgIk51bWVybyIsDQogICAgICAgICJQZWRpZG9IdWJVUkwiLA0KICAgICAgICAiT0NLYXBwZXMiLA0KICAgICAgICAiQ2lkYWRlIiwNCiAgICAgICAgIkNsaWVudGUiLA0KICAgICAgICAiRXN0YWRvIiwNCiAgICAgICAgIk1hcmtldFBsYWNlIiwNCiAgICAgICAgIk51bWVyb19Ob3RhIiwNCiAgICAgICAgIk9yZGVtQ29tcHJhIiwNCiAgICAgICAgIlRyYW5zcG9ydGFkb3JhIiwNCiAgICAgICAgIlJvbWFuZWlvIiwNCiAgICAgICAgIk9jSWQiLA0KICAgICAgICAiUmVkZXNwYWNobyIsDQogICAgICBdLA0KICAgICAgZmlsdHJvRW1wcmVzYXM6IFsiOCIsICIzNCJdLA0KICAgICAgcG9yUGFnaW5hOiAyMCwNCiAgICAgIHBhZ2luYUF0aXZhOiAxLA0KICAgICAgbWFya2V0UGxhY2VzTGlzdFNlbGVjdGVkOiBbXSwNCiAgICAgIHN0YXR1c0xpc3RTZWxlY3RlZDogW10sDQogICAgICB1dGlsaXpvdUZpbHRybzogIiIsDQogICAgICBmaWx0cmFkbzogW10sDQoNCiAgICAgIGxvYWRpbmc6IGZhbHNlLA0KICAgICAgc29tZW50ZUF0cmFzYWRvczogIiIsDQogICAgICBwZWRpZG9zQXRyYXNhZG9zOiBbXSwNCg0KICAgICAgb2M6IGZhbHNlLA0KICAgICAgc3RhdHVzOiBmYWxzZSwNCg0KICAgICAgZGF0YUluaWNpYWw6IG5ldyBEYXRlKDE2MDk1NDkyMDAwMDApLA0KICAgICAgZGF0YUZpbmFsOiAiIiwNCg0KICAgICAgbWFya2V0UGxhY2VzTGlzdDogW10sDQogICAgICBzdGF0dXNMaXN0OiBbXSwNCiAgICAgIHBlZGlkb3NMaXN0OiBbXSwNCiAgICAgIGZpZWxkczogWw0KICAgICAgICB7DQogICAgICAgICAga2V5OiAiRW1wcmVzYSIsDQogICAgICAgICAgc29ydGFibGU6IHRydWUsDQogICAgICAgICAgbGFiZWw6ICJFbXByZXNhIiwNCiAgICAgICAgICB2aXNpYmxlOiB0cnVlLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAiT2NJZCIsDQogICAgICAgICAgc29ydGFibGU6IHRydWUsDQogICAgICAgICAgbGFiZWw6ICJJZCBPQyIsDQogICAgICAgICAgdmlzaWJsZTogdHJ1ZSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGtleTogIk9DS2FwcGVzIiwNCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwNCiAgICAgICAgICB0ZENsYXNzOiAidGV4dC1ub3dyYXAiLA0KICAgICAgICAgIGxhYmVsOiAiT0MgS2FwcGVzIiwNCiAgICAgICAgICB2aXNpYmxlOiB0cnVlLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAiTnVtZXJvIiwNCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwNCiAgICAgICAgICBsYWJlbDogIlBlZGlkbyIsDQogICAgICAgICAgdmlzaWJsZTogdHJ1ZSwNCiAgICAgICAgICBfc2hvd0RldGFpbHM6IGZhbHNlLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAiRGF0YUNvbXByYSIsDQogICAgICAgICAgc29ydGFibGU6IHRydWUsDQogICAgICAgICAgdGRDbGFzczogInRleHQtbm93cmFwIiwNCiAgICAgICAgICBsYWJlbDogIkRhdGEiLA0KICAgICAgICAgIHZpc2libGU6IHRydWUsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICJQZXJjZW50dWFsIiwNCiAgICAgICAgICBzb3J0YWJsZTogZmFsc2UsDQogICAgICAgICAgbGFiZWw6ICJQZXJjIENvbGV0YSIsDQogICAgICAgICAgdmlzaWJsZTogdHJ1ZSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGtleTogIlBlZGlkb0h1YlVSTCIsDQogICAgICAgICAgc29ydGFibGU6IHRydWUsDQogICAgICAgICAgdGRDbGFzczogInRleHQtbm93cmFwIiwNCiAgICAgICAgICBsYWJlbDogIk9DIFBhcmNlaXJvIiwNCiAgICAgICAgICB2aXNpYmxlOiB0cnVlLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAiTWFya2V0UGxhY2UiLA0KICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLA0KICAgICAgICAgIHRkQ2xhc3M6ICJ0ZXh0LW5vd3JhcCIsDQogICAgICAgICAgbGFiZWw6ICJNYXJrZXRwbGFjZSIsDQogICAgICAgICAgdmlzaWJsZTogdHJ1ZSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGtleTogIlRyYW5zcG9ydGFkb3JhIiwNCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwNCiAgICAgICAgICB0ZENsYXNzOiAidGV4dC1ub3dyYXAiLA0KICAgICAgICAgIHZpc2libGU6IHRydWUsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICJGYW50YXNpYSIsDQogICAgICAgICAgc29ydGFibGU6IHRydWUsDQogICAgICAgICAgdGRDbGFzczogInRleHQtbm93cmFwIiwNCiAgICAgICAgICBsYWJlbDogIkNsaWVudGUiLA0KICAgICAgICAgIHZpc2libGU6IHRydWUsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICJUZWxlZm9uZSIsDQogICAgICAgICAgc29ydGFibGU6IHRydWUsDQogICAgICAgICAgdmlzaWJsZTogdHJ1ZSwNCiAgICAgICAgICBsYWJlbDogIkZvbmUiLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAiQ2lkYWRlIiwNCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwNCiAgICAgICAgICB0ZENsYXNzOiAidGV4dC1ub3dyYXAiLA0KICAgICAgICAgIHZpc2libGU6IHRydWUsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICJFc3RhZG8iLA0KICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLA0KICAgICAgICAgIGxhYmVsOiAiVUYiLA0KICAgICAgICAgIHRkQ2xhc3M6ICJ0ZXh0LW5vd3JhcCIsDQogICAgICAgICAgdmlzaWJsZTogdHJ1ZSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGtleTogIlN0YXR1cyIsDQogICAgICAgICAgc29ydGFibGU6IHRydWUsDQogICAgICAgICAgdGRDbGFzczogInRleHQtbm93cmFwIiwNCiAgICAgICAgICB2aXNpYmxlOiB0cnVlLA0KICAgICAgICAgIF9zaG93RGV0YWlsczogZmFsc2UsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICJEYXRhU3RhdHVzIiwNCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwNCiAgICAgICAgICB0ZENsYXNzOiAidGV4dC1ub3dyYXAiLA0KICAgICAgICAgIHZpc2libGU6IHRydWUsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICJWYWxvckNvbUZyZXRlIiwNCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwNCiAgICAgICAgICB0ZENsYXNzOiAidGV4dC1ub3dyYXAiLA0KICAgICAgICAgIGxhYmVsOiAiVmFsb3IiLA0KICAgICAgICAgIHZpc2libGU6IHRydWUsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICJWYWxvckZyZXRlIiwNCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwNCiAgICAgICAgICB0ZENsYXNzOiAidGV4dC1ub3dyYXAiLA0KICAgICAgICAgIHZpc2libGU6IHRydWUsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICJWYWxvckZyZXRlRGVzdGFjYWRvIiwNCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwNCiAgICAgICAgICB0ZENsYXNzOiAidGV4dC1ub3dyYXAiLA0KICAgICAgICAgIHZpc2libGU6IHRydWUsDQogICAgICAgICAgbGFiZWw6ICJEZXN0YWNhZG8iLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAiUm9tYW5laW8iLA0KICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLA0KICAgICAgICAgIHRkQ2xhc3M6ICJ0ZXh0LW5vd3JhcCIsDQogICAgICAgICAgdmlzaWJsZTogdHJ1ZSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGtleTogIk51bWVyb19Ob3RhIiwNCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwNCiAgICAgICAgICB0ZENsYXNzOiAidGV4dC1ub3dyYXAiLA0KICAgICAgICAgIGxhYmVsOiAiTm90YSIsDQogICAgICAgICAgdmlzaWJsZTogdHJ1ZSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGtleTogIkRhdGFQcmV2aXNhb0VudHJlZ2EiLA0KICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLA0KICAgICAgICAgIHRkQ2xhc3M6ICJ0ZXh0LW5vd3JhcCIsDQogICAgICAgICAgbGFiZWw6ICJQcmV2aXNhbyBFbnRyZWdhIiwNCiAgICAgICAgICB2aXNpYmxlOiB0cnVlLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAiQWN0aW9ucyIsDQogICAgICAgICAgc29ydGFibGU6IGZhbHNlLA0KICAgICAgICAgIHRkQ2xhc3M6ICJ0ZXh0LW5vd3JhcCIsDQogICAgICAgICAgbGFiZWw6ICJBw6fDtWVzIiwNCiAgICAgICAgICB2aXNpYmxlOiB0cnVlLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAiUmVkZXNwYWNobyIsDQogICAgICAgICAgc29ydGFibGU6IHRydWUsDQogICAgICAgICAgdGRDbGFzczogInRleHQtbm93cmFwIiwNCiAgICAgICAgICBsYWJlbDogIlJlZGVzcGFjaG8iLA0KICAgICAgICAgIHZpc2libGU6IHRydWUsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICJEaWFzQXRyYXNvIiwNCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwNCiAgICAgICAgICB0ZENsYXNzOiAidGV4dC1ub3dyYXAiLA0KICAgICAgICAgIGxhYmVsOiAiRGlhcyBBdHJhc28iLA0KICAgICAgICAgIHZpc2libGU6IHRydWUsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICJEYXRhUmVhbEVudHJlZ2EiLA0KICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLA0KICAgICAgICAgIHRkQ2xhc3M6ICJ0ZXh0LW5vd3JhcCIsDQogICAgICAgICAgbGFiZWw6ICJEYXRhIEVudHJlZ2EiLA0KICAgICAgICAgIHZpc2libGU6IHRydWUsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICJPYnNlcnZhY2FvIiwNCiAgICAgICAgICB0ZENsYXNzOiAidGV4dC1ub3dyYXAiLA0KICAgICAgICAgIGxhYmVsOiAiT0JTIiwNCiAgICAgICAgICB2aXNpYmxlOiB0cnVlLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAiUmFzdHJlaW8iLA0KICAgICAgICAgIHRkQ2xhc3M6ICJ0ZXh0LW5vd3JhcCIsDQogICAgICAgICAgbGFiZWw6ICJSYXN0cmVpbyIsDQogICAgICAgICAgdmlzaWJsZTogZmFsc2UsDQogICAgICAgIH0sDQogICAgICBdLA0KICAgICAgZHJhZ2ZpZWxkc3RhcnQ6ICIiLA0KICAgIH07DQogIH0sDQoNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmFjdGhvbWUoIi9lY29tbWVyY2UiKTsNCiAgICB0aGlzLmJ1c2NhclVsdGltYVBlc3F1aXNhKCk7DQogICAgdGhpcy5wZWRpZG9zTGlzdCA9IFtdOw0KICAgIHRoaXMuYnVzY2FyKCk7DQogIH0sDQoNCiAgLy8gYXN5bmMgbW91bnRlZCgpIHsNCiAgLy8gICBjb25zdCBwZXNxdWlzYSA9IGF3YWl0IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1bHRpbWFQZXNxdWlzYSIpOw0KDQogIC8vICAgdGhpcy5maWVsZHMubWFwKGUgPT4gew0KICAvLyAgICAgaWYgKEpTT04ucGFyc2UocGVzcXVpc2EpLmZpZWxkcy5maW5kKGYgPT4gZi5rZXkgPT0gZS5rZXkpKSB7DQogIC8vICAgICAgIGUudmlzaWJsZSA9IEpTT04ucGFyc2UocGVzcXVpc2EpLmZpZWxkcy5maW5kKA0KICAvLyAgICAgICAgIGYgPT4gZi5rZXkgPT0gZS5rZXkNCiAgLy8gICAgICAgKS52aXNpYmxlOw0KICAvLyAgICAgfSBlbHNlIHsNCiAgLy8gICAgICAgZS52aXNpYmxlID0gZmFsc2U7DQogIC8vICAgICB9DQogIC8vICAgfSk7DQogIC8vIH0sDQoNCiAgY29tcHV0ZWQ6IHsNCiAgICBwZWRpZG9zRmllbGRzKCkgew0KICAgICAgcmV0dXJuIHRoaXMuZmllbGRzLmZpbHRlcigoZikgPT4gZi52aXNpYmxlKTsNCiAgICB9LA0KDQogICAgcGVkaWRvc1RvdGFpc0NvdW50KCkgew0KICAgICAgcmV0dXJuIHRoaXMucGVkaWRvc0xpc3RFbXByZXNhLmxlbmd0aDsNCiAgICB9LA0KDQogICAgdmFsb3IoKSB7DQogICAgICB2YXIgc3VtID0gdGhpcy5wZWRpZG9zTGlzdEVtcHJlc2EucmVkdWNlKA0KICAgICAgICAoYWN1bXVsYWRvciwgdmFsb3JBdHVhbCkgPT4gYWN1bXVsYWRvciArIHZhbG9yQXR1YWwuVmFsb3JDb21GcmV0ZSwNCiAgICAgICAgMA0KICAgICAgKTsNCiAgICAgIHJldHVybiBNYXRoLnJvdW5kKHN1bSAqIDEwMCkgLyAxMDA7DQogICAgfSwNCiAgICB2YWxvckZyZXRlKCkgew0KICAgICAgdmFyIHN1bSA9IHRoaXMucGVkaWRvc0xpc3RFbXByZXNhLnJlZHVjZSgNCiAgICAgICAgKGFjdW11bGFkb3IsIHZhbG9yQXR1YWwpID0+IGFjdW11bGFkb3IgKyB2YWxvckF0dWFsLlZhbG9yRnJldGUsDQogICAgICAgIDANCiAgICAgICk7DQogICAgICByZXR1cm4gTWF0aC5yb3VuZChzdW0gKiAxMDApIC8gMTAwOw0KICAgIH0sDQoNCiAgICBwZWRpZG9zTGlzdEVtcHJlc2EoKSB7DQogICAgICByZXR1cm4gdGhpcy5maWx0cmFkby5maWx0ZXIoKHJlcykgPT4NCiAgICAgICAgdGhpcy5maWx0cm9FbXByZXNhcy5maW5kKChlKSA9PiBlID09IHJlcy5FbXByZXNhKQ0KICAgICAgKTsNCiAgICB9LA0KDQogICAgZW1wcmVzYSgpIHsNCiAgICAgIHJldHVybiB0aGlzLnBlZGlkb3NMaXN0LnJlZHVjZSgoYSwgYikgPT4gew0KICAgICAgICBpZiAoIWEuZmluZCgoZikgPT4gZi5FbXByZXNhID09IGIuRW1wcmVzYSkpIHsNCiAgICAgICAgICBhLnB1c2goeyBFbXByZXNhOiBiLkVtcHJlc2EsIE5vbWVFbXByZXNhOiBiLk5vbWVfRW1wcmVzYSB9KTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gYTsNCiAgICAgIH0sIFtdKTsNCiAgICB9LA0KICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICAuLi5tYXBBY3Rpb25zKFsiYWN0aG9tZSJdKSwNCg0KICAgIHJvd0NsYXNzKGl0ZW0sIHR5cGUpIHsNCiAgICAgIGlmICghaXRlbSB8fCB0eXBlICE9PSAicm93IikgcmV0dXJuOw0KICAgICAgaWYgKGl0ZW0uVmFsb3IgPCAwKSByZXR1cm4gInRhYmxlLWluZm8iOw0KICAgICAgaWYgKGl0ZW0uU3RhdHVzID09PSAiQ2FuY2VsYWRvIikgcmV0dXJuICJ0YWJsZS1kYW5nZXIiOw0KICAgICAgaWYgKGl0ZW0uU3RhdHVzID09PSAiQ3JpYWRvIikgcmV0dXJuICJ0YWJsZS1zdWNjZXNzIjsNCiAgICAgIGlmIChpdGVtLkVudHJlZ2FFbUF0cmFzbyA9PSB0cnVlKSByZXR1cm4gInRhYmxlLXdhcm5pbmciOw0KICAgIH0sDQoNCiAgICBvblJvd1NlbGVjdGVkKGl0ZW1zKSB7DQogICAgICAvLyBjb25zb2xlLmxvZyhpdGVtc1swXS5QZWRpZG9IdWJVUkwpOw0KICAgIH0sDQoNCiAgICBidXNjYXIoKSB7DQogICAgICBBcGlTZXJ2aWNlLmdldCgidjIvSW50cmFuZXRFY29tbWVyY2VCMkMvTWFya2V0cGxhY2VzL0NvbWJvIikudGhlbigNCiAgICAgICAgKHJlc3VsdCkgPT4gew0KICAgICAgICAgIHRoaXMubWFya2V0UGxhY2VzTGlzdCA9IHJlc3VsdC5kYXRhLkRhdGE7DQogICAgICAgIH0NCiAgICAgICk7DQogICAgICBBcGlTZXJ2aWNlLmdldCgidjIvSW50cmFuZXRFY29tbWVyY2VCMkMvUGVkaWRvcy9TdGF0dXMiKS50aGVuKA0KICAgICAgICAocmVzdWx0KSA9PiB7DQogICAgICAgICAgdGhpcy5zdGF0dXNMaXN0ID0gcmVzdWx0LmRhdGEuRGF0YTsNCiAgICAgICAgfQ0KICAgICAgKTsNCiAgICB9LA0KDQogICAgYXN5bmMgYnRuRmlsdHJvcygpIHsNCiAgICAgIGF3YWl0IHRoaXMuc2FsdmFyUGVzcXVpc2FzKCk7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgQXBpU2VydmljZS5wb3N0KCJ2Mi9JbnRyYW5ldEVjb21tZXJjZUIyQy9QZWRpZG9zL0dldCIsIHsNCiAgICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1c0xpc3RTZWxlY3RlZCwNCiAgICAgICAgbWFya2V0cGxhY2VzOiB0aGlzLm1hcmtldFBsYWNlc0xpc3RTZWxlY3RlZCwNCiAgICAgICAgZGF0YUluaWNpYWw6IHRoaXMuZGF0YUluaWNpYWwsDQogICAgICAgIGRhdGFGaW5hbDogdGhpcy5kYXRhRmluYWwsDQogICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coInJlc3VsdCIsIHJlc3VsdC5kYXRhKTsNCiAgICAgICAgaWYgKHJlc3VsdC5kYXRhLlN1Y2Nlc3MpIHsNCiAgICAgICAgICB0aGlzLnBlZGlkb3NMaXN0ID0gcmVzdWx0LmRhdGEuRGF0YTsNCiAgICAgICAgICB0aGlzLmZpbHRyYWRvID0gcmVzdWx0LmRhdGEuRGF0YTsNCiAgICAgICAgICB0aGlzLnV0aWxpem91RmlsdHJvID0gbmV3IERhdGUoKTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5lbXByZXNhczsNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICBhc3luYyBzYWx2YXJQZXNxdWlzYXMoKSB7DQogICAgICBjb25zdCB1bHRpbWFQZXNxdWlzYSA9IHsNCiAgICAgICAgbWFya2V0cGxhY2VzOiB0aGlzLm1hcmtldFBsYWNlc0xpc3RTZWxlY3RlZCwNCiAgICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1c0xpc3RTZWxlY3RlZCwNCiAgICAgICAgZGF0YUluaWNpYWw6IHRoaXMuZGF0YUluaWNpYWwsDQogICAgICAgIGRhdGFGaW5hbDogdGhpcy5kYXRhRmluYWwsDQogICAgICAgIHBvclBhZ2luYTogdGhpcy5wb3JQYWdpbmEsDQogICAgICAgIGZpZWxkczogdGhpcy5maWVsZHMsDQogICAgICAgIGZpbHRyb0VtcHJlc2FzOiB0aGlzLmZpbHRyb0VtcHJlc2FzLA0KICAgICAgfTsNCiAgICAgIGF3YWl0IGxvY2FsU3RvcmFnZS5zZXRJdGVtKA0KICAgICAgICAidWx0aW1hUGVzcXVpc2EiLA0KICAgICAgICBKU09OLnN0cmluZ2lmeSh1bHRpbWFQZXNxdWlzYSkNCiAgICAgICk7DQogICAgfSwNCg0KICAgIGFzeW5jIGJ1c2NhclVsdGltYVBlc3F1aXNhKCkgew0KICAgICAgY29uc3QgcGVzcXVpc2EgPSBhd2FpdCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidWx0aW1hUGVzcXVpc2EiKTsNCiAgICAgIHRoaXMuc3RhdHVzTGlzdFNlbGVjdGVkID0gSlNPTi5wYXJzZShwZXNxdWlzYSkuc3RhdHVzDQogICAgICAgID8gSlNPTi5wYXJzZShwZXNxdWlzYSkuc3RhdHVzDQogICAgICAgIDogdGhpcy5zdGF0dXM7DQogICAgICB0aGlzLm1hcmtldFBsYWNlc0xpc3RTZWxlY3RlZCA9IEpTT04ucGFyc2UocGVzcXVpc2EpLm1hcmtldHBsYWNlcw0KICAgICAgICA/IEpTT04ucGFyc2UocGVzcXVpc2EpLm1hcmtldHBsYWNlcw0KICAgICAgICA6IHRoaXMubWFya2V0cGxhY2VzOw0KICAgICAgdGhpcy5kYXRhSW5pY2lhbCA9IEpTT04ucGFyc2UocGVzcXVpc2EpLmRhdGFJbmljaWFsDQogICAgICAgID8gSlNPTi5wYXJzZShwZXNxdWlzYSkuZGF0YUluaWNpYWwNCiAgICAgICAgOiB0aGlzLmRhdGFJbmljaWFsOw0KICAgICAgdGhpcy5kYXRhRmluYWwgPSBKU09OLnBhcnNlKHBlc3F1aXNhKS5kYXRhRmluYWwNCiAgICAgICAgPyBKU09OLnBhcnNlKHBlc3F1aXNhKS5kYXRhRmluYWwNCiAgICAgICAgOiB0aGlzLmRhdGFGaW5hbDsNCiAgICAgIHRoaXMucG9yUGFnaW5hID0gSlNPTi5wYXJzZShwZXNxdWlzYSkucG9yUGFnaW5hDQogICAgICAgID8gSlNPTi5wYXJzZShwZXNxdWlzYSkucG9yUGFnaW5hDQogICAgICAgIDogdGhpcy5wb3JQYWdpbmE7DQogICAgICAvLyBhZGljaW9uYXIgYXMgZmllbGRzIHBhcmEgYXMgY29sdW5hcw0KICAgICAgdGhpcy5maWVsZHMgPSBKU09OLnBhcnNlKHBlc3F1aXNhKS5maWVsZHMNCiAgICAgICAgPyBKU09OLnBhcnNlKHBlc3F1aXNhKS5maWVsZHMNCiAgICAgICAgOiB0aGlzLmZpZWxkczsNCiAgICAgIHRoaXMuZmlsdHJvRW1wcmVzYXMgPSBKU09OLnBhcnNlKHBlc3F1aXNhKS5maWx0cm9FbXByZXNhcw0KICAgICAgICA/IEpTT04ucGFyc2UocGVzcXVpc2EpLmZpbHRyb0VtcHJlc2FzDQogICAgICAgIDogdGhpcy5maWx0cm9FbXByZXNhczsNCiAgICAgIHRoaXMuYnRuRmlsdHJvcygpOw0KICAgIH0sDQoNCiAgICBjbGVhckluaWNpYWxEYXRlKCkgew0KICAgICAgdGhpcy5kYXRhSW5pY2lhbCA9ICIiOw0KICAgIH0sDQoNCiAgICBjbGVhckZpbmFsRGF0ZSgpIHsNCiAgICAgIHRoaXMuZGF0YUZpbmFsID0gIiI7DQogICAgfSwNCg0KICAgIGF0cmFzYWRvcygpIHsNCiAgICAgIHRoaXMucGVkaWRvc0F0cmFzYWRvcyA9IFtdOw0KICAgICAgaWYgKHRoaXMuZmlsdHJvID09ICIiKSB7DQogICAgICAgIHRoaXMuZmlsdHJvID0gInRydWUiOw0KICAgICAgICB0aGlzLnNvbWVudGVBdHJhc2Fkb3MgPSB0cnVlOw0KICAgICAgICB0aGlzLnBlZGlkb3NBdHJhc2Fkb3MgPSB0aGlzLnBlZGlkb3NMaXN0LmZpbHRlcigNCiAgICAgICAgICAoYXRyYXNhZG8pID0+IGF0cmFzYWRvLkVudHJlZ2FFbUF0cmFzbyA9PT0gdHJ1ZQ0KICAgICAgICApOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5maWx0cm8gPSAiIjsNCiAgICAgICAgdGhpcy5zb21lbnRlQXRyYXNhZG9zID0gZmFsc2U7DQogICAgICB9DQogICAgfSwNCg0KICAgIGRldGFsaGVzKHJvdywgdGV4dCkgew0KICAgICAgaWYgKA0KICAgICAgICByb3cuaXRlbS5fc2hvd0RldGFpbHMgPT0gdW5kZWZpbmVkIHx8DQogICAgICAgIHJvdy5pdGVtLl9zaG93RGV0YWlscyA9PSBmYWxzZQ0KICAgICAgKSB7DQogICAgICAgIGlmICh0ZXh0ID09ICJzdGF0dXMiKSB7DQogICAgICAgICAgdGhpcy5zdGF0dXMgPSB0cnVlOw0KICAgICAgICB9IGVsc2UgaWYgKHRleHQgPT0gIm9jIikgew0KICAgICAgICAgIHRoaXMub2MgPSB0cnVlOw0KICAgICAgICB9DQogICAgICAgIHJvdy5pdGVtLl9zaG93RGV0YWlscyA9IHRydWU7DQogICAgICB9IGVsc2Ugew0KICAgICAgICByb3cuaXRlbS5fc2hvd0RldGFpbHMgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5zdGF0dXMgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5vYyA9IGZhbHNlOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBnZXJhclJvbWFuZWlvcygpIHsNCiAgICAgIEFwaVNlcnZpY2UuZ2V0KA0KICAgICAgICAidjIvSW50cmFuZXRFY29tbWVyY2VCMkMvUGVkaWRvcy9HZXJhUm9tYW5laW9GYXR1cmEiLCB7fSwgdHJ1ZSwgNDUwMDAsDQogICAgICAgDQogICAgICApDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICB0aGlzLiRyb290LnRvYXN0c3VjY2VzcyhyZXMpOw0KICAgICAgICAgIHRoaXMuYnRuRmlsdHJvcygpOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGUpID0+IHsNCiAgICAgICAgICB0aGlzLiRyb290LnRvYXN0ZGFuZ2VyKCJFcnJvIGFvIGdlcmFyIHJvbWFuZWlvcyEgIiArIGUpOw0KICAgICAgICB9KTsNCiAgICB9LA0KDQogICAgcmVzZXRNb2RhbCgpIHsNCiAgICAgIHRoaXMubW90aXZvID0gIiI7DQogICAgICB0aGlzLm1vdGl2b1N0YXRlID0gbnVsbDsNCiAgICB9LA0KICAgIGhhbmRsZU9rKHJvdykgew0KICAgICAgdGhpcy5oYW5kbGVTdWJtaXQocm93KTsNCiAgICB9LA0KICAgIGhhbmRsZVN1Ym1pdChyb3cpIHsNCiAgICAgIGlmICh0aGlzLm1vdGl2byA9PSAiIikgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICAvLyBIaWRlIHRoZSBtb2RhbCBtYW51YWxseQ0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAvLyBlbnZpYSB2aWEgYXBpIG8gcHJvY2Vzc28gZGUgY2FuY2VsYW1lbnRvDQogICAgICAgIGNvbnNvbGUubG9nKCJPY0lkOiAiICsgcm93Lml0ZW0uT2NJZCArICIgfHwgTW90aXZvOiAiICsgdGhpcy5tb3Rpdm8pOw0KICAgICAgICB2YXIgZGF0YSA9IHsNCiAgICAgICAgICBPY0lkOiByb3cuaXRlbS5PY0lkLA0KICAgICAgICAgIE1vdGl2bzogdGhpcy5tb3Rpdm8sDQogICAgICAgIH07DQogICAgICAgIEFwaVNlcnZpY2UucG9zdCgidjIvSW50cmFuZXRFY29tbWVyY2VCMkMvT3JkZW1Db21wcmEvQ2FuY2VsYXIiLCBkYXRhKQ0KICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsNCiAgICAgICAgICAgIHRoaXMuJHJvb3QudG9hc3RzdWNjZXNzKCJPQyBjYW5jZWxhZG8gY29tIHN1Y2Vzc28hIik7DQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goKGUpID0+IHsNCiAgICAgICAgICAgIHRoaXMuJHJvb3QudG9hc3RkYW5nZXIoIkVycm8gYW8gY2FuY2VsYXIgYSBPQyEiKTsNCiAgICAgICAgICB9KTsNCg0KICAgICAgICB0aGlzLiRidk1vZGFsLmhpZGUoIm1vZGFsLW1vdGl2by1jYW5jZWxhbWVudG8iKTsNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICAvKiBEUkFHIENPTFVNTlMgKi8NCiAgICBkcmFnU3RhcnQoZSkgew0KICAgICAgY29uc29sZS5sb2coImRyYWdTdGFydCBpbiA6IiwgZS50YXJnZXQuaWQpOw0KICAgICAgdGhpcy5kcmFnZmllbGRzdGFydCA9IGUudGFyZ2V0LmlkOw0KICAgIH0sDQogICAgZHJhZ0VudGVyKGUpIHsNCiAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoImRyYWctb3ZlciIpOw0KICAgIH0sDQoNCiAgICBkcmFnT3ZlcihlKSB7DQogICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCJkcmFnLW92ZXIiKTsNCiAgICB9LA0KDQogICAgZHJhZ0xlYXZlKGUpIHsNCiAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoImRyYWctb3ZlciIpOw0KICAgIH0sDQoNCiAgICBkcm9wKGUpIHsNCiAgICAgIGNvbnNvbGUubG9nKCJkcm9wIGluIDoiLCBlLnRhcmdldC5pZCk7DQogICAgICBlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCJkcmFnLW92ZXIiKTsNCiAgICAgIC8vIG1vdmUgbyBmcm9tIHBhcmEgbyB0bw0KICAgICAgdGhpcy5jaGFuZ2Vjb2x1bW5zKHRoaXMuZHJhZ2ZpZWxkc3RhcnQsIGUudGFyZ2V0LmlkKTsNCiAgICB9LA0KICAgIGNoYW5nZWNvbHVtbnMoQ29sdW1uQSwgQ29sdW1uQikgew0KICAgICAgY29uc3Qgc3RhcnQgPSB0aGlzLmZpZWxkcy5maW5kSW5kZXgoKGYpID0+IChmLmtleSB8fCBmKSA9PSBDb2x1bW5BKTsNCiAgICAgIGxldCBmcm9tID0gc3RhcnQ7DQogICAgICBsZXQgdG8gPSB0aGlzLmZpZWxkcy5maW5kSW5kZXgoKGYpID0+IChmLmtleSB8fCBmKSA9PSBDb2x1bW5CKTsNCiAgICAgIC8vIG1vdmUgYSBjb2x1bmFBIHBhcmEgbyBpbmRpY2UgZGEgY29sdW5hIEINCiAgICAgIHRoaXMubW92ZShmcm9tLCB0byk7DQoNCiAgICAgIC8vIG1vdmUgYSBjb2x1bmFBIHBhcmEgbyBpbmRpY2UgZGEgY29sdW5hIEINCiAgICAgIC8vZnJvbSA9IHRoaXMuZmllbGRzLmZpbmRJbmRleCgoZikgPT4gKGYua2V5IHx8IGYpID09IENvbHVtbkIpOw0KICAgICAgLy90byA9IHN0YXJ0Ow0KICAgICAgLy90aGlzLm1vdmUoZnJvbSwgdG8pOw0KICAgIH0sDQogICAgbW92ZShmcm9tLCB0bykgew0KICAgICAgdGhpcy5maWVsZHMuc3BsaWNlKHRvLCAwLCB0aGlzLmZpZWxkcy5zcGxpY2UoZnJvbSwgMSlbMF0pOw0KICAgIH0sDQoNCiAgICBjYWxjdWxhQXRyYXNvKGRhdGExLCBkYXRhMikgew0KICAgICAgLy8gIGNvbnNvbGUuZXJyb3IoImRhdGExIiwgZGF0YTEpOw0KICAgICAgLy8gIGNvbnNvbGUuZXJyb3IoImRhdGEyIiwgZGF0YTIpOw0KDQogICAgICB2YXIgcHJldmlzYW8gPSBuZXcgRGF0ZShkYXRhMSk7DQogICAgICB2YXIgaG9qZSA9IG5ldyBEYXRlKCk7DQogICAgICB2YXIgZW50cmVnYSA9IG5ldyBEYXRlKGRhdGEyKTsNCiAgICAgIGlmIChkYXRhMSA9PSBudWxsKSB7DQogICAgICAgIHJldHVybiAiIjsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmIChkYXRhMiAhPSAiIikgew0KICAgICAgICAgIHZhciBkaWZmRW50cmVnYSA9IE1hdGguYWJzKGVudHJlZ2EgLSBwcmV2aXNhbyk7DQogICAgICAgICAgdmFyIGRpYXNEaWZmID0gZGlmZkVudHJlZ2EgLyAoMTAwMCAqIDM2MDAgKiAyNCk7DQogICAgICAgICAgaWYgKHByZXZpc2FvID4gZW50cmVnYSkgew0KICAgICAgICAgICAgcmV0dXJuICItIiArIE1hdGgucm91bmQoZGlhc0RpZmYpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChkaWFzRGlmZik7DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHZhciBkaWZmID0gTWF0aC5hYnMoaG9qZSAtIHByZXZpc2FvKTsNCiAgICAgICAgICB2YXIgZGF5cyA9IGRpZmYgLyAoMTAwMCAqIDM2MDAgKiAyNCk7DQogICAgICAgICAgaWYgKHByZXZpc2FvID49IGhvamUpIHsNCiAgICAgICAgICAgIHJldHVybiAiLSIgKyBNYXRoLnJvdW5kKGRheXMpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChkYXlzKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KDQogICAgYXN5bmMgZ2V0QWNvbXBhbmhhbWVudG9SZWxhY2lvbmFtZW50b3MoaXRlbSkgew0KICAgICAgdmFyIHJlcyA9IGF3YWl0IEFwaVNlcnZpY2UucG9zdCgNCiAgICAgICAgInYyL0Fjb21wYW5oYW1lbnRvcy9SZWxhY2lvbmFtZW50b3MvR2V0IiwNCiAgICAgICAgew0KICAgICAgICAgIENoYXZlOiBpdGVtLklkLA0KICAgICAgICAgIFRhYmVsYTogIlBlZGlkb3MiLA0KICAgICAgICB9DQogICAgICApOw0KDQogICAgICBpZiAocmVzLmRhdGEuU3VjY2VzcyAvKiB0cnVlICovKSB7DQogICAgICAgIHRoaXMuYWNvbXBhbmhhbWVudG9JRCA9IHJlcy5kYXRhLkRhdGFbMF0uQWNvbXBhbmhhbWVudG9JZDsNCiAgICAgICAgdGhpcy4kcmVmc1siQWNvbXBhbmhhbWVudG9zTW9kYWwiXS5zaG93KCk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICAvKiBmYWxzZSAqLw0KICAgICAgICB2YXIgcmVzMSA9IGF3YWl0IEFwaVNlcnZpY2UucG9zdCgNCiAgICAgICAgICAidjIvQWNvbXBhbmhhbWVudG9zL1JlbGFjaW9uYW1lbnRvcy9TYXZlIiwNCiAgICAgICAgICB7DQogICAgICAgICAgICBDaGF2ZTogaXRlbS5JZCwNCiAgICAgICAgICAgIFRhYmVsYTogIlBlZGlkb3MiLA0KICAgICAgICAgICAgQWNvbXBhbmhhbWVudG9JZDogbnVsbCwNCiAgICAgICAgICAgIEFjb21wYW5oYW1lbnRvRGVzY3JpY2FvOiAiQWNvbXBhbmhhbWVudG9zIFBlZGlkbyAiICsgaXRlbS5OdW1lcm8sDQogICAgICAgICAgfQ0KICAgICAgICApOw0KICAgICAgICB0aGlzLmFjb21wYW5oYW1lbnRvSUQgPSByZXMxLmRhdGEuRGF0YVswXS5BY29tcGFuaGFtZW50b0lkOw0KICAgICAgICB0aGlzLiRyZWZzWyJBY29tcGFuaGFtZW50b3NNb2RhbCJdLnNob3coKTsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["Pedidos.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyeA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Pedidos.vue","sourceRoot":"src/pages/ecommerce/views","sourcesContent":["<template>\r\n  <div id=\"divPrincipal\" class=\"text-center\">\r\n    <b-card class=\"m-2\">\r\n      <b-row id=\"row\" class=\"m-2\">\r\n        <div class=\"d-flex\">\r\n          <b-button>\r\n            <strong>{{ pedidosTotaisCount }}</strong>\r\n          </b-button>\r\n\r\n          <b-button\r\n            class=\"ml-1\"\r\n            :variant=\"somenteAtrasados ? 'danger' : ''\"\r\n            @click=\"atrasados\"\r\n          >\r\n            Somente em atraso\r\n          </b-button>\r\n\r\n          <div class=\"ml-2\">\r\n            <b-input-group prepend=\"Filtro\" size=\"sm\">\r\n              <b-form-input\r\n                id=\"input-filtro\"\r\n                type=\"search\"\r\n                v-model=\"filtro\"\r\n                :debounce=\"1000\"\r\n              ></b-form-input>\r\n            </b-input-group>\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <b-row>\r\n            <b-col>\r\n              <b-input-group style=\"width: 250px\">\r\n                <b-form-datepicker\r\n                  size=\"sm\"\r\n                  v-model=\"dataInicial\"\r\n                  placeholder=\"Data Inicial\"\r\n                  locale=\"pt-br\"\r\n                  :date-format-options=\"{\r\n                    year: 'numeric',\r\n                    month: 'numeric',\r\n                    day: 'numeric',\r\n                  }\"\r\n                ></b-form-datepicker>\r\n\r\n                <b-input-group-append>\r\n                  <b-button variant=\"danger\" @click=\"clearInicialDate\">\r\n                    <b-icon-trash></b-icon-trash>\r\n                  </b-button>\r\n                </b-input-group-append>\r\n              </b-input-group>\r\n            </b-col>\r\n\r\n            <b-col>\r\n              <b-input-group style=\"width: 250px\">\r\n                <b-form-datepicker\r\n                  size=\"sm\"\r\n                  v-model=\"dataFinal\"\r\n                  placeholder=\"Data Final\"\r\n                  locale=\"pt-br\"\r\n                  :date-format-options=\"{\r\n                    year: 'numeric',\r\n                    month: 'numeric',\r\n                    day: 'numeric',\r\n                  }\"\r\n                ></b-form-datepicker>\r\n\r\n                <b-input-group-append>\r\n                  <b-button variant=\"danger\" @click=\"clearFinalDate\">\r\n                    <b-icon-trash></b-icon-trash>\r\n                  </b-button>\r\n                </b-input-group-append>\r\n              </b-input-group>\r\n            </b-col>\r\n\r\n            <b-dropdown class=\"mr-2\" right size=\"sm\" text=\"Marketplaces\">\r\n              <b-form-checkbox\r\n                style=\"width: 200px\"\r\n                class=\"mb-1 ml-1\"\r\n                v-for=\"market in marketPlacesList\"\r\n                :key=\"market.value\"\r\n                size=\"sm\"\r\n                :value=\"market.value\"\r\n                v-model=\"marketPlacesListSelected\"\r\n                name=\"check-button\"\r\n                switch\r\n                >{{ market.text }}</b-form-checkbox\r\n              >\r\n            </b-dropdown>\r\n\r\n            <b-dropdown class=\"mr-2\" right text=\"Status\" size=\"sm\">\r\n              <b-form-checkbox\r\n                style=\"width: 300px\"\r\n                class=\"mb-1 ml-1\"\r\n                v-for=\"status in statusList\"\r\n                :key=\"status.value\"\r\n                size=\"sm\"\r\n                :value=\"status.value\"\r\n                v-model=\"statusListSelected\"\r\n                name=\"check-button2\"\r\n                switch\r\n                >{{ status.text }}</b-form-checkbox\r\n              >\r\n            </b-dropdown>\r\n\r\n            <b-dropdown class=\"mr-2\" right size=\"sm\" text=\"Colunas Visiveis\">\r\n              <b-form-checkbox\r\n                style=\"width: 200px\"\r\n                class=\"mb-1 ml-1\"\r\n                v-for=\"market in fields\"\r\n                :key=\"market.key\"\r\n                size=\"sm\"\r\n                v-model=\"market.visible\"\r\n                name=\"check-button\"\r\n                switch\r\n              >\r\n                {{ market.label || market.key }}\r\n              </b-form-checkbox>\r\n            </b-dropdown>\r\n\r\n            <b-dropdown class=\"mr-2\" right size=\"sm\" text=\"Empresa\">\r\n              <b-form-checkbox\r\n                style=\"width: 300px\"\r\n                class=\"mb-1 ml-1\"\r\n                v-for=\"emp in empresa\"\r\n                :key=\"emp.Empresa\"\r\n                size=\"sm\"\r\n                v-model=\"filtroEmpresas\"\r\n                name=\"check-button\"\r\n                :value=\"emp.Empresa\"\r\n                switch\r\n                >{{ emp.NomeEmpresa }}</b-form-checkbox\r\n              >\r\n            </b-dropdown>\r\n\r\n            <b-dropdown class=\"mr-2\" right size=\"sm\" text=\"Ações\">\r\n              <b-button class=\"m-2\" @click=\"gerarRomaneios\"\r\n                >Gerar romaneios</b-button\r\n              >\r\n            </b-dropdown>\r\n          </b-row>\r\n        </div>\r\n\r\n        <div>\r\n          <b-button variant=\"danger\" class=\"mr-2\" @click=\"btnFiltros\">\r\n            <b-spinner small v-if=\"this.loading\"></b-spinner>\r\n\r\n            <span v-else>Filtrar</span>\r\n          </b-button>\r\n        </div>\r\n      </b-row>\r\n\r\n      <b-table\r\n        foot-clone\r\n        no-footer-sorting\r\n        id=\"my-table\"\r\n        :current-page=\"paginaAtiva\"\r\n        :per-page=\"porPagina\"\r\n        head-variant=\"dark\"\r\n        sort-by=\"DataCompra\"\r\n        sort-desc\r\n        selectable\r\n        striped\r\n        bordered\r\n        hovers\r\n        responsive\r\n        small\r\n        select-mode=\"single\"\r\n        :filter=\"filtro\"\r\n        :filter-included-fields=\"filterOn\"\r\n        :items=\"pedidosListEmpresa\"\r\n        :fields=\"pedidosFields\"\r\n        :tbody-tr-class=\"rowClass\"\r\n        @row-selected=\"onRowSelected\"\r\n        @filtered=\"(filtro) => (pedidosListEmpresa = filtro)\"\r\n      >\r\n        <template #head()=\"data\">\r\n          <div\r\n            :id=\"data.field.key\"\r\n            draggable=\"true\"\r\n            @dragstart=\"dragStart\"\r\n            @dragenter=\"dragEnter\"\r\n            @dragover=\"dragOver\"\r\n            @dragleave=\"dragLeave\"\r\n            @drop=\"drop\"\r\n          >\r\n            {{ data.label }}\r\n          </div>\r\n        </template>\r\n\r\n        <template #cell(actions)=\"row\">\r\n          <a\r\n            target=\"_blank\"\r\n            id=\"linkTabela\"\r\n            v-if=\"row.item.UrlRastreio != null\"\r\n            :href=\"row.item.UrlRastreio\"\r\n          >\r\n            <b-icon-truck font-scale=\"1.5\"></b-icon-truck>\r\n          </a>\r\n          &nbsp; &nbsp;\r\n          <a\r\n            target=\"_blank\"\r\n            id=\"linkTabela\"\r\n            v-if=\"row.item.urlImpressao != null\"\r\n            :href=\"row.item.urlImpressao\"\r\n          >\r\n            <b-icon-printer font-scale=\"1.5\"></b-icon-printer>\r\n          </a>\r\n        </template>\r\n\r\n        <template #cell(Numero)=\"row\">\r\n          <span @click=\"detalhes(row, 'oc')\">\r\n            {{ row.item.Numero }}\r\n            &nbsp; &nbsp; &nbsp;\r\n            {{ row.detailsShowing ? \"-\" : \"+\" }}\r\n          </span>\r\n        </template>\r\n\r\n        <template #cell(Status)=\"row\">\r\n          <span @click=\"detalhes(row, 'status')\">\r\n            {{ row.item.Rastreio[row.item.Rastreio.length - 1][\"Evento\"] }}\r\n            &nbsp; &nbsp; &nbsp;\r\n            {{ row.detailsShowing ? \"-\" : \"+\" }}\r\n          </span>\r\n        </template>\r\n        <template #cell(DataStatus)=\"row\">{{\r\n          row.item.Rastreio[row.item.Rastreio.length - 1][\"DataEvento\"]\r\n            | dateBRHora\r\n        }}</template>\r\n\r\n        <template #cell(Percentual)=\"row\">{{ row.item.Percentual }}%</template>\r\n\r\n        <template #cell(DataPrevisaoEntrega)=\"row\">{{\r\n          row.item.DataPrevisaoEntrega | dateBR\r\n        }}</template>\r\n\r\n        <template #cell(PedidoHubURL)=\"row\">\r\n          <a target=\"_blank\" :href=\"row.item.PedidoHubURL\" id=\"linkTabela\">{{\r\n            row.item.OrdemCompra\r\n          }}</a>\r\n        </template>\r\n\r\n        <template #cell(DataCompra)=\"row\">{{\r\n          new Date(row.item.DataCompra).toLocaleDateString()\r\n        }}</template>\r\n\r\n        <template #cell(ValorComFrete)=\"row\">{{\r\n          row.item.ValorComFrete | R$\r\n        }}</template>\r\n\r\n        <template #cell(ValorFrete)=\"row\">\r\n          <span>{{ row.item.ValorFrete | R$ }}</span>\r\n        </template>\r\n\r\n        <template #cell(ValorFreteDestacado)=\"row\">\r\n          <span style=\"color:red\">{{ row.item.ValorFreteDestacado | R$ }}</span>\r\n        </template>\r\n\r\n        <template #cell(Transportadora)=\"row\">{{\r\n          row.item.Transportadora.substr(0, 15)\r\n        }}</template>\r\n\r\n        <template #cell(Redespacho)=\"row\">{{\r\n          row.item.Redespacho != null ? row.item.Redespacho.substr(0, 15) : \"\"\r\n        }}</template>\r\n\r\n        <template #cell(DiasAtraso)=\"row\">\r\n          {{\r\n            calculaAtraso(\r\n              row.item.DataPrevisaoEntrega,\r\n              row.item.Eventos.filter(\r\n                (e) => e.Status == \"Entregue ao Destinatário\"\r\n              )\r\n                .map((e) => e.Data)\r\n                .toLocaleString()\r\n            )\r\n          }}\r\n        </template>\r\n\r\n        <template #cell(DataRealEntrega)=\"row\">\r\n          <span v-for=\"(item, index) in row.item.Eventos\" :key=\"index\">\r\n            <div v-if=\"item.Status == 'Entregue ao Destinatário'\">\r\n              {{ new Date(item.Data).toLocaleString() }}\r\n            </div>\r\n          </span>\r\n        </template>\r\n\r\n        <template #cell(Observacao)=\"row\">\r\n          <b-icon-pencil\r\n            scale=\"1.5\"\r\n            @click=\"getAcompanhamentoRelacionamentos(row.item)\"\r\n          ></b-icon-pencil>\r\n        </template>\r\n\r\n        <template #row-details=\"row\">\r\n          <b-card v-show=\"oc\">\r\n            <div>\r\n              <b-row>\r\n                <table border=\"1\">\r\n                  <tr>\r\n                    <th>Item</th>\r\n\r\n                    <th>Descrição</th>\r\n\r\n                    <th>Qtde_Faturada</th>\r\n\r\n                    <th>Qtde_Solicitada</th>\r\n\r\n                    <th>TotalComIPI</th>\r\n\r\n                    <th>TotalLiquido</th>\r\n\r\n                    <th>Valor_Unitario</th>\r\n\r\n                    <th>Valor_Unitario_Bruto</th>\r\n                  </tr>\r\n\r\n                  <tr v-for=\"item in row.item.Itens\" :key=\"item.StatusId\">\r\n                    <td>{{ item.Item }}</td>\r\n\r\n                    <td>{{ item.Descricao }}</td>\r\n\r\n                    <td>{{ item.Qtde_Faturada }}</td>\r\n\r\n                    <td>{{ item.Qtde_Solicitada }}</td>\r\n\r\n                    <td>R$ {{ item.TotalComIPI }}</td>\r\n\r\n                    <td>R$ {{ item.TotalLiquido }}</td>\r\n\r\n                    <td>R$ {{ item.Valor_Unitario }}</td>\r\n\r\n                    <td>R$ {{ item.Valor_Unitario_Bruto }}</td>\r\n                  </tr>\r\n                </table>\r\n\r\n                <b-button\r\n                  v-show=\"\r\n                    row.item.Status != 'Cancelado' &&\r\n                      row.item.Status != 'Finalizado'\r\n                  \"\r\n                  class=\"ml-2\"\r\n                  id=\"center\"\r\n                  variant=\"danger\"\r\n                  v-b-modal.modal-motivo-cancelamento\r\n                  >Cancelar OC</b-button\r\n                >\r\n\r\n                <b-modal\r\n                  id=\"modal-motivo-cancelamento\"\r\n                  ref=\"modal\"\r\n                  title=\"Descreva o motivo do cancelamento\"\r\n                  @hidden=\"resetModal\"\r\n                  @ok=\"handleOk(row)\"\r\n                >\r\n                  <form ref=\"form\" @submit.stop.prevent=\"handleSubmit\">\r\n                    <b-form-group\r\n                      label=\"Motivo\"\r\n                      label-for=\"name-input\"\r\n                      invalid-feedback=\"Motivo do cancelamento é obrigatório\"\r\n                      :state=\"motivoState\"\r\n                    >\r\n                      <b-form-input\r\n                        id=\"name-input\"\r\n                        v-model=\"motivo\"\r\n                        :state=\"motivoState\"\r\n                        required\r\n                      ></b-form-input>\r\n                    </b-form-group>\r\n                  </form>\r\n                </b-modal>\r\n              </b-row>\r\n            </div>\r\n          </b-card>\r\n\r\n          <b-card class=\"m-0\" v-show=\"status\">\r\n            <div>\r\n              <table border=\"1\">\r\n                <tr>\r\n                  <th>Status</th>\r\n\r\n                  <th>Data</th>\r\n                </tr>\r\n\r\n                <tr v-for=\"item in row.item.Rastreio\" :key=\"item.Id\">\r\n                  <td>{{ item.Evento }}</td>\r\n                  <td>{{ new Date(item.DataEvento).toLocaleString() }}</td>\r\n                </tr>\r\n              </table>\r\n\r\n              <br />\r\n            </div>\r\n          </b-card>\r\n        </template>\r\n\r\n        <!-- \r\n          Footer personalizado para somar as colunas de valores\r\n        deixar o primeiro template em branco e preencher os outros com \r\n        as colunas que quero mostrar\r\n        -->\r\n        <template #foot()>\r\n          <div></div>\r\n        </template>\r\n\r\n        <template #foot(ValorComFrete)>\r\n          <div>{{ valor | R$ }}</div>\r\n        </template>\r\n\r\n        <template #foot(ValorFrete)>\r\n          <div>{{ valorFrete | R$ }}</div>\r\n        </template>\r\n      </b-table>\r\n\r\n      <b-row id=\"pagination\" class=\"m-2\">\r\n        <div>\r\n          <b-input style=\"width:50px\" v-model=\"porPagina\"></b-input>\r\n        </div>\r\n\r\n        <b-pagination\r\n          id=\"pagination\"\r\n          :total-rows=\"pedidosTotaisCount\"\r\n          :per-page=\"porPagina\"\r\n          aria-controls=\"my-table\"\r\n          v-model=\"paginaAtiva\"\r\n        ></b-pagination>\r\n      </b-row>\r\n    </b-card>\r\n\r\n    <!-- Legenda -->\r\n    <b-card\r\n      header=\"Legenda de Cores da Tabela\"\r\n      class=\"m-2\"\r\n      header-bg-variant=\"dark\"\r\n      text-variant=\"white\"\r\n    >\r\n      <b-card-group deck>\r\n        <b-card\r\n          bg-variant=\"success\"\r\n          text-variant=\"white\"\r\n          header=\"Criados\"\r\n          class=\"text-center\"\r\n        >\r\n          <b-card-text>Pedidos Novos Criados.</b-card-text>\r\n        </b-card>\r\n        <b-card\r\n          bg-variant=\"danger\"\r\n          text-variant=\"white\"\r\n          header=\"Cancelados\"\r\n          class=\"text-center\"\r\n        >\r\n          <b-card-text>Pedidos Cancelados.</b-card-text>\r\n        </b-card>\r\n        <b-card\r\n          bg-variant=\"info\"\r\n          text-variant=\"white\"\r\n          header=\"Devoluções\"\r\n          class=\"text-center\"\r\n        >\r\n          <b-card-text>Notas Fiscais de Devolução.</b-card-text>\r\n        </b-card>\r\n        <b-card\r\n          bg-variant=\"warning\"\r\n          text-variant=\"white\"\r\n          header=\"Em Atraso\"\r\n          class=\"text-center\"\r\n        >\r\n          <b-card-text>Pedidos Em Atraso.</b-card-text>\r\n        </b-card>\r\n      </b-card-group>\r\n    </b-card>\r\n\r\n    <!-- MODAL -->\r\n\r\n    <b-modal\r\n      size=\"lg\"\r\n      ref=\"AcompanhamentosModal\"\r\n      id=\"AcompanhamentosModal\"\r\n      centered\r\n      hide-footer\r\n      hide-header\r\n    >\r\n      <AcompanhamentosVue :headerId=\"this.acompanhamentoID\" />\r\n    </b-modal>\r\n\r\n    <!-- MODAL -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nimport ApiService from \"../../../services/api.service\";\r\nimport AcompanhamentosVue from \"../../../components/Acompanhamentos.vue\";\r\nimport loading from \"../../../store/loading\";\r\nimport { timeout } from \"q\";\r\n\r\nexport default {\r\n  name: \"EcommercePedidos\",\r\n  components: {\r\n    AcompanhamentosVue,\r\n  },\r\n  data() {\r\n    return {\r\n      acompanhamentoID: 0,\r\n      motivo: \"\",\r\n      motivoState: null,\r\n      visivel: \"\",\r\n      filtro: \"\",\r\n      filterOn: [\r\n        \"Itens\",\r\n        \"EntregaEmAtraso\",\r\n        \"Fantasia\",\r\n        \"Numero\",\r\n        \"PedidoHubURL\",\r\n        \"OCKappes\",\r\n        \"Cidade\",\r\n        \"Cliente\",\r\n        \"Estado\",\r\n        \"MarketPlace\",\r\n        \"Numero_Nota\",\r\n        \"OrdemCompra\",\r\n        \"Transportadora\",\r\n        \"Romaneio\",\r\n        \"OcId\",\r\n        \"Redespacho\",\r\n      ],\r\n      filtroEmpresas: [\"8\", \"34\"],\r\n      porPagina: 20,\r\n      paginaAtiva: 1,\r\n      marketPlacesListSelected: [],\r\n      statusListSelected: [],\r\n      utilizouFiltro: \"\",\r\n      filtrado: [],\r\n\r\n      loading: false,\r\n      somenteAtrasados: \"\",\r\n      pedidosAtrasados: [],\r\n\r\n      oc: false,\r\n      status: false,\r\n\r\n      dataInicial: new Date(1609549200000),\r\n      dataFinal: \"\",\r\n\r\n      marketPlacesList: [],\r\n      statusList: [],\r\n      pedidosList: [],\r\n      fields: [\r\n        {\r\n          key: \"Empresa\",\r\n          sortable: true,\r\n          label: \"Empresa\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"OcId\",\r\n          sortable: true,\r\n          label: \"Id OC\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"OCKappes\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"OC Kappes\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Numero\",\r\n          sortable: true,\r\n          label: \"Pedido\",\r\n          visible: true,\r\n          _showDetails: false,\r\n        },\r\n        {\r\n          key: \"DataCompra\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Data\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Percentual\",\r\n          sortable: false,\r\n          label: \"Perc Coleta\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"PedidoHubURL\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"OC Parceiro\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"MarketPlace\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Marketplace\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Transportadora\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Fantasia\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Cliente\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Telefone\",\r\n          sortable: true,\r\n          visible: true,\r\n          label: \"Fone\",\r\n        },\r\n        {\r\n          key: \"Cidade\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Estado\",\r\n          sortable: true,\r\n          label: \"UF\",\r\n          tdClass: \"text-nowrap\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Status\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          visible: true,\r\n          _showDetails: false,\r\n        },\r\n        {\r\n          key: \"DataStatus\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"ValorComFrete\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Valor\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"ValorFrete\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"ValorFreteDestacado\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          visible: true,\r\n          label: \"Destacado\",\r\n        },\r\n        {\r\n          key: \"Romaneio\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Numero_Nota\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Nota\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"DataPrevisaoEntrega\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Previsao Entrega\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Actions\",\r\n          sortable: false,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Ações\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Redespacho\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Redespacho\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"DiasAtraso\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Dias Atraso\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"DataRealEntrega\",\r\n          sortable: true,\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Data Entrega\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Observacao\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"OBS\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"Rastreio\",\r\n          tdClass: \"text-nowrap\",\r\n          label: \"Rastreio\",\r\n          visible: false,\r\n        },\r\n      ],\r\n      dragfieldstart: \"\",\r\n    };\r\n  },\r\n\r\n  created() {\r\n    this.acthome(\"/ecommerce\");\r\n    this.buscarUltimaPesquisa();\r\n    this.pedidosList = [];\r\n    this.buscar();\r\n  },\r\n\r\n  // async mounted() {\r\n  //   const pesquisa = await localStorage.getItem(\"ultimaPesquisa\");\r\n\r\n  //   this.fields.map(e => {\r\n  //     if (JSON.parse(pesquisa).fields.find(f => f.key == e.key)) {\r\n  //       e.visible = JSON.parse(pesquisa).fields.find(\r\n  //         f => f.key == e.key\r\n  //       ).visible;\r\n  //     } else {\r\n  //       e.visible = false;\r\n  //     }\r\n  //   });\r\n  // },\r\n\r\n  computed: {\r\n    pedidosFields() {\r\n      return this.fields.filter((f) => f.visible);\r\n    },\r\n\r\n    pedidosTotaisCount() {\r\n      return this.pedidosListEmpresa.length;\r\n    },\r\n\r\n    valor() {\r\n      var sum = this.pedidosListEmpresa.reduce(\r\n        (acumulador, valorAtual) => acumulador + valorAtual.ValorComFrete,\r\n        0\r\n      );\r\n      return Math.round(sum * 100) / 100;\r\n    },\r\n    valorFrete() {\r\n      var sum = this.pedidosListEmpresa.reduce(\r\n        (acumulador, valorAtual) => acumulador + valorAtual.ValorFrete,\r\n        0\r\n      );\r\n      return Math.round(sum * 100) / 100;\r\n    },\r\n\r\n    pedidosListEmpresa() {\r\n      return this.filtrado.filter((res) =>\r\n        this.filtroEmpresas.find((e) => e == res.Empresa)\r\n      );\r\n    },\r\n\r\n    empresa() {\r\n      return this.pedidosList.reduce((a, b) => {\r\n        if (!a.find((f) => f.Empresa == b.Empresa)) {\r\n          a.push({ Empresa: b.Empresa, NomeEmpresa: b.Nome_Empresa });\r\n        }\r\n        return a;\r\n      }, []);\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"acthome\"]),\r\n\r\n    rowClass(item, type) {\r\n      if (!item || type !== \"row\") return;\r\n      if (item.Valor < 0) return \"table-info\";\r\n      if (item.Status === \"Cancelado\") return \"table-danger\";\r\n      if (item.Status === \"Criado\") return \"table-success\";\r\n      if (item.EntregaEmAtraso == true) return \"table-warning\";\r\n    },\r\n\r\n    onRowSelected(items) {\r\n      // console.log(items[0].PedidoHubURL);\r\n    },\r\n\r\n    buscar() {\r\n      ApiService.get(\"v2/IntranetEcommerceB2C/Marketplaces/Combo\").then(\r\n        (result) => {\r\n          this.marketPlacesList = result.data.Data;\r\n        }\r\n      );\r\n      ApiService.get(\"v2/IntranetEcommerceB2C/Pedidos/Status\").then(\r\n        (result) => {\r\n          this.statusList = result.data.Data;\r\n        }\r\n      );\r\n    },\r\n\r\n    async btnFiltros() {\r\n      await this.salvarPesquisas();\r\n      this.loading = true;\r\n      ApiService.post(\"v2/IntranetEcommerceB2C/Pedidos/Get\", {\r\n        status: this.statusListSelected,\r\n        marketplaces: this.marketPlacesListSelected,\r\n        dataInicial: this.dataInicial,\r\n        dataFinal: this.dataFinal,\r\n      }).then((result) => {\r\n        console.log(\"result\", result.data);\r\n        if (result.data.Success) {\r\n          this.pedidosList = result.data.Data;\r\n          this.filtrado = result.data.Data;\r\n          this.utilizouFiltro = new Date();\r\n        }\r\n        this.loading = false;\r\n        this.empresas;\r\n      });\r\n    },\r\n\r\n    async salvarPesquisas() {\r\n      const ultimaPesquisa = {\r\n        marketplaces: this.marketPlacesListSelected,\r\n        status: this.statusListSelected,\r\n        dataInicial: this.dataInicial,\r\n        dataFinal: this.dataFinal,\r\n        porPagina: this.porPagina,\r\n        fields: this.fields,\r\n        filtroEmpresas: this.filtroEmpresas,\r\n      };\r\n      await localStorage.setItem(\r\n        \"ultimaPesquisa\",\r\n        JSON.stringify(ultimaPesquisa)\r\n      );\r\n    },\r\n\r\n    async buscarUltimaPesquisa() {\r\n      const pesquisa = await localStorage.getItem(\"ultimaPesquisa\");\r\n      this.statusListSelected = JSON.parse(pesquisa).status\r\n        ? JSON.parse(pesquisa).status\r\n        : this.status;\r\n      this.marketPlacesListSelected = JSON.parse(pesquisa).marketplaces\r\n        ? JSON.parse(pesquisa).marketplaces\r\n        : this.marketplaces;\r\n      this.dataInicial = JSON.parse(pesquisa).dataInicial\r\n        ? JSON.parse(pesquisa).dataInicial\r\n        : this.dataInicial;\r\n      this.dataFinal = JSON.parse(pesquisa).dataFinal\r\n        ? JSON.parse(pesquisa).dataFinal\r\n        : this.dataFinal;\r\n      this.porPagina = JSON.parse(pesquisa).porPagina\r\n        ? JSON.parse(pesquisa).porPagina\r\n        : this.porPagina;\r\n      // adicionar as fields para as colunas\r\n      this.fields = JSON.parse(pesquisa).fields\r\n        ? JSON.parse(pesquisa).fields\r\n        : this.fields;\r\n      this.filtroEmpresas = JSON.parse(pesquisa).filtroEmpresas\r\n        ? JSON.parse(pesquisa).filtroEmpresas\r\n        : this.filtroEmpresas;\r\n      this.btnFiltros();\r\n    },\r\n\r\n    clearInicialDate() {\r\n      this.dataInicial = \"\";\r\n    },\r\n\r\n    clearFinalDate() {\r\n      this.dataFinal = \"\";\r\n    },\r\n\r\n    atrasados() {\r\n      this.pedidosAtrasados = [];\r\n      if (this.filtro == \"\") {\r\n        this.filtro = \"true\";\r\n        this.somenteAtrasados = true;\r\n        this.pedidosAtrasados = this.pedidosList.filter(\r\n          (atrasado) => atrasado.EntregaEmAtraso === true\r\n        );\r\n      } else {\r\n        this.filtro = \"\";\r\n        this.somenteAtrasados = false;\r\n      }\r\n    },\r\n\r\n    detalhes(row, text) {\r\n      if (\r\n        row.item._showDetails == undefined ||\r\n        row.item._showDetails == false\r\n      ) {\r\n        if (text == \"status\") {\r\n          this.status = true;\r\n        } else if (text == \"oc\") {\r\n          this.oc = true;\r\n        }\r\n        row.item._showDetails = true;\r\n      } else {\r\n        row.item._showDetails = false;\r\n        this.status = false;\r\n        this.oc = false;\r\n      }\r\n    },\r\n\r\n    gerarRomaneios() {\r\n      ApiService.get(\r\n        \"v2/IntranetEcommerceB2C/Pedidos/GeraRomaneioFatura\", {}, true, 45000,\r\n       \r\n      )\r\n        .then((res) => {\r\n          this.$root.toastsuccess(res);\r\n          this.btnFiltros();\r\n        })\r\n        .catch((e) => {\r\n          this.$root.toastdanger(\"Erro ao gerar romaneios! \" + e);\r\n        });\r\n    },\r\n\r\n    resetModal() {\r\n      this.motivo = \"\";\r\n      this.motivoState = null;\r\n    },\r\n    handleOk(row) {\r\n      this.handleSubmit(row);\r\n    },\r\n    handleSubmit(row) {\r\n      if (this.motivo == \"\") {\r\n        return;\r\n      }\r\n      // Hide the modal manually\r\n      this.$nextTick(() => {\r\n        // envia via api o processo de cancelamento\r\n        console.log(\"OcId: \" + row.item.OcId + \" || Motivo: \" + this.motivo);\r\n        var data = {\r\n          OcId: row.item.OcId,\r\n          Motivo: this.motivo,\r\n        };\r\n        ApiService.post(\"v2/IntranetEcommerceB2C/OrdemCompra/Cancelar\", data)\r\n          .then((data) => {\r\n            console.log(data);\r\n            this.$root.toastsuccess(\"OC cancelado com sucesso!\");\r\n          })\r\n          .catch((e) => {\r\n            this.$root.toastdanger(\"Erro ao cancelar a OC!\");\r\n          });\r\n\r\n        this.$bvModal.hide(\"modal-motivo-cancelamento\");\r\n      });\r\n    },\r\n\r\n    /* DRAG COLUMNS */\r\n    dragStart(e) {\r\n      console.log(\"dragStart in :\", e.target.id);\r\n      this.dragfieldstart = e.target.id;\r\n    },\r\n    dragEnter(e) {\r\n      e.preventDefault();\r\n      e.target.classList.add(\"drag-over\");\r\n    },\r\n\r\n    dragOver(e) {\r\n      e.preventDefault();\r\n      e.target.classList.add(\"drag-over\");\r\n    },\r\n\r\n    dragLeave(e) {\r\n      e.target.classList.remove(\"drag-over\");\r\n    },\r\n\r\n    drop(e) {\r\n      console.log(\"drop in :\", e.target.id);\r\n      e.target.classList.remove(\"drag-over\");\r\n      // move o from para o to\r\n      this.changecolumns(this.dragfieldstart, e.target.id);\r\n    },\r\n    changecolumns(ColumnA, ColumnB) {\r\n      const start = this.fields.findIndex((f) => (f.key || f) == ColumnA);\r\n      let from = start;\r\n      let to = this.fields.findIndex((f) => (f.key || f) == ColumnB);\r\n      // move a colunaA para o indice da coluna B\r\n      this.move(from, to);\r\n\r\n      // move a colunaA para o indice da coluna B\r\n      //from = this.fields.findIndex((f) => (f.key || f) == ColumnB);\r\n      //to = start;\r\n      //this.move(from, to);\r\n    },\r\n    move(from, to) {\r\n      this.fields.splice(to, 0, this.fields.splice(from, 1)[0]);\r\n    },\r\n\r\n    calculaAtraso(data1, data2) {\r\n      //  console.error(\"data1\", data1);\r\n      //  console.error(\"data2\", data2);\r\n\r\n      var previsao = new Date(data1);\r\n      var hoje = new Date();\r\n      var entrega = new Date(data2);\r\n      if (data1 == null) {\r\n        return \"\";\r\n      } else {\r\n        if (data2 != \"\") {\r\n          var diffEntrega = Math.abs(entrega - previsao);\r\n          var diasDiff = diffEntrega / (1000 * 3600 * 24);\r\n          if (previsao > entrega) {\r\n            return \"-\" + Math.round(diasDiff);\r\n          } else {\r\n            return Math.round(diasDiff);\r\n          }\r\n        } else {\r\n          var diff = Math.abs(hoje - previsao);\r\n          var days = diff / (1000 * 3600 * 24);\r\n          if (previsao >= hoje) {\r\n            return \"-\" + Math.round(days);\r\n          } else {\r\n            return Math.round(days);\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    async getAcompanhamentoRelacionamentos(item) {\r\n      var res = await ApiService.post(\r\n        \"v2/Acompanhamentos/Relacionamentos/Get\",\r\n        {\r\n          Chave: item.Id,\r\n          Tabela: \"Pedidos\",\r\n        }\r\n      );\r\n\r\n      if (res.data.Success /* true */) {\r\n        this.acompanhamentoID = res.data.Data[0].AcompanhamentoId;\r\n        this.$refs[\"AcompanhamentosModal\"].show();\r\n      } else {\r\n        /* false */\r\n        var res1 = await ApiService.post(\r\n          \"v2/Acompanhamentos/Relacionamentos/Save\",\r\n          {\r\n            Chave: item.Id,\r\n            Tabela: \"Pedidos\",\r\n            AcompanhamentoId: null,\r\n            AcompanhamentoDescricao: \"Acompanhamentos Pedido \" + item.Numero,\r\n          }\r\n        );\r\n        this.acompanhamentoID = res1.data.Data[0].AcompanhamentoId;\r\n        this.$refs[\"AcompanhamentosModal\"].show();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n#divPrincipal {\r\n  font-size: 12px;\r\n}\r\n\r\n#center {\r\n  display: block;\r\n}\r\n\r\n#row {\r\n  justify-content: space-between;\r\n  margin: 1px, 1px, 1px, 1px;\r\n}\r\n\r\n#linkTabela {\r\n  color: blue;\r\n}\r\n\r\n#botoes {\r\n  width: min-content;\r\n  white-space: nowrap;\r\n  margin: 2px;\r\n}\r\n\r\n#inputDate {\r\n  width: 350px;\r\n}\r\n\r\n#pagination {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.drag-over {\r\n  background-color: silver;\r\n  border-right: 5px solid lightgreen;\r\n  border-left: 5px solid lightgreen;\r\n}\r\n</style>\r\n"]}]}