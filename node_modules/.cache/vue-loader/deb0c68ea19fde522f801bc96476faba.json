{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\carregamento\\views\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\carregamento\\views\\index.vue","mtime":1674602801809},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQVBJIGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2FwaS5zZXJ2aWNlIjsNCmltcG9ydCBTaWduYXR1cmUgZnJvbSAiLi4vLi4vLi4vY29tcG9uZW50cy9TaWduYXR1cmUiOw0KaW1wb3J0IFByb3BlcnRpZXMgZnJvbSAiLi4vLi4vLi4vY29tcG9uZW50cy9Qcm9wZXJ0aWVzIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkNhcnJlZ2FtZW50byIsDQogIGNvbXBvbmVudHM6IHsNCiAgICBTaWduYXR1cmUsDQogICAgUHJvcGVydGllcw0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBmb3JtOiB7DQogICAgICAgIGlkQ2FycmVnYW1lbnRvOiAwLA0KICAgICAgICBlbnRyYWRhOiBuZXcgRGF0ZSgpLA0KICAgICAgICBub21ldHJhbnNwOiAiIiwNCiAgICAgICAgbW90b3Jpc3RhOiAiIiwNCiAgICAgICAgcGxhY2E6ICIiDQogICAgICB9LA0KICAgICAgZmlsdHJvOiAiIiwNCiAgICAgIGZpbHRlck9uOiBbImlkIiwgInRyYW5zcCIsICJtb3RvcmlzdGEiLCAicGxhY2EiXSwNCiAgICAgIGZpbHRyb2Fzc2luYWRvczogZmFsc2UsDQogICAgICBmaWx0cm9jb2xldGFkb3M6IHRydWUsDQogICAgICB0aW1lcjogbnVsbCwNCiAgICAgIHVwZGF0ZXRpbWVvdXQ6IDE1MDAwLA0KICAgICAgdXBkYXRlc3RvcDogZmFsc2UsDQogICAgICBkYXRhOiBbXSwNCiAgICAgIG1hcmNhczogW10sDQogICAgICBzaWdPcGNvZXM6IFtdLA0KICAgICAgdGFiSW5kZXg6IDAsDQogICAgICBzaWdJbWFnZTogbnVsbCwNCiAgICAgIHNpZ0ltYWdlQ29uZjogbnVsbCwNCiAgICAgIHNpZ09ic0NvbmY6ICIiLA0KICAgICAgc2lnQ2hhbmdlOiBmYWxzZSwNCiAgICAgIHNpZ0NoYW5nZUNvbmY6IGZhbHNlLA0KICAgICAgc2VsZWN0ZWQ6IFtdLA0KICAgICAgcGVkaWRvc3NlbGVjdGVkOiBudWxsLA0KICAgICAgcGVkaWRvczogW10sDQogICAgICBvcGNvZXM6IFtdLA0KICAgICAgZm9ybWNvbGxhcHNlZDogZmFsc2UNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGhvamUoKSB7DQogICAgICBjb25zdCBoID0gbmV3IERhdGUoKTsNCiAgICAgIHJldHVybiBoLmdldERheSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwnMCcpICsgJy8nICsgaC5nZXRNb250aCgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwnMCcpICsgJy8nICsgaC5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkucGFkU3RhcnQoNCwnMCcpOw0KICAgIH0sDQogICAgZmllbGRzKCkgew0KICAgICAgcmV0dXJuICBbDQogICAgICAgIC8vIHsga2V5OiAidHJhbnNwIiwgbGFiZWw6ICJUcmFuc3BvcnRhZG9yYSIsIHNvcnRhYmxlOiB0cnVlIH0sDQogICAgICAgIC8vIHsga2V5OiAibW90b3Jpc3RhIiwgc29ydGFibGU6IHRydWUgfSwNCiAgICAgICAgLy8geyBrZXk6ICJwbGFjYSIsIHNvcnRhYmxlOiB0cnVlIH0sDQogICAgICAgIC8vIHsga2V5OiAicGVyYyIsIGxhYmVsOiAiQ29sZXRhcyIsIHNvcnRhYmxlOiB0cnVlIH0sDQogICAgICAgIHsga2V5OiAiY2FyZ2EiLCBsYWJlbDogIkNhcmdhIn0sDQogICAgICAgIHsga2V5OiAiYWN0aW9ucyIsIGxhYmVsOiAiIiwgc29ydGFibGU6IGZhbHNlIH0NCiAgICAgIF0NCiAgICB9LA0KICAgIHBhcmFtcygpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIGlkQ2FycmVnYW1lbnRvOiB0aGlzLmZvcm0uaWRDYXJyZWdhbWVudG8sDQogICAgICAgIGVudHJhZGE6IHRoaXMuZm9ybS5lbnRyYWRhLA0KICAgICAgICBub21ldHJhbnNwOiB0aGlzLmZvcm0ubm9tZXRyYW5zcCwNCiAgICAgICAgbW90b3Jpc3RhOiB0aGlzLmZvcm0ubW90b3Jpc3RhLA0KICAgICAgICBwbGFjYTogdGhpcy5mb3JtLnBsYWNhDQogICAgICB9DQogICAgfSwNCiAgICBtYXJjYXNzZWxlY3RlZCgpIHsNCiAgICAgIHJldHVybiB0aGlzLm1hcmNhcy5maWx0ZXIobT0+bS5jaGVja2VkKTsNCiAgICB9LA0KICAgIHJvbWFuZWlvcygpIHsNCiAgICAgIHJldHVybiB0aGlzLmRhdGEubWFwKHI9Pih7DQogICAgICAgIGlkOiByLmlkLA0KICAgICAgICBjb2RUcmFuc3A6IHIuQ29kaWdvX1RyYW5zcCwNCiAgICAgICAgdHJhbnNwOiByLlJhemFvX1NvY2lhbCwNCiAgICAgICAgbW90b3Jpc3RhOiByLk1vdG9yaXN0YSwNCiAgICAgICAgdWx0aW1hY29sZXRhOiByLlVsdGltYUNvbGV0YSwNCiAgICAgICAgdm9sdW1lczogci5UVm9sdW1lcywNCiAgICAgICAgY29sZXRhZG9zOiByLlRWb2x1bWVzQ29sZXRhZG9zLA0KICAgICAgICBUUGVkaWRvczogci5UUGVkaWRvcywNCiAgICAgICAgcGVyYzogci5QZXJjQ29sZXRhZG9zLA0KICAgICAgICBwbGFjYTogci5QbGFjYSwNCiAgICAgICAgc2lnSW1hZ2U6IHIuc2lnSW1hZ2UsDQogICAgICAgIHNpZ0ltYWdlQ29uZjogci5zaWdJbWFnZUNvbmYsDQogICAgICAgIFBlcmNBc3NpbmFkb3M6IHIuUGVyY0Fzc2luYWRvcywNCiAgICAgICAgc2lnT2JzQ29uZjogci5zaWdPYnNDb25mLA0KICAgICAgICBzaWduZWQ6ICgoci5zaWdJbWFnZSAmJiByLnNpZ0ltYWdlICE9PSAiIikgfHwgKHIuc2lnSW1hZ2VDb25mICYmIHIuc2lnSW1hZ2VDb25mICE9PSAiIikpID8gdHJ1ZSA6IGZhbHNlLA0KICAgICAgICBSb21hbmVpb3M6IHIuUm9tYW5laW9zIHx8IFtdLA0KICAgICAgICBjb2xsYXBzZWQ6IHIuY29sbGFwc2VkLA0KICAgICAgICBjaGVja2VkOiByLmNoZWNrZWQsDQogICAgICAgIE9wY29lczogci5PcGNvZXMsDQogICAgICAgIF9yb3dWYXJpYW50OiByLnNpZ0ltYWdlICYmIHIuc2lnSW1hZ2VDb25mID8gJ3N1Y2Nlc3MnIDogJycNCiAgICAgIH0pKS5maWx0ZXIoZj0+dGhpcy5yb21hbmVpb3NmaWx0cm9zKGYpKQ0KICAgICAgLy8uZmlsdGVyKGY9PmYuc2lnbmVkID09IHRoaXMuZmlsdHJvYXNzaW5hZG9zICYmIChmLnBlcmMgPiA5OSkgPT0gdGhpcy5maWx0cm9jb2xldGFkb3MgKQ0KICAgIH0sDQogICAgcGFyYW1zaWduYXR1cmUoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBpZENhcnJlZ2FtZW50bzogdGhpcy5zZWxlY3RlZC5pZCwNCiAgICAgICAgc2lnSW1hZ2U6IHRoaXMuc2lnSW1hZ2UsDQogICAgICAgIHNpZ0ltYWdlQ29uZjogdGhpcy5zaWdJbWFnZUNvbmYsDQogICAgICAgIHNpZ09ic0NvbmY6IHRoaXMuc2lnT2JzQ29uZiwNCiAgICAgICAgb3Bjb2VzOiBKU09OLnN0cmluZ2lmeSh0aGlzLm9wY29lcyksDQogICAgICAgIHJvbWFuZWlvczogdGhpcy5zZWxlY3RlZC5Sb21hbmVpb3MuZmlsdGVyKHI9PnIuY2hlY2tlZCkNCiAgICAgIH0NCiAgICB9LA0KICAgIHNpZ25hdHVyZU9wdGlvbnMoKSB7DQogICAgICByZXR1cm4gdGhpcy5zaWdPcGNvZXMubWFwKG89Pih7DQogICAgICAgIHRleHQ6IG8uZGVzY3JpY2FvLA0KICAgICAgICB2YWx1ZTogby5pZA0KICAgICAgfSkpDQogICAgfSwNCiAgICBzZWxlY3RlZGNoZWNrZWQoKSB7DQogICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZC5Sb21hbmVpb3MgPyB0aGlzLnNlbGVjdGVkLlJvbWFuZWlvcy5maWx0ZXIoYz0+Yy5jaGVja2VkKSA6IFtdOw0KICAgIH0sDQogICAgc2VsZWN0ZWRjaGVja2VkbGVuZ3RoKCkgew0KICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRjaGVja2VkLmxlbmd0aCB8fCAwOw0KICAgIH0sDQogICAgc2lnbmF0dXJlRmllbGRzKCkgew0KICAgICAgcmV0dXJuIHtUcmFuc3BvcnRhZG9yYTogdGhpcy5zZWxlY3RlZC50cmFuc3AsIE1vdG9yaXN0YTogdGhpcy5zZWxlY3RlZC5tb3RvcmlzdGEsIFBsYWNhOiB0aGlzLnNlbGVjdGVkLnBsYWNhfTsNCiAgICB9LA0KICAgIHNpZ25hdHVyZVZhbGlkKCkgew0KICAgICAgcmV0dXJuICgodGhpcy5zaWdDaGFuZ2UgJiYgdGhpcy5zaWdJbWFnZSAmJiB0aGlzLnNpZ0ltYWdlICE9PSAiIikgfHwgKHRoaXMuc2lnQ2hhbmdlQ29uZiAmJiB0aGlzLnNpZ0ltYWdlQ29uZiAmJiB0aGlzLnNpZ0ltYWdlQ29uZiAhPT0gIiIpKTsNCiAgICB9LA0KICAgIHNpZ25hdHVyZVRpdGxlKCkgew0KICAgICAgcmV0dXJuICJDYXJnYTogIiArICgodGhpcy5zZWxlY3RlZCAmJiB0aGlzLnNlbGVjdGVkLmlkKSB8fCAiIik7DQogICAgfSwNCiAgICBwZWRpZG9zVGl0bGUoKSB7DQogICAgICByZXR1cm4gIlJvbWFuZWlvOiAiICsgKCh0aGlzLnBlZGlkb3MgJiYgdGhpcy5wZWRpZG9zWzBdICYmIHRoaXMucGVkaWRvc1swXS5Sb21hbmVpbykgfHwgIiIpOw0KICAgIH0sDQogICAgcGVkaWRvc05vdGFzU3BsaXQoKSB7DQogICAgICByZXR1cm4gKCh0aGlzLnBlZGlkb3MgJiYgdGhpcy5wZWRpZG9zWzBdICYmIHRoaXMucGVkaWRvc1swXS5Ob3RhcyAmJiB0aGlzLnBlZGlkb3NbMF0uTm90YXMubWFwKG49PihuLk51bWVyb19ub3RhKSkuam9pbigiLCIpKSB8fCAiIikNCiAgICB9DQogIH0sDQogIGJlZm9yZU1vdW50KCkgew0KLy8gICAgdGhpcy5nZXRDYXJyZWdhbWVudG8oKTsNCiAgICBBUEkuZ2V0TG9jYWxEQkRvY3VtZW50KCdjYXJyZWdhbWVudG8nKS50aGVuKGRvYyA9PiB7DQogICAgICB0aGlzLmlkQ2FycmVnYW1lbnRvID0gZG9jLmlkQ2FycmVnYW1lbnRvIHx8IDA7DQogICAgICB0aGlzLmVudHJhZGEgPSBkb2MuZW50cmFkYSB8fCBuZXcgRGF0ZSgpOw0KICAgICAgdGhpcy5ub21ldHJhbnNwID0gZG9jLm5vbWV0cmFuc3AgfHwgICIiOw0KICAgICAgdGhpcy5tb3RvcmlzdGEgPSBkb2MubW90b3Jpc3RhIHx8ICAiIjsNCiAgICAgIHRoaXMucGxhY2EgPSBkb2MucGxhY2EgfHwgIiI7DQogICAgICB0aGlzLnVwZGF0ZXRpbWVvdXQgPSBkb2MudXBkYXRldGltZW91dCB8fCB0aGlzLnVwZGF0ZXRpbWVvdXQ7DQogICAgICB0aGlzLmZpbHRyb2Fzc2luYWRvcyA9IGRvYy5maWx0cm9hc3NpbmFkb3MgfHwgdGhpcy5maWx0cm9hc3NpbmFkb3M7DQogICAgICB0aGlzLm1hcmNhcyA9IGRvYy5tYXJjYXMgfHwgdGhpcy5tYXJjYXM7DQogICAgICB0aGlzLmZpbHRybyA9IGRvYy5maWx0cm8gfHwgdGhpcy5maWx0cm87DQogICAgfSk7DQoNCiAgICB0aGlzLmdldENhcnJlZ2FtZW50b09wY29lcygpOw0KICAgIHRoaXMuZ2V0TWFyY2FzKCk7DQoNCiAgICAvLyBzZXRhIG8gdGltZXIgcXVlIGF0dWFsaXphIG9zIHRvdGFpcyAuLi4NCiAgICB0aGlzLnVwZGF0ZXN0b3AgPSBmYWxzZTsNCiAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gew0KICAgICAgaWYgKCF0aGlzLnVwZGF0ZXN0b3ApDQogICAgICAgIHRoaXMuZ2V0Q2FycmVnYW1lbnRvVG90YWlzKCk7DQogICAgfSwgdGhpcy51cGRhdGV0aW1lb3V0KTsNCg0KICB9LA0KICBtZXRob2RzOiB7DQogICAgdGVzdGUodmFsKSB7DQogICAgICBjb25zb2xlLmxvZygndGVzdGU6Jyx2YWwpOw0KICAgICAgdmFsLmNvbGxhcHNlZCA9ICF2YWwuY29sbGFwc2VkOw0KICAgIH0sDQogICAgcm9tYW5laW9zZmlsdHJvcyhpdGVtKSB7DQogICAgICAvLyBjb25zb2xlLmxvZygncm9tYW5laW9zZmlsdHJvcyhpdGVtKScsIGl0ZW0pOw0KICAgICAgbGV0IHJldCA9IGZhbHNlOw0KICAgICAgY29uc3QgbWFyY2FzID0gdGhpcy5tYXJjYXMuZmlsdGVyKG0gPT4gbS5jaGVja2VkKS5tYXAobSA9PiAobS5pZCkpIHx8IFtdOw0KICAgICAgLy9jb25zdCBtYXJjYXMgPSBbXQ0KDQogICAgICAvLyByZXQgPSAoKGl0ZW0uc2lnbmVkID09IHRoaXMuZmlsdHJvYXNzaW5hZG9zKSAmJiAoKGl0ZW0ucGVyYyA+IDk5KSA9PSB0aGlzLmZpbHRyb2NvbGV0YWRvcykpOw0KICAgICAgcmV0ID0gKChpdGVtLlBlcmNBc3NpbmFkb3MgPT0gMTAwKSA9PSB0aGlzLmZpbHRyb2Fzc2luYWRvcyk7DQoNCiAgICAgIGlmIChtYXJjYXMubGVuZ3RoID4gMCkgew0KICAgICAgICByZXQgPSByZXQgJiYgKGl0ZW0uUm9tYW5laW9zLmZpbHRlcihyID0+IHIuTWFyY2FzLmZpbmQobSA9PiBtYXJjYXMuaW5jbHVkZXMobS5pZCkpKS5sZW5ndGggPiAwKTsNCiAgICAgIH0NCg0KDQogICAgICBpZiAodGhpcy5maWx0cm8gIT09ICIiKSB7DQogICAgICAgIHJldCA9IHJldCAmJiAoDQogICAgICAgICAgaXRlbS5pZC50b1N0cmluZygpLmluY2x1ZGVzKHRoaXMuZmlsdHJvKSB8fA0KICAgICAgICAgIGl0ZW0udHJhbnNwLmluY2x1ZGVzKHRoaXMuZmlsdHJvLnRvVXBwZXJDYXNlKCkpIHx8DQogICAgICAgICAgaXRlbS5tb3RvcmlzdGEuaW5jbHVkZXModGhpcy5maWx0cm8udG9VcHBlckNhc2UoKSkgfHwNCiAgICAgICAgICBpdGVtLnBsYWNhLmluY2x1ZGVzKHRoaXMuZmlsdHJvLnRvVXBwZXJDYXNlKCkpDQogICAgICAgICkNCiAgICAgIH0NCg0KICAgICAgcmV0dXJuIHJldDsNCg0KICAgIH0sDQogICAgbWFyY2FyKGNoZWNrKSB7DQogICAgICBpZiAodGhpcy5kYXRhLmZpbmQoZD0+ZC5pZCA9PSB0aGlzLnNlbGVjdGVkLmlkKSkgew0KICAgICAgICB0aGlzLmRhdGEuZmluZChkPT5kLmlkID09IHRoaXMuc2VsZWN0ZWQuaWQpLlJvbWFuZWlvcy5tYXAocj0+ew0KICAgICAgICAgIHIuY2hlY2tlZCA9IGNoZWNrDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICBtb2RhbHBlZGlkb3MocGVkaWRvcykgew0KICAgICAgdGhpcy5wZWRpZG9zID0gcGVkaWRvczsNCiAgICAgIHRoaXMuJGJ2TW9kYWwuc2hvdygibW9kYWwtcGVkaWRvcyIpOw0KICAgIH0sDQogICAgZ2V0TWFyY2FzKCkgew0KICAgICAgQVBJLmdldCgidjIvU2Vydmljb3MvTWFyY2FzL0dldCIsIHtwZXNxdWlzYTogIiUiLCBQYWdlU2l6ZTogMzAgfSkNCiAgICAgIC50aGVuKChhcGlkYXRhKT0+ew0KICAgICAgICBpZiAoKGFwaWRhdGEuZGF0YS5TdWNjZXNzID09ICJUcnVlIikgfHwgYXBpZGF0YS5kYXRhLlN1Y2Nlc3MpIHsNCiAgICAgICAgICBjb25zdCByZXMgPSBBUEkucHJlcGFyZURhdGEoYXBpZGF0YS5kYXRhKTsNCiAgICAgICAgICB0aGlzLm1hcmNhcyA9IHJlcy5hcGlyZXNwb25zZS5EYXRhOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMubWFyY2FzID0gW107DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBnZXRDYXJyZWdhbWVudG9PcGNvZXMoKSB7DQogICAgICBBUEkuZ2V0KCJ2Mi9TZXJ2aWNvcy9DYXJyZWdhbWVudG8vT3Bjb2VzR2V0Iiwge30pDQogICAgICAudGhlbigoYXBpZGF0YSk9PnsNCiAgICAgICAgaWYgKChhcGlkYXRhLmRhdGEuU3VjY2VzcyA9PSAiVHJ1ZSIpIHx8IGFwaWRhdGEuZGF0YS5TdWNjZXNzKSB7DQogICAgICAgICAgY29uc3QgcmVzID0gQVBJLnByZXBhcmVEYXRhKGFwaWRhdGEuZGF0YSk7DQogICAgICAgICAgdGhpcy5zaWdPcGNvZXMgPSByZXMuYXBpcmVzcG9uc2UuRGF0YTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnNpZ09wY29lcyA9IFtdOw0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgZ2V0Q2FycmVnYW1lbnRvKCkgew0KICAgICAgdGhpcy51cGRhdGVzdG9wID0gdHJ1ZTsNCiAgICAgIEFQSS5nZXQoInYyL1NlcnZpY29zL0NhcnJlZ2FtZW50by9HZXQiLCB0aGlzLnBhcmFtcykNCiAgICAgIC50aGVuKChhcGlkYXRhKT0+ew0KICAgICAgICBpZiAoKGFwaWRhdGEuZGF0YS5TdWNjZXNzID09ICJUcnVlIikgfHwgYXBpZGF0YS5kYXRhLlN1Y2Nlc3MpIHsNCiAgICAgICAgICBjb25zdCByZXMgPSBBUEkucHJlcGFyZURhdGEoYXBpZGF0YS5kYXRhKTsNCiAgICAgICAgICB0aGlzLmRhdGEgPSByZXMuYXBpcmVzcG9uc2UuRGF0YTsNCiAgICAgICAgICB0aGlzLmZvcm1jb2xsYXBzZWQgPSBmYWxzZTsNCiAgICAgICAgICBBUEkuc2V0TG9jYWxEQkRvY3VtZW50KHRoaXMuJGRhdGEsICdjYXJyZWdhbWVudG8nKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmRhdGEgPSBbXTsNCiAgICAgICAgICB0aGlzLmZvcm1jb2xsYXBzZWQgPSB0cnVlOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGdldENhcnJlZ2FtZW50b1RvdGFpcygpIHsNCg0KICAgICAgQVBJLmdldCgidjIvU2Vydmljb3MvQ2FycmVnYW1lbnRvVG90YWlzL0dldCIsIHRoaXMucGFyYW1zLCBmYWxzZSkNCiAgICAgIC50aGVuKChhcGlkYXRhKT0+ew0KICAgICAgICBpZiAoKGFwaWRhdGEuZGF0YS5TdWNjZXNzID09ICJUcnVlIikgfHwgYXBpZGF0YS5kYXRhLlN1Y2Nlc3MpIHsNCiAgICAgICAgICBjb25zdCByZXMgPSBBUEkucHJlcGFyZURhdGEoYXBpZGF0YS5kYXRhKTsNCg0KICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXRDYXJyZWdhbWVudG9Ub3RhaXM6aGl0Jyk7DQoNCiAgICAgICAgICByZXMuYXBpcmVzcG9uc2UuRGF0YS5tYXAodCA9PiB7DQogICAgICAgICAgICBpZiAodGhpcy5kYXRhLmZpbmQoYyA9PiBjLmlkID09IHQuaWQpKSB7DQogICAgICAgICAgICAgIHRoaXMuZGF0YS5maW5kKGMgPT4gYy5pZCA9PSB0LmlkKS5UVm9sdW1lc0NvbGV0YWRvcyA9IHQuVFZvbHVtZXNDb2xldGFkb3M7DQogICAgICAgICAgICAgIHRoaXMuZGF0YS5maW5kKGMgPT4gYy5pZCA9PSB0LmlkKS5QZXJjQ29sZXRhZG9zID0gdC5QZXJjQ29sZXRhZG9zOw0KICAgICAgICAgICAgICB0aGlzLmRhdGEuZmluZChjID0+IGMuaWQgPT0gdC5pZCkuc2lnSW1hZ2UgPSB0LnNpZ0ltYWdlOw0KCQkgICAgICAgICAgdGhpcy5kYXRhLmZpbmQoYyA9PiBjLmlkID09IHQuaWQpLnNpZ0ltYWdlQ29uZiA9IHQuc2lnSW1hZ2VDb25mOw0KCQkgICAgICAgICAgdGhpcy5kYXRhLmZpbmQoYyA9PiBjLmlkID09IHQuaWQpLnNpZ09ic0NvbmYgPSB0LnNpZ09ic0NvbmY7DQoJCSAgICAgICAgICB0aGlzLmRhdGEuZmluZChjID0+IGMuaWQgPT0gdC5pZCkuT3Bjb2VzID0gdC5PcGNvZXM7DQoJCSAgICAgICAgICB0aGlzLmRhdGEuZmluZChjID0+IGMuaWQgPT0gdC5pZCkuVWx0aW1hQ29sZXRhID0gdC5VbHRpbWFDb2xldGE7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgfSkgICAgICANCiAgICB9LA0KICAgIGFzeW5jIGFzc2luYXIoaXRlbSkgew0KICAgICAgY29uc29sZS5sb2coJ2Fzc2luYXIuaXRlbTonLCBpdGVtKTsNCiAgICAgIGxldCBwZXJjID0gaXRlbS5wZXJjOw0KDQogICAgICAvLyBzdWdlcmlkbyBuw6NvIHBvZGVyIGxpYmVyYXIgc2VtIGVzdGFyIDEwMCUgY29sZXRhZG8NCiAgICAgIC8qDQogICAgICBpZiAocGVyYyA8IDEwMCkgew0KICAgICAgICB0aGlzLiRyb290LnRvYXN0ZGFuZ2VyKCJBIGNhcmdhIG7Do28gZXN0w6EgMTAwJSBjb2xldGFkYSwgbsOjbyDDqSBwb3Nzw612ZWwgc29saWNpdGFyIGEgYXNzaW5hdHVyYSAhIik7DQogICAgICB9DQogICAgICAqLw0KICAgICAgaWYgKHBlcmMgPCAxMDApIHsNCiAgICAgICAgYXdhaXQgdGhpcy4kcm9vdA0KICAgICAgICAgIC5zaG93bWVzc2FnZSgnQSBjYXJnYSBuw6NvIGVzdMOhIDEwMCUgY29sZXRhZGEsIGRlc2VqYSByZWFsbWVudGUgc29saWNpdGFyIGEgYXNzaW5hdHVyYSA/JykNCiAgICAgICAgICAudGhlbigoY2hvaWNlKT0+ew0KICAgICAgICAgICAgaWYgKGNob2ljZSkgew0KICAgICAgICAgICAgICBwZXJjID0gMTAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICB9DQoNCiAgICAgIGlmIChwZXJjID4gOTkuOSkgew0KICAgICAgICAvLyB0aGlzLnNlbGVjdGVkID0gaXRlbTsNCiAgICAgICAgdGhpcy5kb3NlbGVjdGVkKGl0ZW0pOw0KDQogICAgICAgIGNvbnN0IHBhcmFtcyA9IHsNCiAgICAgICAgICBpZENhcnJlZ2FtZW50bzogaXRlbS5pZCwNCiAgICAgICAgICBSb21hbmVpb3M6IHRoaXMuc2VsZWN0ZWRjaGVja2VkLm1hcChyPT4oci5Sb21hbmVpbykpLmpvaW4oJywnKQ0KICAgICAgICB9DQogICAgICAgIGNvbnNvbGUubG9nKCdhc3NpbmFyLnBhcmFtczonLCBwYXJhbXMpOw0KDQogICAgICAgIC8vIGJ1c2NhIGEgYXNzaW5hdHVkYSBkYSBBUEkgLi4uDQogICAgICAgIEFQSS5nZXQoInYyL1NlcnZpY29zL0NhcnJlZ2FtZW50b1NpZ25hdHVyZS9HZXQiLCBwYXJhbXMsIGZhbHNlKQ0KICAgICAgICAgIC50aGVuKChhcGlkYXRhKSA9PiB7DQogICAgICAgICAgICBjb25zdCByZXMgPSBBUEkucHJlcGFyZURhdGEoYXBpZGF0YS5kYXRhKTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXM6JywgcmVzKTsNCiAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcyAmJiByZXMuZGF0YS5sZW5ndGg+MCkgew0KICAgICAgICAgICAgICBjb25zdCBkYXRhID0gcmVzLmRhdGFbMF07DQogICAgICAgICAgICAgIHRoaXMuc2lnSW1hZ2UgPSBkYXRhLnNpZ0ltYWdlIHx8ICIiOw0KICAgICAgICAgICAgICB0aGlzLnNpZ0ltYWdlQ29uZiA9IGRhdGEuc2lnSW1hZ2VDb25mIHx8ICIiOw0KICAgICAgICAgICAgICB0aGlzLnNpZ09ic0NvbmYgPSBkYXRhLnNpZ09ic0NvbmYgfHwgIiI7ICAgICAgICANCiAgICAgICAgICAgICAgdGhpcy5vcGNvZXMgPSBKU09OLnBhcnNlKGRhdGEuT3Bjb2VzIHx8ICJbXSIpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy5zaWdJbWFnZSA9ICIiOw0KICAgICAgICAgICAgICB0aGlzLnNpZ0ltYWdlQ29uZiA9ICIiOw0KICAgICAgICAgICAgICB0aGlzLnNpZ09ic0NvbmYgPSAiIjsgICAgICAgIA0KICAgICAgICAgICAgICB0aGlzLm9wY29lcyA9IFtdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5zaWdDaGFuZ2UgPSBmYWxzZTsNCiAgICAgICAgICAgIHRoaXMuc2lnQ2hhbmdlQ29uZiA9IGZhbHNlOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB0aGlzLiRidk1vZGFsLnNob3coIm1vZGFsLWFzc2luYXIiKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgLyoNCiAgICAgICAgLy8gY29uc29sZS5sb2coImFzc2luYXIub3Bjb2VzOiIsIGl0ZW0uT3Bjb2VzKTsNCiAgICAgICAgaWYgKGl0ZW0uUm9tYW5laW9zLmZpbmQocj0+ci5jaGVja2VkKSkgew0KICAgICAgICAgIHRoaXMuc2lnSW1hZ2UgPSBpdGVtLlJvbWFuZWlvcy5maW5kKHI9PnIuY2hlY2tlZCkuc2lnSW1hZ2U7DQogICAgICAgICAgdGhpcy5zaWdJbWFnZUNvbmYgPSBpdGVtLlJvbWFuZWlvcy5maW5kKHI9PnIuY2hlY2tlZCkuc2lnSW1hZ2VDb25mOw0KICAgICAgICAgIHRoaXMuc2lnT2JzQ29uZiA9IGl0ZW0uUm9tYW5laW9zLmZpbmQocj0+ci5jaGVja2VkKS5zaWdPYnNDb25mOyAgICAgICAgDQogICAgICAgICAgdGhpcy5vcGNvZXMgPSBKU09OLnBhcnNlKGl0ZW0uUm9tYW5laW9zLmZpbmQocj0+ci5jaGVja2VkKS5PcGNvZXMgfHwgIltdIik7ICAgICAgICANCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnNpZ0ltYWdlID0gaXRlbS5zaWdJbWFnZTsNCiAgICAgICAgICB0aGlzLnNpZ0ltYWdlQ29uZiA9IGl0ZW0uc2lnSW1hZ2VDb25mOw0KICAgICAgICAgIHRoaXMuc2lnT2JzQ29uZiA9IGl0ZW0uc2lnT2JzQ29uZjsgICAgICAgIA0KICAgICAgICAgIHRoaXMub3Bjb2VzID0gSlNPTi5wYXJzZShpdGVtLk9wY29lcyB8fCAiW10iKTsgDQogICAgICAgIH0NCiAgICAgICAgdGhpcy5zaWdDaGFuZ2UgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5zaWdDaGFuZ2VDb25mID0gZmFsc2U7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKCJhc3NpbmFyLml0ZW06IiwgaXRlbSk7DQogICAgICAgIHRoaXMuJGJ2TW9kYWwuc2hvdygibW9kYWwtYXNzaW5hciIpOw0KICAgICAgICAqLw0KICAgICAgfQ0KICAgIH0sDQogICAgYXNzaW5hcnJvbWFuZWlvKGNhcmdhLCByb21hbmVpbykgew0KICAgICAgaWYgKHRoaXMuZGF0YS5maW5kKGQ9PmQuaWQgPT0gY2FyZ2EuaWQpKSB7DQogICAgICAgIC8vIGRlc21hcmNhIG9zIG91dHJvcyAuLi4gDQogICAgICAgIHRoaXMuZGF0YS5maW5kKGQ9PmQuaWQgPT0gY2FyZ2EuaWQpLlJvbWFuZWlvcy5maWx0ZXIocj0+ci5jaGVja2VkKS5tYXAobT0+bS5jaGVja2VkID0gZmFsc2UpOw0KICAgICAgICBpZiAodGhpcy5kYXRhLmZpbmQoZD0+ZC5pZCA9PSBjYXJnYS5pZCkuUm9tYW5laW9zLmZpbmQocj0+ci5Sb21hbmVpbz09cm9tYW5laW8pKSB7DQogICAgICAgICAgdGhpcy5kYXRhLmZpbmQoZD0+ZC5pZCA9PSBjYXJnYS5pZCkuUm9tYW5laW9zLmZpbmQocj0+ci5Sb21hbmVpbz09cm9tYW5laW8pLmNoZWNrZWQgPSB0cnVlDQogICAgICAgICAgdGhpcy5hc3NpbmFyKGNhcmdhKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgc2lnbmF0dXJlU2hvd24oKSB7DQogICAgICB0aGlzLnVwZGF0ZXN0b3AgPSB0cnVlOw0KICAgIH0sDQogICAgc2lnbmF0dXJlSGlkZGVuKCkgew0KICAgICAgdGhpcy51cGRhdGVzdG9wID0gZmFsc2U7DQogICAgfSwNCiAgICBzaWduYXR1cmVPaygpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKCJzaWduYXR1cmVPay5zaWdJbWFnZToiLCB0aGlzLnNpZ0ltYWdlKTsNCiAgICAgIEFQSS5wb3N0KCJ2Mi9TZXJ2aWNvcy9DYXJyZWdhbWVudG8vU2lnbmF0dXJlU2V0IiwgdGhpcy5wYXJhbXNpZ25hdHVyZSkNCiAgICAgIC50aGVuKChhcGlkYXRhKT0+ew0KICAgICAgICBpZiAoKGFwaWRhdGEuZGF0YS5TdWNjZXNzID09ICJUcnVlIikgfHwgYXBpZGF0YS5kYXRhLlN1Y2Nlc3MpIHsNCiAgICAgICAgICBpZiAodGhpcy5kYXRhLmZpbmQoYz0+Yy5pZCA9PSB0aGlzLnNlbGVjdGVkLmlkKSkgew0KICAgICAgICAgICAgdGhpcy5kYXRhLmZpbmQoYz0+Yy5pZCA9PSB0aGlzLnNlbGVjdGVkLmlkKS5zaWdJbWFnZSA9IHRoaXMuc2lnSW1hZ2U7DQogICAgICAgICAgICB0aGlzLmRhdGEuZmluZChjPT5jLmlkID09IHRoaXMuc2VsZWN0ZWQuaWQpLnNpZ0ltYWdlQ29uZiA9IHRoaXMuc2lnSW1hZ2VDb25mOw0KICAgICAgICAgICAgdGhpcy5kYXRhLmZpbmQoYz0+Yy5pZCA9PSB0aGlzLnNlbGVjdGVkLmlkKS5zaWdPYnNDb25mID0gdGhpcy5zaWdPYnNDb25mO3RoaXMuZGF0YS5maW5kKGM9PmMuaWQgPT0gdGhpcy5zZWxlY3RlZC5pZCkuT3Bjb2VzID0gSlNPTi5zdHJpbmdpZnkodGhpcy5vcGNvZXMpOw0KICAgICAgICAgICAgdGhpcy5kYXRhLmZpbmQoYz0+Yy5pZCA9PSB0aGlzLnNlbGVjdGVkLmlkKS5Sb21hbmVpb3MuZmlsdGVyKHI9PnIuY2hlY2tlZCkubWFwKGQ9PnsNCiAgICAgICAgICAgICAgZC5zaWdJbWFnZSA9IHRoaXMuc2lnSW1hZ2U7DQogICAgICAgICAgICAgIGQuc2lnSW1hZ2VDb25mID0gdGhpcy5zaWdJbWFnZUNvbmY7DQogICAgICAgICAgICAgIGQuc2lnT2JzQ29uZiA9IHRoaXMuc2lnT2JzQ29uZjsNCiAgICAgICAgICAgICAgZC5PcGNvZXMgPSBKU09OLnN0cmluZ2lmeSh0aGlzLm9wY29lcyk7DQogICAgICAgICAgICAgIGQuY2hlY2tlZCA9IGZhbHNlOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgICAgY29uc3QgcmVzID0gQVBJLnByZXBhcmVEYXRhKGFwaWRhdGEuZGF0YSk7DQoNCiAgICAgICAgICB0aGlzLiRyb290LnRvYXN0c3VjY2VzcyhyZXMuZGF0YVswXS5NZW5zYWdlbSk7DQogICAgICAgICAgdGhpcy51cGRhdGVzdG9wID0gZmFsc2U7DQoNCiAgICAgICAgICBpZiAoICghdGhpcy5zaWdJbWFnZSB8fCB0aGlzLnNpZ0ltYWdlID09ICIiKSB8fCAoIXRoaXMuc2lnSW1hZ2VDb25mIHx8IHRoaXMuc2lnSW1hZ2VDb25mID09ICIiKSApIHsNCiAgICAgICAgICAgIGlmICggKCF0aGlzLnNpZ0ltYWdlIHx8IHRoaXMuc2lnSW1hZ2UgPT0gIiIpICkgdGhpcy4kcm9vdC50b2FzdGRhbmdlcignQXNzaW5hdHVyYSBkbyBtb3RvcmlzdGEgbsOjbyBpbmZvcm1hZGEhJyk7DQogICAgICAgICAgICBpZiAoICghdGhpcy5zaWdJbWFnZUNvbmYgfHwgdGhpcy5zaWdJbWFnZUNvbmYgPT0gIiIpICkgdGhpcy4kcm9vdC50b2FzdGRhbmdlcignQXNzaW5hdHVyYSBkbyBjb25mZXJlbnRlIG7Do28gaW5mb3JtYWRhIScpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRyb290LnRvYXN0ZGFuZ2VyKGFwaWRhdGEuRXJyb3IpOw0KICAgICAgICAgIHRoaXMuZm9ybWNvbGxhcHNlZCA9IGZhbHNlOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGRvc2VsZWN0ZWQoaXRlbSkgew0KICAgICAgdGhpcy5zZWxlY3RlZCA9IGl0ZW07DQogICAgfSwNCiAgICBjbGFzc3BlcmMocGVyYykgew0KICAgICAgcmV0dXJuIChwZXJjPjk5KSA/ICJzdWNjZXNzIiA6ICJwcmltYXJ5IjsNCiAgICB9LA0KICAgIGNsYXNzc2VsZWN0ZWQoaXRlbSkgew0KICAgICAgcmV0dXJuIChpdGVtLmlkID09IHRoaXMuc2VsZWN0ZWQuaWQpID8gInByaW1hcnkiIDogIiI7DQogICAgfSwNCiAgICBjbGFzc3BlZGlkb3MoaXRlbSkgew0KICAgICAgcmV0dXJuICh0aGlzLnBlZGlkb3NzZWxlY3RlZCAmJiAoaXRlbS5QZWRpZG8gPT0gdGhpcy5wZWRpZG9zc2VsZWN0ZWQuUGVkaWRvKSkgPyAicHJpbWFyeSIgOiAiIjsNCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgZm9ybWNvbGxhcHNlZChjb2xsYXBzZWQpIHsNCiAgICAgIHRoaXMudXBkYXRlc3RvcCA9IGNvbGxhcHNlZDsNCiAgICB9LA0KICAgIHVwZGF0ZXRpbWVvdXQoKSB7DQogICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOw0KICAgICAgY29uc29sZS5sb2coJ3VwZGF0ZXRpbWVvdXQ6JywgbmV3IERhdGUoKSk7DQogICAgICB0aGlzLnRpbWVyID0gbnVsbDsNCiAgICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKCdDYXJyZWdhbWVudG8udGltZXI6JywgbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKSk7DQogICAgICB9LCAgdGhpcy5ydW50aW1lb3V0KCkpOw0KICAgIH0sDQogICAgcnVudGltZW91dCgpIHsNCiAgICAgIGlmICghdGhpcy51cGRhdGVzdG9wKQ0KICAgICAgICB0aGlzLmdldENhcnJlZ2FtZW50b1RvdGFpcygpDQogICAgfQ0KICB9LA0KICBiZWZvcmVEZXN0cm95KCkgew0KICAgIHRoaXMudXBkYXRlc3RvcCA9IHRydWU7DQogICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsNCiAgICB0aGlzLnRpbWVyID0gbnVsbDsNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/carregamento/views","sourcesContent":["<template>\r\n  <div class=\"mx-auto container\">\r\n    <b-card class=\"my-2\" header-bg-variant=\"primary\" header-text-variant=\"white\">\r\n    <template #header>\r\n    <div class=\"d-flex w-100 justify-content-between\">\r\n      <h4 class=\"mb-0\">Controle de cargas</h4>\r\n      <b-button-group>\r\n      <b-button variant=\"light\" v-b-toggle.collapseform>\r\n        <b-icon-caret-up v-if=\"formcollapsed\"/>\r\n        <b-icon-caret-down v-else/>\r\n        Filtros\r\n        </b-button>\r\n        <b-dropdown split variant=\"success\" @click=\"updatestop=false\" title=\"Atualização de coletas\" v-if=\"updatestop\">\r\n          <template #button-content>\r\n           <b-icon-play />\r\n           </template>\r\n           <b-dropdown-item-button @click=\"updatetimeout=5000\"><b-icon-toggle-on v-if=\"updatetimeout==5000\"/><b-icon-toggle-off v-else/><span class=\"ml-2\">Timer em 5 Segundos</span></b-dropdown-item-button>\r\n           <b-dropdown-item-button @click=\"updatetimeout=15000\"><b-icon-toggle-on v-if=\"updatetimeout==15000\"/><b-icon-toggle-off v-else/><span class=\"ml-2\">Timer em 15 Segundos</span></b-dropdown-item-button>\r\n           <b-dropdown-item-button @click=\"updatetimeout=30000\"><b-icon-toggle-on v-if=\"updatetimeout==30000\"/><b-icon-toggle-off v-else/><span class=\"ml-2\">Timer em 30 Segundos</span></b-dropdown-item-button>\r\n           <b-dropdown-item-button @click=\"updatetimeout=60000\"><b-icon-toggle-on v-if=\"updatetimeout==60000\"/><b-icon-toggle-off v-else/><span class=\"ml-2\">Timer em 1 minuto</span></b-dropdown-item-button>\r\n        </b-dropdown>\r\n        <!-- <b-button variant=\"success\" @click=\"updatestop=false\" v-if=\"updatestop\">\r\n          <b-icon-play />\r\n        </b-button>         -->\r\n        <b-button variant=\"danger\" @click=\"updatestop=true\" title=\"Pausar a atualização de coletas\" v-else>\r\n          <b-icon-pause />\r\n        </b-button> \r\n        </b-button-group>      \r\n      </div>\r\n    </template>\r\n    <!--\r\n      selected: {{selected}}<br />\r\n      selectedchecked: {{selectedchecked}}<br />\r\n      selectedcheckedlength: {{selectedcheckedlength}}<br />\r\n      \r\n      marcasselected: {{marcasselected}}<br />\r\n      data: {{data}}<br />\r\n      romaneios[0]: {{romaneios[0]}}<br />\r\n      romaneios[2]: {{romaneios[2]}}\r\n       -->\r\n    <b-collapse id=\"collapseform\" v-model=\"formcollapsed\">\r\n    <b-row>\r\n      <b-col cols=\"12\" md=\"2\">\r\n      <b-form-group\r\n        id=\"input-group-idcarregamento\"\r\n        label-for=\"input-idcarregamento\"\r\n        label=\"Carga\"\r\n      >\r\n        <b-form-input\r\n          id=\"input-idcarregamento\"\r\n          type=\"number\"\r\n          v-model=\"form.idCarregamento\"\r\n        >\r\n        </b-form-input>\r\n      </b-form-group>\r\n      </b-col>\r\n      <b-col cols=\"12\" md=\"3\">\r\n      <b-form-group\r\n        id=\"input-group-database\"\r\n        label-for=\"input-database\"\r\n        label=\"Data Entrada\"\r\n      >\r\n        <b-form-datepicker\r\n          id=\"input-database\"\r\n          :date-format-options=\"{ year: 'numeric', month: '2-digit', day: '2-digit'}\" locale=\"pt\"\r\n          v-model=\"form.entrada\"\r\n        >\r\n        </b-form-datepicker>\r\n      </b-form-group>\r\n      </b-col>\r\n      <b-col cols=\"12\" md=\"4\">\r\n        <b-form-group\r\n        id=\"input-group-motorista\"\r\n        label-for=\"input-motorista\"\r\n        label=\"Motorista\"\r\n      >\r\n      <b-form-input id=\"input-motorista\" type=\"text\" v-model=\"form.motorista\" />\r\n      </b-form-group>\r\n      </b-col>\r\n      <b-col cols=\"12\" md=\"3\">\r\n        <b-form-group\r\n        id=\"input-group-placa\"\r\n        label-for=\"input-placa\"\r\n        label=\"Placa\"\r\n      >\r\n      <b-form-input id=\"input-placa\" type=\"text\" v-model=\"form.placa\" />\r\n      </b-form-group>\r\n      </b-col>\r\n    </b-row>\r\n\r\n    <b-row>\r\n      <b-col cols=\"12\">\r\n        <b-form-group\r\n        id=\"input-group-nometransp\"\r\n        label-for=\"input-nometransp\"\r\n        label=\"Transportadora\"\r\n      >\r\n      <b-form-input id=\"input-nometransp\" type=\"text\" v-model=\"form.nometransp\" />\r\n      </b-form-group>\r\n      </b-col>\r\n    </b-row>\r\n\r\n    <b-row>\r\n      <b-col cols=\"12\" class=\"mb-2 text-right\">\r\n        \r\n        <b-button variant=\"success\" @click=\"getCarregamento()\">\r\n          <b-icon-search />\r\n          Buscar\r\n        </b-button>\r\n        \r\n      </b-col>\r\n    </b-row>\r\n    <hr />\r\n    </b-collapse>\r\n\r\n    <b-row>\r\n      <b-col>\r\n        <b-input-group prepend=\"Filtro\" size=\"sm\" class=\"mb-2\">\r\n          <b-form-input\r\n            id=\"input-filtro\"\r\n            type=\"search\"\r\n            v-model=\"filtro\"\r\n            placeholder=\"Informe a carga, nome da transportadora, motorista ou placa...\"\r\n          ></b-form-input>\r\n        </b-input-group>\r\n      </b-col>\r\n    </b-row>\r\n    <b-row>\r\n      <b-col class=\"text-right\">\r\n        <div class=\"d-flex float-right align-items-center hspaced-4 mb-2\">\r\n          <b-dropdown size=\"sm\" text=\"Marcas\" variant=\"info\" right>\r\n            <b-form-checkbox\r\n              v-for=\"m of marcas\"\r\n              :key=\"m.id\"\r\n              class=\"mb-1 ml-1\" \r\n              switch\r\n              left\r\n              v-model=\"m.checked\">\r\n              {{m.reduzido}}\r\n            </b-form-checkbox>\r\n          </b-dropdown>\r\n          <b-form-checkbox switch v-model=\"filtroassinados\">Assinados</b-form-checkbox>\r\n        </div>\r\n      </b-col>\r\n    </b-row>\r\n\r\n    <b-row>\r\n    <b-col cols=\"12\" class=\"lista\">\r\n      <b-list-group>\r\n        <b-list-group-item \r\n          v-for=\"r in romaneios\"\r\n          v-b-toggle=\"`collapse-romaneio-${r.id}`\"\r\n          :variant=\"classselected(r)\" \r\n          :key=\"r.id\"\r\n          @click=\"doselected(r)\"\r\n          class=\"flex-column align-items-start\">\r\n\r\n          <div class=\"d-flex w-100 justify-content-between\">\r\n            <div class=\"mb-3\">Carga: <span class=\"mb-3\"><b><span v-copy @click.stop=\"\">{{r.id}}</span></b></span></div>\r\n            <div style=\"min-width: 80px;\">\r\n              <b-progress :value=\"r.perc\" :label=\"`${r.perc}%`\" :max=\"100\" :variant=\"classperc(r.perc)\" show-progress></b-progress>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"d-flex w-100 justify-content-between\">\r\n            <h5 class=\"mb-3\">{{r.codTransp}} - {{r.transp}}</h5>\r\n            <div style=\"min-width: 80px;\">\r\n            <b-row>\r\n              <b-col class=\"text-right\">\r\n                <span class=\"iconbutton\" @click.stop=\"assinar(r)\">\r\n                  <b-icon-pen-fill v-if=\"r.PercAssinados==100\" variant=\"success\" title=\"Assinar\" />\r\n                  <b-icon-pen-fill v-else variant=\"danger\" title=\"Assinar\" />\r\n                </span>\r\n              </b-col>\r\n              <b-col class=\"text-right\">\r\n                <span>\r\n                  <b-form-checkbox @change=\"marcar\"/>\r\n                </span>\r\n              </b-col>\r\n            </b-row>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <b-row>\r\n              <b-col cols=\"6\">\r\n                <b-row style=\"font-style: italic; font-size: 14px;\">\r\n                  <b-col class=\"text-nowrap\" cols=\"12\" lg=\"3\">Romaneios: <b>{{r.Romaneios.length}}</b></b-col>\r\n                  <b-col class=\"text-nowrap\" cols=\"12\" lg=\"3\">Pedidos: <b>{{r.TPedidos}}</b></b-col>\r\n                  <b-col class=\"text-nowrap\" cols=\"12\" lg=\"3\">Volumes: <b>{{r.volumes}}</b></b-col>\r\n                  <b-col class=\"text-nowrap\" cols=\"12\" lg=\"3\">Última Coleta: <b>{{r.ultimacoleta | time}}</b></b-col>\r\n                </b-row>\r\n              </b-col>\r\n              <b-col cols=\"6\" class=\"text-right\">\r\n                <b-row>\r\n                  <b-col cols=\"12\" lg=\"9\">\r\n                    <span><b>{{r.motorista}}</b></span>\r\n                  </b-col>\r\n                  <b-col cols=\"12\" lg=\"3\">\r\n                    <span class=\"text-nowrap\" v-copy @click.stop=\"\">{{r.placa}}</span>\r\n                  </b-col>\r\n                </b-row>\r\n              </b-col>\r\n            </b-row>\r\n          </div>\r\n\r\n\r\n          <b-collapse \r\n            :id=\"`collapse-romaneio-${r.id}`\"\r\n            v-model=\"r.collapsed\"\r\n          >\r\n          <b-list-group>\r\n            <b-list-group-item\r\n              v-for=\"p in r.Romaneios\"\r\n              :key=\"p.Romaneio\"\r\n              :variant=\"p.checked==true ? 'warning' : p.sigImage ? 'success' : ''\"\r\n              @click.stop=\"\"\r\n            >\r\n              <div class=\"d-flex w-100 justify-content-between\">\r\n                <div class=\"mb-3\">Romaneio: <span class=\"font-weight-bold mb-3\" v-copy>{{p.Romaneio}}</span></div>\r\n                <div style=\"min-width: 80px;\">\r\n                  <b-progress :value=\"p.PercColetados\" :label=\"`${p.PercColetados}%`\" :max=\"100\" :variant=\"classperc(p.PercColetados)\" show-progress></b-progress>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"d-flex w-100 justify-content-between\">\r\n                <div>\r\n                  <span class=\"text-nowrap iconbutton\" @click=\"modalpedidos(p.Pedidos)\">Pedidos: <b><span v-copy @click.stop=\"\">{{p.Pedidos.length}}</span></b></span> |\r\n                  <span class=\"text-nowrap\">Volumes: <b>{{p.TVolumes}}</b></span> |\r\n                  <span class=\"text-nowrap\">Peso: <b>{{p.PesoBruto}}</b></span> |\r\n                  <span class=\"text-nowrap\">Cubagem: <b>{{p.Cubagem}}</b></span>\r\n                </div>\r\n                <div>\r\n                  <b-row>\r\n                    <b-col>\r\n                      <span class=\"iconbutton\" v-if=\"p.sigImage\" @click.stop=\"assinarromaneio(r, p.Romaneio)\">\r\n                        <b-icon-pen-fill variant=\"success\" title=\"Assinar\" />\r\n                      </span>\r\n                    </b-col>\r\n                    <b-col>\r\n                      <b-form-checkbox v-model=\"p.checked\" @click.stop=\"\" />\r\n                    </b-col>\r\n                  </b-row>\r\n                </div>\r\n\r\n              </div>\r\n            </b-list-group-item>\r\n            </b-list-group>\r\n          </b-collapse>\r\n\r\n        </b-list-group-item>        \r\n      </b-list-group>\r\n      </b-col>\r\n    </b-row>\r\n    </b-card>\r\n    \r\n    <!-- MODAIS -->\r\n    <b-modal\r\n      id=\"modal-assinar\"\r\n      ref=\"modal-assinar\"\r\n      size=\"lg\"\r\n      scrollable\r\n      :title=\"signatureTitle\"\r\n      ok-only\r\n      ok-title=\"Confirmar Assinaturas\"\r\n      @shown=\"signatureShown\"\r\n      @ok=\"signatureOk\"\r\n      @hide=\"signatureHidden\"\r\n      :ok-disabled=\"!signatureValid\"\r\n    >\r\n    <b-card no-body>\r\n    <b-tabs card v-model=\"tabIndex\">\r\n      <b-tab title=\"Detalhes\" active>\r\n        <div class=\"p-3\">\r\n        <b-row>\r\n          <b-col class=\"colsalign\">\r\n            <span>Transportadora:</span>\r\n          </b-col>\r\n          <b-col cols=\"12\" sm=\"8\">\r\n            <div class=\"font-weight-bold\">{{selected.transp}}</div>\r\n          </b-col>\r\n        </b-row>\r\n        <b-row>\r\n          <b-col class=\"colsalign\">\r\n            <span class=\"colsalign\">Motorista:</span>\r\n          </b-col>\r\n          <b-col cols=\"12\" sm=\"8\">\r\n            <div class=\"font-weight-bold\">{{selected.motorista}}</div>\r\n          </b-col>\r\n        </b-row>\r\n        <b-row>\r\n          <b-col class=\"colsalign\">\r\n            <span>Placa:</span>\r\n          </b-col>\r\n          <b-col cols=\"12\" sm=\"8\">\r\n            <div class=\"font-weight-bold\">{{selected.placa}}</div>\r\n          </b-col>\r\n        </b-row>\r\n        <b-row>\r\n          <b-col class=\"colsalign\">\r\n            <span>Romaneios:</span>\r\n          </b-col>\r\n          <b-col cols=\"12\" sm=\"8\">\r\n            <div class=\"font-weight-bold\" :class=\"selectedcheckedlength > 0 ? 'text-danger' : ''\">{{`${selectedcheckedlength > 0 ? selectedcheckedlength+' de ' : ''}`}}{{selected && selected.Romaneios && selected.Romaneios.length}}</div>\r\n          </b-col>\r\n        </b-row>\r\n        <b-row>\r\n          <b-col class=\"colsalign\">\r\n            <span>Volumes:</span>\r\n          </b-col>\r\n          <b-col cols=\"12\" sm=\"8\">\r\n            <div class=\"font-weight-bold\">{{selected.volumes}}</div>\r\n          </b-col>\r\n        </b-row>\r\n        <b-row>\r\n          <b-col class=\"colsalign\">\r\n            <span>Última Coleta:</span>\r\n          </b-col>\r\n          <b-col cols=\"12\" sm=\"8\">\r\n            <div class=\"font-weight-bold\">{{selected.ultimacoleta | dateBR}} {{selected.ultimacoleta | time}}</div>\r\n          </b-col>\r\n        </b-row>\r\n        </div>\r\n      </b-tab>\r\n      <b-tab title=\"Assinatura Motorista\">\r\n        <Signature\r\n          v-if=\"tabIndex==1\"\r\n          ref=\"signatureRef\"\r\n          :sigImage=\"sigImage\"\r\n          :buttons=\"['clear']\"\r\n          @evtSignatureChange=\"sigChange=true\"\r\n          v-model=\"sigImage\" />\r\n      </b-tab>\r\n      <b-tab title=\"Assinatura Conferente\">\r\n        <b-form-group\r\n          id=\"input-group-obsconferente\"\r\n          label-for=\"input-obsconferente\"\r\n          label=\"Observação\"\r\n        >\r\n        <b-form-textarea \r\n          id=\"input-obsconferente\"\r\n          rows=\"3\" v-model=\"sigObsConf\"\r\n        />\r\n        </b-form-group>\r\n        <b-form-group\r\n          id=\"input-group-opcoes\"\r\n          label-for=\"input-opcoes\"\r\n          label=\"Opções\"\r\n        >\r\n        <b-form-checkbox-group \r\n          id=\"input-opcoes\"\r\n          :options=\"signatureOptions\"\r\n          v-model=\"opcoes\"\r\n        />\r\n      </b-form-group>\r\n        <Signature\r\n          v-if=\"tabIndex==2\"\r\n          ref=\"signatureConfRef\"\r\n          :sigImage=\"sigImageConf\"\r\n          :buttons=\"['clear']\"\r\n          @evtSignatureChange=\"sigChangeConf=true\"\r\n          v-model=\"sigImageConf\" />\r\n      </b-tab>\r\n    </b-tabs>\r\n    </b-card>\r\n    </b-modal>\r\n\r\n    <b-modal\r\n      id=\"modal-pedidos\"\r\n      ref=\"modal-pedidos\"\r\n      size=\"lg\"\r\n      scrollable\r\n      :title=\"pedidosTitle\"\r\n      ok-only\r\n      ok-title=\"Fechar\"\r\n    >\r\n      <b-list-group>\r\n        <b-list-group-item \r\n          v-b-toggle=\"`collapse-pedido-${p.Pedido}`\"\r\n          v-for=\"p in pedidos\"\r\n          :key=\"p.Pedido\"\r\n          :variant=\"classpedidos(p)\"\r\n          @click.stop=\"pedidosselected = p\"\r\n          class=\"flex-column align-items-start\">\r\n\r\n          <div class=\"d-flex w-100 justify-content-between\">\r\n            <div class=\"mb-3\">Pedido: <span class=\"mb-3\"><b><span v-copy @click.stop=\"\">{{p.Pedido}}</span></b></span> | <span class=\"text-nowrap\">Notas: <b><span v-copy @click.stop=\"\">{{pedidosNotasSplit}}</span></b></span></div>\r\n            <div style=\"min-width: 80px;\">\r\n              <b-progress :value=\"p.Percentual\" :label=\"`${p.Percentual}%`\" :max=\"100\" :variant=\"classperc(p.Percentual)\" show-progress></b-progress>\r\n            </div>\r\n          </div>\r\n          <div class=\"d-flex w-100 justify-content-between\">\r\n            <h5 class=\"mb-3\">{{p.Codigo_Cliente}} - {{p.NomeCliente}}</h5>\r\n          </div>\r\n\r\n          <div class=\"d-flex w-100 justify-content-between\">\r\n            <div style=\"font-weight: italic; font-size: 14px;\">\r\n              <span class=\"text-nowrap\">Marca: <b>{{p.marca}}</b></span> |\r\n              <span class=\"text-nowrap\">Volumes: <b>{{p.Volumes}}</b></span> |\r\n              <span class=\"text-nowrap\">Cubagem: <b>{{p.Cubagem}}</b></span> |\r\n              <span class=\"text-nowrap\">Peso Bruto: <b>{{p.PesoBruto}}</b></span>\r\n            </div>\r\n            <!-- <span class=\"font-weight-bold\">{{r.motorista}} [ {{r.placa}} ]</span> -->\r\n          </div>\r\n\r\n          <b-collapse \r\n            :id=\"`collapse-pedido-${p.Pedido}`\"\r\n            v-model=\"p.collapsed\">\r\n          <b-list-group>\r\n            <b-list-group-item\r\n              v-for=\"n in p.Notas\"\r\n              :key=\"n.Numero_nota\"\r\n              @click.stop=\"\">\r\n              <div class=\"d-flex w-100 justify-content-between\">\r\n                <div class=\"mb-3\">Nota: <span class=\"font-weight-bold mb-3\" v-copy @click.stop=\"\">{{n.Numero_nota}}</span></div>\r\n                <div style=\"min-width: 80px;\">\r\n                  <b-progress :value=\"n.PercColeta\" :label=\"`${n.PercColeta}%`\" :max=\"100\" :variant=\"classperc(n.PercColeta)\" show-progress></b-progress>\r\n                </div>\r\n              </div>\r\n              <div class=\"d-flex w-100 justify-content-between\">\r\n                <div style=\"font-weight: italic; font-size: 14px;\">\r\n                  <span class=\"text-nowrap\">Volumes: <b>{{n.TVolumes}}</b></span> |\r\n                  <span class=\"text-nowrap\">Última Coleta: <b>{{n.UltimaColeta | dateBR}} {{n.UltimaColeta | time}}</b></span>\r\n                </div>\r\n                <!-- <span class=\"font-weight-bold\">{{r.motorista}} [ {{r.placa}} ]</span> -->\r\n              </div>\r\n            </b-list-group-item>\r\n          </b-list-group>\r\n          </b-collapse>\r\n        </b-list-group-item> \r\n      </b-list-group>\r\n    </b-modal>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport API from \"../../../services/api.service\";\r\nimport Signature from \"../../../components/Signature\";\r\nimport Properties from \"../../../components/Properties\";\r\nexport default {\r\n  name: \"Carregamento\",\r\n  components: {\r\n    Signature,\r\n    Properties\r\n  },\r\n  data() {\r\n    return {\r\n      form: {\r\n        idCarregamento: 0,\r\n        entrada: new Date(),\r\n        nometransp: \"\",\r\n        motorista: \"\",\r\n        placa: \"\"\r\n      },\r\n      filtro: \"\",\r\n      filterOn: [\"id\", \"transp\", \"motorista\", \"placa\"],\r\n      filtroassinados: false,\r\n      filtrocoletados: true,\r\n      timer: null,\r\n      updatetimeout: 15000,\r\n      updatestop: false,\r\n      data: [],\r\n      marcas: [],\r\n      sigOpcoes: [],\r\n      tabIndex: 0,\r\n      sigImage: null,\r\n      sigImageConf: null,\r\n      sigObsConf: \"\",\r\n      sigChange: false,\r\n      sigChangeConf: false,\r\n      selected: [],\r\n      pedidosselected: null,\r\n      pedidos: [],\r\n      opcoes: [],\r\n      formcollapsed: false\r\n    };\r\n  },\r\n  computed: {\r\n    hoje() {\r\n      const h = new Date();\r\n      return h.getDay().toString().padStart(2,'0') + '/' + h.getMonth().toString().padStart(2,'0') + '/' + h.getFullYear().toString().padStart(4,'0');\r\n    },\r\n    fields() {\r\n      return  [\r\n        // { key: \"transp\", label: \"Transportadora\", sortable: true },\r\n        // { key: \"motorista\", sortable: true },\r\n        // { key: \"placa\", sortable: true },\r\n        // { key: \"perc\", label: \"Coletas\", sortable: true },\r\n        { key: \"carga\", label: \"Carga\"},\r\n        { key: \"actions\", label: \"\", sortable: false }\r\n      ]\r\n    },\r\n    params() {\r\n      return {\r\n        idCarregamento: this.form.idCarregamento,\r\n        entrada: this.form.entrada,\r\n        nometransp: this.form.nometransp,\r\n        motorista: this.form.motorista,\r\n        placa: this.form.placa\r\n      }\r\n    },\r\n    marcasselected() {\r\n      return this.marcas.filter(m=>m.checked);\r\n    },\r\n    romaneios() {\r\n      return this.data.map(r=>({\r\n        id: r.id,\r\n        codTransp: r.Codigo_Transp,\r\n        transp: r.Razao_Social,\r\n        motorista: r.Motorista,\r\n        ultimacoleta: r.UltimaColeta,\r\n        volumes: r.TVolumes,\r\n        coletados: r.TVolumesColetados,\r\n        TPedidos: r.TPedidos,\r\n        perc: r.PercColetados,\r\n        placa: r.Placa,\r\n        sigImage: r.sigImage,\r\n        sigImageConf: r.sigImageConf,\r\n        PercAssinados: r.PercAssinados,\r\n        sigObsConf: r.sigObsConf,\r\n        signed: ((r.sigImage && r.sigImage !== \"\") || (r.sigImageConf && r.sigImageConf !== \"\")) ? true : false,\r\n        Romaneios: r.Romaneios || [],\r\n        collapsed: r.collapsed,\r\n        checked: r.checked,\r\n        Opcoes: r.Opcoes,\r\n        _rowVariant: r.sigImage && r.sigImageConf ? 'success' : ''\r\n      })).filter(f=>this.romaneiosfiltros(f))\r\n      //.filter(f=>f.signed == this.filtroassinados && (f.perc > 99) == this.filtrocoletados )\r\n    },\r\n    paramsignature() {\r\n      return {\r\n        idCarregamento: this.selected.id,\r\n        sigImage: this.sigImage,\r\n        sigImageConf: this.sigImageConf,\r\n        sigObsConf: this.sigObsConf,\r\n        opcoes: JSON.stringify(this.opcoes),\r\n        romaneios: this.selected.Romaneios.filter(r=>r.checked)\r\n      }\r\n    },\r\n    signatureOptions() {\r\n      return this.sigOpcoes.map(o=>({\r\n        text: o.descricao,\r\n        value: o.id\r\n      }))\r\n    },\r\n    selectedchecked() {\r\n      return this.selected.Romaneios ? this.selected.Romaneios.filter(c=>c.checked) : [];\r\n    },\r\n    selectedcheckedlength() {\r\n      return this.selectedchecked.length || 0;\r\n    },\r\n    signatureFields() {\r\n      return {Transportadora: this.selected.transp, Motorista: this.selected.motorista, Placa: this.selected.placa};\r\n    },\r\n    signatureValid() {\r\n      return ((this.sigChange && this.sigImage && this.sigImage !== \"\") || (this.sigChangeConf && this.sigImageConf && this.sigImageConf !== \"\"));\r\n    },\r\n    signatureTitle() {\r\n      return \"Carga: \" + ((this.selected && this.selected.id) || \"\");\r\n    },\r\n    pedidosTitle() {\r\n      return \"Romaneio: \" + ((this.pedidos && this.pedidos[0] && this.pedidos[0].Romaneio) || \"\");\r\n    },\r\n    pedidosNotasSplit() {\r\n      return ((this.pedidos && this.pedidos[0] && this.pedidos[0].Notas && this.pedidos[0].Notas.map(n=>(n.Numero_nota)).join(\",\")) || \"\")\r\n    }\r\n  },\r\n  beforeMount() {\r\n//    this.getCarregamento();\r\n    API.getLocalDBDocument('carregamento').then(doc => {\r\n      this.idCarregamento = doc.idCarregamento || 0;\r\n      this.entrada = doc.entrada || new Date();\r\n      this.nometransp = doc.nometransp ||  \"\";\r\n      this.motorista = doc.motorista ||  \"\";\r\n      this.placa = doc.placa || \"\";\r\n      this.updatetimeout = doc.updatetimeout || this.updatetimeout;\r\n      this.filtroassinados = doc.filtroassinados || this.filtroassinados;\r\n      this.marcas = doc.marcas || this.marcas;\r\n      this.filtro = doc.filtro || this.filtro;\r\n    });\r\n\r\n    this.getCarregamentoOpcoes();\r\n    this.getMarcas();\r\n\r\n    // seta o timer que atualiza os totais ...\r\n    this.updatestop = false;\r\n    this.timer = setInterval(() => {\r\n      if (!this.updatestop)\r\n        this.getCarregamentoTotais();\r\n    }, this.updatetimeout);\r\n\r\n  },\r\n  methods: {\r\n    teste(val) {\r\n      console.log('teste:',val);\r\n      val.collapsed = !val.collapsed;\r\n    },\r\n    romaneiosfiltros(item) {\r\n      // console.log('romaneiosfiltros(item)', item);\r\n      let ret = false;\r\n      const marcas = this.marcas.filter(m => m.checked).map(m => (m.id)) || [];\r\n      //const marcas = []\r\n\r\n      // ret = ((item.signed == this.filtroassinados) && ((item.perc > 99) == this.filtrocoletados));\r\n      ret = ((item.PercAssinados == 100) == this.filtroassinados);\r\n\r\n      if (marcas.length > 0) {\r\n        ret = ret && (item.Romaneios.filter(r => r.Marcas.find(m => marcas.includes(m.id))).length > 0);\r\n      }\r\n\r\n\r\n      if (this.filtro !== \"\") {\r\n        ret = ret && (\r\n          item.id.toString().includes(this.filtro) ||\r\n          item.transp.includes(this.filtro.toUpperCase()) ||\r\n          item.motorista.includes(this.filtro.toUpperCase()) ||\r\n          item.placa.includes(this.filtro.toUpperCase())\r\n        )\r\n      }\r\n\r\n      return ret;\r\n\r\n    },\r\n    marcar(check) {\r\n      if (this.data.find(d=>d.id == this.selected.id)) {\r\n        this.data.find(d=>d.id == this.selected.id).Romaneios.map(r=>{\r\n          r.checked = check\r\n        })\r\n      }\r\n    },\r\n    modalpedidos(pedidos) {\r\n      this.pedidos = pedidos;\r\n      this.$bvModal.show(\"modal-pedidos\");\r\n    },\r\n    getMarcas() {\r\n      API.get(\"v2/Servicos/Marcas/Get\", {pesquisa: \"%\", PageSize: 30 })\r\n      .then((apidata)=>{\r\n        if ((apidata.data.Success == \"True\") || apidata.data.Success) {\r\n          const res = API.prepareData(apidata.data);\r\n          this.marcas = res.apiresponse.Data;\r\n        } else {\r\n          this.marcas = [];\r\n        }\r\n      })\r\n    },\r\n    getCarregamentoOpcoes() {\r\n      API.get(\"v2/Servicos/Carregamento/OpcoesGet\", {})\r\n      .then((apidata)=>{\r\n        if ((apidata.data.Success == \"True\") || apidata.data.Success) {\r\n          const res = API.prepareData(apidata.data);\r\n          this.sigOpcoes = res.apiresponse.Data;\r\n        } else {\r\n          this.sigOpcoes = [];\r\n        }\r\n      })\r\n    },\r\n    getCarregamento() {\r\n      this.updatestop = true;\r\n      API.get(\"v2/Servicos/Carregamento/Get\", this.params)\r\n      .then((apidata)=>{\r\n        if ((apidata.data.Success == \"True\") || apidata.data.Success) {\r\n          const res = API.prepareData(apidata.data);\r\n          this.data = res.apiresponse.Data;\r\n          this.formcollapsed = false;\r\n          API.setLocalDBDocument(this.$data, 'carregamento');\r\n        } else {\r\n          this.data = [];\r\n          this.formcollapsed = true;\r\n        }\r\n      });\r\n    },\r\n    getCarregamentoTotais() {\r\n\r\n      API.get(\"v2/Servicos/CarregamentoTotais/Get\", this.params, false)\r\n      .then((apidata)=>{\r\n        if ((apidata.data.Success == \"True\") || apidata.data.Success) {\r\n          const res = API.prepareData(apidata.data);\r\n\r\n          console.log('getCarregamentoTotais:hit');\r\n\r\n          res.apiresponse.Data.map(t => {\r\n            if (this.data.find(c => c.id == t.id)) {\r\n              this.data.find(c => c.id == t.id).TVolumesColetados = t.TVolumesColetados;\r\n              this.data.find(c => c.id == t.id).PercColetados = t.PercColetados;\r\n              this.data.find(c => c.id == t.id).sigImage = t.sigImage;\r\n\t\t          this.data.find(c => c.id == t.id).sigImageConf = t.sigImageConf;\r\n\t\t          this.data.find(c => c.id == t.id).sigObsConf = t.sigObsConf;\r\n\t\t          this.data.find(c => c.id == t.id).Opcoes = t.Opcoes;\r\n\t\t          this.data.find(c => c.id == t.id).UltimaColeta = t.UltimaColeta;\r\n            }\r\n          })\r\n        }\r\n      })      \r\n    },\r\n    async assinar(item) {\r\n      console.log('assinar.item:', item);\r\n      let perc = item.perc;\r\n\r\n      // sugerido não poder liberar sem estar 100% coletado\r\n      /*\r\n      if (perc < 100) {\r\n        this.$root.toastdanger(\"A carga não está 100% coletada, não é possível solicitar a assinatura !\");\r\n      }\r\n      */\r\n      if (perc < 100) {\r\n        await this.$root\r\n          .showmessage('A carga não está 100% coletada, deseja realmente solicitar a assinatura ?')\r\n          .then((choice)=>{\r\n            if (choice) {\r\n              perc = 100;\r\n            }\r\n          })\r\n      }\r\n\r\n      if (perc > 99.9) {\r\n        // this.selected = item;\r\n        this.doselected(item);\r\n\r\n        const params = {\r\n          idCarregamento: item.id,\r\n          Romaneios: this.selectedchecked.map(r=>(r.Romaneio)).join(',')\r\n        }\r\n        console.log('assinar.params:', params);\r\n\r\n        // busca a assinatuda da API ...\r\n        API.get(\"v2/Servicos/CarregamentoSignature/Get\", params, false)\r\n          .then((apidata) => {\r\n            const res = API.prepareData(apidata.data);\r\n            console.log('res:', res);\r\n            if (res.success && res.data.length>0) {\r\n              const data = res.data[0];\r\n              this.sigImage = data.sigImage || \"\";\r\n              this.sigImageConf = data.sigImageConf || \"\";\r\n              this.sigObsConf = data.sigObsConf || \"\";        \r\n              this.opcoes = JSON.parse(data.Opcoes || \"[]\");\r\n            } else {\r\n              this.sigImage = \"\";\r\n              this.sigImageConf = \"\";\r\n              this.sigObsConf = \"\";        \r\n              this.opcoes = [];\r\n            }\r\n            this.sigChange = false;\r\n            this.sigChangeConf = false;\r\n            \r\n            this.$bvModal.show(\"modal-assinar\");\r\n          });\r\n        /*\r\n        // console.log(\"assinar.opcoes:\", item.Opcoes);\r\n        if (item.Romaneios.find(r=>r.checked)) {\r\n          this.sigImage = item.Romaneios.find(r=>r.checked).sigImage;\r\n          this.sigImageConf = item.Romaneios.find(r=>r.checked).sigImageConf;\r\n          this.sigObsConf = item.Romaneios.find(r=>r.checked).sigObsConf;        \r\n          this.opcoes = JSON.parse(item.Romaneios.find(r=>r.checked).Opcoes || \"[]\");        \r\n        } else {\r\n          this.sigImage = item.sigImage;\r\n          this.sigImageConf = item.sigImageConf;\r\n          this.sigObsConf = item.sigObsConf;        \r\n          this.opcoes = JSON.parse(item.Opcoes || \"[]\"); \r\n        }\r\n        this.sigChange = false;\r\n        this.sigChangeConf = false;\r\n        // console.log(\"assinar.item:\", item);\r\n        this.$bvModal.show(\"modal-assinar\");\r\n        */\r\n      }\r\n    },\r\n    assinarromaneio(carga, romaneio) {\r\n      if (this.data.find(d=>d.id == carga.id)) {\r\n        // desmarca os outros ... \r\n        this.data.find(d=>d.id == carga.id).Romaneios.filter(r=>r.checked).map(m=>m.checked = false);\r\n        if (this.data.find(d=>d.id == carga.id).Romaneios.find(r=>r.Romaneio==romaneio)) {\r\n          this.data.find(d=>d.id == carga.id).Romaneios.find(r=>r.Romaneio==romaneio).checked = true\r\n          this.assinar(carga);\r\n        }\r\n      }\r\n    },\r\n    signatureShown() {\r\n      this.updatestop = true;\r\n    },\r\n    signatureHidden() {\r\n      this.updatestop = false;\r\n    },\r\n    signatureOk() {\r\n      // console.log(\"signatureOk.sigImage:\", this.sigImage);\r\n      API.post(\"v2/Servicos/Carregamento/SignatureSet\", this.paramsignature)\r\n      .then((apidata)=>{\r\n        if ((apidata.data.Success == \"True\") || apidata.data.Success) {\r\n          if (this.data.find(c=>c.id == this.selected.id)) {\r\n            this.data.find(c=>c.id == this.selected.id).sigImage = this.sigImage;\r\n            this.data.find(c=>c.id == this.selected.id).sigImageConf = this.sigImageConf;\r\n            this.data.find(c=>c.id == this.selected.id).sigObsConf = this.sigObsConf;this.data.find(c=>c.id == this.selected.id).Opcoes = JSON.stringify(this.opcoes);\r\n            this.data.find(c=>c.id == this.selected.id).Romaneios.filter(r=>r.checked).map(d=>{\r\n              d.sigImage = this.sigImage;\r\n              d.sigImageConf = this.sigImageConf;\r\n              d.sigObsConf = this.sigObsConf;\r\n              d.Opcoes = JSON.stringify(this.opcoes);\r\n              d.checked = false;\r\n            })\r\n          }\r\n          const res = API.prepareData(apidata.data);\r\n\r\n          this.$root.toastsuccess(res.data[0].Mensagem);\r\n          this.updatestop = false;\r\n\r\n          if ( (!this.sigImage || this.sigImage == \"\") || (!this.sigImageConf || this.sigImageConf == \"\") ) {\r\n            if ( (!this.sigImage || this.sigImage == \"\") ) this.$root.toastdanger('Assinatura do motorista não informada!');\r\n            if ( (!this.sigImageConf || this.sigImageConf == \"\") ) this.$root.toastdanger('Assinatura do conferente não informada!');\r\n          }\r\n        } else {\r\n          this.$root.toastdanger(apidata.Error);\r\n          this.formcollapsed = false;\r\n        }\r\n      });\r\n    },\r\n    doselected(item) {\r\n      this.selected = item;\r\n    },\r\n    classperc(perc) {\r\n      return (perc>99) ? \"success\" : \"primary\";\r\n    },\r\n    classselected(item) {\r\n      return (item.id == this.selected.id) ? \"primary\" : \"\";\r\n    },\r\n    classpedidos(item) {\r\n      return (this.pedidosselected && (item.Pedido == this.pedidosselected.Pedido)) ? \"primary\" : \"\";\r\n    }\r\n  },\r\n  watch: {\r\n    formcollapsed(collapsed) {\r\n      this.updatestop = collapsed;\r\n    },\r\n    updatetimeout() {\r\n      clearInterval(this.timer);\r\n      console.log('updatetimeout:', new Date());\r\n      this.timer = null;\r\n      this.timer = setInterval(() => {\r\n        console.log('Carregamento.timer:', new Date().toLocaleTimeString());\r\n      },  this.runtimeout());\r\n    },\r\n    runtimeout() {\r\n      if (!this.updatestop)\r\n        this.getCarregamentoTotais()\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    this.updatestop = true;\r\n    clearInterval(this.timer);\r\n    this.timer = null;\r\n  }\r\n};\r\n</script>\r\n<style>\r\n.colsalign {\r\n  text-align: right;\r\n}\r\n@media screen and (max-width: 600px) {\r\n  .colsalign {\r\n    text-align: left;\r\n  }\r\n  .lista {\r\n    padding-left: 3px;\r\n    padding-right: 3px;\r\n  }\r\n}\r\n</style>\r\n"]}]}