{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\arquivosdirectory\\views\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\arquivosdirectory\\views\\index.vue","mtime":1674602801808},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7DQppbXBvcnQgQVBJIGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2FwaS5zZXJ2aWNlIjsNCmltcG9ydCBEYXNoY2FyZCBmcm9tICIuLi8uLi8uLi9jb21wb25lbnRzL0Rhc2hjYXJkLnZ1ZSI7DQppbXBvcnQgQ2FyZENvbGxhcHNlZCBmcm9tICJAL2NvbXBvbmVudHMvQ2FyZENvbGxhcHNlZC52dWUiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJBcnF1aXZvc0RpcmVjdG9yeSIsDQoNCiAgY29tcG9uZW50czogew0KICAgIERhc2hjYXJkLA0KICAgIENhcmRDb2xsYXBzZWQsDQogIH0sDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgY29sbGFwc2Vmb3Jtb3BlbjogZmFsc2UsDQogICAgICBkYXRhYmFzZTogbmV3IERhdGUoKSwNCiAgICAgIGlkYWNhbzogMiwgLy8gRlRQIFBST01PQg0KICAgICAgZmlsZW5hbWU6ICIiLA0KICAgICAgZXJybzogW3RydWUsIGZhbHNlLCBudWxsLCAiYWxsIl0sDQogICAgICBhY29lczogWw0KICAgICAgICB7IHZhbHVlOiA3LCB0ZXh0OiAiV29ya2VyIEJXUFgiIH0sDQogICAgICAgIHsgdmFsdWU6IDUsIHRleHQ6ICJXb3JrZXIgSW52YWxpZFByb2plY3RzUmVwb3NpdG9yeSIgfSwNCiAgICAgICAgeyB2YWx1ZTogNCwgdGV4dDogIldvcmtlciBTdWNjZXNzUHJvamVjdHNSZXBvc2l0b3J5IiB9LA0KICAgICAgICB7IHZhbHVlOiAzLCB0ZXh0OiAiV29ya2VyIFByb21vYiIgfSwNCiAgICAgICAgeyB2YWx1ZTogMiwgdGV4dDogIkZUUCBQcm9tb2IiIH0sDQogICAgICAgIHsgdmFsdWU6IDEsIHRleHQ6ICJTRVJBU0EgUkVMQVRPIC0gQ09OQ0lMSUFDQU8iIH0sDQogICAgICBdLA0KICAgICAgYXJxdWl2b3M6IHsNCiAgICAgICAgY3VycmVudFBhZ2U6IDEsDQogICAgICAgIHBlclBhZ2U6IDIwLA0KICAgICAgICBmaWx0ZXI6ICIiLA0KICAgICAgICBmaWx0ZXJPbjogWyJBY2FvIiwgIk5vbWVBcnF1aXZvIiwgIlJldG9ybm8iXSwNCiAgICAgICAgZmllbGRzOiBbDQogICAgICAgICAgImlkIiwNCiAgICAgICAgICB7IGtleTogIkFjb2VzIiwgbGFiZWw6ICJBw6fDtWVzIiB9LA0KICAgICAgICAgIHsga2V5OiAiRGF0YUxlaXR1cmEiLCBsYWJlbDogIkRhdGEiIH0sDQogICAgICAgICAgeyBrZXk6ICJOb21lQXJxdWl2byIsIGxhYmVsOiAiQXJxdWl2byIgfSwNCiAgICAgICAgICAiUmV0b3JubyIsDQogICAgICAgICAgeyBrZXk6ICJidXR0b25zIiwgbGFiZWw6ICIiIH0sDQogICAgICAgIF0sDQogICAgICAgIGRhdGE6IFtdLA0KICAgICAgICB4bWw6IFtdLA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KDQogIGFzeW5jIGJlZm9yZU1vdW50KCkgew0KDQogICAgLy8gY29uc3QgaWRDb2xsZWN0aW9uID0gJ2hvcmxsZSc7DQogICAgLy8gY29uc3QgaWREb2N1bWVudCA9IHtpZDogdGhpcy4kcm91dGUucGF0aC5zdWJzdHIoMSl9Ow0KDQogICAgLy8gYXdhaXQgQVBJLmdldExvY2FsREJEb2N1bWVudCgpDQogICAgLy8gICAudGhlbigoZG9jKSA9PiB7DQogICAgLy8gICAgIGlmIChkb2MpIHsNCiAgICAvLyAgICAgICAvLyB0aGlzLmRhdGFEQiA9IGRvYy5kYXRhOw0KICAgIC8vICAgICB9ICAgICAgICANCiAgICAvLyAgIH0pDQoNCiAgICB0aGlzLmFycXVpdm9zR2V0KCk7DQogIA0KICB9LA0KDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwR2V0dGVycyhbImd0eENvbmZpZ0RhdGV0aW1lUGlja2VyRm9ybWF0Il0pLA0KICAgIGRhdGFEQjogew0KICAgICAgZ2V0KCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgIGRhdGFiYXNlOiB0aGlzLmRhdGFiYXNlLA0KICAgICAgICAgIGlkYWNhbzogdGhpcy5pZGFjYW8sDQogICAgICAgICAgZmlsZW5hbWU6IHRoaXMuZmlsZW5hbWUsDQogICAgICAgICAgYXJxdWl2b3M6IHsNCiAgICAgICAgICAgIGZpbHRlcjogdGhpcy5maWx0ZXIsDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgc2V0KHZhbHVlKSB7DQogICAgICAgIHRoaXMuZGF0YWJhc2UgPSB2YWx1ZS5kYXRhYmFzZTsNCiAgICAgICAgdGhpcy5pZGFjYW8gPSB2YWx1ZS5pZGFjYW87DQogICAgICAgIHRoaXMuZmlsZW5hbWUgPSB2YWx1ZS5maWxlbmFtZTsNCiAgICAgICAgdGhpcy5hcnF1aXZvcy5maWx0ZXIgPSB2YWx1ZS5maWx0ZXI7DQogICAgICB9DQogICAgfSwNCiAgICBwYXJhbXMoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBkYXRhYmFzZTogdGhpcy5kYXRhYmFzZSwNCiAgICAgICAgaWRhY2FvOiB0aGlzLmlkYWNhbywNCiAgICAgICAgZmlsZW5hbWU6IHRoaXMuZmlsZW5hbWUsDQogICAgICB9Ow0KICAgIH0sDQogICAgYXJxdWl2b3NmaWx0ZXJlZCgpIHsNCiAgICAgIHJldHVybiB0aGlzLmFycXVpdm9zLmRhdGEuZmlsdGVyKA0KICAgICAgICAoZikgPT4gdGhpcy5lcnJvLmluY2x1ZGVzKGYuRXJybykgfHwgdGhpcy5lcnJvID09ICJhbGwiDQogICAgICApOw0KICAgIH0sDQogICAgbnJvZGFuZ2VycygpIHsNCiAgICAgIHJldHVybiB0aGlzLmFycXVpdm9zLmRhdGEuZmlsdGVyKChmKSA9PiBmLkVycm8pLmxlbmd0aC50b1N0cmluZygpOw0KICAgIH0sDQogICAgbnJvc3VjY2VzcygpIHsNCiAgICAgIHJldHVybiB0aGlzLmFycXVpdm9zLmRhdGENCiAgICAgICAgLmZpbHRlcigoZikgPT4gZi5FcnJvICE9PSBudWxsICYmICFmLkVycm8pDQogICAgICAgIC5sZW5ndGgudG9TdHJpbmcoKTsNCiAgICB9LA0KICAgIG5yb3dhcm5pbmdzKCkgew0KICAgICAgcmV0dXJuIHRoaXMuYXJxdWl2b3MuZGF0YS5maWx0ZXIoKGYpID0+IGYuRXJybyA9PSBudWxsKS5sZW5ndGgudG9TdHJpbmcoKTsNCiAgICB9LA0KICAgIG5yb2luZm8oKSB7DQogICAgICByZXR1cm4gdGhpcy5hcnF1aXZvcy5kYXRhLmxlbmd0aC50b1N0cmluZygpOw0KICAgIH0sDQogIH0sDQoNCiAgbWV0aG9kczogew0KICAgIHJvd0NsYXNzKGl0ZW0sIHR5cGUpIHsNCiAgICAgIGlmICghaXRlbSB8fCB0eXBlICE9PSAicm93IikgcmV0dXJuOw0KICAgICAgaWYgKGl0ZW0uRXJybyA9PSBudWxsKSByZXR1cm4gInRhYmxlLXdhcm5pbmciOw0KICAgICAgcmV0dXJuIGl0ZW0uRXJybyA/ICJ0YWJsZS1kYW5nZXIiIDogInRhYmxlLXN1Y2Nlc3MiOw0KICAgIH0sDQogICAgZGFzaGNhcmRmb290ZXJjbGljayhmb290ZXJzdGF0ZSwgdmFsdWUpIHsNCiAgICAgIGNvbnN0IGkgPSB0aGlzLmVycm8uZmluZEluZGV4KChmKSA9PiBmID09IHZhbHVlKTsNCiAgICAgIGlmIChmb290ZXJzdGF0ZSkgew0KICAgICAgICBpZiAoaSA9PSAtMSkgew0KICAgICAgICAgIHRoaXMuZXJyby5wdXNoKHZhbHVlKTsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKGkgPiAtMSkgew0KICAgICAgICAgIHRoaXMuZXJyby5zcGxpY2UoaSwgMSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGFycXVpdm9zR2V0KCkgew0KICAgICAgQVBJLmdldCgidjIvU2Vydmljb3MvQXJxdWl2b3NEaXJlY3RvcnkvR2V0IiwgdGhpcy5wYXJhbXMpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICBpZiAocmVzLmRhdGEuU3VjY2Vzcykgew0KICAgICAgICAgIHRoaXMuYXJxdWl2b3MuZGF0YSA9IHJlcy5kYXRhLkRhdGE7DQogICAgICAgICAgdGhpcy5jb2xsYXBzZWZvcm1vcGVuID0gZmFsc2U7DQogICAgICAgICAgLy8gc2FsdmEgbm8gbG9jYWxEQg0KICAgICAgICAgIC8vIGNvbnN0IGlkQ29sbGVjdGlvbiA9ICdob3JsbGUnOw0KICAgICAgICAgIGNvbnN0IGxvY2Fscm91dGUgPSB0aGlzLiRyb3V0ZS5wYXRoLnN1YnN0cigxKTsNCiAgICAgICAgICBjb25zdCBsb2NhbGRhdGEgPSB7aWQ6IGxvY2Fscm91dGUsIGRhdGE6IHRoaXMuZGF0YURCfTsNCg0KICAgICAgICAgIC8vIEFQSS5zZXRMb2NhbERCRG9jdW1lbnQodGhpcy5kYXRhREIpOw0KDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5hcnF1aXZvcy5kYXRhID0gW107DQogICAgICAgICAgdGhpcy5jb2xsYXBzZWZvcm1vcGVuID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBhcnF1aXZvc09wZW4oaXRlbSkgew0KICAgICAgdGhpcy4kcm9vdC5zaG93bWVzc2FnZSgnQ29uZmlybWUgYSBleGNsdXPDo28gZGVzdGUgaGlzdMOzcmljbz8nLCAnRXhjbHVpciByZWdpc3RybycpDQogICAgICAgIC50aGVuKGNob2ljZSA9PiB7DQogICAgICAgICAgY29uc3QgcGFyYW1zID0gew0KICAgICAgICAgICAgaWRYTUxJbXBvcnQ6IGl0ZW0uaWRYTUxJbXBvcnRQcm9tb2IsDQogICAgICAgICAgfTsNCiAgICAgICAgICBBUEkuZ2V0KCJ2Mi9TZXJ2aWNvcy9BcnF1aXZvc0RpcmVjdG9yeS9CdWlsZGVyWE1MR2V0IiwgcGFyYW1zKS50aGVuKA0KICAgICAgICAgICAgKHJlcykgPT4gew0KICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuU3VjY2Vzcykgew0KICAgICAgICAgICAgICAgIHRoaXMuYXJxdWl2b3MueG1sID0gcmVzLmRhdGEuRGF0YTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmFycXVpdm9zLnhtbCA9IFtdOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgKTsNCiAgICAgICAgfSkNCiAgICB9LA0KICAgIGhpc3RvcnlEZWwoaXRlbSkgew0KICAgICAgY29uc3QgYm9keSA9IHsNCiAgICAgICAgaWRIaXN0b3J5OiBpdGVtLmlkSGlzdG9yeSwNCiAgICAgIH07DQogICAgICBBUEkucG9zdCgidjIvU2Vydmljb3MvQXJxdWl2b3NEaXJlY3RvcnkvRmluYWxpZGFkZXNIaXN0b3J5RGVsIiwgYm9keSkudGhlbigNCiAgICAgICAgKHJlcykgPT4gew0KICAgICAgICAgIGlmIChyZXMuZGF0YS5TdWNjZXNzKSB7DQogICAgICAgICAgICB0aGlzLiRyb290LnRvYXN0c3VjY2VzcyhyZXMuZGF0YS5EYXRhLk1lbnNhZ2VtKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy4kcm9vdC50b2FzdGRhbmdlcihyZXMuZGF0YS5EYXRhLk1lbnNhZ2VtKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiKA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/arquivosdirectory/views","sourcesContent":["<template>\r\n  <CardCollapsed ref=\"CardCollapsed\" v-model=\"collapseformopen\" title=\"Arquivos\" @evtBusca=\"arquivosGet\">\r\n    <template #collapsedform>\r\n      <div class=\"bg-light p-4\">\r\n        <b-row>\r\n          <b-col>\r\n            <label for=\"form-dataleitura\">Data de Leitura</label>\r\n            <b-form-datepicker\r\n            id=\"form-dataleitura\"\r\n            v-model=\"database\"\r\n            class=\"mb-2\"\r\n            locale=\"pt\"\r\n            :date-format-options=\"gtxConfigDatetimePickerFormat\"\r\n            ></b-form-datepicker>\r\n          </b-col>\r\n        </b-row>\r\n        <b-row>\r\n          <b-col>\r\n            <label for=\"form-idacao\">Processo</label>\r\n            <b-form-select\r\n            id=\"form-idacao\"\r\n            v-model=\"idacao\"\r\n            :options=\"acoes\"\r\n            ></b-form-select>\r\n          </b-col>\r\n        </b-row>\r\n      <b-row>\r\n        <b-col>\r\n          <label for=\"form-filename\">Nome do Arquivo</label>\r\n          <b-form-input id=\"form-filename\" v-model=\"filename\"></b-form-input>\r\n        </b-col>\r\n      </b-row>\r\n        <b-row>\r\n          <b-col class=\"mt-2 text-right\">\r\n            <b-button-group>\r\n              <b-button variant=\"primary\" @click=\"arquivosGet\">\r\n                <b-icon-search class=\"mr-1\"/>\r\n                Buscar\r\n              </b-button>\r\n            </b-button-group>\r\n          </b-col>\r\n        </b-row>\r\n      </div>\r\n  </template>\r\n\r\n  <template #collapsedbody>\r\n    <div class=\"p-2\">\r\n      <b-row>\r\n        <b-col>\r\n          <Dashcard\r\n            :value=\"nrodangers\"\r\n            details=\"Com erros\"\r\n            icon=\"bug\"\r\n            css=\"bg-danger-light\"\r\n            textlink=\"Filtrar com erros\"\r\n            @evt_footerclick=\"dashcardfooterclick($event, true)\"\r\n          />\r\n        </b-col>\r\n        <b-col>\r\n          <Dashcard\r\n            :value=\"nrosuccess\"\r\n            details=\"Processados\"\r\n            icon=\"check2\"\r\n            css=\"bg-success-light\"\r\n            textlink=\"Filtrar com sucesso\"\r\n            @evt_footerclick=\"dashcardfooterclick($event, false)\"\r\n          />\r\n        </b-col>\r\n        <b-col>\r\n          <Dashcard\r\n            :value=\"nrowarnings\"\r\n            details=\"Não processados\"\r\n            icon=\"slash-circle\"\r\n            css=\"bg-warning-light\"\r\n            textlink=\"Filtrar não processados\"\r\n            @evt_footerclick=\"dashcardfooterclick($event, null)\"\r\n          />\r\n        </b-col>\r\n        <b-col>\r\n          <Dashcard\r\n            :value=\"nroinfo\"\r\n            details=\"Todos os arquivos\"\r\n            icon=\"check2-all\"\r\n            css=\"bg-info-light\"\r\n            textlink=\"Todos\"\r\n            @evt_footerclick=\"dashcardfooterclick($event, 'all')\"\r\n          />\r\n        </b-col>\r\n      </b-row>\r\n    </div>\r\n\r\n    <div>\r\n      <div class=\"d-flex\">\r\n        <b-input-group prepend=\"Filtro\" size=\"sm\" class=\"mb-2 mr-2\">\r\n          <b-form-input\r\n            id=\"input-filtro\"\r\n            type=\"search\"\r\n            v-model=\"arquivos.filtro\"\r\n            placeholder=\"Informe o nome do arquivo\"\r\n          ></b-form-input>\r\n        </b-input-group>\r\n\r\n        <b-pagination\r\n          id=\"input-pagination\"\r\n          v-model=\"arquivos.currentPage\"\r\n          :total-rows=\"arquivos.data.length\"\r\n          :per-page=\"arquivos.perPage\"\r\n          size=\"sm\"\r\n          class=\"my-0\"\r\n        >\r\n        </b-pagination>\r\n      </div>\r\n\r\n      <b-table\r\n        small\r\n        hover\r\n        responsive\r\n        striped\r\n        bordered\r\n        head-variant=\"dark\"\r\n        :current-page=\"arquivos.currentPage\"\r\n        :per-page=\"arquivos.perPage\"\r\n        :filter=\"arquivos.filtro\"\r\n        :filter-included-fields=\"arquivos.filterOn\"\r\n        :fields=\"arquivos.fields\"\r\n        :items=\"arquivosfiltered\"\r\n        :tbody-tr-class=\"rowClass\"\r\n      >\r\n        <template #cell(DataLeitura)=\"data\">\r\n          {{ data.item.DataLeitura | datetime }}\r\n        </template>\r\n        <template #cell(id)=\"data\">\r\n          <span  v-copy>{{ data.item.id }}</span>\r\n        </template>\r\n        <template #cell(buttons)=\"data\">\r\n          <span class=\"spaced iconbutton\" @click=\"arquivosOpen(data.item)\">\r\n            <b-icon-file-earmark-text />\r\n          </span>\r\n          <span class=\"spaced iconbutton\" @click=\"historyDel(data.item)\">\r\n            <b-icon-trash />\r\n          </span>\r\n        </template>\r\n      </b-table>\r\n\r\n      <div class=\"d-flex float-right\">\r\n        <b-pagination\r\n          id=\"input-pagination\"\r\n          v-model=\"arquivos.currentPage\"\r\n          :total-rows=\"arquivos.data.length\"\r\n          :per-page=\"arquivos.perPage\"\r\n          size=\"sm\"\r\n          class=\"my-0\"\r\n        >\r\n        </b-pagination>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  </CardCollapsed>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport API from \"../../../services/api.service\";\r\nimport Dashcard from \"../../../components/Dashcard.vue\";\r\nimport CardCollapsed from \"@/components/CardCollapsed.vue\";\r\n\r\nexport default {\r\n  name: \"ArquivosDirectory\",\r\n\r\n  components: {\r\n    Dashcard,\r\n    CardCollapsed,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      collapseformopen: false,\r\n      database: new Date(),\r\n      idacao: 2, // FTP PROMOB\r\n      filename: \"\",\r\n      erro: [true, false, null, \"all\"],\r\n      acoes: [\r\n        { value: 7, text: \"Worker BWPX\" },\r\n        { value: 5, text: \"Worker InvalidProjectsRepository\" },\r\n        { value: 4, text: \"Worker SuccessProjectsRepository\" },\r\n        { value: 3, text: \"Worker Promob\" },\r\n        { value: 2, text: \"FTP Promob\" },\r\n        { value: 1, text: \"SERASA RELATO - CONCILIACAO\" },\r\n      ],\r\n      arquivos: {\r\n        currentPage: 1,\r\n        perPage: 20,\r\n        filter: \"\",\r\n        filterOn: [\"Acao\", \"NomeArquivo\", \"Retorno\"],\r\n        fields: [\r\n          \"id\",\r\n          { key: \"Acoes\", label: \"Ações\" },\r\n          { key: \"DataLeitura\", label: \"Data\" },\r\n          { key: \"NomeArquivo\", label: \"Arquivo\" },\r\n          \"Retorno\",\r\n          { key: \"buttons\", label: \"\" },\r\n        ],\r\n        data: [],\r\n        xml: [],\r\n      },\r\n    };\r\n  },\r\n\r\n  async beforeMount() {\r\n\r\n    // const idCollection = 'horlle';\r\n    // const idDocument = {id: this.$route.path.substr(1)};\r\n\r\n    // await API.getLocalDBDocument()\r\n    //   .then((doc) => {\r\n    //     if (doc) {\r\n    //       // this.dataDB = doc.data;\r\n    //     }        \r\n    //   })\r\n\r\n    this.arquivosGet();\r\n  \r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"gtxConfigDatetimePickerFormat\"]),\r\n    dataDB: {\r\n      get() {\r\n        return {\r\n          database: this.database,\r\n          idacao: this.idacao,\r\n          filename: this.filename,\r\n          arquivos: {\r\n            filter: this.filter,\r\n          }\r\n        }\r\n      },\r\n      set(value) {\r\n        this.database = value.database;\r\n        this.idacao = value.idacao;\r\n        this.filename = value.filename;\r\n        this.arquivos.filter = value.filter;\r\n      }\r\n    },\r\n    params() {\r\n      return {\r\n        database: this.database,\r\n        idacao: this.idacao,\r\n        filename: this.filename,\r\n      };\r\n    },\r\n    arquivosfiltered() {\r\n      return this.arquivos.data.filter(\r\n        (f) => this.erro.includes(f.Erro) || this.erro == \"all\"\r\n      );\r\n    },\r\n    nrodangers() {\r\n      return this.arquivos.data.filter((f) => f.Erro).length.toString();\r\n    },\r\n    nrosuccess() {\r\n      return this.arquivos.data\r\n        .filter((f) => f.Erro !== null && !f.Erro)\r\n        .length.toString();\r\n    },\r\n    nrowarnings() {\r\n      return this.arquivos.data.filter((f) => f.Erro == null).length.toString();\r\n    },\r\n    nroinfo() {\r\n      return this.arquivos.data.length.toString();\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    rowClass(item, type) {\r\n      if (!item || type !== \"row\") return;\r\n      if (item.Erro == null) return \"table-warning\";\r\n      return item.Erro ? \"table-danger\" : \"table-success\";\r\n    },\r\n    dashcardfooterclick(footerstate, value) {\r\n      const i = this.erro.findIndex((f) => f == value);\r\n      if (footerstate) {\r\n        if (i == -1) {\r\n          this.erro.push(value);\r\n        }\r\n      } else {\r\n        if (i > -1) {\r\n          this.erro.splice(i, 1);\r\n        }\r\n      }\r\n    },\r\n    arquivosGet() {\r\n      API.get(\"v2/Servicos/ArquivosDirectory/Get\", this.params).then((res) => {\r\n        if (res.data.Success) {\r\n          this.arquivos.data = res.data.Data;\r\n          this.collapseformopen = false;\r\n          // salva no localDB\r\n          // const idCollection = 'horlle';\r\n          const localroute = this.$route.path.substr(1);\r\n          const localdata = {id: localroute, data: this.dataDB};\r\n\r\n          // API.setLocalDBDocument(this.dataDB);\r\n\r\n        } else {\r\n          this.arquivos.data = [];\r\n          this.collapseformopen = true;\r\n        }\r\n      });\r\n    },\r\n    arquivosOpen(item) {\r\n      this.$root.showmessage('Confirme a exclusão deste histórico?', 'Excluir registro')\r\n        .then(choice => {\r\n          const params = {\r\n            idXMLImport: item.idXMLImportPromob,\r\n          };\r\n          API.get(\"v2/Servicos/ArquivosDirectory/BuilderXMLGet\", params).then(\r\n            (res) => {\r\n              if (res.data.Success) {\r\n                this.arquivos.xml = res.data.Data;\r\n              } else {\r\n                this.arquivos.xml = [];\r\n              }\r\n            }\r\n          );\r\n        })\r\n    },\r\n    historyDel(item) {\r\n      const body = {\r\n        idHistory: item.idHistory,\r\n      };\r\n      API.post(\"v2/Servicos/ArquivosDirectory/FinalidadesHistoryDel\", body).then(\r\n        (res) => {\r\n          if (res.data.Success) {\r\n            this.$root.toastsuccess(res.data.Data.Mensagem);\r\n          } else {\r\n            this.$root.toastdanger(res.data.Data.Mensagem);\r\n          }\r\n        }\r\n      );\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}