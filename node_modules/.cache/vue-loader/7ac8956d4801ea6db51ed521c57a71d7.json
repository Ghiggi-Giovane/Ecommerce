{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\producaoidelli\\views\\simulaproducao.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\producaoidelli\\views\\simulaproducao.vue","mtime":1670977910661},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCcNCmltcG9ydCBUYWJsZUVkaXRBcGkgZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9UYWJsZUVkaXRBcGknDQpleHBvcnQgZGVmYXVsdCB7DQogICAgDQogICAgbmFtZTogJ1NpbXVsYVByb2R1Y2FvJywNCg0KICAgIGNvbXBvbmVudHM6IHsNCg0KICAgICAgICBUYWJsZUVkaXRBcGkNCg0KICAgIH0sDQoNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgZW1wcmVzYTogJzgnLA0KICAgICAgICAgICAgbG90ZXM6IFtdLA0KICAgICAgICAgICAgYnVzeTogZmFsc2UsDQogICAgICAgICAgICBmaWVsZHM6IFsNCiAgICAgICAgICAgICAgICB7a2V5OiAnUmVmZXJlbmNpYScsIGxhYmVsOiAnUmVmw6pyZW5jaWEnLCB2aXNpYmxlOiB0cnVlLCBzb3J0YWJsZTogdHJ1ZX0sDQogICAgICAgICAgICAgICAge2tleTogJ1BsYW5vQ29ydGUnLCBsYWJlbDogJ1BsYW5vIENvcnRlJywgdmlzaWJsZTogdHJ1ZSwgc29ydGFibGU6IHRydWV9LA0KICAgICAgICAgICAgICAgIHtrZXk6ICdJdGVtJywgbGFiZWw6ICdJdGVtJywgdmlzaWJsZTogdHJ1ZSwgc29ydGFibGU6IHRydWV9LA0KICAgICAgICAgICAgICAgIHtrZXk6ICdEZXNjcmljYW8nLCBsYWJlbDogJ0Rlc2NyacOnw6NvJywgdmlzaWJsZTogdHJ1ZSwgc29ydGFibGU6IHRydWV9LA0KICAgICAgICAgICAgICAgIHtrZXk6ICdUb3RhbCcsIGxhYmVsOiAnVG90YWwnLCB2aXNpYmxlOiB0cnVlLCBzb3J0YWJsZTogdHJ1ZX0sDQogICAgICAgICAgICBdDQogICAgICAgIH0NCiAgICB9LA0KDQogICAgY29tcHV0ZWQ6IHsNCg0KICAgICAgICAuLi5tYXBHZXR0ZXJzKFsNCiAgICAgICAgICAgICdndHhzaW11bGFwcm9kdWNhb2RhdGEnLA0KICAgICAgICAgICAgJ2d0eFBhcmVtcERhdGFFbXByZXNhcycNCiAgICAgICAgXSksDQoNCiAgICAgICAgZGlzYWJsZWQoKSB7DQogICAgICAgICAgICByZXR1cm4gKHRoaXMuZW1wcmVzYSA9PSBudWxsIHx8IHRoaXMubG90ZXMubGVuZ3RoPT0wKQ0KICAgICAgICB9LA0KDQogICAgICAgIHBhcmFtcygpIHsNCiAgICAgICAgICAgIHJldHVybiB7ZW1wOiB0aGlzLmVtcHJlc2EsIGxvdGVzOiB0aGlzLmxvdGVzLmpvaW4oJzsnKSwgcGxhbm86IDB9DQogICAgICAgIH0sDQoNCiAgICAgICAgdGFibGV0aXRsZSgpIHsNCiAgICAgICAgICAgIHJldHVybiBgTG90ZXM6ICR7dGhpcy5sb3Rlcy5qb2luKCcsJyl9YA0KICAgICAgICB9LA0KDQogICAgICAgIHBsYW5vcygpIHsNCiAgICAgICAgICAgIGxldCBsaXN0YSA9IFtdDQogICAgICAgICAgICBsZXQgcGxhbm8gPSAnJw0KICAgICAgICAgICAgdGhpcy5ndHhzaW11bGFwcm9kdWNhb2RhdGEubWFwKG0gPT4gew0KICAgICAgICAgICAgICAgIHBsYW5vID0gbS5QbGFub0NvcnRlDQogICAgICAgICAgICAgICAgaWYgKCFsaXN0YS5pbmNsdWRlcyhwbGFubykpIGxpc3RhLnB1c2gocGxhbm8pDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgcmV0dXJuIGxpc3RhDQogICAgICAgIH0gICAgICAgIA0KDQogICAgfSwNCg0KICAgIGJlZm9yZU1vdW50KCkgew0KDQogICAgICAgIHRoaXMuYWN0UGFyZW1wKCkNCg0KICAgIH0sDQoNCiAgICBtZXRob2RzOiB7DQoNCiAgICAgICAgLi4ubWFwQWN0aW9ucyhbDQogICAgICAgICAgICAnYWN0UGFyZW1wJywNCiAgICAgICAgICAgICdhY3RzaW11bGFwcm9kdWNhbycNCiAgICAgICAgXSksDQoNCiAgICAgICAgYnRuU2ltdWxhcigpIHsNCiAgICAgICAgICAgIHRoaXMuYnVzeSA9IHRydWUNCiAgICAgICAgICAgIHRoaXMuYWN0c2ltdWxhcHJvZHVjYW8odGhpcy5wYXJhbXMpDQogICAgICAgIH0sDQoNCiAgICAgICAgbGlzdGEocGxhbm8pIHsNCiAgICAgICAgICAgIC8vIHBsYW5vID0gJ1NJTVVMQSBQUk9EVcOHw4NPJw0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ3R4c2ltdWxhcHJvZHVjYW9kYXRhLmZpbHRlcihmID0+IGYuUGxhbm9Db3J0ZSA9PSBwbGFubykNCiAgICAgICAgfQ0KDQogICAgfSwNCg0KICAgIHdhdGNoOiB7DQogICAgICAgIGd0eHNpbXVsYXByb2R1Y2FvZGF0YSgpIHsNCiAgICAgICAgICAgIHRoaXMuYnVzeSA9IGZhbHNlDQogICAgICAgIH0NCiAgICB9DQoNCn0NCg=="},{"version":3,"sources":["simulaproducao.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","file":"simulaproducao.vue","sourceRoot":"src/pages/producaoidelli/views","sourcesContent":["<template>\r\n    <div>\r\n        <b-card class=\"m-2\">\r\n            <div align=\"center\">\r\n                <h1>Simula Produção</h1>\r\n            </div>\r\n\r\n            <b-form-group :label=\"`Empresa ${empresa}`\" label-for=\"input-empresa\">\r\n                <!-- <b-form-input type=\"number\" id=\"input-empresa\" v-model=\"form.emp\"></b-form-input> -->\r\n                <b-form-select id=\"input-empresa\" v-model=\"empresa\" :options=\"gtxParempDataEmpresas\"></b-form-select>\r\n            </b-form-group>\r\n\r\n            <b-form-group label=\"Lotes\" label-for=\"tags-lotes\">\r\n                <b-form-tags separator=\" ,;\" placeholder=\"Lotes\" add-button-text=\"Adicionar\" id=\"tags-lotes\" v-model=\"lotes\"></b-form-tags>\r\n            </b-form-group>\r\n\r\n            <b-form-group class=\"float-right\">\r\n                <b-button variant=\"primary\" @click=\"btnSimular\" :disabled=\"disabled\">Simular</b-button>\r\n            </b-form-group>\r\n        </b-card>\r\n\r\n        <b-card class=\"m-2\">\r\n            <b-overlay :show=\"busy\" rounded=\"sm\">\r\n                <div class=\"accordion\" role=\"tablist\">\r\n                    <b-card no-body class=\"mb-1\" v-for=\"(plano, index) of planos\" :key=\"index\">\r\n                        <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                            <b-button block v-b-toggle=\"plano.split(' ').join('_')\" variant=\"info\">{{plano}}</b-button>\r\n                        </b-card-header>\r\n                        <b-collapse :id=\"plano.split(' ').join('_')\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                            <b-card-body>\r\n                                <TableEditApi v-if=\"gtxsimulaproducaodata\" :header=\"tabletitle\" :items=\"lista(plano)\" :fields=\"fields\" :buttons=\"[]\" :perPage=\"1000\"/>\r\n                            </b-card-body>\r\n                        </b-collapse>\r\n                    </b-card>\r\n                </div>\r\n            </b-overlay>\r\n        </b-card>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from 'vuex'\r\nimport TableEditApi from '../../../components/TableEditApi'\r\nexport default {\r\n    \r\n    name: 'SimulaProducao',\r\n\r\n    components: {\r\n\r\n        TableEditApi\r\n\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            empresa: '8',\r\n            lotes: [],\r\n            busy: false,\r\n            fields: [\r\n                {key: 'Referencia', label: 'Refêrencia', visible: true, sortable: true},\r\n                {key: 'PlanoCorte', label: 'Plano Corte', visible: true, sortable: true},\r\n                {key: 'Item', label: 'Item', visible: true, sortable: true},\r\n                {key: 'Descricao', label: 'Descrição', visible: true, sortable: true},\r\n                {key: 'Total', label: 'Total', visible: true, sortable: true},\r\n            ]\r\n        }\r\n    },\r\n\r\n    computed: {\r\n\r\n        ...mapGetters([\r\n            'gtxsimulaproducaodata',\r\n            'gtxParempDataEmpresas'\r\n        ]),\r\n\r\n        disabled() {\r\n            return (this.empresa == null || this.lotes.length==0)\r\n        },\r\n\r\n        params() {\r\n            return {emp: this.empresa, lotes: this.lotes.join(';'), plano: 0}\r\n        },\r\n\r\n        tabletitle() {\r\n            return `Lotes: ${this.lotes.join(',')}`\r\n        },\r\n\r\n        planos() {\r\n            let lista = []\r\n            let plano = ''\r\n            this.gtxsimulaproducaodata.map(m => {\r\n                plano = m.PlanoCorte\r\n                if (!lista.includes(plano)) lista.push(plano)\r\n            })\r\n            return lista\r\n        }        \r\n\r\n    },\r\n\r\n    beforeMount() {\r\n\r\n        this.actParemp()\r\n\r\n    },\r\n\r\n    methods: {\r\n\r\n        ...mapActions([\r\n            'actParemp',\r\n            'actsimulaproducao'\r\n        ]),\r\n\r\n        btnSimular() {\r\n            this.busy = true\r\n            this.actsimulaproducao(this.params)\r\n        },\r\n\r\n        lista(plano) {\r\n            // plano = 'SIMULA PRODUÇÃO'\r\n            return this.gtxsimulaproducaodata.filter(f => f.PlanoCorte == plano)\r\n        }\r\n\r\n    },\r\n\r\n    watch: {\r\n        gtxsimulaproducaodata() {\r\n            this.busy = false\r\n        }\r\n    }\r\n\r\n}\r\n</script>"]}]}