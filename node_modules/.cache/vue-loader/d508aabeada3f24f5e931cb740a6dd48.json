{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\components\\SearchApi2.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\components\\SearchApi2.vue","mtime":1701906516409},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQXBpU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9hcGkuc2VydmljZSI7DQppbXBvcnQgSW5wdXRTZWFyY2ggZnJvbSAiLi4vY29tcG9uZW50cy9JbnB1dFNlYXJjaCI7DQppbXBvcnQgVGFibGVFZGl0QXBpIGZyb20gIi4uL2NvbXBvbmVudHMvVGFibGVFZGl0QXBpIjsNCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiU2VhcmNoQXBpMiIsDQoNCiAgY29tcG9uZW50czogew0KICAgIElucHV0U2VhcmNoLA0KICAgIFRhYmxlRWRpdEFwaSwNCiAgfSwNCg0KICBwcm9wczogew0KICAgIC8vIG5vbWUgZG8gY2FtcG8gZGEgY2hhdmUgcHJpbWFyaWEgcXVlIHZlbSBkYSBhcGksIGV4OiBpZA0KICAgIHBrdmFsdWU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiAidmFsdWUiOw0KICAgICAgfSwNCiAgICB9LA0KICAgIC8vIG5vbWUgZG8gY2FtcG8gcGFyYSBzZXIgZXhpYmlkbyBxdWUgdmVtIGRhIGFwaSwgZXg6IGRlc2NyaWNhbw0KICAgIHBrdGV4dDogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuICJ0ZXh0IjsNCiAgICAgIH0sDQogICAgfSwNCiAgICBwa2lkOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiAiZGVmYXVsdCI7DQogICAgICB9LA0KICAgIH0sDQogICAgcm91dGU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LA0KICAgIHBhcmFtczogeyB0eXBlOiBPYmplY3QgfSwNCiAgICB0aXRsZTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuICJSZXN1bHRhZG8iOw0KICAgICAgfSwNCiAgICB9LA0KICAgIHZhbHVlOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gIiI7DQogICAgICB9LA0KICAgIH0sDQogICAgcnVuOiB7DQogICAgICB0eXBlOiBOdW1iZXIsDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gMDsNCiAgICAgIH0sDQogICAgfSwNCiAgfSwNCg0KICBiZWZvcmVNb3VudCgpIHsNCiAgICBpZiAodGhpcy52YWx1ZSAhPT0gIiIpIHsNCiAgICAgIGNvbnNvbGUubG9nKCJTZWFyY2hBcGkuYmVmb3JlTW91bnQ6IiwgdGhpcy52YWx1ZSk7DQogICAgICB0aGlzLnNlYXJjaCgpOw0KICAgIH0NCiAgfSwNCg0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBzZWFyY2hUZXh0OiAiIiwNCiAgICAgIHNlYXJjaElkOiAiMCIsDQogICAgICBzZWFyY2hPYmo6IHsgdmFsdWU6ICIiLCB0ZXh0OiB0aGlzLnZhbHVlIH0sDQogICAgICBsaXN0TG9hZDogZmFsc2UsDQogICAgICBpdGVtc0xpc3Q6IFtdLA0KICAgICAgZmllbGRMaXN0OiBbDQogICAgICAgIHsga2V5OiAidmFsdWUiLCBsYWJlbDogIkPDs2RpZ28iLCBzb3J0YWJsZTogdHJ1ZSwgdmlzaWJsZTogdHJ1ZSB9LA0KICAgICAgICB7IGtleTogInRleHQiLCBsYWJlbDogIkRlc2NyacOnw6NvIiwgc29ydGFibGU6IHRydWUsIHZpc2libGU6IHRydWUgfSwNCiAgICAgIF0sDQogICAgfTsNCiAgfSwNCg0KICBjb21wdXRlZDogew0KICAgIHBhcmFtc0FwaSgpIHsNCiAgICAgIC8vIGFkaWNpb25hICUgYW9zIGVzcGHDp29zIGVtIGJyYW5jbyAuLi4NCiAgICAgIC8vIHJldHVybiB7IHBlc3F1aXNhOiB0aGlzLnNlYXJjaFRleHQucmVwbGFjZUFsbCgnICcsICclJykgfQ0KICAgICAgcmV0dXJuIHRoaXMucGFyYW1zDQogICAgICAgID8gdGhpcy5wYXJhbXMNCiAgICAgICAgOiB7IHBlc3F1aXNhOiB0aGlzLnNlYXJjaE9iai50ZXh0LnJlcGxhY2VBbGwoIiAiLCAiJSIpIH07DQogICAgfSwNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwQWN0aW9ucyhbImFjdEFsZXJ0Il0pLA0KDQogICAgc2VhcmNoKCkgew0KICAgICAgdGhpcy5saXN0TG9hZCA9IHRydWU7DQoNCiAgICAgIEFwaVNlcnZpY2UucG9zdCh0aGlzLnJvdXRlLCB0aGlzLnBhcmFtc0FwaSkudGhlbigNCiAgICAgICAgKHJlcykgPT4gew0KICAgICAgICAgIHRoaXMubGlzdExvYWQgPSBmYWxzZTsNCiAgICAgICAgICBpZiAocmVzLmRhdGEuU3VjY2VzcyA9PSAiRmFsc2UiKSB7DQogICAgICAgICAgICB0aGlzLmFjdEFsZXJ0KHsgdmFyaWFudDogImRhbmdlciIsIG1lc3NhZ2U6IHJlcy5kYXRhLkVycm9yIH0pOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAocmVzLmRhdGEuU3VjY2VzcyA9PSAiVHJ1ZSIpIHsNCiAgICAgICAgICAgICAgdGhpcy5pdGVtc0xpc3QgPSByZXMuZGF0YS5EYXRhLm1hcCgoZCkgPT4gew0KICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBkW3RoaXMucGt2YWx1ZV0sIHRleHQ6IGRbdGhpcy5wa3RleHRdIH07DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICBpZiAodGhpcy5pdGVtc0xpc3QubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJGJ2TW9kYWwuc2hvdyhgSW5wdXRTZWFyY2hfTW9kYWwtJHt0aGlzLnBraWR9YCk7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hGb3VuZGVkKHRoaXMuaXRlbXNMaXN0WzBdKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCg0KICAgICAgICAoZXJyb3IpID0+IHsNCiAgICAgICAgICBsZXQgbGVycm9yID0gew0KICAgICAgICAgICAgc3RhdHVzOiAwLA0KICAgICAgICAgICAgY29kZTogLTEsDQogICAgICAgICAgICBtZXNzYWdlOiAiIiwNCiAgICAgICAgICAgIGVycm9yOiB7fSwNCiAgICAgICAgICAgIHJlc3BvbnNlOiB7fSwNCiAgICAgICAgICB9Ow0KDQogICAgICAgICAgaWYgKGVycm9yID09ICJFcnJvcjogTmV0d29yayBFcnJvciIpIHsNCiAgICAgICAgICAgIGxlcnJvci5zdGF0dXMgPSA1MDU7DQogICAgICAgICAgICBsZXJyb3IubWVzc2FnZSA9ICJFcnJvIG5hIHJlZGUiOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBsZXJyb3IuZXJyb3IgPSBlcnJvcjsNCiAgICAgICAgICAgIGlmIChlcnJvci5oYXNPd25Qcm9wZXJ0eSgicmVzcG9uc2UiKSkgew0KICAgICAgICAgICAgICBsZXJyb3IucmVzcG9uc2UgPSBlcnIucmVzcG9uc2U7DQogICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5oYXNPd25Qcm9wZXJ0eSgic3RhdHVzIikpDQogICAgICAgICAgICAgICAgbGVycm9yLnN0YXR1cyA9IGVyci5yZXNwb25zZS5zdGF0dXM7DQogICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5oYXNPd25Qcm9wZXJ0eSgibWVzc2FnZSIpKQ0KICAgICAgICAgICAgICAgIGxlcnJvci5tZXNzYWdlID0gZXJyLnJlc3BvbnNlLm1lc3NhZ2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKGVycm9yLmhhc093blByb3BlcnR5KCJzdGF0dXMiKSkNCiAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXMgPT09IDQwMSkNCiAgICAgICAgICAgICAgbGVycm9yLm1lc3NhZ2UgPQ0KICAgICAgICAgICAgICAgICJFcnJvIG5hIGF1dGVudGljYcOnw6NvLCB2ZXJpZmlxdWUgdXN1w6FyaW8gZSBzZW5oYSI7DQoNCiAgICAgICAgICBpZiAoZXJyb3IuaGFzT3duUHJvcGVydHkoInN0YXR1cyIpKQ0KICAgICAgICAgICAgaWYgKGVycm9yLnN0YXR1cyA9PT0gNDAwKSBlcnJvci5tZXNzYWdlID0gZXJyb3IucmVzcG9uc2UuZGF0YTsNCg0KICAgICAgICAgIGNvbnNvbGUubG9nKCJTZWFyY2hBcGk6OnNlYXJjaDogIiwgZXJyb3IpOw0KDQogICAgICAgICAgc3RvcmUuZGlzcGF0Y2goImFjdFN5c3RlbUVycm9yTG9nIiwgZXJyb3IpOw0KDQogICAgICAgICAgY29uc29sZS5sb2coIlNlYXJjaEFwaS5zZWFyY2guZXJyb3I6IiwgZXJyb3IpOw0KDQogICAgICAgICAgdGhpcy5ldnRFcnJvcihlcnJvci5tZXNzYWdlKTsNCiAgICAgICAgfQ0KICAgICAgKTsNCiAgICB9LA0KDQogICAgc2VhcmNoWCgpIHsNCiAgICAgIHRoaXMuJGJ2TW9kYWwuc2hvdyhgSW5wdXRTZWFyY2hfTW9kYWwtJHt0aGlzLnBraWR9YCk7DQogICAgfSwNCg0KICAgIHNlYXJjaEZvdW5kZWQoc2VsZWN0ZWQpIHsNCiAgICAgIHRoaXMuc2VhcmNoT2JqID0gc2VsZWN0ZWQ7DQogICAgICB0aGlzLnNlYXJjaElkID0gc2VsZWN0ZWRbdGhpcy5wa3ZhbHVlXTsNCiAgICAgIHRoaXMuc2VhcmNoVGV4dCA9IHNlbGVjdGVkW3RoaXMucGt0ZXh0XTsNCiAgICAgIHRoaXMuJGJ2TW9kYWwuaGlkZShgSW5wdXRTZWFyY2hfTW9kYWwtJHt0aGlzLnBraWR9YCk7DQoNCiAgICAgIHRoaXMuJGVtaXQoImlucHV0Iiwgc2VsZWN0ZWRbdGhpcy5wa3ZhbHVlXSk7DQogICAgfSwNCg0KICAgIGV2dHBhZ2UoZXZ0KSB7DQogICAgICAvLyBjb25zb2xlLmxvZygnU2VhcmNoQXBpLmV2dHBhZ2U6JywgZXZ0KQ0KICAgICAgY29uc29sZS5sb2coIlNlYXJjaEFwaS5ldnRwYWdlOiIsIGV2dCk7DQogICAgfSwNCg0KICAgIGV2dHNlbGVjdChldnQpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKCdTZWFyY2hBcGkuZXZ0c2VsZWN0OicsIGV2dCkNCiAgICAgIHRoaXMuc2VhcmNoRm91bmRlZChldnRbMF0pOw0KICAgIH0sDQoNCiAgICBldnRFcnJvcihlcnJvck1lc3NhZ2UpIHsNCiAgICAgIHRoaXMuJGVtaXQoImV2dC1lcnJvciIsIGVycm9yTWVzc2FnZSk7DQogICAgfSwNCg0KICAgIG9uSGlkZU1vZGFsKGV2dCkgew0KICAgICAgLy8gY29uc29sZS5sb2coJ1NlYXJjaEFwaS5vbkhpZGVNb2RhbDonLCBldnQpDQogICAgfSwNCiAgfSwNCg0KICB3YXRjaDogew0KICAgIHJ1bigpIHsNCiAgICAgIGlmICh0aGlzLnZhbHVlLnRleHQgIT09ICIiKSB7DQogICAgICAgIHRoaXMuc2VhcmNoKCk7DQogICAgICB9DQogICAgfSwNCg0KICAgIHNlYXJjaFRleHQoKSB7DQogICAgICBpZiAodGhpcy5zZWFyY2hUZXh0ID09ICIiKSB0aGlzLnNlYXJjaEZvdW5kZWQoeyB2YWx1ZTogIiIsIHRleHQ6ICIiIH0pOw0KICAgIH0sDQoNCiAgICBzZWFyY2hPYmo6IHsNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBoYW5kbGVyKCkgew0KICAgICAgICBpZiAodGhpcy5zZWFyY2hPYmoudGV4dCA9PSAiIiAmJiB0aGlzLnNlYXJjaE9iai52YWx1ZSAhPSAiIikNCiAgICAgICAgICB0aGlzLnNlYXJjaE9iai52YWx1ZSA9ICIiOw0KICAgICAgfSwNCiAgICB9LA0KICAgIHZhbHVlKCkgew0KICAgICAgaWYgKHRoaXMudmFsdWUgPT0gIiIpIHsNCiAgICAgICAgdGhpcy5zZWFyY2hPYmoudmFsdWUgPSAiIjsNCiAgICAgICAgdGhpcy5zZWFyY2hPYmoudGV4dCA9ICIiOw0KICAgICAgfQ0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["SearchApi2.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SearchApi2.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <b-overlay :show=\"listLoad\" rounded=\"sm\">\r\n      <InputSearch\r\n        :id=\"`InputSearch_Input-${pkid}`\"\r\n        :pk=\"searchObj.value\"\r\n        v-bind=\"$attrs\"\r\n        v-model=\"searchObj.text\"\r\n        @key_enter=\"search\"\r\n      />\r\n    </b-overlay>\r\n\r\n    <b-modal\r\n      :id=\"`InputSearch_Modal-${pkid}`\"\r\n      okOnly\r\n      size=\"xl\"\r\n      scrollable\r\n      no-close-on-backdrop\r\n      :title=\"title\"\r\n      @hide=\"onHideModal\"\r\n    >\r\n      <TableEditApi\r\n        :fields=\"fieldList\"\r\n        :items=\"itemsList\"\r\n        :page=\"1\"\r\n        :perPage=\"10\"\r\n        :buttons=\"[]\"\r\n        @evt-page=\"evtpage\"\r\n        @evt-select=\"evtselect\"\r\n      />\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ApiService from \"../services/api.service\";\r\nimport InputSearch from \"../components/InputSearch\";\r\nimport TableEditApi from \"../components/TableEditApi\";\r\nimport { mapActions } from \"vuex\";\r\n\r\nexport default {\r\n  name: \"SearchApi2\",\r\n\r\n  components: {\r\n    InputSearch,\r\n    TableEditApi,\r\n  },\r\n\r\n  props: {\r\n    // nome do campo da chave primaria que vem da api, ex: id\r\n    pkvalue: {\r\n      type: String,\r\n      default() {\r\n        return \"value\";\r\n      },\r\n    },\r\n    // nome do campo para ser exibido que vem da api, ex: descricao\r\n    pktext: {\r\n      type: String,\r\n      default() {\r\n        return \"text\";\r\n      },\r\n    },\r\n    pkid: {\r\n      type: String,\r\n      required: true,\r\n      default() {\r\n        return \"default\";\r\n      },\r\n    },\r\n    route: { type: String, required: true },\r\n    params: { type: Object },\r\n    title: {\r\n      type: String,\r\n      default() {\r\n        return \"Resultado\";\r\n      },\r\n    },\r\n    value: {\r\n      type: String,\r\n      default() {\r\n        return \"\";\r\n      },\r\n    },\r\n    run: {\r\n      type: Number,\r\n      default() {\r\n        return 0;\r\n      },\r\n    },\r\n  },\r\n\r\n  beforeMount() {\r\n    if (this.value !== \"\") {\r\n      console.log(\"SearchApi.beforeMount:\", this.value);\r\n      this.search();\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      searchText: \"\",\r\n      searchId: \"0\",\r\n      searchObj: { value: \"\", text: this.value },\r\n      listLoad: false,\r\n      itemsList: [],\r\n      fieldList: [\r\n        { key: \"value\", label: \"Código\", sortable: true, visible: true },\r\n        { key: \"text\", label: \"Descrição\", sortable: true, visible: true },\r\n      ],\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    paramsApi() {\r\n      // adiciona % aos espaços em branco ...\r\n      // return { pesquisa: this.searchText.replaceAll(' ', '%') }\r\n      return this.params\r\n        ? this.params\r\n        : { pesquisa: this.searchObj.text.replaceAll(\" \", \"%\") };\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"actAlert\"]),\r\n\r\n    search() {\r\n      this.listLoad = true;\r\n\r\n      ApiService.post(this.route, this.paramsApi).then(\r\n        (res) => {\r\n          this.listLoad = false;\r\n          if (res.data.Success == \"False\") {\r\n            this.actAlert({ variant: \"danger\", message: res.data.Error });\r\n          } else {\r\n            if (res.data.Success == \"True\") {\r\n              this.itemsList = res.data.Data.map((d) => {\r\n                return { value: d[this.pkvalue], text: d[this.pktext] };\r\n              });\r\n              if (this.itemsList.length > 1) {\r\n                this.$bvModal.show(`InputSearch_Modal-${this.pkid}`);\r\n              } else {\r\n                this.searchFounded(this.itemsList[0]);\r\n              }\r\n            }\r\n          }\r\n        },\r\n\r\n        (error) => {\r\n          let lerror = {\r\n            status: 0,\r\n            code: -1,\r\n            message: \"\",\r\n            error: {},\r\n            response: {},\r\n          };\r\n\r\n          if (error == \"Error: Network Error\") {\r\n            lerror.status = 505;\r\n            lerror.message = \"Erro na rede\";\r\n          } else {\r\n            lerror.error = error;\r\n            if (error.hasOwnProperty(\"response\")) {\r\n              lerror.response = err.response;\r\n              if (error.response.hasOwnProperty(\"status\"))\r\n                lerror.status = err.response.status;\r\n              if (error.response.hasOwnProperty(\"message\"))\r\n                lerror.message = err.response.message;\r\n            }\r\n          }\r\n\r\n          if (error.hasOwnProperty(\"status\"))\r\n            if (error.status === 401)\r\n              lerror.message =\r\n                \"Erro na autenticação, verifique usuário e senha\";\r\n\r\n          if (error.hasOwnProperty(\"status\"))\r\n            if (error.status === 400) error.message = error.response.data;\r\n\r\n          console.log(\"SearchApi::search: \", error);\r\n\r\n          store.dispatch(\"actSystemErrorLog\", error);\r\n\r\n          console.log(\"SearchApi.search.error:\", error);\r\n\r\n          this.evtError(error.message);\r\n        }\r\n      );\r\n    },\r\n\r\n    searchX() {\r\n      this.$bvModal.show(`InputSearch_Modal-${this.pkid}`);\r\n    },\r\n\r\n    searchFounded(selected) {\r\n      this.searchObj = selected;\r\n      this.searchId = selected[this.pkvalue];\r\n      this.searchText = selected[this.pktext];\r\n      this.$bvModal.hide(`InputSearch_Modal-${this.pkid}`);\r\n\r\n      this.$emit(\"input\", selected[this.pkvalue]);\r\n    },\r\n\r\n    evtpage(evt) {\r\n      // console.log('SearchApi.evtpage:', evt)\r\n      console.log(\"SearchApi.evtpage:\", evt);\r\n    },\r\n\r\n    evtselect(evt) {\r\n      // console.log('SearchApi.evtselect:', evt)\r\n      this.searchFounded(evt[0]);\r\n    },\r\n\r\n    evtError(errorMessage) {\r\n      this.$emit(\"evt-error\", errorMessage);\r\n    },\r\n\r\n    onHideModal(evt) {\r\n      // console.log('SearchApi.onHideModal:', evt)\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    run() {\r\n      if (this.value.text !== \"\") {\r\n        this.search();\r\n      }\r\n    },\r\n\r\n    searchText() {\r\n      if (this.searchText == \"\") this.searchFounded({ value: \"\", text: \"\" });\r\n    },\r\n\r\n    searchObj: {\r\n      deep: true,\r\n      handler() {\r\n        if (this.searchObj.text == \"\" && this.searchObj.value != \"\")\r\n          this.searchObj.value = \"\";\r\n      },\r\n    },\r\n    value() {\r\n      if (this.value == \"\") {\r\n        this.searchObj.value = \"\";\r\n        this.searchObj.text = \"\";\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}