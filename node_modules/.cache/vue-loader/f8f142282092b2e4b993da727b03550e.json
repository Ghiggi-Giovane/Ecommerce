{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\components\\TableEditApi.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\components\\TableEditApi.vue","mtime":1670977910591},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQXBpU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9hcGkuc2VydmljZSI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJUYWJsZUVkaXRBcGkiLA0KDQogIHByb3BzOiB7DQogICAgdGFibGVJZDogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuICJ0YWJsZS1hcGkiOw0KICAgICAgfSwNCiAgICB9LA0KICAgIGhlYWRlcjogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuICIiOw0KICAgICAgfSwNCiAgICB9LA0KICAgIGZpZWxkczogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gW107DQogICAgICB9LA0KICAgIH0sDQogICAgc29tYTogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gW107DQogICAgICB9LA0KICAgIH0sDQogICAgbWFzazogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gW107DQogICAgICB9LA0KICAgIH0sDQogICAgaXRlbXM6IHsNCiAgICAgIHR5cGU6IEFycmF5LA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuIFtdOw0KICAgICAgfSwNCiAgICB9LA0KICAgIGdldHRlcjogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gW107DQogICAgICB9LA0KICAgIH0sDQogICAgYnV0dG9uczogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gW107DQogICAgICB9LA0KICAgIH0sIC8vIGluZm9ybWFyICdlZGl0JywnZGVsZXRlJywnaW5mbycsJ2luc2VydCcsJ3J1bicsJ25ldycNCiAgICBwYWdlOiB7DQogICAgICB0eXBlOiBOdW1iZXIsDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gMTsNCiAgICAgIH0sDQogICAgfSwNCiAgICBwYWdlczogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gWzEwLCAzMCwgNTAsIDEwMCwgNTAwLCAxMDAwLCA5OTk5OTk5XTsNCiAgICAgIH0sDQogICAgfSwNCiAgICBwZXJQYWdlOiB7DQogICAgICB0eXBlOiBOdW1iZXIsDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gMTA7DQogICAgICB9LA0KICAgIH0sDQogICAgcm91dGU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiAiIjsNCiAgICAgIH0sDQogICAgfSwNCiAgICBwYXJhbXM6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiB7fTsNCiAgICAgIH0sDQogICAgfSwNCiAgICBidXN5OiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfSwNCiAgICB9LA0KICAgIHJ1bjogew0KICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuIDE7DQogICAgICB9LA0KICAgIH0sDQogIH0sDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaW5wdXRQZXNxdWlzYTogIiIsDQogICAgICBjaGVjazogZmFsc2UsDQogICAgICBjaGVja2FsbDogZmFsc2UsDQogICAgICBzZWxlY3RlZHM6IFtdLA0KICAgICAgbG9hZDogdGhpcy5idXN5IHx8IGZhbHNlLA0KICAgICAgY29sdW1uczogW10sDQogICAgICBhcGlyZXNwb25zZTogeyBEYXRhOiBbXSwgUGFnaW5hczogeyBQYWdlQ291bnQ6IDEsIFBhZ2VTaXplOiAxMCB9IH0sDQogICAgICBzZWxlY3RlZDogbnVsbCwNCiAgICAgIHNvcnRCeTogIiIsDQogICAgICBzb3J0RGVzYzogZmFsc2UsDQogICAgICBjdXJyZW50UGFnZTogdGhpcy5wYWdlLA0KICAgICAgY3VycmVudHBlclBhZ2U6IHRoaXMucGVyUGFnZSwNCiAgICB9Ow0KICB9LA0KDQogIGNyZWF0ZWQoKSB7DQogICAgLy8gY29uc29sZS5sb2coJ1RhYmxlRWRpdEFwaS4nKQ0KDQogICAgaWYgKHRoaXMucm91dGUgIT09ICIiICYmIHRoaXMucnVuID4gMCkgew0KICAgICAgdGhpcy5nZXRGcm9tQXBpKCk7DQogICAgfSBlbHNlIHsNCiAgICAgIHRoaXMuY29sdW1ucyA9IHRoaXMuZ2V0Q29sdW1uc0FycmF5KHRoaXMuaXRlbXMpOw0KICAgIH0NCiAgfSwNCg0KICBjb21wdXRlZDogew0KICAgIGN1c3RvbWJ1dHRvbnMoKSB7DQogICAgICByZXR1cm4gdGhpcy5idXR0b25zLmZpbHRlcigoYikgPT4gdHlwZW9mIGIgPT0gIm9iamVjdCIgJiYgIWIuaGVhZGVyKTsNCiAgICB9LA0KDQogICAgY3VzdG9tYnV0dG9uc2hlYWRlcigpIHsNCiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbnMuZmlsdGVyKChiKSA9PiB0eXBlb2YgYiA9PSAib2JqZWN0IiAmJiBiLmhlYWRlcik7DQogICAgfSwNCg0KICAgIGFjdGl2ZXBhZ2UoKSB7DQogICAgICByZXR1cm4gdGhpcy5yb3V0ZSAhPT0gIiIgPyAxIDogdGhpcy5jdXJyZW50UGFnZTsNCiAgICB9LA0KDQogICAgc2hvd2NvbHVtbnMoKSB7DQogICAgICByZXR1cm4gdGhpcy5jb2x1bW5zLmxlbmd0aCA+IDANCiAgICAgICAgPyB0aGlzLmNvbHVtbnMuZmlsdGVyKChmKSA9PiBmLnZpc2libGUpIHx8IE9iamVjdC5rZXlzKHRoaXMuaXRlbXMpDQogICAgICAgIDogW107DQogICAgfSwNCg0KICAgIHN1bWNvbHVtbnMoKSB7DQogICAgICByZXR1cm4gdGhpcy5zaG93Y29sdW1ucy5tYXAoKGMpID0+IHRoaXMuc3VtZmllbGQoYy5rZXkpKTsNCiAgICB9LA0KDQogICAgY29sdW1uc3BhbigpIHsNCiAgICAgIHJldHVybiB0aGlzLnNob3djb2x1bW5zLmxlbmd0aCB8fCAxOw0KICAgIH0sDQoNCiAgICB0b3RhbFJvd3MoKSB7DQogICAgICBpZiAodGhpcy5yb3V0ZSAhPT0gIiIpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuYXBpcmVzcG9uc2UgJiYgdGhpcy5hcGlyZXNwb25zZS5QYWdpbmFzDQogICAgICAgICAgPyB0aGlzLmFwaXJlc3BvbnNlLlBhZ2luYXMuUGFnZUNvdW50ICoNCiAgICAgICAgICAgICAgdGhpcy5hcGlyZXNwb25zZS5QYWdpbmFzLlBhZ2VTaXplDQogICAgICAgICAgOiAwOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMubGVuZ3RoOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBpdGVtc0xpc3QoKSB7DQogICAgICBsZXQgcmV0ID0gdGhpcy5pdGVtcy5sZW5ndGggPiAwID8gdGhpcy5pdGVtcyA6IHRoaXMuYXBpcmVzcG9uc2UuRGF0YTsNCiAgICAgIHJldHVybiByZXQgfHwgW107DQogICAgfSwNCg0KICAgIHBhZ2luYXRlKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgUGFnZU51bWJlcjogdGhpcy5jdXJyZW50UGFnZSwNCiAgICAgICAgUGFnZVNpemU6IHRoaXMuY3VycmVudHBlclBhZ2UsDQogICAgICAgIFRvdGFsUm93czogdGhpcy50b3RhbFJvd3MsDQogICAgICB9Ow0KICAgIH0sDQoNCiAgICBwYXJhbXNhcGkoKSB7DQogICAgICByZXR1cm4geyAuLi50aGlzLnBhcmFtcywgLi4udGhpcy5wYWdpbmF0ZSB9Ow0KICAgIH0sDQoNCiAgICBjb2x1bW5Tb3J0ZWQoKSB7DQogICAgICByZXR1cm4gdGhpcy5jb2x1bW5zLmZpbmQoKGMpID0+IGMubGFiZWwgPT0gdGhpcy5zb3J0QnkpIHx8ICIiOw0KICAgIH0sDQoNCiAgICBjaGVja2VkcygpIHsNCiAgICAgIHJldHVybiB0aGlzLml0ZW1zTGlzdC5maWx0ZXIoKGYpID0+IGYuY2hlY2tlZCk7DQogICAgfSwNCiAgfSwNCg0KICB3YXRjaDogew0KICAgIGN1cnJlbnRQYWdlKHBhZ2UpIHsNCiAgICAgIGlmICh0aGlzLnJvdXRlICE9PSAiIiAmJiBwYWdlID4gMCkgdGhpcy5nZXRGcm9tQXBpKCk7DQogICAgfSwNCg0KICAgIGN1cnJlbnRwZXJQYWdlKHBlcnBhZ2UpIHsNCiAgICAgIGlmICh0aGlzLnJvdXRlICE9PSAiIiAmJiBwZXJwYWdlID4gMCkgdGhpcy5nZXRGcm9tQXBpKCk7DQogICAgfSwNCg0KICAgIGFwaXJlc3BvbnNlKCkgew0KICAgICAgaWYgKHRoaXMuY29sdW1ucy5sZW5ndGggPT0gMCkNCiAgICAgICAgdGhpcy5jb2x1bW5zID0gdGhpcy5nZXRDb2x1bW5zQXJyYXkodGhpcy5pdGVtc0xpc3QpOw0KICAgICAgLy8gVE9ETzogZGFyIG8gZm9jbyBubyBwcmltZWlybyByZWdpc3RybyBkYSB0YWJlbGEgcGFyYSBwb2RlciBuYXZlZ2FyIGNvbSBvIHRlY2xhZG8gLi4uDQogICAgICAvLyB0aGlzLiRyZWZzWyJ0YWJsZVNlYXJjaCJdLmZvY3VzKCkNCiAgICB9LA0KDQogICAgcnVuKCkgew0KICAgICAgaWYgKHRoaXMucnVuID4gMCkgdGhpcy5nZXRGcm9tQXBpKCk7DQogICAgfSwNCg0KICAgIHBlclBhZ2UoKSB7DQogICAgICB0aGlzLnBhZ2UgPSAxOw0KICAgIH0sDQogIH0sDQoNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIGdldEZyb21BcGkoKSB7DQogICAgICAvLyBjb25zb2xlLmxvZygnZ2V0RnJvbUFwaScpDQoNCiAgICAgIHRoaXMubG9hZCA9IHRydWU7DQogICAgICBhd2FpdCBBcGlTZXJ2aWNlLmdldCh0aGlzLnJvdXRlLCB7IHBhcmFtczogdGhpcy5wYXJhbXNhcGkgfSkudGhlbigNCiAgICAgICAgKGRhdGEpID0+IHsNCiAgICAgICAgICAvLyBzZSB2ZW0gZGEgQVBJIHJlbW92ZSBvIGNvbnRyb2xlIGRlIHBhZ2luYcOnw6NvIC4uLg0KICAgICAgICAgIHRoaXMubG9hZCA9IGZhbHNlOw0KICAgICAgICAgIHRoaXMuYXBpcmVzcG9uc2UgPSBkYXRhLmRhdGE7DQogICAgICAgICAgLy8gY29uc29sZS5sb2coJ1RhYmxlRWRpdEFwaS5hcGlyZXNwb25zZTonLCB0aGlzLmFwaXJlc3BvbnNlKQ0KDQogICAgICAgICAgdGhpcy4kZW1pdCgiZXZ0LWRvbmUiLCB0aGlzLmFwaXJlc3BvbnNlKTsNCiAgICAgICAgfQ0KICAgICAgKTsNCiAgICB9LA0KDQogICAgc2VhcmNoY2xpY2soKSB7DQogICAgICBjb25zb2xlLmxvZygiVGFibGVFZGl0QXBpLnNlYXJjaGNsaWNrOiIsIHRoaXMuaW5wdXRQZXNxdWlzYSk7DQogICAgfSwNCg0KICAgIGdldENvbHVtbnNBcnJheShhcnIpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKCdnZXRDb2x1bW5zQXJyYXk6JywgYXJyLmxlbmd0aCkNCiAgICAgIGxldCBjb2x1bW5zID0gW107DQogICAgICBpZiAoYXJyLmxlbmd0aCA+IDApIHsNCiAgICAgICAgY29sdW1ucyA9IE9iamVjdC5rZXlzKGFyclswXSkubWFwKChrKSA9PiB7DQogICAgICAgICAgbGV0IGNvbCA9IHRoaXMuZmllbGRzLmZpbmQoKGYpID0+IGYua2V5ID09IGspOw0KICAgICAgICAgIGlmIChjb2wpIHsNCiAgICAgICAgICAgIGNvbC52aXNpYmxlID0gY29sLnZpc2libGUgfHwgZmFsc2U7DQogICAgICAgICAgICBjb2wuc29ydGFibGUgPSBjb2wuc29ydGFibGUgfHwgZmFsc2U7DQogICAgICAgICAgICBjb2wubGFiZWwgPSBjb2wubGFiZWwgfHwgazsNCiAgICAgICAgICB9IGVsc2UNCiAgICAgICAgICAgIGNvbCA9IHsNCiAgICAgICAgICAgICAga2V5OiBrLA0KICAgICAgICAgICAgICBsYWJlbDogaywNCiAgICAgICAgICAgICAgc29ydGFibGU6IHRydWUsDQogICAgICAgICAgICAgIHZpc2libGU6ICF0aGlzLmZpZWxkcy5sZW5ndGggPiAwLA0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgIHJldHVybiBjb2w7DQogICAgICAgIH0pOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgY29sdW1ucyA9IHRoaXMuZmllbGRzOw0KICAgICAgfQ0KDQogICAgICBpZiAoY29sdW1ucy5sZW5ndGggPiAwKQ0KICAgICAgICBpZiAoIWNvbHVtbnMuZmluZCgoZikgPT4gZi5rZXkgPT0gImFjdGlvbnMiKSkNCiAgICAgICAgICBpZiAodGhpcy5idXR0b25zLmxlbmd0aCA+IDApDQogICAgICAgICAgICBjb2x1bW5zLnB1c2goew0KICAgICAgICAgICAgICBrZXk6ICJhY3Rpb25zIiwNCiAgICAgICAgICAgICAgbGFiZWw6ICJBw6fDtWVzIiwNCiAgICAgICAgICAgICAgc29ydGFibGU6IGZhbHNlLA0KICAgICAgICAgICAgICB2aXNpYmxlOiB0cnVlLA0KICAgICAgICAgICAgfSk7DQoNCiAgICAgIHJldHVybiBjb2x1bW5zOw0KICAgIH0sDQoNCiAgICBzdW1maWVsZChmbGQpIHsNCiAgICAgIGlmICh0aGlzLnNvbWEuZmluZCgoZikgPT4gZi5rZXkudG9VcHBlckNhc2UoKSA9PSBmbGQudG9VcHBlckNhc2UoKSkpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXNMaXN0LnJlZHVjZSgoYSwgYikgPT4gYSArIHBhcnNlRmxvYXQoYltmbGRdKSwgMCkgfHwgIiI7DQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gIiI7DQogICAgICB9DQogICAgfSwNCg0KICAgIHNldFZpc2liaWxpdHlDb2x1bW4oY29sKSB7DQogICAgICAvLyBjb25zb2xlLmxvZygnc2V0VmlzaWJpbGl0eUNvbHVtbjonLCBjb2wpDQogICAgICAvLyBjb25zb2xlLmxvZygnc2V0VmlzaWJpbGl0eUNvbHVtbi52aXNpYmxlOicsIGNvbC52aXNpYmxlKQ0KICAgICAgLy9jb2wudmlzaWJsZSA9ICFjb2wudmlzaWJsZSB8fCBmYWxzZQ0KICAgICAgdGhpcy5jb2x1bW5zLmZpbmQoKGMpID0+IGMua2V5ID09IGNvbC5rZXkpLnZpc2libGUgPQ0KICAgICAgICAhY29sLnZpc2libGUgfHwgZmFsc2U7DQogICAgfSwNCg0KICAgIGlzQnV0dG9uKG5hbWUpIHsNCiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbnMuaW5jbHVkZXMobmFtZSkgfHwgZmFsc2U7DQogICAgfSwNCg0KICAgIHByaW50SXQobykgew0KICAgICAgY29uc29sZS5sb2coInByaW50SXQ6Iiwgbyk7DQogICAgfSwNCg0KICAgIGRvTWFyY2FyKCkgew0KICAgICAgbGV0IGkgPSB0aGlzLmNvbHVtbnMuZmluZEluZGV4KChpKSA9PiBpLmtleSA9PSAiY2hlY2siKTsNCiAgICAgIGlmIChpID4gLTEpIHRoaXMuY29sdW1ucy5zcGxpY2UoaSwgMSk7DQogICAgICBlbHNlDQogICAgICAgIHRoaXMuY29sdW1ucy5wdXNoKHsNCiAgICAgICAgICBrZXk6ICJjaGVjayIsDQogICAgICAgICAgbGFiZWw6ICJNYXJjYXIiLA0KICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZSwNCiAgICAgICAgICB2aXNpYmxlOiB0cnVlLA0KICAgICAgICB9KTsNCiAgICAgIGNvbnNvbGUubG9nKCJkb01hcmNhcjoiLCB0aGlzLnNlbGVjdGVkcy5sZW5ndGgpOw0KICAgIH0sDQoNCiAgICBkb0VudmlhTWFyY2Fkb3MoKSB7DQogICAgICBjb25zb2xlLmxvZygiZG9FbnZpYU1hcmNhZG9zOiIsIHRoaXMuY2hlY2tlZHMpOw0KICAgICAgdGhpcy4kZW1pdCgiZXZ0LXNlbGVjdGVkIiwgdGhpcy5jaGVja2Vkcyk7DQogICAgfSwNCg0KICAgIHJvd0N1c3RvbUJ1dHRvbihidXR0b24sIGRhdGEpIHsNCiAgICAgIGJ1dHRvbi5kYXRhID0gZGF0YTsNCg0KICAgICAgdGhpcy4kZW1pdCgiZXZ0LXJvd2J1dHRvbiIsIGJ1dHRvbik7DQogICAgfSwNCg0KICAgIEN1c3RvbUJ1dHRvbkNsaWNrKGJ1dHRvbikgew0KICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgYnV0dG9uLmRhdGEgPSB0aGlzLnNlbGVjdGVkczsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGJ1dHRvbi5kYXRhID0gdGhpcy5pdGVtc0xpc3Q7DQogICAgICB9DQoNCiAgICAgIHRoaXMuJGVtaXQoImV2dC1oZWFkZXJidXR0b24iLCBidXR0b24pOw0KICAgIH0sDQoNCiAgICBvbkNoZWNrYWxsKCkgew0KICAgICAgdGhpcy5jaGVja2FsbCA9ICF0aGlzLmNoZWNrYWxsOw0KICAgICAgY29uc29sZS5sb2coIm9uQ2hlY2thbGwiLCB0aGlzLmNoZWNrYWxsKTsNCg0KICAgICAgaWYgKHRoaXMuaXRlbXMubGVuZ3RoID4gMCkgew0KICAgICAgICB0aGlzLml0ZW1zLm1hcCgoaSkgPT4gKGkuY2hlY2tlZCA9IHRoaXMuY2hlY2thbGwpKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuYXBpcmVzcG9uc2UuRGF0YS5tYXAoKGkpID0+IChpLmNoZWNrZWQgPSB0aGlzLmNoZWNrYWxsKSk7DQogICAgICB9DQoNCiAgICAgIC8vIHRoaXMuaXRlbXNMaXN0Lm1hcChpID0+IGkuY2hlY2tlZCA9IHRoaXMuY2hlY2thbGwpDQogICAgfSwNCg0KICAgIHJvd0NoZWNrZWQoaXRlbSwgdHlwZSkgew0KICAgICAgaWYgKCFpdGVtIHx8IHR5cGUgIT09ICJyb3ciKSByZXR1cm4gIiI7DQogICAgICBpZiAoaXRlbS5jaGVja2VkKSByZXR1cm4gInRhYmxlLWluZm8iOw0KICAgIH0sDQoNCiAgICBOZXcoKSB7DQogICAgICAvLyBjb25zb2xlLmxvZygnRWRpdG91IG5vIGl0ZW06JywgZXZ0Lml0ZW0udmFsdWUsIGV2dCkNCiAgICAgIHRoaXMuJGVtaXQoImV2dC1uZXciKTsNCiAgICB9LA0KICAgIHJvd3NTZWxlY3QoZXZ0KSB7DQogICAgICAvKg0KICAgICAgICAgICAgaWYgKCghdGhpcy5zZWxlY3RlZHMuZmluZChmID0+IGYgPT0gZXZ0KSkgJiYgKGV2dC5jaGVja2VkKSkNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkcy5wdXNoKGV2dCkNCg0KICAgICAgICAgICAgaWYgKCh0aGlzLnNlbGVjdGVkcy5maW5kKGYgPT4gZiA9PSBldnQpKSAmJiAoIWV2dC5jaGVja2VkKSkNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkcy5zcGxpY2UodGhpcy5zZWxlY3RlZHMuZmluZEluZGV4KGYgPT4gZiA9PSBldnQpLCAxKQ0KICAgICAgICAgICAgKi8NCg0KICAgICAgZXZ0LmNoZWNrZWQgPSAhZXZ0LmNoZWNrZWQ7DQoNCiAgICAgIHRoaXMuJGVtaXQoImV2dC1jaGVja2VkIiwgdGhpcy5zZWxlY3RlZHMpOw0KICAgIH0sDQogICAgcm93U2VsZWN0KGV2dCkgew0KICAgICAgLy8gY29uc29sZS5sb2coJ1NlbGVjaW9ub3UgbyBpdGVtOicsIGV2dCkNCiAgICAgIHRoaXMuJGVtaXQoImV2dC1zZWxlY3QiLCBldnQpOw0KICAgIH0sDQogICAgcm93RWRpdChldnQpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKCdFZGl0b3Ugbm8gaXRlbTonLCBldnQuaXRlbS52YWx1ZSwgZXZ0KQ0KICAgICAgdGhpcy4kZW1pdCgiZXZ0LWVkaXQiLCBldnQpOw0KICAgIH0sDQogICAgcm93RGVsZXRlKGV2dCkgew0KICAgICAgLy8gY29uc29sZS5sb2coJ0V4Y2x1aXUgbm8gaXRlbTonLCBldnQuaXRlbS52YWx1ZSwgZXZ0KQ0KICAgICAgdGhpcy4kZW1pdCgiZXZ0LWRlbGV0ZSIsIGV2dCk7DQogICAgfSwNCiAgICByb3dJbnNlcnQoZXZ0KSB7DQogICAgICAvLyBjb25zb2xlLmxvZygnaW5zZXJpdSBvIGl0ZW06JywgZXZ0Lml0ZW0udmFsdWUsIGV2dCkNCiAgICAgIHRoaXMuJGVtaXQoImV2dC1pbnNlcnQiLCBldnQpOw0KICAgIH0sDQogICAgcm93UnVuKGV2dCkgew0KICAgICAgLy8gY29uc29sZS5sb2coJ2luc2VyaXUgbyBpdGVtOicsIGV2dC5pdGVtLnZhbHVlLCBldnQpDQogICAgICB0aGlzLiRlbWl0KCJldnQtcnVuIiwgZXZ0KTsNCiAgICB9LA0KICAgIHJvd0luZm9ybShldnQpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKCdFeGNsdWl1IG5vIGl0ZW06JywgZXZ0Lml0ZW0udmFsdWUsIGV2dCkNCiAgICAgIHRoaXMuJGVtaXQoImV2dC1pbmZvcm0iLCBldnQpOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["TableEditApi.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoSA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TableEditApi.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <b-overlay :show=\"load\" rounded=\"sm\">\r\n      <div class=\"d-flex float-right mb-2\">\r\n        <b-pagination\r\n          v-if=\"totalRows > perPage\"\r\n          v-model=\"currentPage\"\r\n          :total-rows=\"totalRows\"\r\n          :per-page=\"currentperPage\"\r\n          aria-controls=\"tableSearch\"\r\n          size=\"sm\"\r\n        >\r\n        </b-pagination>\r\n        <b-form-select\r\n          v-model=\"currentperPage\"\r\n          :options=\"pages\"\r\n          size=\"sm\"\r\n          width=\"10px\"\r\n          class=\"ml-2\"\r\n        >\r\n        </b-form-select>\r\n      </div>\r\n\r\n      <b-table\r\n        v-if=\"showcolumns\"\r\n        id=\"tableSearch\"\r\n        ref=\"tableSearch\"\r\n        striped\r\n        hover\r\n        small\r\n        bordered\r\n        responsive=\"sm\"\r\n        head-variant=\"light\"\r\n        selectable\r\n        select-mode=\"single\"\r\n        selected-variant=\"success\"\r\n        :items=\"itemsList\"\r\n        :fields=\"showcolumns\"\r\n        :current-page=\"activepage\"\r\n        :total-rows=\"totalRows\"\r\n        :perPage=\"currentperPage\"\r\n        :tbody-tr-class=\"rowChecked\"\r\n        sort-icon-left\r\n        :sort-by.sync=\"sortBy\"\r\n        :sort-desc.sync=\"sortDesc\"\r\n        @row-selected=\"rowSelect\"\r\n      >\r\n        <template #thead-top>\r\n          <b-tr v-if=\"header.length > 0\">\r\n            <b-th :colspan=\"columnspan\" variant=\"secondary\">\r\n              <div class=\"d-flex justify-content-between align-items-center\">\r\n                <div class=\"ml-2\">\r\n                  {{ header }}\r\n                </div>\r\n                <div>\r\n                  <b-button\r\n                    v-for=\"(b, i) of custombuttonsheader\"\r\n                    :key=\"i\"\r\n                    :size=\"b.size\"\r\n                    :variant=\"b.variant\"\r\n                    v-b-tooltip\r\n                    :title=\"b.tooltip\"\r\n                    class=\"ml-1\"\r\n                    @click=\"CustomButtonClick(b)\"\r\n                  >\r\n                    <b-icon v-if=\"b.icon\" :icon=\"b.icon\" />\r\n                    <span v-if=\"b.label\">{{ b.label }}</span>\r\n                  </b-button>\r\n                  <b-button\r\n                    v-if=\"isButton('new')\"\r\n                    variant=\"outline-primary\"\r\n                    size=\"sm\"\r\n                    v-b-tooltip.hover.topleft=\"'Novo registro'\"\r\n                    @click=\"New\"\r\n                  >\r\n                    <b-icon-plus-circle class=\"mr-2\" />\r\n                    Incluir\r\n                  </b-button>\r\n\r\n                  <b-dropdown\r\n                    right\r\n                    variant=\"outline-primary\"\r\n                    size=\"sm\"\r\n                    class=\"ml-1\"\r\n                  >\r\n                    <template #button-content>\r\n                      <b-icon-gear-fill />\r\n                    </template>\r\n                    <b-dropdown-item\r\n                      @click=\"doMarcar\"\r\n                      v-if=\"checkeds.length == 0\"\r\n                    >\r\n                      <b-icon-check-square />\r\n                      Marcar</b-dropdown-item\r\n                    >\r\n                    <b-dropdown-item @click=\"doEnviaMarcados\" v-else\r\n                      >Enviar Marcados</b-dropdown-item\r\n                    >\r\n                    <b-dropdown-divider></b-dropdown-divider>\r\n                    <b-dropdown-form style=\"width: 200px;\">\r\n                      <b-input-group block>\r\n                        <b-form-input\r\n                          size=\"sm\"\r\n                          placeholder=\"Pesquisar\"\r\n                          v-model=\"inputPesquisa\"\r\n                        ></b-form-input>\r\n                        <b-input-group-append>\r\n                          <b-button\r\n                            size=\"sm\"\r\n                            variant=\"outline-success\"\r\n                            type=\"button\"\r\n                            :disabled=\"inputPesquisa.length == 0\"\r\n                            @click=\"searchclick\"\r\n                            ><b-icon-search\r\n                          /></b-button>\r\n                        </b-input-group-append>\r\n                      </b-input-group>\r\n                    </b-dropdown-form>\r\n                    <b-dropdown-divider></b-dropdown-divider>\r\n                    <b-dropdown-item\r\n                      v-for=\"(col, i) of columns\"\r\n                      :key=\"i\"\r\n                      @click=\"setVisibilityColumn(col)\"\r\n                    >\r\n                      <b-icon-eye class=\"mr-2\" v-if=\"col.visible\" />\r\n                      <b-icon-eye-slash class=\"mr-2\" v-else />\r\n                      {{ col.label }}\r\n                    </b-dropdown-item>\r\n                  </b-dropdown>\r\n                </div>\r\n              </div>\r\n            </b-th>\r\n          </b-tr>\r\n        </template>\r\n\r\n        <!-- header da coluna actions -->\r\n        <template #head(actions)=\"data\">\r\n          <div class=\"text-center\">\r\n            {{ data.label }}\r\n          </div>\r\n        </template>\r\n\r\n        <!-- detalhe da coluna actions -->\r\n        <template #cell(actions)=\"data\">\r\n          <div class=\"text-center\">\r\n            <!-- Botões fixos para edição -->\r\n            <b-button-group>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('insert')\"\r\n                variant=\"outline-primary\"\r\n                v-b-tooltip.hover.topleft=\"'Incluir'\"\r\n                @click=\"rowInsert(data)\"\r\n                ><b-icon-plus\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('edit')\"\r\n                variant=\"outline-success\"\r\n                v-b-tooltip.hover.topleft=\"'Editar'\"\r\n                @click=\"rowEdit(data)\"\r\n                ><b-icon-pencil\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('delete')\"\r\n                variant=\"outline-danger\"\r\n                v-b-tooltip.hover.topleft=\"'Deletar'\"\r\n                @click=\"rowDelete(data)\"\r\n                ><b-icon-trash\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('run')\"\r\n                variant=\"outline-warning\"\r\n                v-b-tooltip.hover.topleft=\"'Executar'\"\r\n                @click=\"rowRun(data)\"\r\n                ><b-icon-lightning\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('info')\"\r\n                variant=\"outline-info\"\r\n                v-b-tooltip.hover.topleft=\"'Informações'\"\r\n                @click=\"rowInform(data)\"\r\n                ><b-icon-info-circle\r\n              /></b-button>\r\n            </b-button-group>\r\n            <!-- Botões dinamicos criados pelo usuário -->\r\n            <b-button\r\n              v-for=\"(b, i) of custombuttons\"\r\n              :key=\"i\"\r\n              :size=\"b.size\"\r\n              :variant=\"b.variant\"\r\n              v-b-tooltip\r\n              :title=\"b.tooltip\"\r\n              class=\"ml-1\"\r\n              @click=\"rowCustomButton(b, data.item)\"\r\n            >\r\n              <b-icon v-if=\"b.icon\" :icon=\"b.icon\" />\r\n              <span v-if=\"b.label\">{{ b.label }}</span>\r\n            </b-button>\r\n          </div>\r\n        </template>\r\n\r\n        <!-- header da coluna check -->\r\n        <template #head(check)>\r\n          <div class=\"text-center\">\r\n            <b-form-checkbox @change=\"onCheckall\"></b-form-checkbox>\r\n          </div>\r\n        </template>\r\n        <!-- detalhe da coluna check -->\r\n        <template #cell(check)=\"data\">\r\n          <div class=\"text-center\">\r\n            <b-form-checkbox v-model=\"data.item.checked\"></b-form-checkbox>\r\n          </div>\r\n        </template>\r\n\r\n        <!-- Default fall-back custom formatted footer cell\r\n            <template #foot()=\"data\">\r\n                <i>{{ data.item }}</i>\r\n                pq não aparece isso ?\r\n            </template> \r\n            -->\r\n        <template #head(custombuttons)=\"data\">\r\n          <div class=\"text-center\">\r\n            {{ data.label }}\r\n          </div>\r\n        </template>\r\n        <template v-slot:cell(custombuttons)>\r\n          <slot class=\"text-center\"></slot>\r\n        </template>\r\n\r\n        <template slot=\"bottom-row\" v-if=\"soma.lenght > 0\">\r\n          <td v-for=\"(c, i) of sumcolumns\" :key=\"i\">\r\n            <span class=\"font-weight-bolder\">{{ c }}</span>\r\n          </td>\r\n        </template>\r\n      </b-table>\r\n\r\n      <div class=\"d-flex float-left font-weight-bold ml-3\">\r\n        <span v-if=\"totalRows == 1\"> {{ totalRows }} registro </span>\r\n        <span v-else> {{ totalRows }} registros </span>\r\n      </div>\r\n\r\n      <div class=\"d-flex float-right\">\r\n        <b-pagination\r\n          v-if=\"totalRows > perPage\"\r\n          v-model=\"currentPage\"\r\n          :total-rows=\"totalRows\"\r\n          :per-page=\"currentperPage\"\r\n          aria-controls=\"tableSearch\"\r\n          size=\"sm\"\r\n        >\r\n        </b-pagination>\r\n        <b-form-select\r\n          v-model=\"currentperPage\"\r\n          :options=\"pages\"\r\n          size=\"sm\"\r\n          class=\"ml-2\"\r\n        ></b-form-select>\r\n      </div>\r\n    </b-overlay>\r\n\r\n    <!--\r\n        checkeds:\r\n        <pre>\r\n            {{ checkeds }}\r\n        </pre>\r\n        paginate: {{paginate}}<br/>\r\n        showcolumns: {{showcolumns}}<br/>\r\n        itemsList: {{itemsList}}<br/>\r\n\r\n\r\n        soma: {{soma}}<br/>\r\n        sumcolumns: {{sumcolumns}}<br/>\r\n\r\n\r\n        <b-table striped hover :fields=\"fields\" :items=\"items\">\r\n            <template #cell(actions)=\"data\">\r\n                {{ data.index + 1 }}\r\n            </template>\r\n        </b-table>\r\n-->\r\n\r\n    <!--         buttons: {{buttons.length}}<br/>\r\n        columns: {{columns}}<br/>\r\n        selecteds: {{selecteds}} -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ApiService from \"../services/api.service\";\r\nexport default {\r\n  name: \"TableEditApi\",\r\n\r\n  props: {\r\n    tableId: {\r\n      type: String,\r\n      default() {\r\n        return \"table-api\";\r\n      },\r\n    },\r\n    header: {\r\n      type: String,\r\n      default() {\r\n        return \"\";\r\n      },\r\n    },\r\n    fields: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    soma: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    mask: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    items: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    getter: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    buttons: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    }, // informar 'edit','delete','info','insert','run','new'\r\n    page: {\r\n      type: Number,\r\n      default() {\r\n        return 1;\r\n      },\r\n    },\r\n    pages: {\r\n      type: Array,\r\n      default() {\r\n        return [10, 30, 50, 100, 500, 1000, 9999999];\r\n      },\r\n    },\r\n    perPage: {\r\n      type: Number,\r\n      default() {\r\n        return 10;\r\n      },\r\n    },\r\n    route: {\r\n      type: String,\r\n      default() {\r\n        return \"\";\r\n      },\r\n    },\r\n    params: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n    busy: {\r\n      type: Boolean,\r\n      default() {\r\n        return false;\r\n      },\r\n    },\r\n    run: {\r\n      type: Number,\r\n      default() {\r\n        return 1;\r\n      },\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      inputPesquisa: \"\",\r\n      check: false,\r\n      checkall: false,\r\n      selecteds: [],\r\n      load: this.busy || false,\r\n      columns: [],\r\n      apiresponse: { Data: [], Paginas: { PageCount: 1, PageSize: 10 } },\r\n      selected: null,\r\n      sortBy: \"\",\r\n      sortDesc: false,\r\n      currentPage: this.page,\r\n      currentperPage: this.perPage,\r\n    };\r\n  },\r\n\r\n  created() {\r\n    // console.log('TableEditApi.')\r\n\r\n    if (this.route !== \"\" && this.run > 0) {\r\n      this.getFromApi();\r\n    } else {\r\n      this.columns = this.getColumnsArray(this.items);\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    custombuttons() {\r\n      return this.buttons.filter((b) => typeof b == \"object\" && !b.header);\r\n    },\r\n\r\n    custombuttonsheader() {\r\n      return this.buttons.filter((b) => typeof b == \"object\" && b.header);\r\n    },\r\n\r\n    activepage() {\r\n      return this.route !== \"\" ? 1 : this.currentPage;\r\n    },\r\n\r\n    showcolumns() {\r\n      return this.columns.length > 0\r\n        ? this.columns.filter((f) => f.visible) || Object.keys(this.items)\r\n        : [];\r\n    },\r\n\r\n    sumcolumns() {\r\n      return this.showcolumns.map((c) => this.sumfield(c.key));\r\n    },\r\n\r\n    columnspan() {\r\n      return this.showcolumns.length || 1;\r\n    },\r\n\r\n    totalRows() {\r\n      if (this.route !== \"\") {\r\n        return this.apiresponse && this.apiresponse.Paginas\r\n          ? this.apiresponse.Paginas.PageCount *\r\n              this.apiresponse.Paginas.PageSize\r\n          : 0;\r\n      } else {\r\n        return this.items.length;\r\n      }\r\n    },\r\n\r\n    itemsList() {\r\n      let ret = this.items.length > 0 ? this.items : this.apiresponse.Data;\r\n      return ret || [];\r\n    },\r\n\r\n    paginate() {\r\n      return {\r\n        PageNumber: this.currentPage,\r\n        PageSize: this.currentperPage,\r\n        TotalRows: this.totalRows,\r\n      };\r\n    },\r\n\r\n    paramsapi() {\r\n      return { ...this.params, ...this.paginate };\r\n    },\r\n\r\n    columnSorted() {\r\n      return this.columns.find((c) => c.label == this.sortBy) || \"\";\r\n    },\r\n\r\n    checkeds() {\r\n      return this.itemsList.filter((f) => f.checked);\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    currentPage(page) {\r\n      if (this.route !== \"\" && page > 0) this.getFromApi();\r\n    },\r\n\r\n    currentperPage(perpage) {\r\n      if (this.route !== \"\" && perpage > 0) this.getFromApi();\r\n    },\r\n\r\n    apiresponse() {\r\n      if (this.columns.length == 0)\r\n        this.columns = this.getColumnsArray(this.itemsList);\r\n      // TODO: dar o foco no primeiro registro da tabela para poder navegar com o teclado ...\r\n      // this.$refs[\"tableSearch\"].focus()\r\n    },\r\n\r\n    run() {\r\n      if (this.run > 0) this.getFromApi();\r\n    },\r\n\r\n    perPage() {\r\n      this.page = 1;\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    async getFromApi() {\r\n      // console.log('getFromApi')\r\n\r\n      this.load = true;\r\n      await ApiService.get(this.route, { params: this.paramsapi }).then(\r\n        (data) => {\r\n          // se vem da API remove o controle de paginação ...\r\n          this.load = false;\r\n          this.apiresponse = data.data;\r\n          // console.log('TableEditApi.apiresponse:', this.apiresponse)\r\n\r\n          this.$emit(\"evt-done\", this.apiresponse);\r\n        }\r\n      );\r\n    },\r\n\r\n    searchclick() {\r\n      console.log(\"TableEditApi.searchclick:\", this.inputPesquisa);\r\n    },\r\n\r\n    getColumnsArray(arr) {\r\n      // console.log('getColumnsArray:', arr.length)\r\n      let columns = [];\r\n      if (arr.length > 0) {\r\n        columns = Object.keys(arr[0]).map((k) => {\r\n          let col = this.fields.find((f) => f.key == k);\r\n          if (col) {\r\n            col.visible = col.visible || false;\r\n            col.sortable = col.sortable || false;\r\n            col.label = col.label || k;\r\n          } else\r\n            col = {\r\n              key: k,\r\n              label: k,\r\n              sortable: true,\r\n              visible: !this.fields.length > 0,\r\n            };\r\n\r\n          return col;\r\n        });\r\n      } else {\r\n        columns = this.fields;\r\n      }\r\n\r\n      if (columns.length > 0)\r\n        if (!columns.find((f) => f.key == \"actions\"))\r\n          if (this.buttons.length > 0)\r\n            columns.push({\r\n              key: \"actions\",\r\n              label: \"Ações\",\r\n              sortable: false,\r\n              visible: true,\r\n            });\r\n\r\n      return columns;\r\n    },\r\n\r\n    sumfield(fld) {\r\n      if (this.soma.find((f) => f.key.toUpperCase() == fld.toUpperCase())) {\r\n        return this.itemsList.reduce((a, b) => a + parseFloat(b[fld]), 0) || \"\";\r\n      } else {\r\n        return \"\";\r\n      }\r\n    },\r\n\r\n    setVisibilityColumn(col) {\r\n      // console.log('setVisibilityColumn:', col)\r\n      // console.log('setVisibilityColumn.visible:', col.visible)\r\n      //col.visible = !col.visible || false\r\n      this.columns.find((c) => c.key == col.key).visible =\r\n        !col.visible || false;\r\n    },\r\n\r\n    isButton(name) {\r\n      return this.buttons.includes(name) || false;\r\n    },\r\n\r\n    printIt(o) {\r\n      console.log(\"printIt:\", o);\r\n    },\r\n\r\n    doMarcar() {\r\n      let i = this.columns.findIndex((i) => i.key == \"check\");\r\n      if (i > -1) this.columns.splice(i, 1);\r\n      else\r\n        this.columns.push({\r\n          key: \"check\",\r\n          label: \"Marcar\",\r\n          sortable: false,\r\n          visible: true,\r\n        });\r\n      console.log(\"doMarcar:\", this.selecteds.length);\r\n    },\r\n\r\n    doEnviaMarcados() {\r\n      console.log(\"doEnviaMarcados:\", this.checkeds);\r\n      this.$emit(\"evt-selected\", this.checkeds);\r\n    },\r\n\r\n    rowCustomButton(button, data) {\r\n      button.data = data;\r\n\r\n      this.$emit(\"evt-rowbutton\", button);\r\n    },\r\n\r\n    CustomButtonClick(button) {\r\n      if (this.selecteds.length > 0) {\r\n        button.data = this.selecteds;\r\n      } else {\r\n        button.data = this.itemsList;\r\n      }\r\n\r\n      this.$emit(\"evt-headerbutton\", button);\r\n    },\r\n\r\n    onCheckall() {\r\n      this.checkall = !this.checkall;\r\n      console.log(\"onCheckall\", this.checkall);\r\n\r\n      if (this.items.length > 0) {\r\n        this.items.map((i) => (i.checked = this.checkall));\r\n      } else {\r\n        this.apiresponse.Data.map((i) => (i.checked = this.checkall));\r\n      }\r\n\r\n      // this.itemsList.map(i => i.checked = this.checkall)\r\n    },\r\n\r\n    rowChecked(item, type) {\r\n      if (!item || type !== \"row\") return \"\";\r\n      if (item.checked) return \"table-info\";\r\n    },\r\n\r\n    New() {\r\n      // console.log('Editou no item:', evt.item.value, evt)\r\n      this.$emit(\"evt-new\");\r\n    },\r\n    rowsSelect(evt) {\r\n      /*\r\n            if ((!this.selecteds.find(f => f == evt)) && (evt.checked))\r\n                this.selecteds.push(evt)\r\n\r\n            if ((this.selecteds.find(f => f == evt)) && (!evt.checked))\r\n                this.selecteds.splice(this.selecteds.findIndex(f => f == evt), 1)\r\n            */\r\n\r\n      evt.checked = !evt.checked;\r\n\r\n      this.$emit(\"evt-checked\", this.selecteds);\r\n    },\r\n    rowSelect(evt) {\r\n      // console.log('Selecionou o item:', evt)\r\n      this.$emit(\"evt-select\", evt);\r\n    },\r\n    rowEdit(evt) {\r\n      // console.log('Editou no item:', evt.item.value, evt)\r\n      this.$emit(\"evt-edit\", evt);\r\n    },\r\n    rowDelete(evt) {\r\n      // console.log('Excluiu no item:', evt.item.value, evt)\r\n      this.$emit(\"evt-delete\", evt);\r\n    },\r\n    rowInsert(evt) {\r\n      // console.log('inseriu o item:', evt.item.value, evt)\r\n      this.$emit(\"evt-insert\", evt);\r\n    },\r\n    rowRun(evt) {\r\n      // console.log('inseriu o item:', evt.item.value, evt)\r\n      this.$emit(\"evt-run\", evt);\r\n    },\r\n    rowInform(evt) {\r\n      // console.log('Excluiu no item:', evt.item.value, evt)\r\n      this.$emit(\"evt-inform\", evt);\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}