{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\consultas\\components\\resultquery.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\consultas\\components\\resultquery.vue","mtime":1670977910612},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQVBJIGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2FwaS5zZXJ2aWNlIjsNCmltcG9ydCBFeHBvcnRGaWxlIGZyb20gIi4uLy4uLy4uL2NvbXBvbmVudHMvRXhwb3J0RmlsZS52dWUiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAicmVzdWx0cXVlcnkiLA0KICBjb21wb25lbnRzOiB7DQogICAgRXhwb3J0RmlsZSwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbG9hZDogZmFsc2UsDQogICAgICBwcmludGluZzogZmFsc2UsDQogICAgICBwYXJhbXNhcGk6IHRoaXMucGFyYW1zLA0KICAgICAgYXBpcmVzcG9uc2U6IHsgRGF0YTogW10sIFBhZ2luYXM6IHsgUGFnZUNvdW50OiAxLCBQYWdlU2l6ZTogMTAgfSB9LA0KICAgICAgZGF0YTogW10sDQogICAgICBwYWdlczogWzE1LCAzMCwgNTAsIDEwMCwgNTAwLCAxMDAwLCA5OTk5OTk5XSwNCiAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLnBhcmFtcy5QYWdlTnVtYmVyIHx8IDEsDQogICAgICBjdXJyZW50cGVyUGFnZTogdGhpcy5wYXJhbXMuUGFnZVNpemUgfHwgMzAsDQogICAgICB0b3RhbFJvd3M6IDEsDQogICAgICBjc3ZwYXJhbTogew0KICAgICAgICBmbGQ6IFtdLA0KICAgICAgICBzZXA6ICI7IiwNCiAgICAgICAgcXVvdGVkOiAiIiwNCiAgICAgICAgd2hlYWQ6IHRydWUsDQogICAgICAgIGZpbGVuYW1lOiAicmVzdWx0YWRvLmRhdCIsDQogICAgICAgIGNzdnN0cmVhbTogIiIsDQogICAgICAgIGRhdGE6IFtdLA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGNvbHVtbnNkYXRhKCkgew0KICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YVswXSB8fCB7fTsNCiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhkYXRhKTsNCiAgICB9LA0KICAgIGNvbHVtbnNwYW4oKSB7DQogICAgICByZXR1cm4gdGhpcy5jb2x1bW5zZGF0YS5sZW5ndGg7DQogICAgfSwNCiAgICBleHBvcnRmaWxlbmFtZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLmFwaTsNCiAgICB9LA0KICAgIHByaW50Y2FwdGlvbigpIHsNCiAgICAgIHJldHVybiB0aGlzLmNvbnN1bHRhLmNhcHRpb24gfHwgIkltcHJlc3PDo28gZGUgY29uc3VsdGFzIjsNCiAgICB9LA0KICAgIHNlbGVjdGVkZGF0YSgpIHsNCiAgICAgIHJldHVybiB0aGlzLmRhdGEuZmlsdGVyKChmKSA9PiBmLmNoZWNrZWQgPT0gdHJ1ZSkubGVuZ3RoID4gMA0KICAgICAgICA/IHRoaXMuZGF0YS5maWx0ZXIoKGYpID0+IGYuY2hlY2tlZCA9PSB0cnVlKQ0KICAgICAgICA6IHRoaXMuZGF0YTsNCiAgICB9LA0KICB9LA0KICBwcm9wczogew0KICAgIGFwaTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogIiIsDQogICAgfSwNCiAgICBjb25zdWx0YTogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICBuYW1lOiAiIiwNCiAgICAgICAgICBjYXB0aW9uOiAiIiwNCiAgICAgICAgICBzZXNzaW9uOiAiIiwNCiAgICAgICAgICBpY29uOiAiIiwNCiAgICAgICAgICBpZDogMCwNCiAgICAgICAgfTsNCiAgICAgIH0sDQogICAgfSwNCiAgICBwYXJhbXM6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgUGFnZU51bWJlcjogMSwNCiAgICAgICAgICBQYWdlU2l6ZTogMzAsDQogICAgICAgIH07DQogICAgICB9LA0KICAgIH0sDQogIH0sDQogIGJlZm9yZU1vdW50KCkgew0KICAgIGlmICh0aGlzLmFwaSAmJiB0aGlzLmFwaSAhPT0gIiIpIHRoaXMuZ2V0RnJvbUFwaSgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgZ2V0RnJvbUFwaSgpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKCdnZXRGcm9tQXBpJykNCiAgICAgIHRoaXMucGFyYW1zYXBpLlBhZ2VOdW1iZXIgPSB0aGlzLmN1cnJlbnRQYWdlOw0KICAgICAgdGhpcy5wYXJhbXNhcGkuUGFnZVNpemUgPSB0aGlzLmN1cnJlbnRwZXJQYWdlOw0KDQogICAgICB0aGlzLmxvYWQgPSB0cnVlOw0KICAgICAgYXdhaXQgQVBJLmdldCh0aGlzLmFwaSwgeyBwYXJhbXM6IHRoaXMucGFyYW1zYXBpIH0pLnRoZW4oKGFwaWRhdGEpID0+IHsNCiAgICAgICAgLy8gc2UgdmVtIGRhIEFQSSByZW1vdmUgbyBjb250cm9sZSBkZSBwYWdpbmHDp8OjbyAuLi4NCiAgICAgICAgdGhpcy5sb2FkID0gZmFsc2U7DQogICAgICAgIHRoaXMuYXBpcmVzcG9uc2UgPSBBUEkucHJlcGFyZURhdGEoYXBpZGF0YS5kYXRhKTsNCiAgICAgICAgaWYgKGFwaWRhdGEuZGF0YS5TdWNjZXNzID09ICJUcnVlIikgew0KICAgICAgICAgIHRoaXMuZGF0YSA9IGFwaWRhdGEuZGF0YS5EYXRhOw0KICAgICAgICAgIHRoaXMudG90YWxSb3dzID0NCiAgICAgICAgICAgIGFwaWRhdGEuZGF0YS5QYWdpbmFzLlBhZ2VTaXplICogYXBpZGF0YS5kYXRhLlBhZ2luYXMuUGFnZUNvdW50Ow0KICAgICAgICB9DQogICAgICAgIHRoaXMuJGVtaXQoImV2dC1kb25lIiwgdGhpcy5hcGlyZXNwb25zZSk7DQogICAgICB9KTsNCiAgICB9LCAvLyBnZXRGcm9tQXBpDQogICAgb25DaGVja2FsbChjaGVjaykgew0KICAgICAgdGhpcy5kYXRhLm1hcCgoZCkgPT4gKGQuY2hlY2tlZCA9IGNoZWNrKSk7DQogICAgfSwgLy8gb25DaGVja2FsbA0KICAgIGRvd25sb2FkKCkgew0KICAgICAgdGhpcy5jc3ZwYXJhbS5kYXRhID0gdGhpcy5zZWxlY3RlZGRhdGE7DQogICAgICB0aGlzLiRidk1vZGFsLnNob3coIm1vZGFsLWV4cG9ydCIpOw0KICAgIH0sIC8vIGRvd25sb2FkDQogICAgaW1wcmltaXIodGFnaWQpIHsNCiAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFnaWQpLmlubmVySFRNTDsNCiAgICAgIHRoaXMucHJpbnRFbGVtZW50Q29udGVudChlbCk7DQogICAgfSwgLy8gaW1wcmltaXINCiAgICBwcmludEVsZW1lbnRDb250ZW50KGVsKSB7DQogICAgICB2YXIgcHJpbnRXaW5kb3cgPSB3aW5kb3cub3BlbigNCiAgICAgICAgIiIsDQogICAgICAgICJJbXByZXNzw6NvIGRvIHJlbGF0w7NyaW8iLA0KICAgICAgICAicmVzaXphYmxlLHNjcm9sbGJhcnMsc3RhdHVzIg0KICAgICAgKTsNCg0KICAgICAgcHJpbnRXaW5kb3cuZG9jdW1lbnQud3JpdGUoDQogICAgICAgICI8aHRtbD48aGVhZD48dGl0bGU+IiArIGRvY3VtZW50LnRpdGxlICsgIjwvdGl0bGU+Ig0KICAgICAgKTsNCg0KICAgICAgcHJpbnRXaW5kb3cuZG9jdW1lbnQud3JpdGUoDQogICAgICAgICc8bGluayB0eXBlPSJ0ZXh0L2NzcyIgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSIvL3VucGtnLmNvbS9ib290c3RyYXAvZGlzdC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiLz4nDQogICAgICApOw0KDQogICAgICBwcmludFdpbmRvdy5kb2N1bWVudC53cml0ZSgiPC9oZWFkPjxib2R5PiIpOw0KICAgICAgcHJpbnRXaW5kb3cuZG9jdW1lbnQud3JpdGUoZWwpOw0KICAgICAgcHJpbnRXaW5kb3cuZG9jdW1lbnQud3JpdGUoIjwvYm9keT48L2h0bWw+Iik7DQoNCiAgICAgIC8vcHJpbnRXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTsgLy8gbmVjZXNzYXJ5IGZvciBJRSA+PSAxMA0KICAgICAgcHJpbnRXaW5kb3cuZm9jdXMoKTsgLy8gbmVjZXNzYXJ5IGZvciBJRSA+PSAxMCovDQoNCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICBwcmludFdpbmRvdy5wcmludCgpOw0KICAgICAgICBwcmludFdpbmRvdy5jbG9zZSgpOw0KICAgICAgICB0aGlzLiRidk1vZGFsLmhpZGUoIm1vZGFsLWltcHJpbWlyIik7DQogICAgICB9LCAyMDAwKTsNCg0KICAgICAgcmV0dXJuIHRydWU7DQogICAgfSwgLy8gcHJpbnRFbGVtZW50Q29udGVudChlbCkNCiAgfSwNCn07DQo="},{"version":3,"sources":["resultquery.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"resultquery.vue","sourceRoot":"src/pages/consultas/components","sourcesContent":["<template>\r\n  <div>\r\n    <b-overlay :show=\"load\" rounded=\"sm\">\r\n      <div class=\"d-flex justify-content-between\">\r\n        <div>\r\n          <b-button-group>\r\n            <b-button\r\n              class=\"border\"\r\n              variant=\"light\"\r\n              size=\"sm\"\r\n              @click=\"imprimir('printarea')\"\r\n            >\r\n              <b-icon-printer variant=\"primary\" />\r\n            </b-button>\r\n            <b-button\r\n              class=\"border\"\r\n              variant=\"light\"\r\n              size=\"sm\"\r\n              @click=\"download()\"\r\n            >\r\n              <b-icon-download variant=\"primary\" />\r\n            </b-button>\r\n          </b-button-group>\r\n        </div>\r\n\r\n        <div class=\"d-flex\">\r\n          <b-pagination\r\n            v-if=\"totalRows > 1\"\r\n            v-model=\"currentPage\"\r\n            :total-rows=\"totalRows\"\r\n            :per-page=\"currentperPage\"\r\n            aria-controls=\"tableSearch\"\r\n            size=\"sm\"\r\n            @change=\"getFromApi\"\r\n          />\r\n\r\n          <b-form-select\r\n            v-model=\"currentperPage\"\r\n            :options=\"pages\"\r\n            size=\"sm\"\r\n            width=\"10px\"\r\n            class=\"ml-2\"\r\n            @change=\"getFromApi\"\r\n          >\r\n          </b-form-select>\r\n        </div>\r\n      </div>\r\n\r\n      <!--\r\n        :fields=\"showcolumns\"\r\n        :current-page=\"activepage\"\r\n        :total-rows=\"totalRows\"\r\n        :perPage=\"currentperPage\"\r\n        :tbody-tr-class=\"rowChecked\"\r\n        sort-icon-left\r\n        :sort-by.sync=\"sortBy\"\r\n        :sort-desc.sync=\"sortDesc\"\r\n        @row-selected=\"rowSelect\"\r\n       -->\r\n\r\n      <div id=\"printarea\">\r\n        <b-table\r\n          id=\"tableSearch\"\r\n          ref=\"tableSearch\"\r\n          striped\r\n          hover\r\n          small\r\n          bordered\r\n          responsive=\"sm\"\r\n          head-variant=\"light\"\r\n          selectable\r\n          select-mode=\"single\"\r\n          selected-variant=\"success\"\r\n          :items=\"data\"\r\n          :fields=\"columnsdata\"\r\n        >\r\n          <template #head(checked)>\r\n            <div class=\"text-center\">\r\n              <b-form-checkbox @change=\"onCheckall($event)\"></b-form-checkbox>\r\n            </div>\r\n          </template>\r\n          <!-- detalhe da coluna check -->\r\n          <template #cell(checked)=\"data\">\r\n            <div class=\"text-center\">\r\n              <b-form-checkbox v-model=\"data.item.checked\"></b-form-checkbox>\r\n            </div>\r\n          </template>\r\n\r\n          <!-- <template #thead-top>\r\n            <b-tr>\r\n              <b-th :colspan=\"columnspan\" variant=\"secondary\">\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                  <div class=\"ml-2\">\r\n                    Header da tabela\r\n                  </div>\r\n                </div>\r\n              </b-th>\r\n            </b-tr>\r\n          </template> -->\r\n\r\n          <!-- header da coluna actions ->\r\n        <template #head(actions)=\"data\">\r\n          <div class=\"text-center\">\r\n            {{ data.label }}\r\n          </div>\r\n        </template>\r\n        -->\r\n\r\n          <!-- detalhe da coluna actions ->\r\n        <template #cell(actions)=\"data\">\r\n          <div class=\"text-center\">\r\n            <!-- Botões fixos para edição ->\r\n            <b-button-group>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('insert')\"\r\n                variant=\"outline-primary\"\r\n                v-b-tooltip.hover.topleft=\"'Incluir'\"\r\n                @click=\"rowInsert(data)\"\r\n                ><b-icon-plus\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('edit')\"\r\n                variant=\"outline-success\"\r\n                v-b-tooltip.hover.topleft=\"'Editar'\"\r\n                @click=\"rowEdit(data)\"\r\n                ><b-icon-pencil\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('delete')\"\r\n                variant=\"outline-danger\"\r\n                v-b-tooltip.hover.topleft=\"'Deletar'\"\r\n                @click=\"rowDelete(data)\"\r\n                ><b-icon-trash\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('run')\"\r\n                variant=\"outline-warning\"\r\n                v-b-tooltip.hover.topleft=\"'Executar'\"\r\n                @click=\"rowRun(data)\"\r\n                ><b-icon-lightning\r\n              /></b-button>\r\n              <b-button\r\n                size=\"sm\"\r\n                v-if=\"isButton('info')\"\r\n                variant=\"outline-info\"\r\n                v-b-tooltip.hover.topleft=\"'Informações'\"\r\n                @click=\"rowInform(data)\"\r\n                ><b-icon-info-circle\r\n              /></b-button>\r\n            </b-button-group>\r\n            <!-- Botões dinamicos criados pelo usuário ->\r\n            <b-button\r\n              v-for=\"(b, i) of custombuttons\"\r\n              :key=\"i\"\r\n              :size=\"b.size\"\r\n              :variant=\"b.variant\"\r\n              v-b-tooltip\r\n              :title=\"b.tooltip\"\r\n              class=\"ml-1\"\r\n              @click=\"rowCustomButton(b, data.item)\"\r\n            >\r\n              <b-icon v-if=\"b.icon\" :icon=\"b.icon\" />\r\n              <span v-if=\"b.label\">{{ b.label }}</span>\r\n            </b-button>\r\n          </div>\r\n        </template>\r\n        -->\r\n          <!-- header da coluna check ->\r\n        <template #head(check)>\r\n          <div class=\"text-center\">\r\n            <b-form-checkbox @change=\"onCheckall\"></b-form-checkbox>\r\n          </div>\r\n        </template>\r\n        <!-- detalhe da coluna check ->\r\n        <template #cell(check)=\"data\">\r\n          <div class=\"text-center\">\r\n            <b-form-checkbox v-model=\"data.item.checked\"></b-form-checkbox>\r\n          </div>\r\n        </template>\r\n        -->\r\n\r\n          <!-- Default fall-back custom formatted footer cell\r\n            <template #foot()=\"data\">\r\n                <i>{{ data.item }}</i>\r\n                pq não aparece isso ?\r\n            </template> \r\n        -->\r\n          <!--\r\n        <template #head(custombuttons)=\"data\">\r\n          <div class=\"text-center\">\r\n            {{ data.label }}\r\n          </div>\r\n        </template>\r\n        <template v-slot:cell(custombuttons)>\r\n          <slot class=\"text-center\"></slot>\r\n        </template>\r\n\r\n        <template slot=\"bottom-row\" v-if=\"soma.lenght > 0\">\r\n          <td v-for=\"(c, i) of sumcolumns\" :key=\"i\">\r\n            <span class=\"font-weight-bolder\">{{ c }}</span>\r\n          </td>\r\n        </template>\r\n        -->\r\n        </b-table>\r\n\r\n        <!-- <div class=\"d-flex float-left font-weight-bold ml-3\">\r\n          <span v-if=\"totalRows == 1\"> {{ totalRows }} registro </span>\r\n          <span v-else> {{ totalRows }} registros </span>\r\n        </div> -->\r\n      </div>\r\n\r\n      <div class=\"d-flex float-right\">\r\n        <b-pagination\r\n          v-if=\"totalRows > 1\"\r\n          v-model=\"currentPage\"\r\n          :total-rows=\"totalRows\"\r\n          :per-page=\"currentperPage\"\r\n          aria-controls=\"tableSearch\"\r\n          size=\"sm\"\r\n        >\r\n        </b-pagination>\r\n        <b-form-select\r\n          v-model=\"currentperPage\"\r\n          :options=\"pages\"\r\n          size=\"sm\"\r\n          class=\"ml-2\"\r\n        ></b-form-select>\r\n      </div>\r\n    </b-overlay>\r\n\r\n    <!-- selecteddata: {{ selecteddata }}<br />\r\n    columnsdata: {{ columnsdata }} -->\r\n\r\n    <!-- MODAIS -->\r\n    <b-modal\r\n      id=\"modal-export\"\r\n      ref=\"modal-export\"\r\n      title=\"Exportar\"\r\n      size=\"xl\"\r\n      header-bg-variant=\"primary\"\r\n      header-text-variant=\"light\"\r\n      hide-footer\r\n      scrollable\r\n    >\r\n      <ExportFile v-model=\"csvparam\" :filename=\"exportfilename\" />\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport API from \"../../../services/api.service\";\r\nimport ExportFile from \"../../../components/ExportFile.vue\";\r\nexport default {\r\n  name: \"resultquery\",\r\n  components: {\r\n    ExportFile,\r\n  },\r\n  data() {\r\n    return {\r\n      load: false,\r\n      printing: false,\r\n      paramsapi: this.params,\r\n      apiresponse: { Data: [], Paginas: { PageCount: 1, PageSize: 10 } },\r\n      data: [],\r\n      pages: [15, 30, 50, 100, 500, 1000, 9999999],\r\n      currentPage: this.params.PageNumber || 1,\r\n      currentperPage: this.params.PageSize || 30,\r\n      totalRows: 1,\r\n      csvparam: {\r\n        fld: [],\r\n        sep: \";\",\r\n        quoted: \"\",\r\n        whead: true,\r\n        filename: \"resultado.dat\",\r\n        csvstream: \"\",\r\n        data: [],\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    columnsdata() {\r\n      const data = this.data[0] || {};\r\n      return Object.keys(data);\r\n    },\r\n    columnspan() {\r\n      return this.columnsdata.length;\r\n    },\r\n    exportfilename() {\r\n      return this.api;\r\n    },\r\n    printcaption() {\r\n      return this.consulta.caption || \"Impressão de consultas\";\r\n    },\r\n    selecteddata() {\r\n      return this.data.filter((f) => f.checked == true).length > 0\r\n        ? this.data.filter((f) => f.checked == true)\r\n        : this.data;\r\n    },\r\n  },\r\n  props: {\r\n    api: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    consulta: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          name: \"\",\r\n          caption: \"\",\r\n          session: \"\",\r\n          icon: \"\",\r\n          id: 0,\r\n        };\r\n      },\r\n    },\r\n    params: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          PageNumber: 1,\r\n          PageSize: 30,\r\n        };\r\n      },\r\n    },\r\n  },\r\n  beforeMount() {\r\n    if (this.api && this.api !== \"\") this.getFromApi();\r\n  },\r\n  methods: {\r\n    async getFromApi() {\r\n      // console.log('getFromApi')\r\n      this.paramsapi.PageNumber = this.currentPage;\r\n      this.paramsapi.PageSize = this.currentperPage;\r\n\r\n      this.load = true;\r\n      await API.get(this.api, { params: this.paramsapi }).then((apidata) => {\r\n        // se vem da API remove o controle de paginação ...\r\n        this.load = false;\r\n        this.apiresponse = API.prepareData(apidata.data);\r\n        if (apidata.data.Success == \"True\") {\r\n          this.data = apidata.data.Data;\r\n          this.totalRows =\r\n            apidata.data.Paginas.PageSize * apidata.data.Paginas.PageCount;\r\n        }\r\n        this.$emit(\"evt-done\", this.apiresponse);\r\n      });\r\n    }, // getFromApi\r\n    onCheckall(check) {\r\n      this.data.map((d) => (d.checked = check));\r\n    }, // onCheckall\r\n    download() {\r\n      this.csvparam.data = this.selecteddata;\r\n      this.$bvModal.show(\"modal-export\");\r\n    }, // download\r\n    imprimir(tagid) {\r\n      const el = document.getElementById(tagid).innerHTML;\r\n      this.printElementContent(el);\r\n    }, // imprimir\r\n    printElementContent(el) {\r\n      var printWindow = window.open(\r\n        \"\",\r\n        \"Impressão do relatório\",\r\n        \"resizable,scrollbars,status\"\r\n      );\r\n\r\n      printWindow.document.write(\r\n        \"<html><head><title>\" + document.title + \"</title>\"\r\n      );\r\n\r\n      printWindow.document.write(\r\n        '<link type=\"text/css\" rel=\"stylesheet\" href=\"//unpkg.com/bootstrap/dist/css/bootstrap.min.css\"/>'\r\n      );\r\n\r\n      printWindow.document.write(\"</head><body>\");\r\n      printWindow.document.write(el);\r\n      printWindow.document.write(\"</body></html>\");\r\n\r\n      //printWindow.document.close(); // necessary for IE >= 10\r\n      printWindow.focus(); // necessary for IE >= 10*/\r\n\r\n      setTimeout(() => {\r\n        printWindow.print();\r\n        printWindow.close();\r\n        this.$bvModal.hide(\"modal-imprimir\");\r\n      }, 2000);\r\n\r\n      return true;\r\n    }, // printElementContent(el)\r\n  },\r\n};\r\n</script>\r\n"]}]}