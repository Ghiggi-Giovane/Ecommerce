{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\gestores\\views\\Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\gestores\\views\\Dashboard.vue","mtime":1701906516491},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAidnVleCI7DQppbXBvcnQgRGFzaGNhcmQgZnJvbSAiLi4vLi4vLi4vY29tcG9uZW50cy9EYXNoY2FyZCI7DQppbXBvcnQgU2ltdWxhZG9yTGltaXRlIGZyb20gIi4uL2NvbXBvbmVudHMvU2ltdWxhZG9yTGltaXRlIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkdlc3RvckRhc2hib2FyZCIsDQoNCiAgY29tcG9uZW50czogew0KICAgIERhc2hjYXJkLA0KICAgIFNpbXVsYWRvckxpbWl0ZSwNCiAgfSwNCg0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBhbm86IDIwMjIsDQogICAgICBjb2RpZ29fZ2VzdG9yOiA2MywNCiAgICAgIGlkbWFyY2E6IDUsDQogICAgICBpZHJlZ2lhbzogMSwNCiAgICAgIGluYWRpbXBsZW5jaWE6IDAuMjE2MSwNCiAgICAgIHRicGVkaWRvc2ZpZWxkczogWw0KICAgICAgICB7IGtleTogInBlZGlkbyIsIHNvcnRhYmxlOiB0cnVlIH0sDQogICAgICAgIHsga2V5OiAidHAiLCBzb3J0YWJsZTogdHJ1ZSB9LA0KICAgICAgICB7IGtleTogImNsaWVudGUiLCBzb3J0YWJsZTogdHJ1ZSB9LA0KICAgICAgICB7IGtleTogInZhbG9ydG90YWxwZWRpZG8iLCBsYWJlbDogIlZhbG9yIFRvdGFsIiwgc29ydGFibGU6IHRydWUgfSwNCiAgICAgICAgeyBrZXk6ICJsaW1pdGVmaW5hbmNlaXJvIiwgbGFiZWw6ICJGaW5hbmNlaXJvIiwgc29ydGFibGU6IHRydWUgfSwNCiAgICAgICAgeyBrZXk6ICJsaW1pdGVnZXN0b3IiLCBsYWJlbDogIkdlc3RvciIsIHNvcnRhYmxlOiB0cnVlIH0sDQogICAgICAgIHsga2V5OiAic2FsZG9wZWRpZG8iLCBsYWJlbDogIlNhbGRvIiwgc29ydGFibGU6IHRydWUgfSwNCiAgICAgICAgImFjdGlvbnMiLA0KICAgICAgXSwNCiAgICB9Ow0KICB9LA0KDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwR2V0dGVycyhbImd0eGdlc3RvckRhdGEiXSksDQogICAgb3Bjb2VzKCkgew0KICAgICAgaWYgKHRoaXMucmVnaW9lcy5maW5kKChyKSA9PiByLnZhbHVlID09IHRoaXMuaWRyZWdpYW8pKQ0KICAgICAgICByZXR1cm4gKA0KICAgICAgICAgIHRoaXMuYW5vICsNCiAgICAgICAgICAiIC8gIiArDQogICAgICAgICAgdGhpcy5yZWdpb2VzLmZpbmQoKHIpID0+IHIudmFsdWUgPT0gdGhpcy5pZHJlZ2lhbykudGV4dA0KICAgICAgICApOw0KICAgICAgZWxzZSByZXR1cm4gIk9ww6fDtWVzIjsNCiAgICB9LA0KICAgIGFwaWdlc3RvcigpIHsNCiAgICAgIHJldHVybiB0aGlzLmd0eGdlc3RvckRhdGFbMF0gfHwgW3sgbWV0YXM6IFtdLCBwZWRpZG9zOiBbXSB9XTsNCiAgICB9LA0KICAgIG5vbWVnZXN0b3IoKSB7DQogICAgICByZXR1cm4gdGhpcy5hcGlnZXN0b3Iubm9tZWdlc3RvcjsNCiAgICB9LA0KICAgIGFub3MoKSB7DQogICAgICAvLyBpbmljaWFtb3MgZW0gMjAyMSAuLi4NCiAgICAgIGNvbnN0IGFubyA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTsNCiAgICAgIHJldHVybiBbLi4uQXJyYXkoYW5vIC0gMjAyMCkua2V5cygpXS5tYXAoKGEpID0+IGFubyAtIGEpOw0KICAgIH0sDQogICAgcGFyYW1idXNjYSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIGFubzogdGhpcy5hbm8sDQogICAgICAgIGdlc3RvcjogdGhpcy5jb2RpZ29fZ2VzdG9yLA0KICAgICAgICBpZG1hcmNhOiB0aGlzLmlkbWFyY2EsDQogICAgICB9Ow0KICAgIH0sDQogICAgbWV0YXMoKSB7DQogICAgICByZXR1cm4gKA0KICAgICAgICB0aGlzLmFwaWdlc3Rvci5tZXRhcy5maW5kKChyKSA9PiByLmlkcmVnaWFvID09IHRoaXMuaWRyZWdpYW8pIHx8IFtdDQogICAgICApOw0KICAgIH0sDQogICAgcmVnaW9lc3NpbXVsYWNhbygpIHsNCiAgICAgIHJldHVybjsNCiAgICB9LA0KICAgIHJlZ2lvZXMoKSB7DQogICAgICByZXR1cm4gKHRoaXMuYXBpZ2VzdG9yLm1ldGFzIHx8IFtdKS5tYXAoKHIpID0+IHsNCiAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHIuaWRyZWdpYW8sIHRleHQ6IHIucmVnaWFvIH07DQogICAgICB9KTsNCiAgICB9LA0KICAgIHBlZGlkb3MoKSB7DQogICAgICByZXR1cm4gKA0KICAgICAgICB0aGlzLmFwaWdlc3Rvci5wZWRpZG9zLmZpbHRlcigocikgPT4gci5pZHJlZ2lhbyA9PSB0aGlzLmlkcmVnaWFvKSB8fCBbXQ0KICAgICAgKTsNCiAgICB9LA0KICAgIHJlc3Vtb3BlZGlkb3MoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBucm9wZWRpZG9zOiB0aGlzLnBlZGlkb3MubGVuZ3RoIHx8IDAsDQogICAgICAgIG5yb2xpYmVyYWRvczogdGhpcy5wZWRpZG9zLmZpbHRlcigobCkgPT4gbC5saW1pdGVnZXN0b3IgPiAwKS5sZW5ndGgsDQogICAgICAgIGxpbWl0ZWZpbmFuY2Vpcm86IHRoaXMucGVkaWRvcy5yZWR1Y2UoDQogICAgICAgICAgKGEsIGIpID0+IHBhcnNlRmxvYXQoYSkgKyBwYXJzZUZsb2F0KGIubGltaXRlZmluYW5jZWlybyksDQogICAgICAgICAgMA0KICAgICAgICApLA0KICAgICAgICBsaW1pdGVnZXN0b3I6IHRoaXMucGVkaWRvcy5yZWR1Y2UoDQogICAgICAgICAgKGEsIGIpID0+IHBhcnNlRmxvYXQoYSkgKyBwYXJzZUZsb2F0KGIubGltaXRlZ2VzdG9yKSwNCiAgICAgICAgICAwDQogICAgICAgICksDQogICAgICAgIHZhbG9ydG90YWxwZWRpZG86IHRoaXMucGVkaWRvcy5yZWR1Y2UoDQogICAgICAgICAgKGEsIGIpID0+IHBhcnNlRmxvYXQoYSkgKyBwYXJzZUZsb2F0KGIudmFsb3J0b3RhbHBlZGlkbyksDQogICAgICAgICAgMA0KICAgICAgICApLA0KICAgICAgICBzYWxkb3BlZGlkbzogdGhpcy5wZWRpZG9zLnJlZHVjZSgNCiAgICAgICAgICAoYSwgYikgPT4gcGFyc2VGbG9hdChhKSArIHBhcnNlRmxvYXQoYi5zYWxkb3BlZGlkbyksDQogICAgICAgICAgMA0KICAgICAgICApLA0KICAgICAgfTsNCiAgICB9LA0KICAgIHBlZGlkb3NsaWJlcmFkb3MoKSB7DQogICAgICByZXR1cm4gKHRoaXMucGVkaWRvcyB8fCBbXSkNCiAgICAgICAgLmZpbHRlcigoZikgPT4gZi5saW1pdGVnZXN0b3IgPiAwKQ0KICAgICAgICAubGVuZ3RoLnRvU3RyaW5nKCk7DQogICAgfSwNCiAgICByZXN1bW8oKSB7DQogICAgICByZXR1cm4gdGhpcy5hcGlnZXN0b3IucmVzdW1vIHx8IFtdOw0KICAgIH0sDQogIH0sDQoNCiAgYmVmb3JlTW91bnQoKSB7DQogICAgdGhpcy5idXNjYWdlc3RvcigpOw0KICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICAuLi5tYXBBY3Rpb25zKFsiYWN0Z2VzdG9yYnVzY2FyIl0pLA0KICAgIGJ1c2NhZ2VzdG9yKCkgew0KICAgICAgY29uc29sZS5sb2coImJ1c2NhZ2VzdG9yIiwgImluaXRpYWwiKTsNCiAgICAgIHRoaXMuYWN0Z2VzdG9yYnVzY2FyKHRoaXMucGFyYW1idXNjYSkudGhlbigoZGF0YSkgPT4gew0KICAgICAgICBjb25zb2xlLmxvZygiYnVzY2FnZXN0b3I6IiwgZGF0YSk7DQogICAgICB9KTsNCiAgICAgIGNvbnNvbGUubG9nKCJidXNjYWdlc3RvciIsICJmaW5hbCIpOw0KICAgIH0sDQogICAgb25EYXNrRm9vdENsaWNrKGRhdGEpIHsNCiAgICAgIGNvbnNvbGUubG9nKCJvbkRhc2tGb290Q2xpY2s6IiwgZGF0YSk7DQogICAgfSwNCiAgICBvbkRyb3Bkb3duQ2hhbmdlKCkgew0KICAgICAgdGhpcy4kcmVmcy5kcm9wZG93bm9wdGlvbnMuaGlkZSh0cnVlKTsNCiAgICB9LA0KICB9LA0KDQogIHdhdGNoOiB7DQogICAgZ3R4Z2VzdG9yRGF0YSgpIHsNCiAgICAgIHRoaXMuaWRyZWdpYW8gPSB0aGlzLnJlZ2lvZXNbMF0udmFsdWUgfHwgMDsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmPA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Dashboard.vue","sourceRoot":"src/pages/gestores/views","sourcesContent":["<template>\r\n  <div class=\"p-2\">\r\n    <b-card class=\"mt-2\">\r\n      <b-dropdown\r\n        id=\"dropdown-form\"\r\n        :text=\"opcoes\"\r\n        ref=\"dropdownoptions\"\r\n        class=\"mx-1 my-1\"\r\n      >\r\n        <b-dropdown-form style=\"width: 240px;\">\r\n          <b-form-group label=\"Ano\" label-for=\"input-ano\">\r\n            <b-form-select\r\n              id=\"input-ano\"\r\n              v-model=\"ano\"\r\n              :options=\"anos\"\r\n              @change=\"onDropdownChange\"\r\n            ></b-form-select>\r\n          </b-form-group>\r\n          <b-dropdown-divider></b-dropdown-divider>\r\n          <b-form-group label=\"Região\" label-for=\"input-regiao\">\r\n            <b-form-select\r\n              id=\"input-regiao\"\r\n              v-model=\"idregiao\"\r\n              :options=\"regioes\"\r\n              @change=\"onDropdownChange\"\r\n            ></b-form-select>\r\n          </b-form-group>\r\n        </b-dropdown-form>\r\n      </b-dropdown>\r\n      <b-button\r\n        variant=\"primary\"\r\n        title=\"Simulador de Limite\"\r\n        class=\"mx-1 my-1\"\r\n        v-b-modal.modal-gestorsimulador\r\n      >\r\n        <b-icon-check />\r\n        Simulador de Limite\r\n      </b-button>\r\n      <!--<span class=\"font-weight-bolder\">{{ nomegestor }}</span>-->\r\n    </b-card>\r\n\r\n    <b-row>\r\n      <b-col>\r\n        <Dashcard\r\n          :value=\"metas.meta | moeda\"\r\n          details=\"Limite Região\"\r\n          icon=\"cash\"\r\n          css=\"bg-success-light\"\r\n        />\r\n      </b-col>\r\n      <b-col>\r\n        <Dashcard\r\n          :value=\"resumo.limitegestor | moeda\"\r\n          details=\"Limite utilizado\"\r\n          icon=\"cash\"\r\n          css=\"bg-primary-light\"\r\n          @evt_footerclick=\"onDaskFootClick\"\r\n        />\r\n      </b-col>\r\n      <b-col>\r\n        <Dashcard\r\n          :value=\"resumo.percmarca | percent(4)\"\r\n          details=\"Inadimplência Marca\"\r\n          icon=\"percent\"\r\n          css=\"bg-danger-light\"\r\n        />\r\n      </b-col>\r\n      <b-col>\r\n        <Dashcard\r\n          :value=\"metas.inadimplencia | percent(4)\"\r\n          details=\"Inadimplência Região\"\r\n          icon=\"percent\"\r\n          css=\"bg-dark-light\"\r\n        />\r\n      </b-col>\r\n      <b-col>\r\n        <Dashcard\r\n          :value=\"resumo.perclimite | percent(4)\"\r\n          details=\"Limite gestor\"\r\n          icon=\"percent\"\r\n          css=\"bg-success-light\"\r\n        />\r\n      </b-col>\r\n    </b-row>\r\n\r\n    <b-row>\r\n      <b-col>\r\n        <b-card class=\"bg-info text-light mb-2\">\r\n          <b-row>\r\n            <b-col class=\"text-center\" cols=\"12\" md=\"4\">\r\n              <h5>\r\n                Pedidos solicitados\r\n              </h5>\r\n              <h1>\r\n                {{ resumo.nropedidos }}\r\n              </h1>\r\n              <h3>\r\n                {{ resumo.limitefinanceiro | moeda }}\r\n              </h3>\r\n              <hr class=\"bg-light mobile\" />\r\n            </b-col>\r\n            <b-col class=\"text-center\" cols=\"12\" md=\"4\">\r\n              <h5>\r\n                Pedidos liberados\r\n              </h5>\r\n              <h1>\r\n                {{ resumo.nropedidosliberados }}\r\n              </h1>\r\n              <h3>\r\n                {{ resumo.limitegestor | moeda }}\r\n              </h3>\r\n              <hr class=\"bg-light mobile\" />\r\n            </b-col>\r\n            <b-col class=\"text-center\" cols=\"12\" md=\"4\">\r\n              <h5>\r\n                Pedidos à liberar\r\n              </h5>\r\n              <h1>\r\n                {{ resumo.nropedidos - resumo.nropedidosliberados }}\r\n              </h1>\r\n              <h3>\r\n                {{ resumo.saldopedidos | moeda }}\r\n              </h3>\r\n            </b-col>\r\n          </b-row>\r\n        </b-card>\r\n      </b-col>\r\n    </b-row>\r\n\r\n    <b-row>\r\n      <b-col>\r\n        <b-card class=\"bg-primary text-light mb-2\">\r\n          <b-row>\r\n            <b-col class=\"text-center\" cols=\"12\" md=\"4\">\r\n              <h5>\r\n                Pedidos solicitados\r\n              </h5>\r\n              <h1>\r\n                {{ resumopedidos.nropedidos }}\r\n              </h1>\r\n              <h3>\r\n                {{ resumopedidos.limitefinanceiro | moeda }}\r\n              </h3>\r\n              <hr class=\"bg-light mobile\" />\r\n            </b-col>\r\n            <b-col class=\"text-center\" cols=\"12\" md=\"4\">\r\n              <h5>\r\n                Pedidos liberados\r\n              </h5>\r\n              <h1>\r\n                {{ resumopedidos.nroliberados }}\r\n              </h1>\r\n              <h3>\r\n                {{ resumopedidos.limitegestor | moeda }}\r\n              </h3>\r\n              <hr class=\"bg-light mobile\" />\r\n            </b-col>\r\n            <b-col class=\"text-center\" cols=\"12\" md=\"4\">\r\n              <h5>\r\n                Pedidos à liberar\r\n              </h5>\r\n              <h1>\r\n                {{ resumopedidos.nropedidos - resumopedidos.nroliberados }}\r\n              </h1>\r\n              <h3>\r\n                {{\r\n                  (resumopedidos.limitegestor + resumopedidos.saldopedido)\r\n                    | moeda\r\n                }}\r\n              </h3>\r\n            </b-col>\r\n          </b-row>\r\n        </b-card>\r\n      </b-col>\r\n    </b-row>\r\n\r\n    <b-card>\r\n      <b-table\r\n        striped\r\n        hover\r\n        small\r\n        :fields=\"tbpedidosfields\"\r\n        :items=\"pedidos\"\r\n        caption-top\r\n      >\r\n        <template #table-caption><h4>Relação de pedidos</h4></template>\r\n        <template #cell(limitefinanceiro)=\"data\">\r\n          <span class=\"float-right\">{{\r\n            data.item.limitefinanceiro | moeda\r\n          }}</span>\r\n        </template>\r\n        <template #cell(limitegestor)=\"data\">\r\n          <span class=\"float-right\">{{ data.item.limitegestor | moeda }}</span>\r\n        </template>\r\n        <template #cell(saldopedido)=\"data\">\r\n          <span class=\"float-right\">{{ data.item.saldopedido | moeda }}</span>\r\n        </template>\r\n        <template #cell(valortotalpedido)=\"data\">\r\n          <span class=\"float-right\">{{\r\n            data.item.valortotalpedido | moeda\r\n          }}</span>\r\n        </template>\r\n        <template #cell(actions)=\"data\">\r\n          <span v-if=\"data.item.limitegestor == 0\">\r\n            <b-button\r\n              variant=\"outline-primary\"\r\n              title=\"Liberar\"\r\n              class=\"mx-1 my-1\"\r\n            >\r\n              <b-icon-check />\r\n            </b-button>\r\n          </span>\r\n        </template>\r\n      </b-table>\r\n    </b-card>\r\n\r\n    <b-modal\r\n      id=\"modal-gestorsimulador\"\r\n      title=\"Simulador de Limite\"\r\n      size=\"xl\"\r\n      scrollable\r\n      hide-footer\r\n    >\r\n      <SimuladorLimite :inadimplencia=\"inadimplencia\" :regioes=\"metas\" />\r\n    </b-modal>\r\n\r\n    <!--\r\n    idregiao:\r\n    <pre>{{ idregiao }}</pre>\r\n    resumopedidos:\r\n    <pre>{{ resumopedidos }}</pre>\r\n    metas:\r\n    <pre>{{ metas }}</pre>\r\n    pedidos:\r\n    <pre>{{ pedidos }}</pre>\r\n    apigestor:\r\n    <pre>{{ apigestor }}</pre>\r\n    gtxgestorData:\r\n    <pre>{{ gtxgestorData }}</pre>\r\n-->\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nimport Dashcard from \"../../../components/Dashcard\";\r\nimport SimuladorLimite from \"../components/SimuladorLimite\";\r\nexport default {\r\n  name: \"GestorDashboard\",\r\n\r\n  components: {\r\n    Dashcard,\r\n    SimuladorLimite,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      ano: 2022,\r\n      codigo_gestor: 63,\r\n      idmarca: 5,\r\n      idregiao: 1,\r\n      inadimplencia: 0.2161,\r\n      tbpedidosfields: [\r\n        { key: \"pedido\", sortable: true },\r\n        { key: \"tp\", sortable: true },\r\n        { key: \"cliente\", sortable: true },\r\n        { key: \"valortotalpedido\", label: \"Valor Total\", sortable: true },\r\n        { key: \"limitefinanceiro\", label: \"Financeiro\", sortable: true },\r\n        { key: \"limitegestor\", label: \"Gestor\", sortable: true },\r\n        { key: \"saldopedido\", label: \"Saldo\", sortable: true },\r\n        \"actions\",\r\n      ],\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"gtxgestorData\"]),\r\n    opcoes() {\r\n      if (this.regioes.find((r) => r.value == this.idregiao))\r\n        return (\r\n          this.ano +\r\n          \" / \" +\r\n          this.regioes.find((r) => r.value == this.idregiao).text\r\n        );\r\n      else return \"Opções\";\r\n    },\r\n    apigestor() {\r\n      return this.gtxgestorData[0] || [{ metas: [], pedidos: [] }];\r\n    },\r\n    nomegestor() {\r\n      return this.apigestor.nomegestor;\r\n    },\r\n    anos() {\r\n      // iniciamos em 2021 ...\r\n      const ano = new Date().getFullYear();\r\n      return [...Array(ano - 2020).keys()].map((a) => ano - a);\r\n    },\r\n    parambusca() {\r\n      return {\r\n        ano: this.ano,\r\n        gestor: this.codigo_gestor,\r\n        idmarca: this.idmarca,\r\n      };\r\n    },\r\n    metas() {\r\n      return (\r\n        this.apigestor.metas.find((r) => r.idregiao == this.idregiao) || []\r\n      );\r\n    },\r\n    regioessimulacao() {\r\n      return;\r\n    },\r\n    regioes() {\r\n      return (this.apigestor.metas || []).map((r) => {\r\n        return { value: r.idregiao, text: r.regiao };\r\n      });\r\n    },\r\n    pedidos() {\r\n      return (\r\n        this.apigestor.pedidos.filter((r) => r.idregiao == this.idregiao) || []\r\n      );\r\n    },\r\n    resumopedidos() {\r\n      return {\r\n        nropedidos: this.pedidos.length || 0,\r\n        nroliberados: this.pedidos.filter((l) => l.limitegestor > 0).length,\r\n        limitefinanceiro: this.pedidos.reduce(\r\n          (a, b) => parseFloat(a) + parseFloat(b.limitefinanceiro),\r\n          0\r\n        ),\r\n        limitegestor: this.pedidos.reduce(\r\n          (a, b) => parseFloat(a) + parseFloat(b.limitegestor),\r\n          0\r\n        ),\r\n        valortotalpedido: this.pedidos.reduce(\r\n          (a, b) => parseFloat(a) + parseFloat(b.valortotalpedido),\r\n          0\r\n        ),\r\n        saldopedido: this.pedidos.reduce(\r\n          (a, b) => parseFloat(a) + parseFloat(b.saldopedido),\r\n          0\r\n        ),\r\n      };\r\n    },\r\n    pedidosliberados() {\r\n      return (this.pedidos || [])\r\n        .filter((f) => f.limitegestor > 0)\r\n        .length.toString();\r\n    },\r\n    resumo() {\r\n      return this.apigestor.resumo || [];\r\n    },\r\n  },\r\n\r\n  beforeMount() {\r\n    this.buscagestor();\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"actgestorbuscar\"]),\r\n    buscagestor() {\r\n      console.log(\"buscagestor\", \"initial\");\r\n      this.actgestorbuscar(this.parambusca).then((data) => {\r\n        console.log(\"buscagestor:\", data);\r\n      });\r\n      console.log(\"buscagestor\", \"final\");\r\n    },\r\n    onDaskFootClick(data) {\r\n      console.log(\"onDaskFootClick:\", data);\r\n    },\r\n    onDropdownChange() {\r\n      this.$refs.dropdownoptions.hide(true);\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    gtxgestorData() {\r\n      this.idregiao = this.regioes[0].value || 0;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.mobile {\r\n  display: none;\r\n}\r\n@media screen and (max-width: 767px) {\r\n  .mobile {\r\n    display: block;\r\n  }\r\n}\r\n</style>\r\n"]}]}