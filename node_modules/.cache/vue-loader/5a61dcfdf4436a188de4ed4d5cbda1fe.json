{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\components\\TableEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\components\\TableEdit.vue","mtime":1670977910590},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgDQogICAgbmFtZTogIlRhYmxlRWRpdCIsDQoNCiAgICBwcm9wczogew0KICAgICAgICB0YWJsZUlkOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdCgpIHsgcmV0dXJuICd0YWJsZS0xJyB9IH0sDQogICAgICAgIGhlYWRlcjogIHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0KCkgeyByZXR1cm4gJycgfSB9LA0KICAgICAgICBmaWVsZHM6ICB7IHR5cGU6IEFycmF5LCAgZGVmYXVsdCgpIHsgcmV0dXJuIFtdIH0gfSwNCiAgICAgICAgaXRlbXM6ICAgeyB0eXBlOiBBcnJheSwgIGRlZmF1bHQoKSB7IHJldHVybiBbXSB9IH0sDQogICAgICAgIGJ1dHRvbnM6IHsgdHlwZTogQXJyYXksICBkZWZhdWx0KCkgeyByZXR1cm4gWydlZGl0JywnZGVsZXRlJywnaW5zZXJ0JywnaW5mbyddIH0gfSwNCiAgICAgICAgcm93czogICAgeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQoKSB7IHJldHVybiAwIH0gfSwNCiAgICAgICAgcGVyUGFnZTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQoKSB7IHJldHVybiAxMCB9IH0NCiAgICB9LA0KDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIHNlbGVjdGVkOiBudWxsLA0KICAgICAgICAgICAgc29ydEJ5OiAnJywNCiAgICAgICAgICAgIHNvcnREZXNjOiBmYWxzZSwNCiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAxDQogICAgICAgIH0NCiAgICB9LA0KDQogICAgbW91bnRlZCgpIHsNCg0KICAgICAgICBpZiAodGhpcy4kcmVmc1sidGFibGVTZWFyY2giXSkgew0KICAgICAgICAgICAgLy8gVE9ETzogZGFyIG8gZm9jbyBubyBwcmltZWlybyByZWdpc3RybyBkYSB0YWJlbGEgcGFyYSBwb2RlciBuYXZlZ2FyIGNvbSBvIHRlY2xhZG8gLi4uDQogICAgICAgICAgICAvLyB0aGlzLiRyZWZzWyJ0YWJsZVNlYXJjaCJdLmZvY3VzKCkNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBjb21wdXRlZDogew0KDQogICAgICAgIGNvbHVtbnMoKSB7DQogICAgICAgICAgICBsZXQgY29scyA9IHRoaXMuZmllbGRzIHx8IE9iamVjdC5rZXlzKHRoaXMuaXRlbXMpLm1hcChrID0+IHtyZXR1cm4ge2tleTogaywgbGFiZWw6IGssIHNvcnRhYmxlOiB0cnVlfX0pDQogICAgICAgICAgICByZXR1cm4gY29scy5tYXAoYyA9PiB7cmV0dXJuIHsuLi5jLCAuLi57YWN0aW9uczogJy4uLid9fX0pDQogICAgICAgIH0sDQoNCiAgICAgICAgdG90YWxSb3dzKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMucm93cyA+IDAgPyB0aGlzLnJvd3MgOiB0aGlzLml0ZW1zLmxlbmd0aCB8fCAwDQogICAgICAgIH0NCg0KICAgIH0sDQoNCiAgICB3YXRjaDogew0KICAgICAgICBjdXJyZW50UGFnZShwYWdlKSB7DQogICAgICAgICAgICB0aGlzLiRlbWl0KCdldnQtcGFnZScsIHBhZ2UpDQogICAgICAgIH0NCiAgICB9LA0KDQogICAgbWV0aG9kczogew0KDQogICAgICAgIE5ldygpIHsNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdFZGl0b3Ugbm8gaXRlbTonLCBldnQuaXRlbS52YWx1ZSwgZXZ0KQ0KICAgICAgICAgICAgdGhpcy4kZW1pdCgnZXZ0LW5ldycpDQogICAgICAgIH0sDQogICAgICAgIHJvd1NlbGVjdChldnQpIHsNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdTZWxlY2lvbm91IG8gaXRlbTonLCBldnQpDQogICAgICAgICAgICB0aGlzLiRlbWl0KCdldnQtc2VsZWN0JywgZXZ0KQ0KICAgICAgICB9LA0KICAgICAgICByb3dFZGl0KGV2dCkgew0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0VkaXRvdSBubyBpdGVtOicsIGV2dC5pdGVtLnZhbHVlLCBldnQpDQogICAgICAgICAgICB0aGlzLiRlbWl0KCdldnQtZWRpdCcsIGV2dCkNCiAgICAgICAgfSwNCiAgICAgICAgcm93RGVsZXRlKGV2dCkgew0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0V4Y2x1aXUgbm8gaXRlbTonLCBldnQuaXRlbS52YWx1ZSwgZXZ0KQ0KICAgICAgICAgICAgdGhpcy4kZW1pdCgnZXZ0LWRlbGV0ZScsIGV2dCkNCiAgICAgICAgfSwNCiAgICAgICAgcm93SW5zZXJ0KGV2dCkgew0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2luc2VyaXUgbyBpdGVtOicsIGV2dC5pdGVtLnZhbHVlLCBldnQpDQogICAgICAgICAgICB0aGlzLiRlbWl0KCdldnQtaW5zZXJ0JywgZXZ0KQ0KICAgICAgICB9LA0KICAgICAgICByb3dJbmZvcm0oZXZ0KSB7DQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnRXhjbHVpdSBubyBpdGVtOicsIGV2dC5pdGVtLnZhbHVlLCBldnQpDQogICAgICAgICAgICB0aGlzLiRlbWl0KCdldnQtaW5mb3JtJywgZXZ0KQ0KICAgICAgICB9DQogICAgfQ0KDQp9DQo="},{"version":3,"sources":["TableEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"TableEdit.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div>\r\n\r\n        <b-pagination\r\n            v-if=\"rows>perPage\"\r\n            v-model=\"currentPage\"\r\n            :total-rows=\"totalRows\"\r\n            :per-page=\"perPage\"\r\n            aria-controls=\"tableSearch\"\r\n            size=\"sm\">\r\n        </b-pagination>\r\n\r\n        <b-table \r\n            striped\r\n            hover\r\n            small\r\n            selectable\r\n            select-mode=\"single\"\r\n            sort-icon-left\r\n            responsive=\"sm\"\r\n            id=\"tableSearch\"\r\n            ref=\"tableSearch\"\r\n            :total-rows=\"rows\"\r\n            :per-page=\"perPage\"\r\n            :fields=\"columns\"\r\n            :items=\"items\"\r\n            :sort-by.sync=\"sortBy\"\r\n            :sort-desc.sync=\"sortDesc\"\r\n            @row-selected=\"rowSelect\">\r\n\r\n            <template #thead-top>\r\n                <b-tr v-if=\"header.length>0\">\r\n                    <b-th :colspan=\"fields.length-1\">{{ header }}</b-th>\r\n                    <b-th>\r\n                        <b-button v-if=\"buttons.indexOf('new')>-1\"  variant=\"outline-primary\" size=\"sm\" v-b-tooltip.hover.topleft=\"'Novo registro'\" @click=\"New\">\r\n                            <b-icon-plus-circle class=\"mr-2\"/>\r\n                            Incluir\r\n                        </b-button>\r\n                    </b-th>\r\n                </b-tr>\r\n            </template>\r\n\r\n            <template #cell()=\"data\">\r\n                <div v-if=\"data.field.type == 'Date'\">\r\n                    {{ data.value | datetime}}\r\n                </div>\r\n                <div v-else>\r\n                    {{ data.value }}\r\n                </div>\r\n            </template>\r\n\r\n            <template #cell(actions)=\"row\">\r\n                <b-button size=\"sm\" v-if=\"buttons.indexOf('edit')>-1\"   variant=\"outline-success\" v-b-tooltip.hover.topleft=\"'Editar'\"      @click=\"rowEdit(row)\"   class=\"ml-1\"><b-icon-pencil/></b-button>\r\n                <b-button size=\"sm\" v-if=\"buttons.indexOf('delete')>-1\" variant=\"outline-danger\"  v-b-tooltip.hover.topleft=\"'Deletar'\"     @click=\"rowDelete(row)\" class=\"ml-1\"><b-icon-trash/></b-button>\r\n                <b-button size=\"sm\" v-if=\"buttons.indexOf('insert')>-1\" variant=\"outline-primary\" v-b-tooltip.hover.topleft=\"'Incluir'\"     @click=\"rowInsert(row)\" class=\"ml-1\"><b-icon-plus/></b-button>\r\n                <b-button size=\"sm\" v-if=\"buttons.indexOf('info')>-1\"   variant=\"outline-info\"    v-b-tooltip.hover.topleft=\"'Informações'\" @click=\"rowInform(row)\" class=\"ml-1\"><b-icon-info-circle/></b-button>\r\n            </template>        \r\n\r\n        </b-table>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    \r\n    name: \"TableEdit\",\r\n\r\n    props: {\r\n        tableId: { type: String, default() { return 'table-1' } },\r\n        header:  { type: String, default() { return '' } },\r\n        fields:  { type: Array,  default() { return [] } },\r\n        items:   { type: Array,  default() { return [] } },\r\n        buttons: { type: Array,  default() { return ['edit','delete','insert','info'] } },\r\n        rows:    { type: Number, default() { return 0 } },\r\n        perPage: { type: Number, default() { return 10 } }\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            selected: null,\r\n            sortBy: '',\r\n            sortDesc: false,\r\n            currentPage: 1\r\n        }\r\n    },\r\n\r\n    mounted() {\r\n\r\n        if (this.$refs[\"tableSearch\"]) {\r\n            // TODO: dar o foco no primeiro registro da tabela para poder navegar com o teclado ...\r\n            // this.$refs[\"tableSearch\"].focus()\r\n        }\r\n    },\r\n\r\n    computed: {\r\n\r\n        columns() {\r\n            let cols = this.fields || Object.keys(this.items).map(k => {return {key: k, label: k, sortable: true}})\r\n            return cols.map(c => {return {...c, ...{actions: '...'}}})\r\n        },\r\n\r\n        totalRows() {\r\n            return this.rows > 0 ? this.rows : this.items.length || 0\r\n        }\r\n\r\n    },\r\n\r\n    watch: {\r\n        currentPage(page) {\r\n            this.$emit('evt-page', page)\r\n        }\r\n    },\r\n\r\n    methods: {\r\n\r\n        New() {\r\n            // console.log('Editou no item:', evt.item.value, evt)\r\n            this.$emit('evt-new')\r\n        },\r\n        rowSelect(evt) {\r\n            // console.log('Selecionou o item:', evt)\r\n            this.$emit('evt-select', evt)\r\n        },\r\n        rowEdit(evt) {\r\n            // console.log('Editou no item:', evt.item.value, evt)\r\n            this.$emit('evt-edit', evt)\r\n        },\r\n        rowDelete(evt) {\r\n            // console.log('Excluiu no item:', evt.item.value, evt)\r\n            this.$emit('evt-delete', evt)\r\n        },\r\n        rowInsert(evt) {\r\n            // console.log('inseriu o item:', evt.item.value, evt)\r\n            this.$emit('evt-insert', evt)\r\n        },\r\n        rowInform(evt) {\r\n            // console.log('Excluiu no item:', evt.item.value, evt)\r\n            this.$emit('evt-inform', evt)\r\n        }\r\n    }\r\n\r\n}\r\n</script>\r\n"]}]}