{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\covid\\components\\QrcodeFunc.vue?vue&type=style&index=0&id=d2df0b26&scoped=true&lang=css&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\covid\\components\\QrcodeFunc.vue","mtime":1670977910618},{"path":"C:\\k1-services\\node_modules\\css-loader\\dist\\cjs.js","mtime":1670977934642},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1670977935796},{"path":"C:\\k1-services\\node_modules\\postcss-loader\\src\\index.js","mtime":1670977935130},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnJlYWRvayB7CiAgICBjb2xvcjogbGltZTsKICAgIHdpZHRoOiAxMzBweDsKICAgIGhlaWdodDogMTMwcHg7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBtYXJnaW46IDAgYXV0bzsKICAgIHRvcDogNTAlOwogICAgbGVmdDogNTAlOwogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7Cn0KLmJ0bi1jYW1zIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHotaW5kZXg6IDk7CiAgICByaWdodDogMDsKICAgIG1hcmdpbi10b3A6IDJweDsKICAgIG1hcmdpbi1yaWdodDogMjJweDsgICAgICAgCn0KLmJ0bi10b3JjaCB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB6LWluZGV4OiA5OwogICAgcmlnaHQ6IDA7CiAgICBtYXJnaW4tdG9wOiAycHg7CiAgICBtYXJnaW4tcmlnaHQ6IDY0cHg7ICAgICAgIAp9Cg=="},{"version":3,"sources":["QrcodeFunc.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"QrcodeFunc.vue","sourceRoot":"src/pages/covid/components","sourcesContent":["<template>\r\n\r\n    <div>\r\n        <div style=\"border: 5px solid transparent;\" v-show=\"showcam\">\r\n            <b-button size=\"sm\" variant=\"info\" @click=\"onCameraChange\" class=\"btn-cams\" :disabled=\"!canChangeCam\"><b-icon-camera/></b-button>\r\n            <b-button size=\"sm\" variant=\"warning\" class=\"btn-torch\"><b-icon :icon=\"icon\"/></b-button>\r\n            <qrcode-stream :camera=\"cameras.selected\" @init=\"onInit\" @decode=\"onDecode\">\r\n                <b-icon-check2-circle v-show=\"readok\" class=\"readok\"/>\r\n            </qrcode-stream>\r\n        </div>\r\n\r\n        <div class=\"pt-2 pb-2\" v-show=\"!showcam\">\r\n            <SearchApi id=\"input-func\" pkid=\"searchFunc\" route=\"Servicos/Funcionarios/Select\" title=\"Funcionário\" v-model=\"func\"/> \r\n        </div>\r\n\r\n        <!-- <b-button block variant=\"primary\" @click=\"showcam = !showcam\" class=\"mt-2 mb-3\">{{ captionButton }}</b-button> -->\r\n        <b-button block variant=\"primary\" @click=\"showcam = !showcam\" class=\"mt-2 mb-3\">{{ captionButton }}</b-button>\r\n        \r\n        <!-- cameras:\r\n        {{ cameras }}<br>\r\n        canChangeCam: {{ canChangeCam }}<br>\r\n        icon: {{ icon }}<br>\r\n        testes: {{ testes }} -->\r\n        \r\n\r\n    </div>\r\n    \r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from 'vuex'\r\nimport SearchApi from '../../../components/SearchApi'\r\nexport default {\r\n    \r\n    name: 'QrcodeFunc',\r\n\r\n    data() {\r\n        return {\r\n            func: {value: '-', text: ''},\r\n            showcam: true,\r\n            testes: '',\r\n            cameras: {\r\n                noRearCamera: false,\r\n                noFrontCamera: false,\r\n                torchNotSupported: false,\r\n                torchActive: false,\r\n                config: null,\r\n                selected: 'auto',\r\n                data: []\r\n            }\r\n        }\r\n    },\r\n\r\n    components: {\r\n\r\n        SearchApi\r\n    \r\n    },\r\n\r\n    computed: {\r\n\r\n        ...mapGetters(['gtxfuncData']),\r\n\r\n        canChangeCam() {\r\n            return (this.cameras.data.length>1)\r\n        },\r\n\r\n        captionButton() {\r\n            return (this.showcam) ? 'Pesquisar funcionário' : 'Ler QRCode'\r\n        },\r\n\r\n        readok() {\r\n            return (this.cameras.selected == 'off')\r\n        },\r\n\r\n        icon() {\r\n            return (this.torchActive) ? 'lightning' : 'lightning-fill'\r\n        }\r\n\r\n    },\r\n\r\n    methods: {\r\n\r\n        ...mapActions(['actfuncbuscar']),\r\n\r\n        limpaBusca() {\r\n            this.func = {value: '-', text: ''}\r\n        },\r\n\r\n        async onDecode(decodedString) {\r\n\r\n            if (decodedString.length == 36) {\r\n    \r\n                this.cameras.selected = 'off'\r\n                await this.timeout(800)\r\n                this.cameras.selected = 'auto'\r\n    \r\n                this.buscaFunc(decodedString)\r\n            }\r\n        },\r\n\r\n        onCameraChange () {\r\n\r\n            if ((!this.cameras.noFrontCamera) && (this.cameras.selected !== 'front')) {\r\n                this.cameras.selected = 'front'\r\n            } else {\r\n                if ((!this.cameras.noRearCamera) && (this.cameras.selected !== 'rear')) {\r\n                    this.cameras.selected = 'rear'\r\n                } else {\r\n                    this.cameras.selected = 'auto'\r\n                }\r\n            }\r\n           \r\n\r\n        },\r\n\r\n        onInit (promise) {\r\n            promise.then(cams => {\r\n                if (this.cameras.data.length == 0) this.cameras.data = cams.capabilities.facingMode.map(c => {return {value: c, text: c}})\r\n                this.torchActive = !cams.capabilities.torch\r\n\r\n                // console.log('cameras:', this.cameras)\r\n            })\r\n            promise.catch(error => {\r\n                const cameraMissingError = error.name === 'OverconstrainedError'\r\n                const triedRearCamera = this.cameras.selected === 'rear'\r\n                const triedFrontCamera = this.cameras.selected === 'front'\r\n\r\n                if (triedRearCamera && cameraMissingError) {\r\n                    this.cameras.noRearCamera = true\r\n                }\r\n\r\n                if (triedFrontCamera && cameraMissingError) {\r\n                    this.cameras.noFrontCamera = true\r\n                }\r\n            })\r\n        },\r\n\r\n        buscaFunc(busca) {\r\n            let params = {\r\n                pesquisa: (typeof(busca)=='object') ? busca.value : busca\r\n            }\r\n            this.$emit('evt-busca', params)\r\n        },\r\n\r\n        cameraOk(cam) {\r\n\r\n        },\r\n\r\n        async timeout (ms) {\r\n            return new Promise(resolve => {\r\n                window.setTimeout(resolve, ms)\r\n            })\r\n        }\r\n\r\n    },\r\n\r\n    watch: {\r\n        func(func) {\r\n            // console.log('func:', func)\r\n            if (this.func.value !== '-') this.buscaFunc(func)\r\n        }\r\n    }\r\n    \r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .readok {\r\n        color: lime;\r\n        width: 130px;\r\n        height: 130px;\r\n        position: relative;\r\n        margin: 0 auto;\r\n        top: 50%;\r\n        left: 50%;\r\n        transform: translate(-50%, -50%);\r\n    }\r\n    .btn-cams {\r\n        position: absolute;\r\n        z-index: 9;\r\n        right: 0;\r\n        margin-top: 2px;\r\n        margin-right: 22px;       \r\n    }\r\n    .btn-torch {\r\n        position: absolute;\r\n        z-index: 9;\r\n        right: 0;\r\n        margin-top: 2px;\r\n        margin-right: 64px;       \r\n    }\r\n</style>"]}]}