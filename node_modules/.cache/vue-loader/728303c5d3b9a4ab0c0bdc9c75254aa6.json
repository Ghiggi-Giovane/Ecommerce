{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\carregamento\\views\\guaritaobsromaneios.vue?vue&type=style&index=0&id=37db6680&scoped=true&lang=css&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\carregamento\\views\\guaritaobsromaneios.vue","mtime":1701906516440},{"path":"C:\\k1-services\\node_modules\\css-loader\\dist\\cjs.js","mtime":1670977934642},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1674603024162},{"path":"C:\\k1-services\\node_modules\\postcss-loader\\src\\index.js","mtime":1670977935130},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouY2FyZC1wcmluY2lwYWwtcm9tYW5laW9zIHsNCiAgbWF4LXdpZHRoOiAxNjAwcHg7DQogIG1hcmdpbjogYXV0bzsNCn0NCi5jYXJkLXNlZ3VuZG8tdmZvciB7DQogIG1hcmdpbi10b3A6IDIlOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrOw0KfQ0KLnRleHQtdHJhbnNwb3J0YWRvcmEtY3NzIHsNCiAgdGV4dC1hbGlnbjogcmlnaHQ7DQp9DQoudGV4dC10cmFuc3BvcnRhZG9yYS1jc3MtYm9sZCB7DQogIGZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KLnRhbWFuaG8tZm90by1qdXN0aWZpY2F0aXZhIHsNCiAgbWF4LXdpZHRoOiAyNzZweDsNCn0NCi50YW1hbmhvLWZvdG8tYXNzaW5hdHVyYSB7DQogIG1heC13aWR0aDogMjAwcHg7DQp9DQoudi1mb3ItZmlsZXNkZWZlaXRvIHsNCiAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50Ow0KfQ0KLnJpc2NvLWhyIHsNCiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7DQp9DQouY29udGFkb3Igew0KICBjb2xvcjogcmVkOw0KICBmb250LXNpemU6IDI0cHg7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgbWFyZ2luLXRvcDogNSU7DQogIG1hcmdpbi1ib3R0b206IGluaXRpYWw7DQp9DQoucm9tYW5laW8tb2JzIHsNCiAgY29sb3I6IHJlZDsNCiAgZm9udC1zaXplOiAyMXB4Ow0KICBmb250LXdlaWdodDogYm9sZDsNCn0NCi5pbWctcmVzcG9uc2l2ZSB7DQogIG1heC13aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiBhdXRvOw0KfQ0KLnJvdyB7DQogIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KfQ0KDQovKiBDb3IgcGlzY2FudGUgICovDQoNCi5oaWdobGlnaHRlZCB7DQogIGJhY2tncm91bmQtY29sb3I6IHJlZDsNCiAgYW5pbWF0aW9uOiBibGlua2luZyAxcyBpbmZpbml0ZTsNCn0NCg0KQGtleWZyYW1lcyBibGlua2luZyB7DQogIDAlLA0KICAxMDAlIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7DQogIH0NCiAgNTAlIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsNCiAgfQ0KfQ0K"},{"version":3,"sources":["guaritaobsromaneios.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"guaritaobsromaneios.vue","sourceRoot":"src/pages/carregamento/views","sourcesContent":["<template>\r\n  <b-card class=\"card-principal-romaneios\">\r\n    <b-row>\r\n      <b-col cols=\"12\" sm=\"2\">\r\n        <b-form-datepicker\r\n          id=\"input-database\"\r\n          :date-format-options=\"{\r\n            year: 'numeric',\r\n            month: '2-digit',\r\n            day: '2-digit',\r\n          }\"\r\n          locale=\"pt\"\r\n          v-model=\"form.data\"\r\n        >\r\n        </b-form-datepicker>\r\n        <h2 class=\"contador\">{{ contador }} segundos</h2>\r\n      </b-col>\r\n\r\n      <b-col cols=\"12\" sm=\"1\">\r\n        <b-button block variant=\"primary\" @click=\"guaritaRomaneiosGet()\"\r\n          >Buscar</b-button\r\n        >\r\n      </b-col>\r\n\r\n      <b-col cols=\"12\" sm=\"9\" class=\"text-transportadora-css\">\r\n        <h2 class=\"text-transportadora-css-bold\">\r\n          {{ transportadoraSelecionada }}\r\n        </h2>\r\n      </b-col>\r\n    </b-row>\r\n\r\n    <b-card no-body class=\"card-segundo-vfor\">\r\n      <b-tabs pills card vertical nav-wrapper-class=\"w-25\" active>\r\n        <b-tab\r\n          v-for=\"f in guaritaromaneios\"\r\n          :key=\"f.carga\"\r\n          @click=\"selectCarga(f)\"\r\n        >\r\n          <template #title>\r\n            <span :class=\"{ highlighted: highlightedCargas.includes(f) }\">\r\n              {{ f.carga }}\r\n              <i v-if=\"f.isNew\" class=\"bi-arrow-up-circle-fill\"></i>\r\n            </span>\r\n          </template>\r\n\r\n          <b-col cols=\"12\" sm=\"12\">\r\n            <b-form-group\r\n              label=\"Romaneios\"\r\n              label-for=\"name-input\"\r\n              invalid-feedback=\"Campo Vazio\"\r\n              style=\"font-weight: bold\"\r\n            >\r\n              <b-form-input\r\n                id=\"romaneio\"\r\n                required\r\n                class=\"input-text-style\"\r\n                disabled\r\n                v-model=\"f.romaneio\"\r\n              ></b-form-input>\r\n            </b-form-group>\r\n          </b-col>\r\n        </b-tab>\r\n\r\n        <div class=\"container\">\r\n          <div class=\"row\">\r\n            <div\r\n              v-for=\"(s, o) in guaritaromaneiosjustificativaobs\"\r\n              :key=\"o\"\r\n              class=\"col-6 col-sm-6 col-md-3 col-lg-3 mb-4\"\r\n            >\r\n              <div class=\"card\">\r\n                <img\r\n                  :src=\"s.filesdefeitos\"\r\n                  alt=\"Taken Photo\"\r\n                  v-bind=\"collage\"\r\n                  class=\"img-responsive\"\r\n                />\r\n                <div class=\"card-body\">\r\n                  <b-card-text>{{ s.justificativa }}</b-card-text>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <b-card>\r\n          <div\r\n            class=\"v-for-filesdefeito\"\r\n            v-for=\"(a, i) in guaritaromaneiosassinaturas\"\r\n            :key=\"i\"\r\n          >\r\n            <b-col cols=\"12\" sm=\"4\">\r\n              <label style=\"font-weight: bold\">Assinatura Conferente</label>\r\n              <img\r\n                :src=\"a.sigImageConf\"\r\n                alt=\"Taken Photo\"\r\n                class=\"tamanho-foto-assinatura\"\r\n              />\r\n            </b-col>\r\n            <br />\r\n            <b-col cols=\"12\" sm=\"6\">\r\n              <label style=\"font-weight: bold\">Observação</label>\r\n              <b-card-text>{{ a.ObsConf }}</b-card-text>\r\n            </b-col>\r\n            <b-col cols=\"12\" sm=\"2\">\r\n              <label style=\"font-weight: bold\">Romaneio Irregular</label>\r\n              <b-card-text class=\"romaneio-obs\">{{\r\n                a.romaneioOBS\r\n              }}</b-card-text>\r\n            </b-col>\r\n          </div>\r\n        </b-card>\r\n      </b-tabs>\r\n    </b-card>\r\n  </b-card>\r\n</template>\r\n\r\n<script>\r\nimport API from \"../../../services/api.service\";\r\n\r\nexport default {\r\n  name: \"guaritaobsromaneios\",\r\n  data() {\r\n    return {\r\n      collage: {\r\n        width: \"1200px\",\r\n        height: [\"400px\", \"400px\"],\r\n        layout: [2, 3],\r\n      },\r\n      guaritaromaneios: [],\r\n      guaritaromaneiosjustificativaobs: [],\r\n      guaritaromaneiosassinaturas: [],\r\n      highlightedCargas: [],\r\n\r\n      transportadoraSelecionada: \"\",\r\n\r\n      newRecordAdded: false,\r\n\r\n      form: {\r\n        data: \"\",\r\n      },\r\n      contador: 60,\r\n    };\r\n  },\r\n\r\n  created() {\r\n    this.getGuaritaRomaneiosToday();\r\n    this.startTimer();\r\n  },\r\n\r\n  destroyed() {\r\n    clearInterval(this.timer);\r\n  },\r\n\r\n  computed: {\r\n    params() {\r\n      return {\r\n        data: this.form.data,\r\n      };\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    isSelected(carga) {\r\n      return this.transportadoraSelecionada === carga.transportadora;\r\n    },\r\n    startTimer() {\r\n      setInterval(() => {\r\n        this.contador--;\r\n        if (this.contador <= 0) {\r\n          this.getGuaritaRomaneiosToday();\r\n          this.contador = 60;\r\n        }\r\n      }, 1000);\r\n    },\r\n    getGuaritaRomaneiosToday() {\r\n      if (this.form.data === \"\") {\r\n        const today = new Date().toISOString().slice(0, 10);\r\n        this.form.data = today;\r\n      }\r\n\r\n      this.guaritaRomaneiosGet();\r\n\r\n      this.highlightedCargas = this.highlightedCargas.filter((carga) =>\r\n        this.guaritaromaneios.some((oldCarga) => oldCarga.carga === carga.carga)\r\n      );\r\n    },\r\n\r\n    selectCarga(cargaSelecionada) {\r\n      this.transportadoraSelecionada = cargaSelecionada.transportadora;\r\n      this.guaritaRomaneiosJustificativaObsGet(cargaSelecionada.carga);\r\n      this.guaritaRomaneiosAssinaturasGet(cargaSelecionada.carga);\r\n\r\n      const index = this.highlightedCargas.indexOf(cargaSelecionada);\r\n      if (index !== -1) {\r\n        this.highlightedCargas.splice(index, 1);\r\n      }\r\n    },\r\n    guaritaRomaneiosGet() {\r\n      API.get(\"v2/Servicos/GuaritaOBSRomaneios/Get\", this.params).then(\r\n        (api) => {\r\n          if (\r\n            api.data.Success == \"True\" ||\r\n            (api.data.Success && api.data.Data)\r\n          ) {\r\n            const currentLength = this.guaritaromaneios.length;\r\n            const newCargas = api.data.Data.filter(\r\n              (newCarga) =>\r\n                !this.guaritaromaneios.some(\r\n                  (oldCarga) => oldCarga.carga === newCarga.carga\r\n                )\r\n            );\r\n\r\n            this.guaritaromaneios = api.data.Data;\r\n\r\n            this.highlightedCargas.push(...newCargas);\r\n\r\n            if (this.guaritaromaneios.length > currentLength) {\r\n              this.newRecordAdded = true;\r\n\r\n              // Start a timer to reset the highlighting after 1 minute (60 seconds)\r\n              setTimeout(() => {\r\n                this.newRecordAdded = false;\r\n                this.highlightedCargas = [];\r\n              }, 60000); // 60 seconds\r\n            }\r\n            if (this.guaritaromaneios.length > 0) {\r\n              this.transportadoraSelecionada =\r\n                this.guaritaromaneios[0].transportadora;\r\n            } else {\r\n              this.transportadoraSelecionada = \"\";\r\n            }\r\n          } else {\r\n            this.guaritaromaneios = [];\r\n            this.guaritaromaneiosassinaturas = [];\r\n            this.guaritaromaneiosjustificativaobs = [];\r\n            this.transportadoraSelecionada = \"\";\r\n          }\r\n        }\r\n      );\r\n    },\r\n    guaritaRomaneiosJustificativaObsGet(cargaSelecionada) {\r\n      const parametros = {\r\n        carga: cargaSelecionada,\r\n      };\r\n      API.get(\"v2/Servicos/GuaritaJustificativaOBS/Get\", parametros).then(\r\n        (api) => {\r\n          if (api.data.Success == \"True\" || api.data.Success) {\r\n            this.guaritaromaneiosjustificativaobs = api.data.Data;\r\n          } else {\r\n            this.guaritaromaneiosjustificativaobs = [];\r\n          }\r\n        }\r\n      );\r\n    },\r\n    guaritaRomaneiosAssinaturasGet(cargaSelecionada) {\r\n      const parametros = {\r\n        carga: cargaSelecionada,\r\n      };\r\n      API.get(\"v2/Servicos/GuaritaOBSAssinaturas/Get\", parametros).then(\r\n        (api) => {\r\n          if (api.data.Success == \"True\" || api.data.Success) {\r\n            this.guaritaromaneiosassinaturas = api.data.Data;\r\n          } else {\r\n            this.guaritaromaneiosassinaturas = [];\r\n          }\r\n        }\r\n      );\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.card-principal-romaneios {\r\n  max-width: 1600px;\r\n  margin: auto;\r\n}\r\n.card-segundo-vfor {\r\n  margin-top: 2%;\r\n  text-align: center;\r\n  border: 1px solid black;\r\n}\r\n.text-transportadora-css {\r\n  text-align: right;\r\n}\r\n.text-transportadora-css-bold {\r\n  font-weight: bold;\r\n}\r\n.tamanho-foto-justificativa {\r\n  max-width: 276px;\r\n}\r\n.tamanho-foto-assinatura {\r\n  max-width: 200px;\r\n}\r\n.v-for-filesdefeito {\r\n  display: flex !important;\r\n}\r\n.risco-hr {\r\n  border: 1px solid black;\r\n}\r\n.contador {\r\n  color: red;\r\n  font-size: 24px;\r\n  text-align: center;\r\n  margin-top: 5%;\r\n  margin-bottom: initial;\r\n}\r\n.romaneio-obs {\r\n  color: red;\r\n  font-size: 21px;\r\n  font-weight: bold;\r\n}\r\n.img-responsive {\r\n  max-width: 100%;\r\n  height: auto;\r\n}\r\n.row {\r\n  justify-content: center;\r\n}\r\n\r\n/* Cor piscante  */\r\n\r\n.highlighted {\r\n  background-color: red;\r\n  animation: blinking 1s infinite;\r\n}\r\n\r\n@keyframes blinking {\r\n  0%,\r\n  100% {\r\n    background-color: red;\r\n  }\r\n  50% {\r\n    background-color: transparent;\r\n  }\r\n}\r\n</style>\r\n"]}]}