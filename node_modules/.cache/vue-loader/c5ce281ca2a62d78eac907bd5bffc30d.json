{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\ecommerce\\views\\PedVinculado.vue?vue&type=style&index=0&id=6e340d92&scoped=true&lang=css&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\ecommerce\\views\\PedVinculado.vue","mtime":1701906516479},{"path":"C:\\k1-services\\node_modules\\css-loader\\dist\\cjs.js","mtime":1670977934642},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1674603024162},{"path":"C:\\k1-services\\node_modules\\postcss-loader\\src\\index.js","mtime":1670977935130},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouZG9jIHsNCiAgZGlzcGxheTogZmxleDsNCiAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgZmxleC13cmFwOiBub3dyYXA7DQogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCn0NCg0KLmdhbGxlcnlwYW5lbCB7DQogIG1pbi13aWR0aDogMjUwcHg7DQogIG1pbi1oZWlnaHQ6IDIyMHB4Ow0KICBtYXJnaW4tbGVmdDogMCAhaW1wb3J0YW50Ow0KfQ0KLmxvY2sgew0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIHRvcDogLTI4cHg7DQogIGZsb2F0OiByaWdodDsNCn0NCi5oYW5kIHsNCiAgY3Vyc29yOiBwb2ludGVyOw0KfQ0KLmNvdW50ZXIgew0KICAvKiBiYWNrZ3JvdW5kLWNvbG9yOiBkYXJrcmVkOyAqLw0KICAtd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIDAuNXMgZWFzZS1pbi1vdXQ7DQogIC1tcy10cmFuc2l0aW9uOiAtbXMtdHJhbnNmb3JtIDAuNXMgZWFzZS1pbi1vdXQ7DQogIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC41cyBlYXNlLWluLW91dDsNCiAgLyogY29sb3I6IHdoaXRlc21va2U7ICovDQogIHBhZGRpbmc6IDIwcHggMDsNCiAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICBvcGFjaXR5OiAwLjg1Ow0KICAvKiBib3JkZXI6IDJweCBzb2xpZCBmaXJlYnJpY2s7ICovDQp9DQo="},{"version":3,"sources":["PedVinculado.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoMA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PedVinculado.vue","sourceRoot":"src/pages/ecommerce/views","sourcesContent":["<template lang=\"\">\r\n  <div>\r\n    <b-card class=\"ml-4 mr-4 mt-4\">\r\n      <div class=\"doc\">\r\n        <b-row class=\"ml-1\">\r\n          <h3 v-if=\"novoPedidoCriado == ''\">Criar novo pedido Vinculado</h3>\r\n          <h3 v-if=\"novoPedidoCriado != ''\">\r\n            <strong> Novo pedido criado: {{ novoPedidoCriado }} </strong>\r\n          </h3>\r\n        </b-row>\r\n\r\n        <div>\r\n          <b-row style=\"align-items: baseline\">\r\n            <b-button\r\n              class=\"mr-3\"\r\n              variant=\"success\"\r\n              @click=\"criarNovoPedidoVinculado()\"\r\n              :disabled=\"canSaveNewPedido\"\r\n              >Salvar</b-button\r\n            >\r\n          </b-row>\r\n        </div>\r\n      </div>\r\n      <div class=\"doc\">\r\n        <b-row style=\"align-items: baseline\" class=\"mb-2\">\r\n          <span class=\"ml-3\"> Número do pedido original: </span>\r\n\r\n          <b-input-group class=\"ml-2\" style=\"width: 400px\">\r\n            <b-form-input\r\n              style=\"width: 200px\"\r\n              v-model=\"pedidoOriginal\"\r\n            ></b-form-input>\r\n            <b-input-group-append>\r\n              <b-button @click=\"buscarItens(pedidoOriginal)\">Buscar</b-button>\r\n            </b-input-group-append>\r\n          </b-input-group>\r\n        </b-row>\r\n      </div>\r\n      <div class=\"doc\">\r\n        <b-row style=\"align-items: baseline\" class=\"mb-2\">\r\n          <span class=\"ml-3\">Observação do Pedido: </span>\r\n\r\n          <b-input-group class=\"ml-2\" style=\"width: 400px\">\r\n            <b-form-input\r\n              style=\"width: 200px\"\r\n              v-model=\"observacao\"\r\n            ></b-form-input>\r\n          </b-input-group>\r\n\r\n          <span class=\"ml-3\">Tipo de Pedido: </span>\r\n          <b-form-select\r\n            class=\"ml-2\"\r\n            style=\"width: 400px\"\r\n            v-model=\"selectedTipoPedido\"\r\n            :options=\"tipoPedido\"\r\n          ></b-form-select>\r\n          \r\n        </b-row>\r\n      </div>\r\n\r\n      <b-table\r\n        no-footer-sorting\r\n        id=\"table-depositos-itens\"\r\n        head-variant=\"dark\"\r\n        sort-desc\r\n        selectable\r\n        striped\r\n        bordered\r\n        hovers\r\n        responsive\r\n        small\r\n        select-mode=\"single\"\r\n        :items=\"ItensPedido\"\r\n        :fields=\"newFields\"\r\n      >\r\n        <template #cell(Qtde)=\"row\">\r\n          <div>\r\n            <b-form-input\r\n              id=\"descricao-input\"\r\n              v-model=\"row.item.Qtde\"\r\n              required\r\n            ></b-form-input>\r\n          </div>\r\n        </template>\r\n        <template #cell(MotivoAssist)=\"row\">\r\n          <div>\r\n            <b-form-input\r\n              id=\"motivoAssist-input\"\r\n              v-model=\"row.item.MotivoAssist\"\r\n            ></b-form-input>\r\n          </div>\r\n        </template>\r\n      </b-table>\r\n    </b-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ApiService from \"../../../services/api.service\";\r\n\r\nexport default {\r\n  name: \"Pedidos Vinculados\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      novoPedidoCriado: \"\",\r\n\r\n      pedidoOriginal: \"\",\r\n      ItensPedido: [],\r\n      selectedTipoPedido: \"Ê\",\r\n      tipoPedido: [\r\n        { value: \"B\", text: \"BONIFICACAO\" },\r\n        { value: \"Ê\", text: \"VENDA E-COMMERCE B2C\" },\r\n        { value: \"R\", text: \"TROCA\" },\r\n        { value: \"A\", text: \"ASSISTENCIAS\" },\r\n      ],\r\n      observacao: \"\",\r\n      itensFields: [\r\n        { key: \"Item\", sortable: true, visible: true },\r\n        {\r\n          key: \"Qtde\",\r\n          sortable: true,\r\n          label: \"Quantidade\",\r\n          visible: true,\r\n        },\r\n        {\r\n          key: \"MotivoAssist\",\r\n          visible: false,\r\n        },\r\n      ],\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    canSaveNewPedido() {\r\n      if (\r\n        this.selectedTipoPedido == \"\" ||\r\n        this.ItensPedido.length == 0 ||\r\n        this.observacao == \"\"\r\n      )\r\n        return true;\r\n\r\n      return false; // pra deixar salvar\r\n      //return true; //pra bloquear\r\n    },\r\n\r\n    newFields() {\r\n      // if (this.selectedTipoPedido == \"A\") {\r\n      //   return this.itensFields;\r\n      // }\r\n      return this.itensFields.filter((f) => f.visible);\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    async buscarItens(numero) {\r\n      await ApiService.post(\"v2/IntranetEcommerceB2C/ItensPedido/Get\", {\r\n        numero,\r\n      }).then((result) => {\r\n        if (result.data.Success == true) {\r\n          this.ItensPedido = result.data.Data;\r\n        } else {\r\n          return;\r\n        }\r\n      });\r\n    },\r\n\r\n    async criarNovoPedidoVinculado() {\r\n      console.log({\r\n        pedidoOriginal: this.pedidoOriginal,\r\n        itens: this.ItensPedido,\r\n        tipoPedido: this.selectedTipoPedido,\r\n        obs: this.observacao,\r\n      });\r\n\r\n      await ApiService.post(\"v2/IntranetEcommerceB2C/PedidoVinculado/Save\", {\r\n        pedidoOriginal: this.pedidoOriginal,\r\n        itens: this.ItensPedido,\r\n        tipoPedido: this.selectedTipoPedido,\r\n        obs: this.observacao,\r\n      })\r\n        .then((res) => {\r\n          if (res.data.Success) {\r\n            this.novoPedidoCriado = res.data.Data['Numero'];\r\n            this.$root.toastsuccess(\"Salvo com Sucesso!\");\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          this.$root.toastdanger(\"Erro! \" + e);\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.doc {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap: nowrap;\r\n  justify-content: space-between;\r\n}\r\n\r\n.gallerypanel {\r\n  min-width: 250px;\r\n  min-height: 220px;\r\n  margin-left: 0 !important;\r\n}\r\n.lock {\r\n  position: relative;\r\n  top: -28px;\r\n  float: right;\r\n}\r\n.hand {\r\n  cursor: pointer;\r\n}\r\n.counter {\r\n  /* background-color: darkred; */\r\n  -webkit-transition: -webkit-transform 0.5s ease-in-out;\r\n  -ms-transition: -ms-transform 0.5s ease-in-out;\r\n  transition: background-color 0.5s ease-in-out;\r\n  /* color: whitesmoke; */\r\n  padding: 20px 0;\r\n  border-radius: 5px;\r\n  opacity: 0.85;\r\n  /* border: 2px solid firebrick; */\r\n}\r\n</style>\r\n"]}]}