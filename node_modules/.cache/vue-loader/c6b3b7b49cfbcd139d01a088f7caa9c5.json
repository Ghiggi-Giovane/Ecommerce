{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\admin\\views\\Menus.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\admin\\views\\Menus.vue","mtime":1670977910596},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAidnVleCI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJNZW51cyIsDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbWVudXM6IHsNCiAgICAgICAgc2VsZWN0ZWQ6IHt9LA0KICAgICAgICBmaWx0ZXI6ICIiLA0KICAgICAgICBmaWVsZHM6IFt7IGtleTogIm1lbnUiLCBzb3J0YWJsZTogdHJ1ZSB9LCAiYWN0aW9ucyJdLA0KICAgICAgICB0b3RhbFJvd3M6IDAsDQogICAgICAgIGRhdGE6IFtdLA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwR2V0dGVycyhbImd0eGFkbWlubWVudXMiXSksDQogICAgbWVudXNwYWkoKSB7DQogICAgICBjb25zdCBtZW51cyA9IFt7IHZhbHVlOiBudWxsLCB0ZXh0OiAiTWVudSBQYWkiIH1dOw0KICAgICAgdGhpcy5tZW51cy5kYXRhLm1hcCgobSkgPT4gew0KICAgICAgICBpZiAoIW0uaGFzT3duUHJvcGVydHkoImlkTWVudVBhaSIpKSB7DQogICAgICAgICAgbWVudXMucHVzaCh7DQogICAgICAgICAgICB2YWx1ZTogbS5pZE1lbnUsDQogICAgICAgICAgICB0ZXh0OiBtLmNhcHRpb24gKyAiIC0gIyIgKyBtLmlkTWVudSwNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICByZXR1cm4gbWVudXM7DQogICAgfSwNCiAgICBsYWJlbHN1Z2VzdGFvKCkgew0KICAgICAgcmV0dXJuICgNCiAgICAgICAgdGhpcy5tZW51cy5zZWxlY3RlZC5pZE1lbnVQYWkgKw0KICAgICAgICAiLSIgKw0KICAgICAgICB0aGlzLmdldG1lbnVuYW1lKHRoaXMubWVudXMuc2VsZWN0ZWQuY2FwdGlvbikNCiAgICAgICk7DQogICAgfSwNCiAgICBsYWJlbGlkTWVudSgpIHsNCiAgICAgIHJldHVybiB0aGlzLmxhYmVsc3VnZXN0YW8gIT09IHRoaXMubWVudXMuc2VsZWN0ZWQuaWRNZW51DQogICAgICAgID8gImlkTWVudSAtIFN1Z2VzdMOjbyAjIiArIHRoaXMubGFiZWxzdWdlc3Rhbw0KICAgICAgICA6ICJpZE1lbnUiOw0KICAgIH0sDQogIH0sDQoNCiAgYmVmb3JlTW91bnQoKSB7DQogICAgdGhpcy5hY3RBZG1pblVzdWFyaW9zTWVudXNHZXQoIngiKTsNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwQWN0aW9ucyhbImFjdEFkbWluVXN1YXJpb3NNZW51c0dldCIsICJhY3RBZG1pbk1lbnVzVXBkYXRlIl0pLA0KDQogICAgZ2V0bWVudW5hbWUobm9tZSkgew0KICAgICAgcmV0dXJuIChub21lIHx8ICIiKQ0KICAgICAgICAudG9Mb2NhbGVMb3dlckNhc2UoKQ0KICAgICAgICAucmVwbGFjZUFsbCgiICIsICJfIikNCiAgICAgICAgLm5vcm1hbGl6ZSgiTkZEIikNCiAgICAgICAgLnJlcGxhY2UoL1tcdTAzMDAtXHUwMzZmXS9nLCAiIik7DQogICAgfSwNCg0KICAgIG9uTWVudXNGaWx0ZXJlZChmaWx0ZXJlZEl0ZW1zKSB7DQogICAgICAvLyBUcmlnZ2VyIHBhZ2luYXRpb24gdG8gdXBkYXRlIHRoZSBudW1iZXIgb2YgYnV0dG9ucy9wYWdlcyBkdWUgdG8gZmlsdGVyaW5nDQogICAgICB0aGlzLm1lbnVzLnRvdGFsUm93cyA9IGZpbHRlcmVkSXRlbXMubGVuZ3RoOw0KICAgIH0sDQogICAgb25NZW51Tm92bygpIHsNCiAgICAgIHRoaXMubWVudXMuc2VsZWN0ZWQgPSB7DQogICAgICAgIGlkOiBudWxsLA0KICAgICAgICBPcmRlbTogIiIsDQogICAgICAgIGlkTWVudTogIm1lbnUtPyIsDQogICAgICAgIHRvOiAiLyIsDQogICAgICAgIGF1dGg6ICIwIiwNCiAgICAgICAgY2FwdGlvbjogIiIsDQogICAgICAgIGljb246ICIiLA0KICAgICAgICBtZW51OiAiIiwNCiAgICAgICAgY2hlY2s6ICIwIiwNCiAgICAgIH07DQogICAgICB0aGlzLiRidk1vZGFsLnNob3coIm1vZGFsLW1lbnVzIik7DQogICAgfSwNCiAgICBvbk1lbnVVcGRhdGUoKSB7DQogICAgICB0aGlzLmFjdEFkbWluTWVudXNVcGRhdGUodGhpcy5tZW51cy5zZWxlY3RlZCk7DQogICAgICB0aGlzLmFjdEFkbWluVXN1YXJpb3NNZW51c0dldCgieCIpOw0KICAgIH0sDQogICAgb25NZW51RWRpdChtZW51KSB7DQogICAgICB0aGlzLm1lbnVzLnNlbGVjdGVkID0gbWVudTsNCiAgICAgIHRoaXMuJGJ2TW9kYWwuc2hvdygibW9kYWwtbWVudXMiKTsNCiAgICB9LA0KICAgIG9uTWVudURlbGV0ZShtZW51KSB7DQogICAgICB0aGlzLiRyb290DQogICAgICAgIC5zaG93bWVzc2FnZSgiRGVzZWphIHJlYWxtZW50ZSBleGNsdWlyIGVzdGUgbWVudSA/IiwgIkludHJhbmV0IikNCiAgICAgICAgLnRoZW4oKGNob2ljZSkgPT4gew0KICAgICAgICAgIGlmIChjaG9pY2UpIGNvbnNvbGUubG9nKCJvbk1lbnVEZWxldGUiKTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgfSwNCg0KICB3YXRjaDogew0KICAgIGd0eGFkbWlubWVudXMobWVudXMpIHsNCiAgICAgIHRoaXMubWVudXMuZGF0YSA9IG1lbnVzOw0KICAgICAgdGhpcy5tZW51cy50b3RhbFJvd3MgPSBtZW51cy5sZW5ndGg7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["Menus.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoKA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Menus.vue","sourceRoot":"src/pages/admin/views","sourcesContent":["<template>\r\n  <div class=\"m-2\">\r\n    <b-card>\r\n      <b-card-title>Menus</b-card-title>\r\n      <b-card-body>\r\n        <b-row>\r\n          <b-col cols=\"12\" lg=\"9\" md=\"7\" class=\"mb-2\">\r\n            <b-input-group prepend=\"Filtro\" size=\"sm\" class=\"mb-2\">\r\n              <b-form-input\r\n                id=\"input-menu-filtro\"\r\n                type=\"search\"\r\n                v-model=\"menus.filter\"\r\n              >\r\n              </b-form-input>\r\n            </b-input-group>\r\n          </b-col>\r\n          <b-col cols=\"12\" lg=\"3\" md=\"5\" class=\"mb-2\">\r\n            <b-button class=\"float-right\" variant=\"primary\" @click=\"onMenuNovo\">\r\n              <b-icon-plus />\r\n              <span>Novo menu</span>\r\n            </b-button>\r\n          </b-col>\r\n        </b-row>\r\n        <b-table\r\n          small\r\n          striped\r\n          hover\r\n          :items=\"menus.data\"\r\n          :fields=\"menus.fields\"\r\n          :filter=\"menus.filter\"\r\n          @filtered=\"onMenusFiltered\"\r\n        >\r\n          <template #cell(menu)=\"data\" class=\"font-weight-bolder\">\r\n            <span :class=\"data.item.idMenuPai ? 'ml-2' : 'font-weight-bolder'\">\r\n              <b-icon class=\"mx-2\" :icon=\"data.item.icon\"> </b-icon>\r\n            </span>\r\n            <span\r\n              class=\"ml-2\"\r\n              :class=\"data.item.idMenuPai ? '' : 'font-weight-bolder'\"\r\n              >{{ data.item.menu }}\r\n              <b-badge class=\"ml-2\" variant=\"light\"\r\n                ><b-icon-lock v-if=\"data.item.auth == 1\"\r\n              /></b-badge>\r\n            </span>\r\n          </template>\r\n\r\n          <template #cell(actions)=\"data\">\r\n            <span class=\"iconbutton\" @click=\"onMenuEdit(data.item)\">\r\n              <b-icon-pencil variant=\"success\" />\r\n            </span>\r\n            <span class=\"iconbutton\" @click=\"onMenuDelete(data.item)\">\r\n              <b-icon-trash variant=\"danger\" />\r\n            </span>\r\n          </template>\r\n        </b-table>\r\n        <hr />\r\n        <span class=\"mr-4 font-weight-bolder\">\r\n          Total: {{ menus.totalRows }}\r\n        </span>\r\n      </b-card-body>\r\n    </b-card>\r\n\r\n    <b-modal\r\n      scrollable\r\n      id=\"modal-menus\"\r\n      title=\"Editar\"\r\n      ok-title=\"Salvar\"\r\n      ok-variant=\"success\"\r\n      cancel-title=\"Cancelar\"\r\n      @ok=\"onMenuUpdate\"\r\n    >\r\n      <b-form-group id=\"input-idMenu\" :label=\"labelidMenu\" label-for=\"idMenu\">\r\n        <b-form-input\r\n          id=\"idMenu\"\r\n          v-model=\"menus.selected.idMenu\"\r\n          type=\"text\"\r\n          placeholder=\"idMenu\"\r\n          required\r\n        ></b-form-input>\r\n      </b-form-group>\r\n      <b-form-group\r\n        id=\"input-idMenuPai\"\r\n        label=\"idMenuPai\"\r\n        label-for=\"idMenuPai\"\r\n      >\r\n        <b-form-select\r\n          id=\"idMenuPai\"\r\n          v-model=\"menus.selected.idMenuPai\"\r\n          :options=\"menuspai\"\r\n        ></b-form-select>\r\n      </b-form-group>\r\n      <b-form-group id=\"input-caption\" label=\"Caption\" label-for=\"caption\">\r\n        <b-form-input\r\n          id=\"caption\"\r\n          v-model=\"menus.selected.caption\"\r\n          type=\"text\"\r\n          placeholder=\"Caption\"\r\n          required\r\n        ></b-form-input>\r\n      </b-form-group>\r\n      <label>Ícone</label>\r\n      <b-input-group>\r\n        <b-input-group-prepend>\r\n          <b-button\r\n            variant=\"outline-secondary\"\r\n            href=\"https://bootstrap-vue.org/docs/icons#icons\"\r\n            target=\"_blank\"\r\n          >\r\n            <b-icon :icon=\"menus.selected.icon\" />\r\n          </b-button>\r\n        </b-input-group-prepend>\r\n        <b-form-input\r\n          id=\"icon\"\r\n          v-model=\"menus.selected.icon\"\r\n          type=\"text\"\r\n          placeholder=\"Ícone\"\r\n          required\r\n        ></b-form-input>\r\n      </b-input-group>\r\n      <b-form-group id=\"input-to\" label=\"Rota\" label-for=\"to\">\r\n        <b-form-input\r\n          id=\"to\"\r\n          v-model=\"menus.selected.to\"\r\n          type=\"text\"\r\n          placeholder=\"Rota\"\r\n          required\r\n        ></b-form-input>\r\n      </b-form-group>\r\n      <b-form-group id=\"input-toParam\" label=\"Parâmetros\" label-for=\"toParam\">\r\n        <b-form-input\r\n          id=\"toParam\"\r\n          v-model=\"menus.selected.toparam\"\r\n          type=\"text\"\r\n          placeholder=\"Parametros\"\r\n          required\r\n        ></b-form-input>\r\n      </b-form-group>\r\n\r\n      <b-form-group id=\"input-auth\">\r\n        <b-form-checkbox\r\n          id=\"auth\"\r\n          switch\r\n          v-model=\"menus.selected.auth\"\r\n          name=\"checkbox-1\"\r\n          value=\"1\"\r\n          unchecked-value=\"0\"\r\n        >\r\n          Necessário autenticação\r\n        </b-form-checkbox>\r\n      </b-form-group>\r\n    </b-modal>\r\n\r\n    <!--\r\n    menus.selected: {{ menus.selected }}\r\n\r\n    menuspai:\r\n    <pre>{{ menuspai }}</pre>\r\n\r\n    menus:\r\n    <pre>{{ menus }}</pre>\r\n    -->\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nexport default {\r\n  name: \"Menus\",\r\n\r\n  data() {\r\n    return {\r\n      menus: {\r\n        selected: {},\r\n        filter: \"\",\r\n        fields: [{ key: \"menu\", sortable: true }, \"actions\"],\r\n        totalRows: 0,\r\n        data: [],\r\n      },\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"gtxadminmenus\"]),\r\n    menuspai() {\r\n      const menus = [{ value: null, text: \"Menu Pai\" }];\r\n      this.menus.data.map((m) => {\r\n        if (!m.hasOwnProperty(\"idMenuPai\")) {\r\n          menus.push({\r\n            value: m.idMenu,\r\n            text: m.caption + \" - #\" + m.idMenu,\r\n          });\r\n        }\r\n      });\r\n      return menus;\r\n    },\r\n    labelsugestao() {\r\n      return (\r\n        this.menus.selected.idMenuPai +\r\n        \"-\" +\r\n        this.getmenuname(this.menus.selected.caption)\r\n      );\r\n    },\r\n    labelidMenu() {\r\n      return this.labelsugestao !== this.menus.selected.idMenu\r\n        ? \"idMenu - Sugestão #\" + this.labelsugestao\r\n        : \"idMenu\";\r\n    },\r\n  },\r\n\r\n  beforeMount() {\r\n    this.actAdminUsuariosMenusGet(\"x\");\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"actAdminUsuariosMenusGet\", \"actAdminMenusUpdate\"]),\r\n\r\n    getmenuname(nome) {\r\n      return (nome || \"\")\r\n        .toLocaleLowerCase()\r\n        .replaceAll(\" \", \"_\")\r\n        .normalize(\"NFD\")\r\n        .replace(/[\\u0300-\\u036f]/g, \"\");\r\n    },\r\n\r\n    onMenusFiltered(filteredItems) {\r\n      // Trigger pagination to update the number of buttons/pages due to filtering\r\n      this.menus.totalRows = filteredItems.length;\r\n    },\r\n    onMenuNovo() {\r\n      this.menus.selected = {\r\n        id: null,\r\n        Ordem: \"\",\r\n        idMenu: \"menu-?\",\r\n        to: \"/\",\r\n        auth: \"0\",\r\n        caption: \"\",\r\n        icon: \"\",\r\n        menu: \"\",\r\n        check: \"0\",\r\n      };\r\n      this.$bvModal.show(\"modal-menus\");\r\n    },\r\n    onMenuUpdate() {\r\n      this.actAdminMenusUpdate(this.menus.selected);\r\n      this.actAdminUsuariosMenusGet(\"x\");\r\n    },\r\n    onMenuEdit(menu) {\r\n      this.menus.selected = menu;\r\n      this.$bvModal.show(\"modal-menus\");\r\n    },\r\n    onMenuDelete(menu) {\r\n      this.$root\r\n        .showmessage(\"Deseja realmente excluir este menu ?\", \"Intranet\")\r\n        .then((choice) => {\r\n          if (choice) console.log(\"onMenuDelete\");\r\n        });\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    gtxadminmenus(menus) {\r\n      this.menus.data = menus;\r\n      this.menus.totalRows = menus.length;\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}