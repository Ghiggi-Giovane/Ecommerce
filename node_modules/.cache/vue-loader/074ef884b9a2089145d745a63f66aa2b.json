{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\nfe\\views\\nfe.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\nfe\\views\\nfe.vue","mtime":1670977910651},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7DQppbXBvcnQgQVBJIGZyb20gIi4uLy4uLy4uL3NlcnZpY2VzL2FwaS5zZXJ2aWNlIjsNCmltcG9ydCBBbG1veGFyaWZhZG9Nb3ZpbWVudGFjb2VzIGZyb20gIi4uLy4uL2FsbW94YXJpZmFkby92aWV3cy9BbG1veGFyaWZhZG9Nb3ZpbWVudGFjb2VzIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIk5mZSIsDQoNCiAgY29tcG9uZW50czogew0KICAgIEFsbW94YXJpZmFkb01vdmltZW50YWNvZXMsDQogIH0sDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaXRlbnNhbG1veDogbnVsbCwNCiAgICAgIGVtcHJlc2E6IDgsDQogICAgICBkYXRhYmFzZTogbmV3IERhdGUobmV3IERhdGUoKS5zZXREYXRlKG5ldyBEYXRlKCkuZ2V0RGF0ZSgpIC0gMikpLA0KICAgICAgbnVtZXJvOiBudWxsLA0KICAgICAgc2VyaWU6IG51bGwsDQogICAgICBjb2RpZ29fZm9ybmVjOiBudWxsLA0KICAgICAgbm9tZWZvcm5lYzogbnVsbCwNCiAgICAgIGNoYXZlYWNlc3NvOiBudWxsLA0KDQogICAgICBuZmU6IHsNCiAgICAgICAgY3VycmVudFBhZ2U6IDEsDQogICAgICAgIHBlclBhZ2U6IDIwLA0KICAgICAgICBmaWx0ZXI6ICIiLA0KICAgICAgICBmaWx0ZXJPbjogWyJudW1lcm8iLCAiRm9ybmVjZWRvciIsICJWYWxvciJdLA0KICAgICAgICBmaWVsZHM6IFsNCiAgICAgICAgICB7IGtleTogIm51bWVybyIsIGxhYmVsOiAiTm90YS9Tw6lyaWUiIH0sDQogICAgICAgICAgeyBrZXk6ICJkYXRhX2VtaXNzYW8iLCBsYWJlbDogIkVtaXNzw6NvIiB9LA0KICAgICAgICAgIHsga2V5OiAiZGF0YV9lbnRyYWRhIiwgbGFiZWw6ICJFbnRyYWRhIiB9LA0KICAgICAgICAgICJmb3JuZWNlZG9yIiwNCiAgICAgICAgICB7IGtleTogIm5pdGVucyIsIGxhYmVsOiAiUHJvZCIgfSwNCiAgICAgICAgICB7IGtleTogInF0ZGVfbm90YSIsIGxhYmVsOiAiUXRkZSIgfSwNCiAgICAgICAgICB7IGtleTogInF0ZGVfYWxtb3giLCBsYWJlbDogIkxjdG8iIH0sDQogICAgICAgICAgeyBrZXk6ICJxdGRlX3NhbGRvIiwgbGFiZWw6ICJTYWxkbyIgfSwNCiAgICAgICAgICAiYWN0aW9ucyIsDQogICAgICAgIF0sDQogICAgICAgIGRhdGE6IFtdLA0KICAgICAgICBpdGVuczogew0KICAgICAgICAgIGZpZWxkczogWw0KICAgICAgICAgICAgIml0ZW0iLA0KICAgICAgICAgICAgImRlc2NyaWNhbyIsDQogICAgICAgICAgICAidW4iLA0KICAgICAgICAgICAgeyBrZXk6ICJxdGRlX25vdGEiLCBsYWJlbDogIlF0ZGUiIH0sDQogICAgICAgICAgICB7IGtleTogInF0ZGVfYWxtb3giLCBsYWJlbDogIkxjdG8iIH0sDQogICAgICAgICAgICB7IGtleTogInNhbGRvX25vdGEiLCBsYWJlbDogIlNhbGRvIiB9LA0KICAgICAgICAgICAgImN1YmFnZW0iLA0KICAgICAgICAgICAgImFjdGlvbnMiLA0KICAgICAgICAgIF0sDQogICAgICAgIH0sDQogICAgICB9LA0KICAgIH07DQogIH0sDQoNCiAgYmVmb3JlTW91bnQoKSB7DQogICAgdGhpcy5idXNjYW5mZSgpOw0KICB9LA0KDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwR2V0dGVycyhbInN5c2Rldm1vZGUiLCAiZ3R4Q29uZmlnRGF0ZXRpbWVQaWNrZXJGb3JtYXQiXSksDQogICAgcGFyYW1zKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgZW1wcmVzYTogdGhpcy5lbXByZXNhLA0KICAgICAgICBkYXRhYmFzZTogdGhpcy5kYXRhYmFzZSwNCiAgICAgICAgbnVtZXJvOiB0aGlzLm51bWVybywNCiAgICAgICAgc2VyaWU6IHRoaXMuc2VyaWUsDQogICAgICAgIGNvZGlnb19mb3JuZWM6IHRoaXMuY29kaWdvX2Zvcm5lYywNCiAgICAgICAgbm9tZWZvcm5lYzogdGhpcy5ub21lZm9ybmVjLA0KICAgICAgICBjaGF2ZWFjZXNzbzogdGhpcy5jaGF2ZWFjZXNzbywNCiAgICAgIH07DQogICAgfSwNCiAgICB0YmxfbmZlKCkgew0KICAgICAgcmV0dXJuIHRoaXMubmZlLmRhdGEubWFwKChtKSA9PiAoew0KICAgICAgICAuLi5tLA0KICAgICAgICBuaXRlbnM6IG0uaXRlbnMubGVuZ3RoLA0KICAgICAgICBxdGRlX25vdGE6IHRoaXMuc29tYShtLml0ZW5zLCAicXRkZV9ub3RhIiksDQogICAgICAgIHF0ZGVfYWxtb3g6IHRoaXMuc29tYShtLml0ZW5zLCAicXRkZV9hbG1veCIpLA0KICAgICAgICBxdGRlX3NhbGRvOiB0aGlzLnNvbWEobS5pdGVucywgInNhbGRvX25vdGEiKSwNCiAgICAgICAgX3Jvd1ZhcmlhbnQ6IHRoaXMucm93VmFyaWFudFNhbGRvKA0KICAgICAgICAgIHRoaXMuc29tYShtLml0ZW5zLCAicXRkZV9ub3RhIiksDQogICAgICAgICAgdGhpcy5zb21hKG0uaXRlbnMsICJzYWxkb19ub3RhIikNCiAgICAgICAgKSwNCiAgICAgIH0pKTsNCiAgICB9LA0KICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICBidXNjYW5mZSgpIHsNCiAgICAgIEFQSS5nZXQoInYyL1NlcnZpY29zL05GRS9HZXQiLCB0aGlzLnBhcmFtcykudGhlbigocmVzKSA9PiB7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKCJidXNjYW5mZSIsIHJlcy5kYXRhKTsNCiAgICAgICAgaWYgKHJlcy5kYXRhLlN1Y2Nlc3MpIHsNCiAgICAgICAgICB0aGlzLm5mZS5kYXRhID0gcmVzLmRhdGEuRGF0YTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLm5mZS5kYXRhID0gW107DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgc29tYShhcnJheSwgY2FtcG8pIHsNCiAgICAgIHJldHVybiBhcnJheS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiW2NhbXBvXSwgMCk7DQogICAgfSwNCiAgICByb3dWYXJpYW50U2FsZG8ocXRkZV9ub3RhLCBzYWxkb19ub3RhKSB7DQogICAgICBpZiAoc2FsZG9fbm90YSA9PSAwKSByZXR1cm4gInN1Y2Nlc3MiOw0KICAgICAgaWYgKHNhbGRvX25vdGEgPT0gcXRkZV9ub3RhKSByZXR1cm4gImRhbmdlciI7DQogICAgICBpZiAoc2FsZG9fbm90YSA8IHF0ZGVfbm90YSkgcmV0dXJuICJ3YXJuaW5nIjsNCiAgICB9LA0KICAgIG9uU3RvY2tDbGljayhpdGVtKSB7DQogICAgICB0aGlzLml0ZW5zYWxtb3ggPSBpdGVtOw0KDQogICAgICB0aGlzLiRyZWZzWyJtb2RhbC1tYXRlcmlhaXNTdG9jayJdLnNob3coKTsNCg0KICAgICAgLy8gdGhpcy4kcmVmc1siQWxtb3hhcmlmYWRvTW92aW1lbnRhY29lcyJdLmJ1c2NhaW5kaXZpZHVhbCgpOw0KICAgIH0sDQogICAgQWxtb3hhcmlmYWRvTW92aW1lbnRhY29lc3Nob3duKCkgew0KICAgICAgLy8gY29uc29sZS5sb2coIkFsbW94YXJpZmFkb01vdmltZW50YWNvZXNzaG93biIsIHRoaXMuaXRlbnNhbG1veCk7DQogICAgICB0aGlzLiRyZWZzLkFsbW94YXJpZmFkb01vdmltZW50YWNvZXMuZW1wcmVzYSA9IDg7DQogICAgICB0aGlzLiRyZWZzLkFsbW94YXJpZmFkb01vdmltZW50YWNvZXMuZGVwb3NpdG8gPSAzNzsNCiAgICAgIHRoaXMuJHJlZnMuQWxtb3hhcmlmYWRvTW92aW1lbnRhY29lcy5ib3ggPSAwOw0KICAgICAgdGhpcy4kcmVmcy5BbG1veGFyaWZhZG9Nb3ZpbWVudGFjb2VzLm5pdmVsID0gMDsNCiAgICAgIHRoaXMuJHJlZnMuQWxtb3hhcmlmYWRvTW92aW1lbnRhY29lcy5pdGVucyA9IFt0aGlzLml0ZW5zYWxtb3guaXRlbV07DQogICAgICB0aGlzLiRyZWZzLkFsbW94YXJpZmFkb01vdmltZW50YWNvZXMuaXRlbnNyZXEgPSBbDQogICAgICAgIHsNCiAgICAgICAgICBpdGVtOiB0aGlzLml0ZW5zYWxtb3guaXRlbSwNCiAgICAgICAgICBxdGRlOiB0aGlzLml0ZW5zYWxtb3guc2FsZG9fbm90YSwNCiAgICAgICAgICBsb3RlOiB0aGlzLml0ZW5zYWxtb3guaWRuZmUsDQogICAgICAgIH0sDQogICAgICBdOw0KDQogICAgICB0aGlzLiRyZWZzLkFsbW94YXJpZmFkb01vdmltZW50YWNvZXMuYnVzY2EoKTsNCiAgICB9LA0KICAgIEFsbW94YXJpZmFkb01vdmltZW50YWNvZXNoaWRkZW4oKSB7DQogICAgICB0aGlzLmJ1c2NhbmZlKCk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["nfe.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyNA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"nfe.vue","sourceRoot":"src/pages/nfe/views","sourcesContent":["<template>\r\n  <div class=\"container card py-4 my-2\">\r\n    <div>\r\n      <b-row>\r\n        <b-col>\r\n          <label for=\"form-database\">Data de Emissão</label>\r\n          <b-form-datepicker\r\n            id=\"form-database\"\r\n            v-model=\"database\"\r\n            class=\"mb-2\"\r\n            locale=\"pt\"\r\n            size=\"sm\"\r\n            :date-format-options=\"gtxConfigDatetimePickerFormat\"\r\n          ></b-form-datepicker>\r\n        </b-col>\r\n        <b-col>\r\n          <label for=\"numero\">Número Nota</label>\r\n          <b-form-input\r\n            id=\"numero\"\r\n            type=\"number\"\r\n            v-model=\"numero\"\r\n          ></b-form-input>\r\n        </b-col>\r\n        <b-col cols=\"2\">\r\n          <label for=\"serie\">Série</label>\r\n          <b-form-input id=\"serie\" type=\"text\" v-model=\"serie\"></b-form-input>\r\n        </b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col>\r\n          <label for=\"nomefornec\">Nome Fornecedor</label>\r\n          <b-form-input\r\n            id=\"nomefornec\"\r\n            type=\"text\"\r\n            v-model=\"nomefornec\"\r\n          ></b-form-input>\r\n        </b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col>\r\n          <b-form-group label=\"Chave DANFE\" label-for=\"formid\">\r\n            <b-form-input\r\n              id=\"chaveacesso\"\r\n              type=\"number\"\r\n              v-model=\"chaveacesso\"\r\n            ></b-form-input>\r\n          </b-form-group>\r\n        </b-col>\r\n      </b-row>\r\n\r\n      <b-row>\r\n        <b-col class=\"text-right\">\r\n          <b-button variant=\"primary\" @click=\"buscanfe\">Buscar</b-button>\r\n        </b-col>\r\n      </b-row>\r\n\r\n      <b-table\r\n        small\r\n        hover\r\n        striped\r\n        responsive\r\n        headerTitle=\"Extrato do Estoque\"\r\n        class=\"mt-2\"\r\n        head-variant=\"dark\"\r\n        :items=\"tbl_nfe\"\r\n        :fields=\"nfe.fields\"\r\n      >\r\n        <template #cell(numero)=\"data\">\r\n          <span class=\"no-wrap\"\r\n            >{{ data.item.numero }}/{{ data.item.serie }}</span\r\n          >\r\n        </template>\r\n\r\n        <template #cell(fornecedor)=\"data\">\r\n          <span :title=\"data.item.fornecedor\"\r\n            >{{ data.item.fornecedor.substr(0, 15)\r\n            }}{{ data.item.fornecedor.substr(15) != \"\" ? \"...\" : \"\" }}</span\r\n          >\r\n        </template>\r\n\r\n        <template #cell(data_emissao)=\"data\">\r\n          <span>{{ data.item.data_emissao | dateBR }}</span>\r\n        </template>\r\n\r\n        <template #cell(data_entrada)=\"data\">\r\n          <span>{{ data.item.data_entrada | dateBR }}</span>\r\n        </template>\r\n\r\n        <template #cell(actions)=\"data\">\r\n          <span class=\"iconbutton\">\r\n            <b-icon-clipboard-check\r\n              @click=\"$root.copyclip(data.item.chaveacesso)\"\r\n              title=\"Copiar Chave DANFE\"\r\n            />\r\n          </span>\r\n          <span class=\"iconbutton\" @click=\"data.toggleDetails\">\r\n            <b-icon-caret-down\r\n              variant=\"primary\"\r\n              title=\"Ocultar produtos\"\r\n              v-if=\"!data.detailsShowing\"\r\n            />\r\n            <b-icon-caret-up variant=\"primary\" title=\"Ver produtos\" v-else />\r\n          </span>\r\n        </template>\r\n\r\n        <template #row-details=\"row\">\r\n          <b-card class=\"bg-light\">\r\n            <b-table\r\n              small\r\n              hover\r\n              striped\r\n              responsive\r\n              headerTitle=\"Produtos\"\r\n              class=\"mt-2\"\r\n              :items=\"row.item.itens\"\r\n              :fields=\"nfe.itens.fields\"\r\n            >\r\n              <template #cell(actions)=\"data\" class=\"text-center\">\r\n                <!--\r\n                <span\r\n                  title=\"Movimentar estoque\"\r\n                  class=\"iconbutton\"\r\n                  :disabled=\"data.item.saldo_nota == 0\"\r\n                  @click=\"onStockClick(data.item)\"\r\n                >\r\n                  <b-icon-archive variant=\"success\" />\r\n                </span>\r\n                <label :disabled=\"data.item.saldo_nota == 0\">\r\n                  <span\r\n                    title=\"Movimentar estoque\"\r\n                    class=\"iconbutton\"\r\n                    @click=\"onStockClick(data.item)\"\r\n                  >\r\n                    <b-icon-archive variant=\"success\" />\r\n                  </span>\r\n                </label>\r\n                <b-badge\r\n                  title=\"Movimentar estoque\"\r\n                  variant=\"success\"\r\n                  size=\"xl\"\r\n                  :disabled=\"data.item.saldo_nota == 0\"\r\n                  @click=\"onStockClick(data.item)\"\r\n                >\r\n                  <b-icon-archive />\r\n                </b-badge>\r\n                -->\r\n                <b-button\r\n                  title=\"Movimentar estoque\"\r\n                  size=\"sm\"\r\n                  style=\"font-size:10px;\"\r\n                  variant=\"success\"\r\n                  :disabled=\"data.item.saldo_nota == 0\"\r\n                  @click=\"onStockClick(data.item)\"\r\n                >\r\n                  <b-icon-cart-plus />\r\n                </b-button>\r\n                <b-button\r\n                  title=\"Movimentar estoque\"\r\n                  size=\"sm\"\r\n                  style=\"font-size:10px;\"\r\n                  variant=\"success\"\r\n                  :disabled=\"data.item.saldo_nota == 0\"\r\n                  @click=\"onStockClick(data.item)\"\r\n                >\r\n                  <b-icon-archive />\r\n                </b-button>\r\n              </template>\r\n            </b-table>\r\n          </b-card>\r\n        </template>\r\n      </b-table>\r\n\r\n      <!--\r\n      <json-viewer\r\n        :value=\"params\"\r\n        :expand-depth=\"5\"\r\n        v-if=\"sysdevmode\"\r\n        copyable\r\n        boxed\r\n        sort\r\n      >\r\n      </json-viewer>\r\n      <json-viewer\r\n        :value=\"nfe.data\"\r\n        :expand-depth=\"5\"\r\n        v-if=\"sysdevmode\"\r\n        copyable\r\n        boxed\r\n        sort\r\n      >\r\n      </json-viewer>\r\n      -->\r\n    </div>\r\n\r\n    <b-modal\r\n      id=\"modal-materiaisStock\"\r\n      ref=\"modal-materiaisStock\"\r\n      title=\"Movimentação de estoque\"\r\n      variant=\"dark\"\r\n      size=\"xl\"\r\n      hide-footer\r\n      centered\r\n      @shown=\"AlmoxarifadoMovimentacoesshown\"\r\n      @hidden=\"AlmoxarifadoMovimentacoeshidden\"\r\n    >\r\n      <!-- <GaiolasItensBusca :value=\"itembusca\" /> -->\r\n      <!--:value=\"itembusca\"-->\r\n      <!--@etv-gaiolasitensupdate=\"evtGaiolasItensUpdate\"/>-->\r\n      <AlmoxarifadoMovimentacoes\r\n        tipoMovimentacao=\"NFE\"\r\n        ref=\"AlmoxarifadoMovimentacoes\"\r\n      />\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport API from \"../../../services/api.service\";\r\nimport AlmoxarifadoMovimentacoes from \"../../almoxarifado/views/AlmoxarifadoMovimentacoes\";\r\nexport default {\r\n  name: \"Nfe\",\r\n\r\n  components: {\r\n    AlmoxarifadoMovimentacoes,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      itensalmox: null,\r\n      empresa: 8,\r\n      database: new Date(new Date().setDate(new Date().getDate() - 2)),\r\n      numero: null,\r\n      serie: null,\r\n      codigo_fornec: null,\r\n      nomefornec: null,\r\n      chaveacesso: null,\r\n\r\n      nfe: {\r\n        currentPage: 1,\r\n        perPage: 20,\r\n        filter: \"\",\r\n        filterOn: [\"numero\", \"Fornecedor\", \"Valor\"],\r\n        fields: [\r\n          { key: \"numero\", label: \"Nota/Série\" },\r\n          { key: \"data_emissao\", label: \"Emissão\" },\r\n          { key: \"data_entrada\", label: \"Entrada\" },\r\n          \"fornecedor\",\r\n          { key: \"nitens\", label: \"Prod\" },\r\n          { key: \"qtde_nota\", label: \"Qtde\" },\r\n          { key: \"qtde_almox\", label: \"Lcto\" },\r\n          { key: \"qtde_saldo\", label: \"Saldo\" },\r\n          \"actions\",\r\n        ],\r\n        data: [],\r\n        itens: {\r\n          fields: [\r\n            \"item\",\r\n            \"descricao\",\r\n            \"un\",\r\n            { key: \"qtde_nota\", label: \"Qtde\" },\r\n            { key: \"qtde_almox\", label: \"Lcto\" },\r\n            { key: \"saldo_nota\", label: \"Saldo\" },\r\n            \"cubagem\",\r\n            \"actions\",\r\n          ],\r\n        },\r\n      },\r\n    };\r\n  },\r\n\r\n  beforeMount() {\r\n    this.buscanfe();\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"sysdevmode\", \"gtxConfigDatetimePickerFormat\"]),\r\n    params() {\r\n      return {\r\n        empresa: this.empresa,\r\n        database: this.database,\r\n        numero: this.numero,\r\n        serie: this.serie,\r\n        codigo_fornec: this.codigo_fornec,\r\n        nomefornec: this.nomefornec,\r\n        chaveacesso: this.chaveacesso,\r\n      };\r\n    },\r\n    tbl_nfe() {\r\n      return this.nfe.data.map((m) => ({\r\n        ...m,\r\n        nitens: m.itens.length,\r\n        qtde_nota: this.soma(m.itens, \"qtde_nota\"),\r\n        qtde_almox: this.soma(m.itens, \"qtde_almox\"),\r\n        qtde_saldo: this.soma(m.itens, \"saldo_nota\"),\r\n        _rowVariant: this.rowVariantSaldo(\r\n          this.soma(m.itens, \"qtde_nota\"),\r\n          this.soma(m.itens, \"saldo_nota\")\r\n        ),\r\n      }));\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    buscanfe() {\r\n      API.get(\"v2/Servicos/NFE/Get\", this.params).then((res) => {\r\n        // console.log(\"buscanfe\", res.data);\r\n        if (res.data.Success) {\r\n          this.nfe.data = res.data.Data;\r\n        } else {\r\n          this.nfe.data = [];\r\n        }\r\n      });\r\n    },\r\n    soma(array, campo) {\r\n      return array.reduce((a, b) => a + b[campo], 0);\r\n    },\r\n    rowVariantSaldo(qtde_nota, saldo_nota) {\r\n      if (saldo_nota == 0) return \"success\";\r\n      if (saldo_nota == qtde_nota) return \"danger\";\r\n      if (saldo_nota < qtde_nota) return \"warning\";\r\n    },\r\n    onStockClick(item) {\r\n      this.itensalmox = item;\r\n\r\n      this.$refs[\"modal-materiaisStock\"].show();\r\n\r\n      // this.$refs[\"AlmoxarifadoMovimentacoes\"].buscaindividual();\r\n    },\r\n    AlmoxarifadoMovimentacoesshown() {\r\n      // console.log(\"AlmoxarifadoMovimentacoesshown\", this.itensalmox);\r\n      this.$refs.AlmoxarifadoMovimentacoes.empresa = 8;\r\n      this.$refs.AlmoxarifadoMovimentacoes.deposito = 37;\r\n      this.$refs.AlmoxarifadoMovimentacoes.box = 0;\r\n      this.$refs.AlmoxarifadoMovimentacoes.nivel = 0;\r\n      this.$refs.AlmoxarifadoMovimentacoes.itens = [this.itensalmox.item];\r\n      this.$refs.AlmoxarifadoMovimentacoes.itensreq = [\r\n        {\r\n          item: this.itensalmox.item,\r\n          qtde: this.itensalmox.saldo_nota,\r\n          lote: this.itensalmox.idnfe,\r\n        },\r\n      ];\r\n\r\n      this.$refs.AlmoxarifadoMovimentacoes.busca();\r\n    },\r\n    AlmoxarifadoMovimentacoeshidden() {\r\n      this.buscanfe();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.trunc {\r\n  max-width: 300px;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n}\r\n</style>\r\n"]}]}