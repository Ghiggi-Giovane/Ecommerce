{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\chat\\views\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\chat\\views\\index.vue","mtime":1701906516445},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1674603023821}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7DQppbXBvcnQgTWVzc2FnZXMgZnJvbSAiLi4vY29tcG9uZW50cy9NZXNzYWdlcyI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJDaGF0IiwNCg0KICBjb21wb25lbnRzOiB7DQogICAgTWVzc2FnZXMsDQogIH0sDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcm9vbTogbnVsbCwNCiAgICAgIGNoYXRsaXN0ZW46IG51bGwsDQogICAgICBtZXNzYWdlczogW10sDQoNCiAgICAgIHVzZXJsaXN0OiBbDQogICAgICAgIHsgdXNlcjogdGhpcy5ndHhBdXRoUHJvZmlsZVVzZXJOYW1lIH0sDQogICAgICAgIHsgdXNlcjogInNwcl9wcmVtaXVtIiB9LA0KICAgICAgICB7IHVzZXI6ICJzcHJfaWRlbGxpIiB9LA0KICAgICAgXSwNCiAgICAgIHRvOiAiIiwNCiAgICAgIGZyb206IHRoaXMuZ3R4QXV0aFByb2ZpbGVVc2VyTmFtZSwNCiAgICAgIG1lc3NhZ2U6ICIiLA0KICAgIH07DQogIH0sDQoNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBHZXR0ZXJzKFsNCiAgICAgICJndHhBdXRoUHJvZmlsZVVzZXJOYW1lIiwNCiAgICAgICJndHhBdXRoVXNlciIsDQogICAgICAiZ3R4dXNlcnMiLA0KICAgICAgImd0eHVzZXIiLA0KICAgICAgImd0eHVzZXJzbGlzdCIsDQogICAgICAiZ3R4Y2hhdCIsDQogICAgICAiZ3R4Y2hhdERhdGEiLA0KICAgICAgImd0eGZpcmViYXNlUmVmIiwNCiAgICAgICJndHhjaGF0UXVlcnkiLA0KICAgICAgImd0eHJvb21zRGF0YSIsDQogICAgICAiZ3R4cm9vbXNEYXRhTGlzdCIsDQogICAgICAiZ3R4Y2hhdE1lc3NhZ2VzIiwNCiAgICAgICJndHhjaGF0VXNlcnNEYXRhIiwNCiAgICBdKSwNCg0KICAgIGNoYXR0aXRsZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLnJvb20gPyB0aGlzLnJvb20udGV4dCA6ICJTZWxlY2lvbmUgbyBjaGF0IjsNCiAgICB9LA0KDQogICAgYXN5bmMgZ2V0Y2hhdHVzZXIoa2V5KSB7DQogICAgICBsZXQgcmVzID0gW107DQogICAgICBhd2FpdCB0aGlzLmd0eGZpcmViYXNlUmVmKCJjaGF0IikNCiAgICAgICAgLmdldChrZXkpDQogICAgICAgIC50aGVuKChzbmFwc2hvdCkgPT4gew0KICAgICAgICAgIHNuYXBzaG90LmZvckVhY2goKGRvYykgPT4gew0KICAgICAgICAgICAgcmVzLnB1c2goeyBpZDogZG9jLmlkLCBkYXRhOiBkb2MuZGF0YSgpIH0pOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCg0KICAgICAgcmV0dXJuIHJlczsNCiAgICB9LA0KDQogICAgY2hhdHVzZXJzKCkgew0KICAgICAgcmV0dXJuIGd0eGNoYXRVc2Vyc0RhdGEuZmlsdGVyKChmKSA9PiBmLm5vbWUuaW5jbHVkZXModGhpcy50bykpOw0KICAgIH0sDQogIH0sDQoNCiAgYmVmb3JlTW91bnQoKSB7DQogICAgdGhpcy5vbkZpcmVEYXRhKCJ1c2VycyIpOw0KICAgIHRoaXMuYWN0Q2hhdEluaXQodGhpcy5ndHhBdXRoUHJvZmlsZVVzZXJOYW1lKTsNCg0KICAgIHRoaXMuYWN0Q2hhdFVzZXJzKCk7DQogIH0sDQoNCiAgZGVzdHJveWVkKCkgew0KICAgIHRoaXMub25GaXJlRGF0YSgidXNlcnMiKTsNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwQWN0aW9ucyhbDQogICAgICAiYWN0Q2hhdEluaXQiLA0KICAgICAgImluaXREb2MiLA0KICAgICAgInJlYWREb2MiLA0KICAgICAgInF1ZXJ5RG9jIiwNCiAgICAgICJvbkZpcmVEYXRhIiwNCiAgICAgICJhY3R1c2VyYWRkIiwNCiAgICAgICJhY3RjaGF0c2VuZCIsDQogICAgICAiYWN0Y2hhdHNlbGVjdGVkIiwNCiAgICAgICJhY3RDaGF0TGlzdGVuIiwNCiAgICAgICJhY3RDaGF0VXNlcnMiLA0KICAgIF0pLA0KDQogICAgc2VsZWN0cm9vbShyb29tKSB7DQogICAgICB0aGlzLnJvb20gPSByb29tOw0KICAgIH0sDQoNCiAgICBzZWxlY3RjaGF0KHJvb20pIHsNCiAgICAgIHRoaXMuZ3R4ZmlyZWJhc2VSZWYoImNoYXQiKQ0KICAgICAgICAuZG9jKHJvb20udmFsdWUpDQogICAgICAgIC5jb2xsZWN0aW9uKCJtZXNzYWdlcyIpDQogICAgICAgIC5vcmRlckJ5KCJ0aW1lIikNCiAgICAgICAgLm9uU25hcHNob3QoKHNuYXBzaG90KSA9PiB7DQogICAgICAgICAgdGhpcy5tZXNzYWdlcyA9IFtdOw0KICAgICAgICAgIHNuYXBzaG90LmZvckVhY2goKGRvYykgPT4gew0KICAgICAgICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKGRvYy5kYXRhKCkpOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICB9LA0KDQogICAgc3RvcGxpc3RlbmNoYXQoKSB7fSwNCg0KICAgIGFkZE1lc3NhZ2UoKSB7DQogICAgICB0aGlzLmd0eGZpcmViYXNlUmVmKCJjaGF0IikNCiAgICAgICAgLmRvYyh0aGlzLnJvb20udmFsdWUpDQogICAgICAgIC5jb2xsZWN0aW9uKCJtZXNzYWdlcyIpDQogICAgICAgIC5kb2MoKQ0KICAgICAgICAuc2V0KHsNCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsDQogICAgICAgICAgc2VuZGVyOiB0aGlzLmd0eEF1dGhQcm9maWxlVXNlck5hbWUsDQogICAgICAgICAgdGltZTogbmV3IERhdGUoKSwNCiAgICAgICAgfSk7DQoNCiAgICAgIHRoaXMubWVzc2FnZSA9ICIiOw0KICAgIH0sDQogIH0sDQoNCiAgd2F0Y2g6IHsNCiAgICByb29tKCkgew0KICAgICAgdGhpcy5zZWxlY3RjaGF0KHRoaXMucm9vbSk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiLA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/chat/views","sourcesContent":["<template>\r\n  <div class=\"m-2\">\r\n    <b-sidebar id=\"sidebar-1\" title=\"Usuários\" backdrop shadow>\r\n      <div class=\"px-3 py-2\">\r\n        <b-col class=\"mb-3\">\r\n          <b-input-group>\r\n            <b-form-input\r\n              v-model=\"to\"\r\n              placeholder=\"Pesquisar usuários\"\r\n            ></b-form-input>\r\n\r\n            <b-input-group-append>\r\n              <b-button variant=\"outline-success\" @click=\"actuseradd(to)\"\r\n                ><b-icon-person-plus\r\n              /></b-button>\r\n            </b-input-group-append>\r\n          </b-input-group>\r\n        </b-col>\r\n\r\n        <b-overlay :show=\"gtxchatUsersData.length == 0\" rounded=\"sm\">\r\n          <b-list-group>\r\n            <b-list-group-item\r\n              href=\"#\"\r\n              v-for=\"(u, i) of gtxchatUsersData\"\r\n              :key=\"i\"\r\n              @click.prevent=\"selectroom(u)\"\r\n              bg-color=\"secondary\"\r\n              class=\"d-flex justify-content-between align-items-center\"\r\n            >\r\n              <div>\r\n                <b-icon-person />\r\n                <strong class=\"ml-3\">{{ u.nome }}</strong>\r\n              </div>\r\n              <b-badge v-if=\"u.usuario == 'Idélli'\" variant=\"warning\"\r\n                >1</b-badge\r\n              >\r\n            </b-list-group-item>\r\n          </b-list-group>\r\n        </b-overlay>\r\n\r\n        gtxchatUsersData:\r\n        <pre>{{ gtxchatUsersData }}</pre>\r\n\r\n        <!--\r\n            <b-overlay :show=\"gtxchatUsersData.length==0\" rounded=\"sm\">\r\n                <b-list-group>\r\n                    <b-list-group-item\r\n                        href=\"#\" \r\n                        v-for=\"(u,i) of gtxchatUsersData\" :key=\"i\" @click.prevent=\"selectroom(u)\"\r\n                        bg-color=\"secondary\">\r\n                        <div>\r\n                            <b-icon-person/>\r\n                            <strong class=\"ml-3\">{{ u.usuario }}</strong>\r\n                        </div>\r\n                        <div>\r\n                            <span class=\"d-flex float-right\" style=\"font-size: 10px\">{{ u.setor }}</span>\r\n                        </div>\r\n                        <b-badge v-if=\"u.text == 'Idélli'\" variant=\"warning\">1</b-badge>\r\n                    </b-list-group-item>\r\n                </b-list-group>\r\n            </b-overlay>\r\n            -->\r\n      </div>\r\n    </b-sidebar>\r\n\r\n    <b-card class=\"container\">\r\n      <b-card-title class=\"bg-info text-white p-2\">\r\n        <b-button v-b-toggle.sidebar-1 variant=\"light\">\r\n          <b-icon icon=\"menu-app\" />\r\n        </b-button>\r\n        {{ chattitle }}\r\n      </b-card-title>\r\n\r\n      <b-card-text class=\"overflow-auto\">\r\n        <Messages\r\n          v-for=\"(m, i) of messages\"\r\n          :key=\"i\"\r\n          :message=\"m.message\"\r\n          :incomming=\"m.sender !== gtxAuthProfileUserName\"\r\n          :time=\"m.time.seconds\"\r\n          :sender=\"m.sender\"\r\n        />\r\n      </b-card-text>\r\n\r\n      <b-card-text class=\"mt-2\">\r\n        <b-input-group>\r\n          <b-form-input v-model=\"message\"></b-form-input>\r\n          <b-input-group-append>\r\n            <b-button variant=\"primary\" disabled><b-icon-paperclip /></b-button>\r\n            <b-button\r\n              variant=\"success\"\r\n              :disabled=\"message == ''\"\r\n              @click=\"addMessage\"\r\n              ><b-icon-cursor\r\n            /></b-button>\r\n          </b-input-group-append>\r\n        </b-input-group>\r\n      </b-card-text>\r\n    </b-card>\r\n\r\n    <!--\r\n        gtxchatUsersData: {{gtxchatUsersData}}\r\n    \r\n        <div class=\"accordion\" role=\"tablist\">\r\n            <b-card no-body class=\"mb-1\">\r\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                    <b-button block v-b-toggle.accordion-1 variant=\"info\">messages</b-button>\r\n                </b-card-header>\r\n                <b-collapse id=\"accordion-1\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                    <b-card-body>\r\n                        <b-card-text><pre>{{ messages }} </pre></b-card-text>\r\n                    </b-card-body>\r\n                </b-collapse>\r\n            </b-card>\r\n\r\n            <b-card no-body class=\"mb-1\">\r\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                    <b-button block v-b-toggle.accordion-2 variant=\"info\">gtxchatbyuser</b-button>\r\n                </b-card-header>\r\n                <b-collapse id=\"accordion-2\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                    <b-card-body>\r\n                        <b-card-text><pre>{{ gtxchatbyuser(gtxAuthUser) }} </pre></b-card-text>\r\n                    </b-card-body>\r\n                </b-collapse>\r\n            </b-card>\r\n\r\n            <b-card no-body class=\"mb-1\">\r\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                    <b-button block v-b-toggle.accordion-3 variant=\"info\">gtxchatData</b-button>\r\n                </b-card-header>\r\n                <b-collapse id=\"accordion-3\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                    <b-card-body>\r\n                        <b-card-text><pre>{{ gtxchatData }} </pre></b-card-text>\r\n                    </b-card-body>\r\n                </b-collapse>\r\n            </b-card>\r\n\r\n            <b-card no-body class=\"mb-1\">\r\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                    <b-button block v-b-toggle.accordion-4 variant=\"info\">gtxroomsData</b-button>\r\n                </b-card-header>\r\n                <b-collapse id=\"accordion-4\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                    <b-card-body>\r\n                        <b-card-text><pre>{{ gtxroomsData }} </pre></b-card-text>\r\n                    </b-card-body>\r\n                </b-collapse>\r\n            </b-card>\r\n\r\n        </div>\r\n\r\n        <b-card no-body class=\"mb-1\">\r\n            <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                <b-button block v-b-toggle.accordion-5 variant=\"info\">gtxroomsDataList</b-button>\r\n            </b-card-header>\r\n            <b-collapse id=\"accordion-5\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                <b-card-body>\r\n                    <b-card-text><pre>{{ gtxroomsDataList(gtxAuthUser) }} </pre></b-card-text>\r\n                </b-card-body>\r\n            </b-collapse>\r\n        </b-card>\r\n\r\n        <b-card no-body class=\"mb-1\">\r\n            <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                <b-button block v-b-toggle.accordion-6 variant=\"info\">gtxchatMessages</b-button>\r\n            </b-card-header>\r\n            <b-collapse id=\"accordion-6\" visible accordion=\"my-accordion\" role=\"tabpanel\">\r\n                <b-card-body>\r\n                    <b-card-text><pre>{{ gtxchatMessages }}</pre></b-card-text>\r\n                </b-card-body>\r\n            </b-collapse>\r\n        </b-card>\r\n\r\n-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nimport Messages from \"../components/Messages\";\r\nexport default {\r\n  name: \"Chat\",\r\n\r\n  components: {\r\n    Messages,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      room: null,\r\n      chatlisten: null,\r\n      messages: [],\r\n\r\n      userlist: [\r\n        { user: this.gtxAuthProfileUserName },\r\n        { user: \"spr_premium\" },\r\n        { user: \"spr_idelli\" },\r\n      ],\r\n      to: \"\",\r\n      from: this.gtxAuthProfileUserName,\r\n      message: \"\",\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\r\n      \"gtxAuthProfileUserName\",\r\n      \"gtxAuthUser\",\r\n      \"gtxusers\",\r\n      \"gtxuser\",\r\n      \"gtxuserslist\",\r\n      \"gtxchat\",\r\n      \"gtxchatData\",\r\n      \"gtxfirebaseRef\",\r\n      \"gtxchatQuery\",\r\n      \"gtxroomsData\",\r\n      \"gtxroomsDataList\",\r\n      \"gtxchatMessages\",\r\n      \"gtxchatUsersData\",\r\n    ]),\r\n\r\n    chattitle() {\r\n      return this.room ? this.room.text : \"Selecione o chat\";\r\n    },\r\n\r\n    async getchatuser(key) {\r\n      let res = [];\r\n      await this.gtxfirebaseRef(\"chat\")\r\n        .get(key)\r\n        .then((snapshot) => {\r\n          snapshot.forEach((doc) => {\r\n            res.push({ id: doc.id, data: doc.data() });\r\n          });\r\n        });\r\n\r\n      return res;\r\n    },\r\n\r\n    chatusers() {\r\n      return gtxchatUsersData.filter((f) => f.nome.includes(this.to));\r\n    },\r\n  },\r\n\r\n  beforeMount() {\r\n    this.onFireData(\"users\");\r\n    this.actChatInit(this.gtxAuthProfileUserName);\r\n\r\n    this.actChatUsers();\r\n  },\r\n\r\n  destroyed() {\r\n    this.onFireData(\"users\");\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\r\n      \"actChatInit\",\r\n      \"initDoc\",\r\n      \"readDoc\",\r\n      \"queryDoc\",\r\n      \"onFireData\",\r\n      \"actuseradd\",\r\n      \"actchatsend\",\r\n      \"actchatselected\",\r\n      \"actChatListen\",\r\n      \"actChatUsers\",\r\n    ]),\r\n\r\n    selectroom(room) {\r\n      this.room = room;\r\n    },\r\n\r\n    selectchat(room) {\r\n      this.gtxfirebaseRef(\"chat\")\r\n        .doc(room.value)\r\n        .collection(\"messages\")\r\n        .orderBy(\"time\")\r\n        .onSnapshot((snapshot) => {\r\n          this.messages = [];\r\n          snapshot.forEach((doc) => {\r\n            this.messages.push(doc.data());\r\n          });\r\n        });\r\n    },\r\n\r\n    stoplistenchat() {},\r\n\r\n    addMessage() {\r\n      this.gtxfirebaseRef(\"chat\")\r\n        .doc(this.room.value)\r\n        .collection(\"messages\")\r\n        .doc()\r\n        .set({\r\n          message: this.message,\r\n          sender: this.gtxAuthProfileUserName,\r\n          time: new Date(),\r\n        });\r\n\r\n      this.message = \"\";\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    room() {\r\n      this.selectchat(this.room);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n"]}]}