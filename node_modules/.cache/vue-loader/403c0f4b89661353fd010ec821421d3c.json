{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\om\\views\\om.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\om\\views\\om.vue","mtime":1670977910653},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgU2VhcmNoQXBpIGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvU2VhcmNoQXBpJw0KaW1wb3J0IE9taXRlbnMgZnJvbSAnLi4vY29tcG9uZW50cy9PbUl0ZW5zJw0KaW1wb3J0IE9tSXRlbnNGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvT21JdGVuc0Zvcm0nDQppbXBvcnQgQnV0dG9ucyBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL0J1dHRvbnMnDQppbXBvcnQgQXBpU2VydmljZSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9hcGkuc2VydmljZScNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIA0KICAgIG5hbWU6ICJPbSIsDQoNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KDQogICAgICAgICAgICBmb3JtSXRlbnM6IHsNCiAgICAgICAgICAgICAgICBpdGVtOiAnJywgDQogICAgICAgICAgICAgICAgUXRkZTogMSwNCiAgICAgICAgICAgICAgICBJdGVtOiB7DQogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnJywNCiAgICAgICAgICAgICAgICAgICAgdGV4dDogJycNCiAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIG9tSXRlbnNGb3JtVGl0bGU6ICdOb3ZvIGl0ZW0gcGFyYSBhIE9NJywNCg0KICAgICAgICAgICAgZm9ybTogew0KICAgICAgICAgICAgICAgIGlkOiAwLA0KICAgICAgICAgICAgICAgIEltb2JpbGl6YWRvX05ybzogJycsDQogICAgICAgICAgICAgICAgY29kaWdvX2Z1bmM6IDAsDQoNCiAgICAgICAgICAgICAgICBGdW5jaW9uYXJpbzoge3ZhbHVlOiAnNTcnLCB0ZXh0OiAnTUFSQ0VMTyBIT1JMTEUnfSwNCiAgICAgICAgICAgICAgICBJbW9iaWxpemFkbzoge3ZhbHVlOiAnMTA5MzAnLCB0ZXh0OiAnU0VDQ0lPTkFET1JBIEFVVE9NQVRJQ0EgR0lCRU4gU01BUlQgU1Q5MCAtIDE2MDBNTSBOUy45MTAuMjk3J30sDQoNCiAgICAgICAgICAgICAgICBBYmVydHVyYTogbmV3IERhdGUoKSwgLypkYXRhKi8NCiAgICAgICAgICAgICAgICBGZWNoYW1lbnRvOiAnJywgLypkYXRhKi8NCiAgICAgICAgICAgICAgICBlbXByZXNhOiAwLA0KICAgICAgICAgICAgICAgIGlkVGlwbzogMCwNCiAgICAgICAgICAgICAgICBDY3VzdG86ICcnLCAvKmNoYXIgNSovDQogICAgICAgICAgICAgICAgU2V0b3I6IDAsDQogICAgICAgICAgICAgICAgT2JzZXJ2OiAnJywgLypjaGFyIG1heCovDQogICAgICAgICAgICAgICAgdXN1YXJpbzE6ICcnLCAvKmNoYXIgNTAqLw0KICAgICAgICAgICAgICAgIHVzdWFyaW86ICcnLCAvKmNoYXIgNTAqLw0KICAgICAgICAgICAgICAgIElkUHJldmVudGl2YTogMCwNCiAgICAgICAgICAgICAgICBPTUludGVybmE6IDAsDQogICAgICAgICAgICAgICAgQ29kaWdvX0Z1bmNfRmVjaGFtZW50bzogMCwNCiAgICAgICAgICAgICAgICBJdGVuczogW10sDQogICAgICAgICAgICB9LA0KDQogICAgICAgICAgICANCg0KICAgICAgICAgICAgYnV0dG9uczogWydzYXZlJywgJ2VkaXQnLCAnc2VhcmNoJ10sDQogICAgICAgIH0NCiAgICB9LA0KDQogICAgY29tcG9uZW50czogew0KDQogICAgICAgIE9taXRlbnMsDQogICAgICAgIE9tSXRlbnNGb3JtLA0KICAgICAgICBTZWFyY2hBcGksDQogICAgICAgIEJ1dHRvbnMNCg0KICAgIH0sDQoNCiAgICBtZXRob2RzOiB7DQoNCiAgICAgICAgZXZ0ZXJyb3JTZWFyY2goZXZ0KSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygnb20uZXZ0ZXJyb3JTZWFyY2g6JywgZXZ0KQ0KICAgICAgICB9LA0KDQogICAgICAgIGV2dE9tSXRlbnNOZXcoKSB7DQogICAgICAgICAgICB0aGlzLmxpbXBhRm9ybUl0ZW5zKCk7DQogICAgICAgICAgICBjb25zb2xlLmxvZygnb20uZXZ0T21JdGVuc05ldycpDQogICAgICAgICAgICB0aGlzLm9tSXRlbnNGb3JtVGl0bGUgPSAnTm92byBpdGVtIHBhcmEgYSBPTScNCiAgICAgICAgICAgIHRoaXMuJGJ2TW9kYWwuc2hvdygnbW9kYWwtb21JdGVuc0Zvcm0nKQ0KICAgICAgICB9LA0KDQogICAgICAgIE9tSXRlbnNGb3JtU2FsdmFyKCkgew0KICAgICAgICAgICAgY29uc29sZS5sb2coJ29tLk9tSXRlbnNGb3JtU2FsdmFyOicsIHRoaXMuZm9ybS5JdGVucyk7DQogICAgICAgICAgICBsZXQgaXRlbnMgPSB0aGlzLmZvcm0uSXRlbnMuZmluZChmID0+IGYuSXRlbS52YWx1ZSA9PSB0aGlzLmZvcm1JdGVucy5JdGVtLnZhbHVlKQ0KICAgICAgICAgICAgaWYgKCFpdGVucykgew0KICAgICAgICAgICAgICAgIHRoaXMuZm9ybS5JdGVucy5wdXNoKHRoaXMuZm9ybUl0ZW5zKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaXRlbnMuUXRkZSA9IHRoaXMuZm9ybUl0ZW5zLlF0ZGUNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMubGltcGFGb3JtSXRlbnMoKTsNCiAgICAgICAgfSwNCg0KICAgICAgICBldnRPbUl0ZW5zRWRpdChldnQpIHsNCiAgICAgICAgICAgIHRoaXMubGltcGFGb3JtSXRlbnMoKTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvbS5ldnRPbUl0ZW5zRWRpdCcsIGV2dCkNCiAgICAgICAgICAgIHRoaXMuZm9ybUl0ZW5zID0gZXZ0Lml0ZW0NCiAgICAgICAgICAgIHRoaXMub21JdGVuc0Zvcm1UaXRsZSA9ICdBbHRlcmEgaXRlbSBwYXJhIGEgT00nDQogICAgICAgICAgICB0aGlzLiRidk1vZGFsLnNob3coJ21vZGFsLW9tSXRlbnNGb3JtJykNCiAgICAgICAgfSwNCg0KICAgICAgICBldnRPbUl0ZW5zRGVsZXRlKGV2dCkgew0KDQogICAgICAgICAgICB0aGlzLiRyb290LnNob3dtZXNzYWdlKCdEZXNlamEgcmVhbG1lbnRlIGV4Y2x1aXIgZXN0ZSBpdGVtID8nLCAnSW50cmFuZXQnKQ0KICAgICAgICAgICAgICAgIC50aGVuKHllcyA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICh5ZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMuaXRlbnMuZmluZEluZGV4KGYgPT4gZi52YWx1ZSA9PSBldnQuaXRlbS52YWx1ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleD4tMSkgdGhpcy5pdGVucy5zcGxpY2UoaW5kZXgsIDEpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KSAgICAgICAgICAgIA0KICAgICAgICB9LA0KDQogICAgICAgIGxpbXBhRm9ybUl0ZW5zKCl7DQogICAgICAgICAgICB0aGlzLmZvcm1JdGVucyA9IHsNCiAgICAgICAgICAgICAgICBpdGVtOiAnJywgDQogICAgICAgICAgICAgICAgUXRkZTogMSwNCiAgICAgICAgICAgICAgICBJdGVtOiB7DQogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnJywNCiAgICAgICAgICAgICAgICAgICAgdGV4dDogJycNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQoNCiAgICAgICAgZXZ0Rm9ybVNhbHZhck9yZGVtKCl7DQogICAgICAgICAgICBjb25zb2xlLmxvZygnb20uZXZ0Rm9ybVNhbHZhck9yZGVtOiBTYWx2b3UgYSBvcmRlbScpDQogICAgICAgIH0sDQoNCiAgICAgICAgZXZ0Rm9ybUVkaXRPcmRlbSgpew0KICAgICAgICAgICAgY29uc29sZS5sb2coJ29tLmV2dEZvcm1TYWx2YXJPcmRlbTogRWRpdG91IGEgb3JkZW0nKQ0KICAgICAgICB9LA0KDQogICAgICAgIGV2dEZvcm1QZXNxdWlzYU9yZGVtKCl7DQogICAgICAgICAgICBjb25zb2xlLmxvZygnb20uZXZ0Rm9ybVNhbHZhck9yZGVtOiBCdXNjb3UgYSBvcmRlbScpDQogICAgICAgICAgICB0aGlzLm9tSXRlbnNGb3JtVGl0bGUgPSAnUGVzcXVpc2FyIE9NcyBhYmVydGFzJw0KICAgICAgICAgICAgdGhpcy4kYnZNb2RhbC5zaG93KCdtb2RhbC1vbUF0aXZhcycpDQoNCiAgICAgICAgfSwNCg0KICAgICAgICBzZWxlY3RPcmRlbnMoaWQpew0KICAgICAgICAgICAgY29uc29sZS5sb2coIkJ1c2NvdSBvcmRlbnMgcGVsbyBudW1lcm86ICIgKyBpZCkNCg0KICAgICAgICAgICAgQXBpU2VydmljZS5nZXQoIlNlcnZpY29zL09NL1NlbGVjdCIsIHsNCiAgICAgICAgICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICAgICAgICAgICAgaWRPTTogaWQNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLnRoZW4oaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coaXRlbS5kYXRhKQ0KICAgICAgICAgICAgICAgIHRoaXMuZm9ybSA9IGl0ZW0uZGF0YS5EYXRhWzBdOw0KICAgICAgICAgICAgfSk7ICAgICAgICAgIA0KICAgICAgICB9DQoNCiAgICB9DQogICAgDQp9DQo="},{"version":3,"sources":["om.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"om.vue","sourceRoot":"src/pages/om/views","sourcesContent":["<template>\r\n    <div>\r\n\r\n        <Buttons :buttons=\"buttons\" \r\n        @evt-tbSalvar=\"evtFormSalvarOrdem\"    \r\n        @evt-tbEditar=\"evtFormEditOrdem\"\r\n        @evt-tbPesquisar='evtFormPesquisaOrdem'   \r\n        />\r\n\r\n        <b-card class=\"m-2\">\r\n            <div align=\"center\">\r\n                <h1>Ordem de Manutenção</h1>\r\n            </div>\r\n\r\n            <b-form-group label=\"Código\" label-for=\"formid\" label-align-md=\"right\" label-cols-sm=\"3\">\r\n                <b-form-input id=\"formid\" type=\"number\" v-model=\"form.id\"></b-form-input>\r\n            </b-form-group>\r\n            \r\n            <b-form-group label=\"Abertura\" label-for=\"formAbertura\" label-align-md=\"right\" label-cols-sm=\"3\">\r\n                <b-form-datepicker id=\"formAbertura\" type=\"data\" v-model=\"form.Abertura\" locale=\"pt\" value-as-date></b-form-datepicker>\r\n            </b-form-group>\r\n            \r\n            <b-form-group label=\"Equipamento\" label-for=\"formEquip\" label-align-md=\"right\" label-cols-sm=\"3\">\r\n                <SearchApi pkid=\"formImob\" route=\"Servicos/Imobilizado/Select\" title=\"Equipamento\" v-model=\"form.Imobilizado\" @evt-erro=\"evterrorSearch\"/>\r\n            </b-form-group>\r\n\r\n            <b-form-group label=\"Funcionário Responsável\" label-for=\"formMecan\" label-align-md=\"right\" label-cols-sm=\"3\">\r\n                <SearchApi pkid=\"formMecan\" route=\"Servicos/Funcionarios/Select\" title=\"Funcionário Responsável\" v-model=\"form.Funcionario\" @evt-erro=\"evterrorSearch\"/>\r\n            </b-form-group>\r\n\r\n        \r\n            <hr/>\r\n\r\n            <Omitens :itemsList=\"form.Itens\"\r\n                @evt-OmItensNew=\"evtOmItensNew\"\r\n                @evt-OmItensDelete=\"evtOmItensDelete\"\r\n                @evt-OmItensEdit=\"evtOmItensEdit\"/>\r\n\r\n            <b-modal \r\n                id=\"modal-omItensForm\"\r\n                no-close-on-backdrop\r\n                :title=\"omItensFormTitle\"\r\n                @ok=\"OmItensFormSalvar\"\r\n                >\r\n                <OmItensForm v-model=\"formItens\" \r\n                @evt-SalvarOmItens=\"OmItensFormSalvar\" />\r\n            </b-modal>\r\n\r\n            <b-modal \r\n                id=\"modal-omAtivas\"\r\n                no-close-on-backdrop\r\n                :title=\"omItensFormTitle\"\r\n                @ok=\"selectOrdens(form.id)\"\r\n                >\r\n                <b-form-group label=\"Código\" label-for=\"formid\" label-align-md=\"right\" label-cols-sm=\"3\">\r\n                    <b-form-input id=\"formid\" type=\"number\" v-model=\"form.id\"></b-form-input>\r\n                </b-form-group>\r\n                <!-- <SearchApi pkid=\"formImob\" route=\"Servicos/Imobilizado/Select\" title=\"Equipamento\" v-model=\"form.SearchImobilizado\" @evt-erro=\"evterrorSearch\"/> -->\r\n            </b-modal>\r\n        </b-card>\r\n\r\n        <pre>\r\n            form:\r\n            {{form}}\r\n        </pre>\r\n         \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport SearchApi from '../../../components/SearchApi'\r\nimport Omitens from '../components/OmItens'\r\nimport OmItensForm from '../components/OmItensForm'\r\nimport Buttons from '../../../components/Buttons'\r\nimport ApiService from '../../../services/api.service'\r\n\r\nexport default {\r\n    \r\n    name: \"Om\",\r\n\r\n    data() {\r\n        return {\r\n\r\n            formItens: {\r\n                item: '', \r\n                Qtde: 1,\r\n                Item: {\r\n                    value: '',\r\n                    text: ''\r\n                      },\r\n            },\r\n            omItensFormTitle: 'Novo item para a OM',\r\n\r\n            form: {\r\n                id: 0,\r\n                Imobilizado_Nro: '',\r\n                codigo_func: 0,\r\n\r\n                Funcionario: {value: '57', text: 'MARCELO HORLLE'},\r\n                Imobilizado: {value: '10930', text: 'SECCIONADORA AUTOMATICA GIBEN SMART ST90 - 1600MM NS.910.297'},\r\n\r\n                Abertura: new Date(), /*data*/\r\n                Fechamento: '', /*data*/\r\n                empresa: 0,\r\n                idTipo: 0,\r\n                Ccusto: '', /*char 5*/\r\n                Setor: 0,\r\n                Observ: '', /*char max*/\r\n                usuario1: '', /*char 50*/\r\n                usuario: '', /*char 50*/\r\n                IdPreventiva: 0,\r\n                OMInterna: 0,\r\n                Codigo_Func_Fechamento: 0,\r\n                Itens: [],\r\n            },\r\n\r\n            \r\n\r\n            buttons: ['save', 'edit', 'search'],\r\n        }\r\n    },\r\n\r\n    components: {\r\n\r\n        Omitens,\r\n        OmItensForm,\r\n        SearchApi,\r\n        Buttons\r\n\r\n    },\r\n\r\n    methods: {\r\n\r\n        evterrorSearch(evt) {\r\n            console.log('om.evterrorSearch:', evt)\r\n        },\r\n\r\n        evtOmItensNew() {\r\n            this.limpaFormItens();\r\n            console.log('om.evtOmItensNew')\r\n            this.omItensFormTitle = 'Novo item para a OM'\r\n            this.$bvModal.show('modal-omItensForm')\r\n        },\r\n\r\n        OmItensFormSalvar() {\r\n            console.log('om.OmItensFormSalvar:', this.form.Itens);\r\n            let itens = this.form.Itens.find(f => f.Item.value == this.formItens.Item.value)\r\n            if (!itens) {\r\n                this.form.Itens.push(this.formItens);\r\n            } else {\r\n                itens.Qtde = this.formItens.Qtde\r\n            }\r\n            this.limpaFormItens();\r\n        },\r\n\r\n        evtOmItensEdit(evt) {\r\n            this.limpaFormItens();\r\n            console.log('om.evtOmItensEdit', evt)\r\n            this.formItens = evt.item\r\n            this.omItensFormTitle = 'Altera item para a OM'\r\n            this.$bvModal.show('modal-omItensForm')\r\n        },\r\n\r\n        evtOmItensDelete(evt) {\r\n\r\n            this.$root.showmessage('Deseja realmente excluir este item ?', 'Intranet')\r\n                .then(yes => {\r\n                    if (yes) {\r\n                        let index = this.itens.findIndex(f => f.value == evt.item.value)\r\n                        if (index>-1) this.itens.splice(index, 1)\r\n                    }\r\n                })            \r\n        },\r\n\r\n        limpaFormItens(){\r\n            this.formItens = {\r\n                item: '', \r\n                Qtde: 1,\r\n                Item: {\r\n                    value: '',\r\n                    text: ''\r\n                }\r\n            }\r\n        },\r\n\r\n        evtFormSalvarOrdem(){\r\n            console.log('om.evtFormSalvarOrdem: Salvou a ordem')\r\n        },\r\n\r\n        evtFormEditOrdem(){\r\n            console.log('om.evtFormSalvarOrdem: Editou a ordem')\r\n        },\r\n\r\n        evtFormPesquisaOrdem(){\r\n            console.log('om.evtFormSalvarOrdem: Buscou a ordem')\r\n            this.omItensFormTitle = 'Pesquisar OMs abertas'\r\n            this.$bvModal.show('modal-omAtivas')\r\n\r\n        },\r\n\r\n        selectOrdens(id){\r\n            console.log(\"Buscou ordens pelo numero: \" + id)\r\n\r\n            ApiService.get(\"Servicos/OM/Select\", {\r\n                params: {\r\n                    idOM: id\r\n                }\r\n            })\r\n            .then(item => {\r\n                console.log(item.data)\r\n                this.form = item.data.Data[0];\r\n            });          \r\n        }\r\n\r\n    }\r\n    \r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n\r\n</style>"]}]}