{"remainingRequest":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\k1-services\\src\\pages\\profiler\\components\\Profiler.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\k1-services\\src\\pages\\profiler\\components\\Profiler.vue","mtime":1670977910661},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\babel-loader\\lib\\index.js","mtime":1670977935138},{"path":"C:\\k1-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670977934221},{"path":"C:\\k1-services\\node_modules\\vue-loader\\lib\\index.js","mtime":1670977935327}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAidnVleCI7DQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiUHJvZmlsZSIsDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZWRpdDogZmFsc2UsDQogICAgICBtdWRhc2VuaGE6IGZhbHNlLA0KICAgICAgcHJvZmlsZToge30sDQogICAgICBwYXNzd29yZHM6IHsNCiAgICAgICAgc2VuaGE6ICcnLA0KICAgICAgICBub3Zhc2VuaGE6ICcnLA0KICAgICAgICBzZW5oYWNvbmY6ICcnDQogICAgICB9LA0KICAgICAgc2VsZWN0ZWRQaWM6IG51bGwsDQogICAgfTsNCiAgfSwNCg0KICBiZWZvcmVNb3VudCgpIHsNCiAgICB0aGlzLnNldHByb2ZpbGUoKTsNCiAgfSwNCg0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEdldHRlcnMoWyJndHhBdXRoUHJvZmlsZSIsICJndHhBdXRoUHJvZmlsZURhdGEiXSksDQogICAgdmVtYWlsKCkgew0KICAgICAgcmV0dXJuIC9eXHcrKFtcLi1dP1x3KykqQFx3KyhbXC4tXT9cdyspKihcLlx3ezIsM30pKyQvLnRlc3QoDQogICAgICAgIHRoaXMucHJvZmlsZS5lbWFpbA0KICAgICAgKTsNCiAgICB9LA0KICAgIHZwYXNzd29yZCgpIHsNCiAgICAgIGxldCBhY2NlcHQgPSBudWxsOw0KICAgICAgaWYgKCh0aGlzLnBhc3N3b3Jkcy5ub3Zhc2VuaGEgIT09ICcnKSB8fCAodGhpcy5wYXNzd29yZHMuc2VuaGFjb25mICE9PSAnJykpIHsNCiAgICAgICAgYWNjZXB0ID0gdGhpcy5wYXNzd29yZHMubm92YXNlbmhhID09IHRoaXMucGFzc3dvcmRzLnNlbmhhY29uZg0KICAgICAgfQ0KICAgICAgcmV0dXJuIGFjY2VwdDsNCiAgICB9DQogIH0sDQoNCiAgbWV0aG9kczogew0KICAgIC4uLm1hcEFjdGlvbnMoWyJhY3RBdXRoUHJvZmlsZVVwZGF0ZSIsICJhY3RNdWRhU2VuaGEiXSksDQogICAgb25GaWxlU2VsZWN0KGV2ZW50KSB7DQogICAgICBjb25zb2xlLmxvZygib25GaWxlU2VsZWN0OiIsIGV2ZW50KTsNCiAgICAgIHRoaXMuc2VsZWN0ZWRQaWMgPSBldmVudC50YXJnZXQuZmlsZXNbMF07DQogICAgICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YSgpOw0KICAgICAgZmQuYXBwZW5kKCJpbWFnZSIsIHRoaXMuc2VsZWN0ZWRQaWMsIHRoaXMuc2VsZWN0ZWRQaWMubmFtZSk7DQogICAgICBheGlvcy5wb3N0KCIiLCBmZCwgew0KICAgICAgICBvblVwbG9hZFByb2dyZXNzOiAodXBsb2FkRXZlbnQpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZygNCiAgICAgICAgICAgICJ1cGxvYWQ6IiwNCiAgICAgICAgICAgIE1hdGgucm91bmQoKHVwbG9hZEV2ZW50LmxvYWRlZCAvIHVwbG9hZEV2ZW50LnRvdGFsKSAqIDEwMCkgKyAiJSINCiAgICAgICAgICApOw0KICAgICAgICB9LA0KICAgICAgfSk7DQogICAgfSwNCiAgICBzZXRwcm9maWxlKCkgew0KICAgICAgY29uc3QgcHJvZmlsZSA9IEpTT04uc3RyaW5naWZ5KHRoaXMuZ3R4QXV0aFByb2ZpbGVEYXRhWzBdKTsNCiAgICAgIHRoaXMucHJvZmlsZSA9IEpTT04ucGFyc2UocHJvZmlsZSk7DQogICAgfSwNCiAgICBzYWx2YXIoKSB7DQogICAgICB0aGlzLmFjdEF1dGhQcm9maWxlVXBkYXRlKHRoaXMucHJvZmlsZSk7DQogICAgICB0aGlzLmVkaXQgPSBmYWxzZTsNCiAgICAgIHRoaXMuc2V0cHJvZmlsZSgpOw0KICAgIH0sDQogICAgYWx0ZXJhc2VuaGEoKSB7DQogICAgICB0aGlzLmFjdE11ZGFTZW5oYSh0aGlzLnBhc3N3b3JkcykudGhlbigocmVzKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKCdhbHRlcmFzZW5oYS5yZXM6JywgcmVzKTsNCiAgICAgICAgaWYgKHJlcy5TdWNjZXNzID09ICJUcnVlIikgew0KICAgICAgICAgIHRoaXMuZWRpdCA9IGZhbHNlOw0KICAgICAgICAgIHRoaXMubXVkYXNlbmhhID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBjYW5jZWxhcigpIHsNCiAgICAgIHRoaXMuZWRpdCA9IGZhbHNlOw0KICAgICAgdGhpcy5tdWRhc2VuaGEgPSBmYWxzZTsNCiAgICAgIHRoaXMuc2V0cHJvZmlsZSgpOw0KICAgICAgdGhpcy5jbGVhcnBhc3N3b3JkKCk7DQogICAgfSwNCiAgICBjbGVhcnBhc3N3b3JkKCkgew0KICAgICAgdGhpcy5wYXNzd29yZHMuc2VuaGEgPSAiIjsNCiAgICAgIHRoaXMucGFzc3dvcmRzLm5vdmFzZW5oYSA9ICIiOw0KICAgICAgdGhpcy5wYXNzd29yZHMuc2VuaGFjb25mID0gIiI7DQogICAgfQ0KICB9LA0KfTsNCg=="},{"version":3,"sources":["Profiler.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Profiler.vue","sourceRoot":"src/pages/profiler/components","sourcesContent":["<template>\r\n  <div>\r\n    <div v-if=\"!edit && !mudasenha\">\r\n      <div class=\"d-flex flex-column text-center\">\r\n        <div>\r\n          <b-avatar :src=\"profile.facePic\" size=\"6rem\"></b-avatar>\r\n        </div>\r\n        <h3 class=\"mb-1\">{{ profile.displayName }}</h3>\r\n        <span class=\"mb-1\">\r\n          (<i>{{ profile.UserName }}</i\r\n          >)\r\n        </span>\r\n        <div>\r\n          <small>{{ profile.email }}</small>\r\n        </div>\r\n        <div>\r\n          <hr />\r\n          <b-button variant=\"primary\" class=\"mx-1 my-1\" @click=\"edit = !edit\">\r\n            <b-icon-pencil />\r\n            Editar\r\n          </b-button>\r\n          <b-button variant=\"warning\" class=\"mx-1 my-1\" @click=\"mudasenha = !mudasenha\">\r\n            <b-icon-key />\r\n            Alterar Senha\r\n          </b-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"mb-2\" v-if=\"edit && !mudasenha\">\r\n      <div class=\"text-center\">\r\n        <input\r\n          v-show=\"false\"\r\n          accept=\"image/*\"\r\n          type=\"file\"\r\n          @change=\"onFileSelect\"\r\n          ref=\"filepic\"\r\n        ></input>\r\n        <b-avatar\r\n          size=\"150px\"\r\n          button\r\n          :src=\"profile.facePic\"\r\n          @click=\"$refs.filepic.click()\"\r\n        ></b-avatar>\r\n      </div>\r\n      <b-form-group id=\"input-displayName\" label=\"Nome\" label-for=\"displayName\">\r\n        <b-form-input\r\n          id=\"displayName\"\r\n          v-model=\"profile.displayName\"\r\n          type=\"text\"\r\n          placeholder=\"Nome\"\r\n          :state=\"profile.displayName !== ''\"\r\n          required\r\n        ></b-form-input>\r\n      </b-form-group>\r\n      <b-form-group id=\"input-email\" label=\"e-Mail\" label-for=\"email\">\r\n        <b-form-input\r\n          id=\"email\"\r\n          v-model=\"profile.email\"\r\n          type=\"email\"\r\n          placeholder=\"e-mail\"\r\n          :state=\"vemail\"\r\n          required\r\n        ></b-form-input>\r\n      </b-form-group>\r\n      <hr />\r\n      <div class=\"d-flex justify-content-center\">\r\n        <b-button variant=\"danger\" size=\"sm\" class=\"mr-2\" @click=\"cancelar\">\r\n          <b-icon-x-circle />\r\n          Cancelar</b-button\r\n        >\r\n        <b-button variant=\"success\" size=\"sm\" class=\"mr-2\" @click=\"salvar\">\r\n          <b-icon-check-circle />\r\n          Salvar</b-button\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"mudasenha\">\r\n      <!-- tem que ter um form quando houver passwords se não o chrome reclama -->\r\n      <b-form>\r\n        <!-- tem que ter um username hidden se não o chrome reclama -->\r\n        <input\r\n          hidden\r\n          id=\"username\"\r\n          type=\"text\"\r\n          name=\"username\"\r\n          autocomplete=\"username\"\r\n        ></input>\r\n\r\n        <b-form-group id=\"input-senha\" label=\"Senha Atual\" label-for=\"senha\">\r\n          <b-form-input\r\n            id=\"senha\"\r\n            type=\"password\"\r\n            v-model=\"passwords.senha\"\r\n            autocomplete=\"current-password\"\r\n            required\r\n          ></b-form-input>\r\n        </b-form-group>\r\n        <b-form-group id=\"input-novasenha\" label=\"Nova Senha\" label-for=\"novasenha\">\r\n          <b-form-input\r\n            id=\"novasenha\"\r\n            type=\"password\"\r\n            v-model=\"passwords.novasenha\"\r\n            autocomplete=\"new-password\"\r\n            required\r\n          ></b-form-input>\r\n        </b-form-group>\r\n        <b-form-group id=\"input-senhaconf\" label=\"Confirma Nova Senha\" label-for=\"senhaconf\">\r\n          <b-form-input\r\n            id=\"senhaconf\"\r\n            type=\"password\"\r\n            v-model=\"passwords.senhaconf\"\r\n            autocomplete=\"new-password\"\r\n            :state=\"vpassword\"\r\n            required\r\n          ></b-form-input>\r\n        </b-form-group>\r\n      </b-form>\r\n      <hr />\r\n      <div class=\"d-flex justify-content-center\">\r\n        <b-button variant=\"danger\" size=\"sm\" class=\"mr-2\" @click=\"cancelar\">\r\n          <b-icon-x-circle />\r\n          Cancelar</b-button\r\n        >\r\n        <b-button variant=\"success\" size=\"sm\" class=\"mr-2\" @click=\"alterasenha\">\r\n          <b-icon-check-circle />\r\n          Salvar</b-button\r\n        >\r\n      </div>\r\n    </div>\r\n    <!--\r\n    profile:\r\n    <pre>{{ profile }}</pre>\r\n    gtxAuthProfileData:\r\n    <pre>{{ gtxAuthProfileData }}</pre>\r\n    gtxAuthProfile:\r\n    <pre>{{ gtxAuthProfile }}</pre>\r\n-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"Profile\",\r\n\r\n  data() {\r\n    return {\r\n      edit: false,\r\n      mudasenha: false,\r\n      profile: {},\r\n      passwords: {\r\n        senha: '',\r\n        novasenha: '',\r\n        senhaconf: ''\r\n      },\r\n      selectedPic: null,\r\n    };\r\n  },\r\n\r\n  beforeMount() {\r\n    this.setprofile();\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\"gtxAuthProfile\", \"gtxAuthProfileData\"]),\r\n    vemail() {\r\n      return /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(\r\n        this.profile.email\r\n      );\r\n    },\r\n    vpassword() {\r\n      let accept = null;\r\n      if ((this.passwords.novasenha !== '') || (this.passwords.senhaconf !== '')) {\r\n        accept = this.passwords.novasenha == this.passwords.senhaconf\r\n      }\r\n      return accept;\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"actAuthProfileUpdate\", \"actMudaSenha\"]),\r\n    onFileSelect(event) {\r\n      console.log(\"onFileSelect:\", event);\r\n      this.selectedPic = event.target.files[0];\r\n      const fd = new FormData();\r\n      fd.append(\"image\", this.selectedPic, this.selectedPic.name);\r\n      axios.post(\"\", fd, {\r\n        onUploadProgress: (uploadEvent) => {\r\n          console.log(\r\n            \"upload:\",\r\n            Math.round((uploadEvent.loaded / uploadEvent.total) * 100) + \"%\"\r\n          );\r\n        },\r\n      });\r\n    },\r\n    setprofile() {\r\n      const profile = JSON.stringify(this.gtxAuthProfileData[0]);\r\n      this.profile = JSON.parse(profile);\r\n    },\r\n    salvar() {\r\n      this.actAuthProfileUpdate(this.profile);\r\n      this.edit = false;\r\n      this.setprofile();\r\n    },\r\n    alterasenha() {\r\n      this.actMudaSenha(this.passwords).then((res) => {\r\n        console.log('alterasenha.res:', res);\r\n        if (res.Success == \"True\") {\r\n          this.edit = false;\r\n          this.mudasenha = false;\r\n        }\r\n      })\r\n    },\r\n    cancelar() {\r\n      this.edit = false;\r\n      this.mudasenha = false;\r\n      this.setprofile();\r\n      this.clearpassword();\r\n    },\r\n    clearpassword() {\r\n      this.passwords.senha = \"\";\r\n      this.passwords.novasenha = \"\";\r\n      this.passwords.senhaconf = \"\";\r\n    }\r\n  },\r\n};\r\n</script>\r\n"]}]}